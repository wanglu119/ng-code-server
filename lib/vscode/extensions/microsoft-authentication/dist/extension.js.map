{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/pipeline.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/debug.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/log.js","webpack://microsoft-authentication/./node_modules/@azure/logger/dist-esm/src/index.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/log.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/@azure/core-util/dist-esm/src/object.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/sanitizer.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/logPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/redirectPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/constants.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/userAgent.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/userAgentPlatform.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/userAgentPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/decompressResponsePolicy.js","webpack://microsoft-authentication/./node_modules/@azure/abort-controller/dist-esm/src/AbortSignal.js","webpack://microsoft-authentication/./node_modules/@azure/abort-controller/dist-esm/src/AbortController.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/helpers.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/retryStrategies/throttlingRetryStrategy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/retryStrategies/exponentialRetryStrategy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/@azure/core-util/dist-esm/src/random.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/retryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/defaultRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/formDataPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/@azure/core-util/dist-esm/src/isNode.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/proxyPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/setClientRequestIdPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/tlsPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/tracingContext.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/instrumenter.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/@azure/core-util/dist-esm/src/error.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/inspect.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/restError.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/tracingPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-tracing/dist-esm/src/tracingClient.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/createPipelineFromOptions.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/httpHeaders.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/nodeHttpClient.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/defaultHttpClient.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/rng.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/regex.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/stringify.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/validate.js","webpack://microsoft-authentication/./node_modules/uuid/dist/esm-node/v4.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/pipelineRequest.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/uuid.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/exponentialRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/systemErrorRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/throttlingRetryPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/util/tokenCycler.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/bearerTokenAuthenticationPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/dist-esm/src/policies/ndJsonPolicy.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/form-data/lib/form_data.js","webpack://microsoft-authentication/./node_modules/@azure/core-rest-pipeline/node_modules/form-data/lib/populate.js","webpack://microsoft-authentication/./node_modules/@azure/ms-rest-azure-env/es/lib/azureEnvironment.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/TsLibShims.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/LoggingEnums.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/Enums.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/ChannelController.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/TelemetryInitializerPlugin.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/BaseCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/NotificationManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/AppInsightsCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/AppInsightsCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/BaseCore.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ESPromise.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ESPromiseScheduler.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/ValueSanitizer.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Interfaces/IChannelControls.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/dist-esm/src/Utils.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/EnumHelperFuncs.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK.Enums/EventsDiscardedReason.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/BaseTelemetryPlugin.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/CookieMgr.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/CoreUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DataCacheHelper.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DbgExtensionUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/DiagnosticLogger.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/EnvUtils.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/EventHelpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/HelperFuncs.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/PerfManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/ProcessTelemetryContext.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/RandomHelper.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/TelemetryHelpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/UnloadHandlerContainer.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/JavaScriptSDK/W3cTraceParent.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/dist-esm/__DynamicConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-core-js/node_modules/@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/Constants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-core-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/Helpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/Constants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/Helpers.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/node_modules/@microsoft/applicationinsights-shims/dist-esm/TsLibShims.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/node_modules/@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/DataModels.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/InternalConstants.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/EventBatch.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/ClockSkewManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/KillSwitch.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/RetryPolicy.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/Serializer.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/HttpManager.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/TimeoutOverrideWrapper.js","webpack://microsoft-authentication/./node_modules/@microsoft/1ds-post-js/dist-esm/src/PostChannel.js","webpack://microsoft-authentication/./node_modules/@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/context/NoopContextManager.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/context.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/ComponentLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/diag.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/internal/logLevelLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/internal/baggage-impl.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/internal/symbol.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/context-api.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/context/context.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag-api.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/types.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/metrics/NoopMeter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/metrics/Metric.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/diag/consoleLogger.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/tracestate-validators.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/tracestate-impl.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/internal/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/metrics/NoopMeterProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/metrics.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/metrics-api.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/index.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/platform/node/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/version.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/internal/semver.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/internal/global-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/propagation/NoopTextMapPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/baggage/context-helpers.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/propagation.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/propagation-api.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/propagation/TextMapPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/api/trace.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace-api.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NonRecordingSpan.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NoopTracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/ProxyTracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/ProxyTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/NoopTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/SamplingResult.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/context-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/invalid-span-constants.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/span_kind.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/spancontext-utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/status.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/api/build/esm/trace/trace_flags.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/ExportResult.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/constants.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/propagation/W3CBaggagePropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/baggage/utils.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/attributes.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/global-error-handler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/logging-error-handler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/time.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/common/anchored-clock.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/hex-to-base64.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/RandomIdGenerator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/rpc-metadata.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/timeout.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/AlwaysOffSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/AlwaysOnSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/ParentBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/sampler/TraceIdRatioBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/url.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/wrap.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/index.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/internal/exporter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/environment.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/performance.js","webpack://microsoft-authentication/external node-commonjs \"perf_hooks\"","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/sdk-info.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/node/timer-util.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/propagation/composite.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/internal/validators.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/TraceState.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/W3CTraceContextPropagator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/trace/suppress-tracing.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/promise.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/callback.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/platform/browser/globalThis.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/environment.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/lodash.merge.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/merge.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/utils/sampling.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/core/build/esm/version.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Sampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Span.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/enums.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOffSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/AlwaysOnSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/ParentBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/sampler/TraceIdRatioBasedSampler.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/config.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/platform/node/RandomIdGenerator.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/Tracer.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/platform/node/export/BatchSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/BasicTracerProvider.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/utility.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/Resource.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/resources/build/esm/platform/node/default-service-name.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/MultiSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/NoopSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/BatchSpanProcessorBase.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/ConsoleSpanExporter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/InMemorySpanExporter.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/sdk-trace-base/build/esm/export/SimpleSpanProcessor.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/semantic-conventions/build/esm/resource/SemanticResourceAttributes.js","webpack://microsoft-authentication/./node_modules/@opentelemetry/semantic-conventions/build/esm/trace/SemanticAttributes.js","webpack://microsoft-authentication/./node_modules/@tootallnate/once/dist/index.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/1dsClientFactory.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/baseTelemetryReporter.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/baseTelemetrySender.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/common/util.js","webpack://microsoft-authentication/./node_modules/@vscode/extension-telemetry/dist/node/node/telemetryReporter.js","webpack://microsoft-authentication/./node_modules/agent-base/dist/src/index.js","webpack://microsoft-authentication/./node_modules/agent-base/dist/src/promisify.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/AsyncHooksScopeManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/AzureFunctionsHook.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HeartBeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/NetworkStatsbeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/PreAggregatedMetrics.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/Statsbeat.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/WebSnippet.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/Azure/EventHub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/SpanParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/azure-coretracing.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Constants.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/DependencyDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/DocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/EnvelopeQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/EventDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/ExceptionDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/MessageDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/MetricQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/RequestDocumentQuickPulse.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/QuickPulseTypes/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/AvailabilityTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/DependencyTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/EnvelopeTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/EventTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/ExceptionTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/MetricTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/NodeHttpDependencyTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/NodeHttpRequestTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/PageViewTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/RequestTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/Telemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TraceTelemetry.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Metrics/AggregatedMetricCounters.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Declarations/Metrics/AggregatedMetricDimensions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/AuthorizationHandler.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/AzureVirtualMachine.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Channel.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Config.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/ConnectionStringParser.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Context.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/FileAccessControl.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/FileSystemHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Functions.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/InternalAzureLogger.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/JsonConfig.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Logging.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/NodeClient.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/PrefixHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseSender.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseStateManager.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/QuickPulseUtil.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Sender.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/SnippetInjectionHelper.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Traceparent.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Tracestate.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/Library/Util.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/AzureRoleEnvironmentTelemetryInitializer.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/PreAggregatedMetricsTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack://microsoft-authentication/./node_modules/applicationinsights/out/applicationinsights.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/async-hook.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/index.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/next-tick.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/promise.js","webpack://microsoft-authentication/./node_modules/async-hook-jl/patches/timers.js","webpack://microsoft-authentication/./node_modules/async-listener/es6-wrapped-promise.js","webpack://microsoft-authentication/./node_modules/async-listener/glue.js","webpack://microsoft-authentication/./node_modules/async-listener/index.js","webpack://microsoft-authentication/./node_modules/asynckit/index.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/abort.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/async.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/defer.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/iterate.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/state.js","webpack://microsoft-authentication/./node_modules/asynckit/lib/terminator.js","webpack://microsoft-authentication/./node_modules/asynckit/parallel.js","webpack://microsoft-authentication/./node_modules/asynckit/serial.js","webpack://microsoft-authentication/./node_modules/asynckit/serialOrdered.js","webpack://microsoft-authentication/./node_modules/cls-hooked/context-legacy.js","webpack://microsoft-authentication/./node_modules/cls-hooked/context.js","webpack://microsoft-authentication/./node_modules/cls-hooked/index.js","webpack://microsoft-authentication/./node_modules/combined-stream/lib/combined_stream.js","webpack://microsoft-authentication/./node_modules/continuation-local-storage/context.js","webpack://microsoft-authentication/./node_modules/debug/src/browser.js","webpack://microsoft-authentication/./node_modules/debug/src/common.js","webpack://microsoft-authentication/./node_modules/debug/src/index.js","webpack://microsoft-authentication/./node_modules/debug/src/node.js","webpack://microsoft-authentication/./node_modules/delayed-stream/lib/delayed_stream.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/ sync ^.*\\/lib\\/Connection$","webpack://microsoft-authentication/./node_modules/diagnostic-channel-publishers/dist/src/ sync ^.*\\/lib\\/Pool$","webpack://microsoft-authentication/./node_modules/diagnostic-channel/dist/src/channel.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/classes/comparator.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/classes/range.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/classes/semver.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/clean.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/cmp.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/coerce.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/compare-build.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/compare-loose.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/compare.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/diff.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/eq.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/gt.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/gte.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/inc.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/lt.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/lte.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/major.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/minor.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/neq.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/parse.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/patch.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/prerelease.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/rcompare.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/rsort.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/satisfies.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/sort.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/functions/valid.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/index.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/internal/constants.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/internal/debug.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/internal/identifiers.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/internal/parse-options.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/internal/re.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/gtr.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/intersects.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/ltr.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/max-satisfying.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/min-satisfying.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/min-version.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/outside.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/simplify.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/subset.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/to-comparators.js","webpack://microsoft-authentication/./node_modules/diagnostic-channel/node_modules/semver/ranges/valid.js","webpack://microsoft-authentication/./node_modules/emitter-listener/listener.js","webpack://microsoft-authentication/./node_modules/http-proxy-agent/dist/agent.js","webpack://microsoft-authentication/./node_modules/http-proxy-agent/dist/index.js","webpack://microsoft-authentication/./node_modules/https-proxy-agent/dist/agent.js","webpack://microsoft-authentication/./node_modules/https-proxy-agent/dist/index.js","webpack://microsoft-authentication/./node_modules/https-proxy-agent/dist/parse-proxy-response.js","webpack://microsoft-authentication/./node_modules/lru-cache/index.js","webpack://microsoft-authentication/./node_modules/mime-db/index.js","webpack://microsoft-authentication/./node_modules/mime-types/index.js","webpack://microsoft-authentication/./node_modules/ms/index.js","webpack://microsoft-authentication/./node_modules/semver/semver.js","webpack://microsoft-authentication/./node_modules/shimmer/index.js","webpack://microsoft-authentication/./node_modules/stack-chain/format.js","webpack://microsoft-authentication/./node_modules/stack-chain/index.js","webpack://microsoft-authentication/./node_modules/stack-chain/stack-chain.js","webpack://microsoft-authentication/./node_modules/tr46/index.js","webpack://microsoft-authentication/./node_modules/webidl-conversions/lib/index.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/URL-impl.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/URL.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/public-api.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/url-state-machine.js","webpack://microsoft-authentication/./node_modules/whatwg-url/lib/utils.js","webpack://microsoft-authentication/./node_modules/yallist/iterator.js","webpack://microsoft-authentication/./node_modules/yallist/yallist.js","webpack://microsoft-authentication/../../node_modules/has-flag/index.js","webpack://microsoft-authentication/../../node_modules/supports-color/index.js","webpack://microsoft-authentication/./src/AADHelper.ts","webpack://microsoft-authentication/./src/UriEventHandler.ts","webpack://microsoft-authentication/./src/betterSecretStorage.ts","webpack://microsoft-authentication/./src/common/async.ts","webpack://microsoft-authentication/./src/common/uri.ts","webpack://microsoft-authentication/./src/cryptoUtils.ts","webpack://microsoft-authentication/./src/logger.ts","webpack://microsoft-authentication/./src/node/authServer.ts","webpack://microsoft-authentication/./src/node/buffer.ts","webpack://microsoft-authentication/./src/node/crypto.ts","webpack://microsoft-authentication/./src/node/fetch.ts","webpack://microsoft-authentication/external commonjs \"@azure/opentelemetry-instrumentation-azure-sdk\"","webpack://microsoft-authentication/external commonjs \"@opentelemetry/instrumentation\"","webpack://microsoft-authentication/external commonjs \"applicationinsights-native-metrics\"","webpack://microsoft-authentication/external commonjs \"azure/functions-core\"","webpack://microsoft-authentication/external commonjs \"vscode\"","webpack://microsoft-authentication/external node-commonjs \"assert\"","webpack://microsoft-authentication/external node-commonjs \"async_hooks\"","webpack://microsoft-authentication/external node-commonjs \"child_process\"","webpack://microsoft-authentication/external node-commonjs \"console\"","webpack://microsoft-authentication/external node-commonjs \"constants\"","webpack://microsoft-authentication/external node-commonjs \"crypto\"","webpack://microsoft-authentication/external node-commonjs \"dns\"","webpack://microsoft-authentication/external node-commonjs \"events\"","webpack://microsoft-authentication/external node-commonjs \"fs\"","webpack://microsoft-authentication/external node-commonjs \"http\"","webpack://microsoft-authentication/external node-commonjs \"https\"","webpack://microsoft-authentication/external node-commonjs \"module\"","webpack://microsoft-authentication/external node-commonjs \"net\"","webpack://microsoft-authentication/external node-commonjs \"os\"","webpack://microsoft-authentication/external node-commonjs \"path\"","webpack://microsoft-authentication/external node-commonjs \"punycode\"","webpack://microsoft-authentication/external node-commonjs \"stream\"","webpack://microsoft-authentication/external node-commonjs \"timers\"","webpack://microsoft-authentication/external node-commonjs \"tls\"","webpack://microsoft-authentication/external node-commonjs \"tty\"","webpack://microsoft-authentication/external node-commonjs \"url\"","webpack://microsoft-authentication/external node-commonjs \"util\"","webpack://microsoft-authentication/external node-commonjs \"zlib\"","webpack://microsoft-authentication/./node_modules/node-fetch/lib/index.mjs","webpack://microsoft-authentication/webpack/bootstrap","webpack://microsoft-authentication/webpack/runtime/compat get default export","webpack://microsoft-authentication/webpack/runtime/define property getters","webpack://microsoft-authentication/webpack/runtime/hasOwnProperty shorthand","webpack://microsoft-authentication/webpack/runtime/make namespace object","webpack://microsoft-authentication/./src/extension.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nconst ValidPhaseNames = new Set([\"Deserialize\", \"Serialize\", \"Retry\", \"Sign\"]);\n/**\n * A private implementation of Pipeline.\n * Do not export this class from the package.\n * @internal\n */\nclass HttpPipeline {\n    constructor(policies) {\n        var _a;\n        this._policies = [];\n        this._policies = (_a = policies === null || policies === void 0 ? void 0 : policies.slice(0)) !== null && _a !== void 0 ? _a : [];\n        this._orderedPolicies = undefined;\n    }\n    addPolicy(policy, options = {}) {\n        if (options.phase && options.afterPhase) {\n            throw new Error(\"Policies inside a phase cannot specify afterPhase.\");\n        }\n        if (options.phase && !ValidPhaseNames.has(options.phase)) {\n            throw new Error(`Invalid phase name: ${options.phase}`);\n        }\n        if (options.afterPhase && !ValidPhaseNames.has(options.afterPhase)) {\n            throw new Error(`Invalid afterPhase name: ${options.afterPhase}`);\n        }\n        this._policies.push({\n            policy,\n            options,\n        });\n        this._orderedPolicies = undefined;\n    }\n    removePolicy(options) {\n        const removedPolicies = [];\n        this._policies = this._policies.filter((policyDescriptor) => {\n            if ((options.name && policyDescriptor.policy.name === options.name) ||\n                (options.phase && policyDescriptor.options.phase === options.phase)) {\n                removedPolicies.push(policyDescriptor.policy);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n        this._orderedPolicies = undefined;\n        return removedPolicies;\n    }\n    sendRequest(httpClient, request) {\n        const policies = this.getOrderedPolicies();\n        const pipeline = policies.reduceRight((next, policy) => {\n            return (req) => {\n                return policy.sendRequest(req, next);\n            };\n        }, (req) => httpClient.sendRequest(req));\n        return pipeline(request);\n    }\n    getOrderedPolicies() {\n        if (!this._orderedPolicies) {\n            this._orderedPolicies = this.orderPolicies();\n        }\n        return this._orderedPolicies;\n    }\n    clone() {\n        return new HttpPipeline(this._policies);\n    }\n    static create() {\n        return new HttpPipeline();\n    }\n    orderPolicies() {\n        /**\n         * The goal of this method is to reliably order pipeline policies\n         * based on their declared requirements when they were added.\n         *\n         * Order is first determined by phase:\n         *\n         * 1. Serialize Phase\n         * 2. Policies not in a phase\n         * 3. Deserialize Phase\n         * 4. Retry Phase\n         * 5. Sign Phase\n         *\n         * Within each phase, policies are executed in the order\n         * they were added unless they were specified to execute\n         * before/after other policies or after a particular phase.\n         *\n         * To determine the final order, we will walk the policy list\n         * in phase order multiple times until all dependencies are\n         * satisfied.\n         *\n         * `afterPolicies` are the set of policies that must be\n         * executed before a given policy. This requirement is\n         * considered satisfied when each of the listed policies\n         * have been scheduled.\n         *\n         * `beforePolicies` are the set of policies that must be\n         * executed after a given policy. Since this dependency\n         * can be expressed by converting it into a equivalent\n         * `afterPolicies` declarations, they are normalized\n         * into that form for simplicity.\n         *\n         * An `afterPhase` dependency is considered satisfied when all\n         * policies in that phase have scheduled.\n         *\n         */\n        const result = [];\n        // Track all policies we know about.\n        const policyMap = new Map();\n        function createPhase(name) {\n            return {\n                name,\n                policies: new Set(),\n                hasRun: false,\n                hasAfterPolicies: false,\n            };\n        }\n        // Track policies for each phase.\n        const serializePhase = createPhase(\"Serialize\");\n        const noPhase = createPhase(\"None\");\n        const deserializePhase = createPhase(\"Deserialize\");\n        const retryPhase = createPhase(\"Retry\");\n        const signPhase = createPhase(\"Sign\");\n        // a list of phases in order\n        const orderedPhases = [serializePhase, noPhase, deserializePhase, retryPhase, signPhase];\n        // Small helper function to map phase name to each Phase\n        function getPhase(phase) {\n            if (phase === \"Retry\") {\n                return retryPhase;\n            }\n            else if (phase === \"Serialize\") {\n                return serializePhase;\n            }\n            else if (phase === \"Deserialize\") {\n                return deserializePhase;\n            }\n            else if (phase === \"Sign\") {\n                return signPhase;\n            }\n            else {\n                return noPhase;\n            }\n        }\n        // First walk each policy and create a node to track metadata.\n        for (const descriptor of this._policies) {\n            const policy = descriptor.policy;\n            const options = descriptor.options;\n            const policyName = policy.name;\n            if (policyMap.has(policyName)) {\n                throw new Error(\"Duplicate policy names not allowed in pipeline\");\n            }\n            const node = {\n                policy,\n                dependsOn: new Set(),\n                dependants: new Set(),\n            };\n            if (options.afterPhase) {\n                node.afterPhase = getPhase(options.afterPhase);\n                node.afterPhase.hasAfterPolicies = true;\n            }\n            policyMap.set(policyName, node);\n            const phase = getPhase(options.phase);\n            phase.policies.add(node);\n        }\n        // Now that each policy has a node, connect dependency references.\n        for (const descriptor of this._policies) {\n            const { policy, options } = descriptor;\n            const policyName = policy.name;\n            const node = policyMap.get(policyName);\n            if (!node) {\n                throw new Error(`Missing node for policy ${policyName}`);\n            }\n            if (options.afterPolicies) {\n                for (const afterPolicyName of options.afterPolicies) {\n                    const afterNode = policyMap.get(afterPolicyName);\n                    if (afterNode) {\n                        // Linking in both directions helps later\n                        // when we want to notify dependants.\n                        node.dependsOn.add(afterNode);\n                        afterNode.dependants.add(node);\n                    }\n                }\n            }\n            if (options.beforePolicies) {\n                for (const beforePolicyName of options.beforePolicies) {\n                    const beforeNode = policyMap.get(beforePolicyName);\n                    if (beforeNode) {\n                        // To execute before another node, make it\n                        // depend on the current node.\n                        beforeNode.dependsOn.add(node);\n                        node.dependants.add(beforeNode);\n                    }\n                }\n            }\n        }\n        function walkPhase(phase) {\n            phase.hasRun = true;\n            // Sets iterate in insertion order\n            for (const node of phase.policies) {\n                if (node.afterPhase && (!node.afterPhase.hasRun || node.afterPhase.policies.size)) {\n                    // If this node is waiting on a phase to complete,\n                    // we need to skip it for now.\n                    // Even if the phase is empty, we should wait for it\n                    // to be walked to avoid re-ordering policies.\n                    continue;\n                }\n                if (node.dependsOn.size === 0) {\n                    // If there's nothing else we're waiting for, we can\n                    // add this policy to the result list.\n                    result.push(node.policy);\n                    // Notify anything that depends on this policy that\n                    // the policy has been scheduled.\n                    for (const dependant of node.dependants) {\n                        dependant.dependsOn.delete(node);\n                    }\n                    policyMap.delete(node.policy.name);\n                    phase.policies.delete(node);\n                }\n            }\n        }\n        function walkPhases() {\n            for (const phase of orderedPhases) {\n                walkPhase(phase);\n                // if the phase isn't complete\n                if (phase.policies.size > 0 && phase !== noPhase) {\n                    if (!noPhase.hasRun) {\n                        // Try running noPhase to see if that unblocks this phase next tick.\n                        // This can happen if a phase that happens before noPhase\n                        // is waiting on a noPhase policy to complete.\n                        walkPhase(noPhase);\n                    }\n                    // Don't proceed to the next phase until this phase finishes.\n                    return;\n                }\n                if (phase.hasAfterPolicies) {\n                    // Run any policies unblocked by this phase\n                    walkPhase(noPhase);\n                }\n            }\n        }\n        // Iterate until we've put every node in the result list.\n        let iteration = 0;\n        while (policyMap.size > 0) {\n            iteration++;\n            const initialResultLength = result.length;\n            // Keep walking each phase in order until we can order every node.\n            walkPhases();\n            // The result list *should* get at least one larger each time\n            // after the first full pass.\n            // Otherwise, we're going to loop forever.\n            if (result.length <= initialResultLength && iteration > 1) {\n                throw new Error(\"Cannot satisfy policy dependencies due to requirements cycle.\");\n            }\n        }\n        return result;\n    }\n}\n/**\n * Creates a totally empty pipeline.\n * Useful for testing or creating a custom one.\n */\nexport function createEmptyPipeline() {\n    return HttpPipeline.create();\n}\n//# sourceMappingURL=pipeline.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { log } from \"./log\";\nconst debugEnvVariable = (typeof process !== \"undefined\" && process.env && process.env.DEBUG) || undefined;\nlet enabledString;\nlet enabledNamespaces = [];\nlet skippedNamespaces = [];\nconst debuggers = [];\nif (debugEnvVariable) {\n    enable(debugEnvVariable);\n}\nconst debugObj = Object.assign((namespace) => {\n    return createDebugger(namespace);\n}, {\n    enable,\n    enabled,\n    disable,\n    log\n});\nfunction enable(namespaces) {\n    enabledString = namespaces;\n    enabledNamespaces = [];\n    skippedNamespaces = [];\n    const wildcard = /\\*/g;\n    const namespaceList = namespaces.split(\",\").map((ns) => ns.trim().replace(wildcard, \".*?\"));\n    for (const ns of namespaceList) {\n        if (ns.startsWith(\"-\")) {\n            skippedNamespaces.push(new RegExp(`^${ns.substr(1)}$`));\n        }\n        else {\n            enabledNamespaces.push(new RegExp(`^${ns}$`));\n        }\n    }\n    for (const instance of debuggers) {\n        instance.enabled = enabled(instance.namespace);\n    }\n}\nfunction enabled(namespace) {\n    if (namespace.endsWith(\"*\")) {\n        return true;\n    }\n    for (const skipped of skippedNamespaces) {\n        if (skipped.test(namespace)) {\n            return false;\n        }\n    }\n    for (const enabledNamespace of enabledNamespaces) {\n        if (enabledNamespace.test(namespace)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction disable() {\n    const result = enabledString || \"\";\n    enable(\"\");\n    return result;\n}\nfunction createDebugger(namespace) {\n    const newDebugger = Object.assign(debug, {\n        enabled: enabled(namespace),\n        destroy,\n        log: debugObj.log,\n        namespace,\n        extend\n    });\n    function debug(...args) {\n        if (!newDebugger.enabled) {\n            return;\n        }\n        if (args.length > 0) {\n            args[0] = `${namespace} ${args[0]}`;\n        }\n        newDebugger.log(...args);\n    }\n    debuggers.push(newDebugger);\n    return newDebugger;\n}\nfunction destroy() {\n    const index = debuggers.indexOf(this);\n    if (index >= 0) {\n        debuggers.splice(index, 1);\n        return true;\n    }\n    return false;\n}\nfunction extend(namespace) {\n    const newDebugger = createDebugger(`${this.namespace}:${namespace}`);\n    newDebugger.log = this.log;\n    return newDebugger;\n}\nexport default debugObj;\n//# sourceMappingURL=debug.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport util from \"util\";\nimport { EOL } from \"os\";\nexport function log(message, ...args) {\n    process.stderr.write(`${util.format(message, ...args)}${EOL}`);\n}\n//# sourceMappingURL=log.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport debug from \"./debug\";\nconst registeredLoggers = new Set();\nconst logLevelFromEnv = (typeof process !== \"undefined\" && process.env && process.env.AZURE_LOG_LEVEL) || undefined;\nlet azureLogLevel;\n/**\n * The AzureLogger provides a mechanism for overriding where logs are output to.\n * By default, logs are sent to stderr.\n * Override the `log` method to redirect logs to another location.\n */\nexport const AzureLogger = debug(\"azure\");\nAzureLogger.log = (...args) => {\n    debug.log(...args);\n};\nconst AZURE_LOG_LEVELS = [\"verbose\", \"info\", \"warning\", \"error\"];\nif (logLevelFromEnv) {\n    // avoid calling setLogLevel because we don't want a mis-set environment variable to crash\n    if (isAzureLogLevel(logLevelFromEnv)) {\n        setLogLevel(logLevelFromEnv);\n    }\n    else {\n        console.error(`AZURE_LOG_LEVEL set to unknown log level '${logLevelFromEnv}'; logging is not enabled. Acceptable values: ${AZURE_LOG_LEVELS.join(\", \")}.`);\n    }\n}\n/**\n * Immediately enables logging at the specified log level.\n * @param level - The log level to enable for logging.\n * Options from most verbose to least verbose are:\n * - verbose\n * - info\n * - warning\n * - error\n */\nexport function setLogLevel(level) {\n    if (level && !isAzureLogLevel(level)) {\n        throw new Error(`Unknown log level '${level}'. Acceptable values: ${AZURE_LOG_LEVELS.join(\",\")}`);\n    }\n    azureLogLevel = level;\n    const enabledNamespaces = [];\n    for (const logger of registeredLoggers) {\n        if (shouldEnable(logger)) {\n            enabledNamespaces.push(logger.namespace);\n        }\n    }\n    debug.enable(enabledNamespaces.join(\",\"));\n}\n/**\n * Retrieves the currently specified log level.\n */\nexport function getLogLevel() {\n    return azureLogLevel;\n}\nconst levelMap = {\n    verbose: 400,\n    info: 300,\n    warning: 200,\n    error: 100\n};\n/**\n * Creates a logger for use by the Azure SDKs that inherits from `AzureLogger`.\n * @param namespace - The name of the SDK package.\n * @hidden\n */\nexport function createClientLogger(namespace) {\n    const clientRootLogger = AzureLogger.extend(namespace);\n    patchLogMethod(AzureLogger, clientRootLogger);\n    return {\n        error: createLogger(clientRootLogger, \"error\"),\n        warning: createLogger(clientRootLogger, \"warning\"),\n        info: createLogger(clientRootLogger, \"info\"),\n        verbose: createLogger(clientRootLogger, \"verbose\")\n    };\n}\nfunction patchLogMethod(parent, child) {\n    child.log = (...args) => {\n        parent.log(...args);\n    };\n}\nfunction createLogger(parent, level) {\n    const logger = Object.assign(parent.extend(level), {\n        level\n    });\n    patchLogMethod(parent, logger);\n    if (shouldEnable(logger)) {\n        const enabledNamespaces = debug.disable();\n        debug.enable(enabledNamespaces + \",\" + logger.namespace);\n    }\n    registeredLoggers.add(logger);\n    return logger;\n}\nfunction shouldEnable(logger) {\n    if (azureLogLevel && levelMap[logger.level] <= levelMap[azureLogLevel]) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction isAzureLogLevel(logLevel) {\n    return AZURE_LOG_LEVELS.includes(logLevel);\n}\n//# sourceMappingURL=index.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createClientLogger } from \"@azure/logger\";\nexport const logger = createClientLogger(\"core-rest-pipeline\");\n//# sourceMappingURL=log.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Helper to determine when an input is a generic JS object.\n * @returns true when input is an object type that is not null, Array, RegExp, or Date.\n */\nexport function isObject(input) {\n    return (typeof input === \"object\" &&\n        input !== null &&\n        !Array.isArray(input) &&\n        !(input instanceof RegExp) &&\n        !(input instanceof Date));\n}\n//# sourceMappingURL=object.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { isObject } from \"@azure/core-util\";\nconst RedactedString = \"REDACTED\";\n// Make sure this list is up-to-date with the one under core/logger/Readme#Keyconcepts\nconst defaultAllowedHeaderNames = [\n    \"x-ms-client-request-id\",\n    \"x-ms-return-client-request-id\",\n    \"x-ms-useragent\",\n    \"x-ms-correlation-request-id\",\n    \"x-ms-request-id\",\n    \"client-request-id\",\n    \"ms-cv\",\n    \"return-client-request-id\",\n    \"traceparent\",\n    \"Access-Control-Allow-Credentials\",\n    \"Access-Control-Allow-Headers\",\n    \"Access-Control-Allow-Methods\",\n    \"Access-Control-Allow-Origin\",\n    \"Access-Control-Expose-Headers\",\n    \"Access-Control-Max-Age\",\n    \"Access-Control-Request-Headers\",\n    \"Access-Control-Request-Method\",\n    \"Origin\",\n    \"Accept\",\n    \"Accept-Encoding\",\n    \"Cache-Control\",\n    \"Connection\",\n    \"Content-Length\",\n    \"Content-Type\",\n    \"Date\",\n    \"ETag\",\n    \"Expires\",\n    \"If-Match\",\n    \"If-Modified-Since\",\n    \"If-None-Match\",\n    \"If-Unmodified-Since\",\n    \"Last-Modified\",\n    \"Pragma\",\n    \"Request-Id\",\n    \"Retry-After\",\n    \"Server\",\n    \"Transfer-Encoding\",\n    \"User-Agent\",\n    \"WWW-Authenticate\",\n];\nconst defaultAllowedQueryParameters = [\"api-version\"];\n/**\n * @internal\n */\nexport class Sanitizer {\n    constructor({ additionalAllowedHeaderNames: allowedHeaderNames = [], additionalAllowedQueryParameters: allowedQueryParameters = [], } = {}) {\n        allowedHeaderNames = defaultAllowedHeaderNames.concat(allowedHeaderNames);\n        allowedQueryParameters = defaultAllowedQueryParameters.concat(allowedQueryParameters);\n        this.allowedHeaderNames = new Set(allowedHeaderNames.map((n) => n.toLowerCase()));\n        this.allowedQueryParameters = new Set(allowedQueryParameters.map((p) => p.toLowerCase()));\n    }\n    sanitize(obj) {\n        const seen = new Set();\n        return JSON.stringify(obj, (key, value) => {\n            // Ensure Errors include their interesting non-enumerable members\n            if (value instanceof Error) {\n                return Object.assign(Object.assign({}, value), { name: value.name, message: value.message });\n            }\n            if (key === \"headers\") {\n                return this.sanitizeHeaders(value);\n            }\n            else if (key === \"url\") {\n                return this.sanitizeUrl(value);\n            }\n            else if (key === \"query\") {\n                return this.sanitizeQuery(value);\n            }\n            else if (key === \"body\") {\n                // Don't log the request body\n                return undefined;\n            }\n            else if (key === \"response\") {\n                // Don't log response again\n                return undefined;\n            }\n            else if (key === \"operationSpec\") {\n                // When using sendOperationRequest, the request carries a massive\n                // field with the autorest spec. No need to log it.\n                return undefined;\n            }\n            else if (Array.isArray(value) || isObject(value)) {\n                if (seen.has(value)) {\n                    return \"[Circular]\";\n                }\n                seen.add(value);\n            }\n            return value;\n        }, 2);\n    }\n    sanitizeHeaders(obj) {\n        const sanitized = {};\n        for (const key of Object.keys(obj)) {\n            if (this.allowedHeaderNames.has(key.toLowerCase())) {\n                sanitized[key] = obj[key];\n            }\n            else {\n                sanitized[key] = RedactedString;\n            }\n        }\n        return sanitized;\n    }\n    sanitizeQuery(value) {\n        if (typeof value !== \"object\" || value === null) {\n            return value;\n        }\n        const sanitized = {};\n        for (const k of Object.keys(value)) {\n            if (this.allowedQueryParameters.has(k.toLowerCase())) {\n                sanitized[k] = value[k];\n            }\n            else {\n                sanitized[k] = RedactedString;\n            }\n        }\n        return sanitized;\n    }\n    sanitizeUrl(value) {\n        if (typeof value !== \"string\" || value === null) {\n            return value;\n        }\n        const url = new URL(value);\n        if (!url.search) {\n            return value;\n        }\n        for (const [key] of url.searchParams) {\n            if (!this.allowedQueryParameters.has(key.toLowerCase())) {\n                url.searchParams.set(key, RedactedString);\n            }\n        }\n        return url.toString();\n    }\n}\n//# sourceMappingURL=sanitizer.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { logger as coreLogger } from \"../log\";\nimport { Sanitizer } from \"../util/sanitizer\";\n/**\n * The programmatic identifier of the logPolicy.\n */\nexport const logPolicyName = \"logPolicy\";\n/**\n * A policy that logs all requests and responses.\n * @param options - Options to configure logPolicy.\n */\nexport function logPolicy(options = {}) {\n    var _a;\n    const logger = (_a = options.logger) !== null && _a !== void 0 ? _a : coreLogger.info;\n    const sanitizer = new Sanitizer({\n        additionalAllowedHeaderNames: options.additionalAllowedHeaderNames,\n        additionalAllowedQueryParameters: options.additionalAllowedQueryParameters,\n    });\n    return {\n        name: logPolicyName,\n        async sendRequest(request, next) {\n            if (!logger.enabled) {\n                return next(request);\n            }\n            logger(`Request: ${sanitizer.sanitize(request)}`);\n            const response = await next(request);\n            logger(`Response status code: ${response.status}`);\n            logger(`Headers: ${sanitizer.sanitize(response.headers)}`);\n            return response;\n        },\n    };\n}\n//# sourceMappingURL=logPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The programmatic identifier of the redirectPolicy.\n */\nexport const redirectPolicyName = \"redirectPolicy\";\n/**\n * Methods that are allowed to follow redirects 301 and 302\n */\nconst allowedRedirect = [\"GET\", \"HEAD\"];\n/**\n * A policy to follow Location headers from the server in order\n * to support server-side redirection.\n * In the browser, this policy is not used.\n * @param options - Options to control policy behavior.\n */\nexport function redirectPolicy(options = {}) {\n    const { maxRetries = 20 } = options;\n    return {\n        name: redirectPolicyName,\n        async sendRequest(request, next) {\n            const response = await next(request);\n            return handleRedirect(next, response, maxRetries);\n        },\n    };\n}\nasync function handleRedirect(next, response, maxRetries, currentRetries = 0) {\n    const { request, status, headers } = response;\n    const locationHeader = headers.get(\"location\");\n    if (locationHeader &&\n        (status === 300 ||\n            (status === 301 && allowedRedirect.includes(request.method)) ||\n            (status === 302 && allowedRedirect.includes(request.method)) ||\n            (status === 303 && request.method === \"POST\") ||\n            status === 307) &&\n        currentRetries < maxRetries) {\n        const url = new URL(locationHeader, request.url);\n        request.url = url.toString();\n        // POST request with Status code 303 should be converted into a\n        // redirected GET request if the redirect url is present in the location header\n        if (status === 303) {\n            request.method = \"GET\";\n            request.headers.delete(\"Content-Length\");\n            delete request.body;\n        }\n        request.headers.delete(\"Authorization\");\n        const res = await next(request);\n        return handleRedirect(next, res, maxRetries, currentRetries + 1);\n    }\n    return response;\n}\n//# sourceMappingURL=redirectPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nexport const SDK_VERSION = \"1.10.1\";\nexport const DEFAULT_RETRY_POLICY_COUNT = 3;\n//# sourceMappingURL=constants.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { getHeaderName, setPlatformSpecificData } from \"./userAgentPlatform\";\nimport { SDK_VERSION } from \"../constants\";\nfunction getUserAgentString(telemetryInfo) {\n    const parts = [];\n    for (const [key, value] of telemetryInfo) {\n        const token = value ? `${key}/${value}` : key;\n        parts.push(token);\n    }\n    return parts.join(\" \");\n}\n/**\n * @internal\n */\nexport function getUserAgentHeaderName() {\n    return getHeaderName();\n}\n/**\n * @internal\n */\nexport function getUserAgentValue(prefix) {\n    const runtimeInfo = new Map();\n    runtimeInfo.set(\"core-rest-pipeline\", SDK_VERSION);\n    setPlatformSpecificData(runtimeInfo);\n    const defaultAgent = getUserAgentString(runtimeInfo);\n    const userAgentValue = prefix ? `${prefix} ${defaultAgent}` : defaultAgent;\n    return userAgentValue;\n}\n//# sourceMappingURL=userAgent.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as os from \"os\";\n/**\n * @internal\n */\nexport function getHeaderName() {\n    return \"User-Agent\";\n}\n/**\n * @internal\n */\nexport function setPlatformSpecificData(map) {\n    map.set(\"Node\", process.version);\n    map.set(\"OS\", `(${os.arch()}-${os.type()}-${os.release()})`);\n}\n//# sourceMappingURL=userAgentPlatform.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { getUserAgentHeaderName, getUserAgentValue } from \"../util/userAgent\";\nconst UserAgentHeaderName = getUserAgentHeaderName();\n/**\n * The programmatic identifier of the userAgentPolicy.\n */\nexport const userAgentPolicyName = \"userAgentPolicy\";\n/**\n * A policy that sets the User-Agent header (or equivalent) to reflect\n * the library version.\n * @param options - Options to customize the user agent value.\n */\nexport function userAgentPolicy(options = {}) {\n    const userAgentValue = getUserAgentValue(options.userAgentPrefix);\n    return {\n        name: userAgentPolicyName,\n        async sendRequest(request, next) {\n            if (!request.headers.has(UserAgentHeaderName)) {\n                request.headers.set(UserAgentHeaderName, userAgentValue);\n            }\n            return next(request);\n        },\n    };\n}\n//# sourceMappingURL=userAgentPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The programmatic identifier of the decompressResponsePolicy.\n */\nexport const decompressResponsePolicyName = \"decompressResponsePolicy\";\n/**\n * A policy to enable response decompression according to Accept-Encoding header\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding\n */\nexport function decompressResponsePolicy() {\n    return {\n        name: decompressResponsePolicyName,\n        async sendRequest(request, next) {\n            // HEAD requests have no body\n            if (request.method !== \"HEAD\") {\n                request.headers.set(\"Accept-Encoding\", \"gzip,deflate\");\n            }\n            return next(request);\n        },\n    };\n}\n//# sourceMappingURL=decompressResponsePolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/// <reference path=\"../shims-public.d.ts\" />\nconst listenersMap = new WeakMap();\nconst abortedMap = new WeakMap();\n/**\n * An aborter instance implements AbortSignal interface, can abort HTTP requests.\n *\n * - Call AbortSignal.none to create a new AbortSignal instance that cannot be cancelled.\n * Use `AbortSignal.none` when you are required to pass a cancellation token but the operation\n * cannot or will not ever be cancelled.\n *\n * @example\n * Abort without timeout\n * ```ts\n * await doAsyncWork(AbortSignal.none);\n * ```\n */\nexport class AbortSignal {\n    constructor() {\n        /**\n         * onabort event listener.\n         */\n        this.onabort = null;\n        listenersMap.set(this, []);\n        abortedMap.set(this, false);\n    }\n    /**\n     * Status of whether aborted or not.\n     *\n     * @readonly\n     */\n    get aborted() {\n        if (!abortedMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        return abortedMap.get(this);\n    }\n    /**\n     * Creates a new AbortSignal instance that will never be aborted.\n     *\n     * @readonly\n     */\n    static get none() {\n        return new AbortSignal();\n    }\n    /**\n     * Added new \"abort\" event listener, only support \"abort\" event.\n     *\n     * @param _type - Only support \"abort\" event\n     * @param listener - The listener to be added\n     */\n    addEventListener(\n    // tslint:disable-next-line:variable-name\n    _type, listener) {\n        if (!listenersMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        const listeners = listenersMap.get(this);\n        listeners.push(listener);\n    }\n    /**\n     * Remove \"abort\" event listener, only support \"abort\" event.\n     *\n     * @param _type - Only support \"abort\" event\n     * @param listener - The listener to be removed\n     */\n    removeEventListener(\n    // tslint:disable-next-line:variable-name\n    _type, listener) {\n        if (!listenersMap.has(this)) {\n            throw new TypeError(\"Expected `this` to be an instance of AbortSignal.\");\n        }\n        const listeners = listenersMap.get(this);\n        const index = listeners.indexOf(listener);\n        if (index > -1) {\n            listeners.splice(index, 1);\n        }\n    }\n    /**\n     * Dispatches a synthetic event to the AbortSignal.\n     */\n    dispatchEvent(_event) {\n        throw new Error(\"This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.\");\n    }\n}\n/**\n * Helper to trigger an abort event immediately, the onabort and all abort event listeners will be triggered.\n * Will try to trigger abort event for all linked AbortSignal nodes.\n *\n * - If there is a timeout, the timer will be cancelled.\n * - If aborted is true, nothing will happen.\n *\n * @internal\n */\n// eslint-disable-next-line @azure/azure-sdk/ts-use-interface-parameters\nexport function abortSignal(signal) {\n    if (signal.aborted) {\n        return;\n    }\n    if (signal.onabort) {\n        signal.onabort.call(signal);\n    }\n    const listeners = listenersMap.get(signal);\n    if (listeners) {\n        // Create a copy of listeners so mutations to the array\n        // (e.g. via removeListener calls) don't affect the listeners\n        // we invoke.\n        listeners.slice().forEach((listener) => {\n            listener.call(signal, { type: \"abort\" });\n        });\n    }\n    abortedMap.set(signal, true);\n}\n//# sourceMappingURL=AbortSignal.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { AbortSignal, abortSignal } from \"./AbortSignal\";\n/**\n * This error is thrown when an asynchronous operation has been aborted.\n * Check for this error by testing the `name` that the name property of the\n * error matches `\"AbortError\"`.\n *\n * @example\n * ```ts\n * const controller = new AbortController();\n * controller.abort();\n * try {\n *   doAsyncWork(controller.signal)\n * } catch (e) {\n *   if (e.name === 'AbortError') {\n *     // handle abort error here.\n *   }\n * }\n * ```\n */\nexport class AbortError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"AbortError\";\n    }\n}\n/**\n * An AbortController provides an AbortSignal and the associated controls to signal\n * that an asynchronous operation should be aborted.\n *\n * @example\n * Abort an operation when another event fires\n * ```ts\n * const controller = new AbortController();\n * const signal = controller.signal;\n * doAsyncWork(signal);\n * button.addEventListener('click', () => controller.abort());\n * ```\n *\n * @example\n * Share aborter cross multiple operations in 30s\n * ```ts\n * // Upload the same data to 2 different data centers at the same time,\n * // abort another when any of them is finished\n * const controller = AbortController.withTimeout(30 * 1000);\n * doAsyncWork(controller.signal).then(controller.abort);\n * doAsyncWork(controller.signal).then(controller.abort);\n *```\n *\n * @example\n * Cascaded aborting\n * ```ts\n * // All operations can't take more than 30 seconds\n * const aborter = Aborter.timeout(30 * 1000);\n *\n * // Following 2 operations can't take more than 25 seconds\n * await doAsyncWork(aborter.withTimeout(25 * 1000));\n * await doAsyncWork(aborter.withTimeout(25 * 1000));\n * ```\n */\nexport class AbortController {\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    constructor(parentSignals) {\n        this._signal = new AbortSignal();\n        if (!parentSignals) {\n            return;\n        }\n        // coerce parentSignals into an array\n        if (!Array.isArray(parentSignals)) {\n            // eslint-disable-next-line prefer-rest-params\n            parentSignals = arguments;\n        }\n        for (const parentSignal of parentSignals) {\n            // if the parent signal has already had abort() called,\n            // then call abort on this signal as well.\n            if (parentSignal.aborted) {\n                this.abort();\n            }\n            else {\n                // when the parent signal aborts, this signal should as well.\n                parentSignal.addEventListener(\"abort\", () => {\n                    this.abort();\n                });\n            }\n        }\n    }\n    /**\n     * The AbortSignal associated with this controller that will signal aborted\n     * when the abort method is called on this controller.\n     *\n     * @readonly\n     */\n    get signal() {\n        return this._signal;\n    }\n    /**\n     * Signal that any operations passed this controller's associated abort signal\n     * to cancel any remaining work and throw an `AbortError`.\n     */\n    abort() {\n        abortSignal(this._signal);\n    }\n    /**\n     * Creates a new AbortSignal instance that will abort after the provided ms.\n     * @param ms - Elapsed time in milliseconds to trigger an abort.\n     */\n    static timeout(ms) {\n        const signal = new AbortSignal();\n        const timer = setTimeout(abortSignal, ms, signal);\n        // Prevent the active Timer from keeping the Node.js event loop active.\n        if (typeof timer.unref === \"function\") {\n            timer.unref();\n        }\n        return signal;\n    }\n}\n//# sourceMappingURL=AbortController.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { AbortError } from \"@azure/abort-controller\";\nconst StandardAbortMessage = \"The operation was aborted.\";\n/**\n * A wrapper for setTimeout that resolves a promise after delayInMs milliseconds.\n * @param delayInMs - The number of milliseconds to be delayed.\n * @param value - The value to be resolved with after a timeout of t milliseconds.\n * @param options - The options for delay - currently abort options\n *                  - abortSignal - The abortSignal associated with containing operation.\n *                  - abortErrorMsg - The abort error message associated with containing operation.\n * @returns Resolved promise\n */\nexport function delay(delayInMs, value, options) {\n    return new Promise((resolve, reject) => {\n        let timer = undefined;\n        let onAborted = undefined;\n        const rejectOnAbort = () => {\n            return reject(new AbortError((options === null || options === void 0 ? void 0 : options.abortErrorMsg) ? options === null || options === void 0 ? void 0 : options.abortErrorMsg : StandardAbortMessage));\n        };\n        const removeListeners = () => {\n            if ((options === null || options === void 0 ? void 0 : options.abortSignal) && onAborted) {\n                options.abortSignal.removeEventListener(\"abort\", onAborted);\n            }\n        };\n        onAborted = () => {\n            if (timer) {\n                clearTimeout(timer);\n            }\n            removeListeners();\n            return rejectOnAbort();\n        };\n        if ((options === null || options === void 0 ? void 0 : options.abortSignal) && options.abortSignal.aborted) {\n            return rejectOnAbort();\n        }\n        timer = setTimeout(() => {\n            removeListeners();\n            resolve(value);\n        }, delayInMs);\n        if (options === null || options === void 0 ? void 0 : options.abortSignal) {\n            options.abortSignal.addEventListener(\"abort\", onAborted);\n        }\n    });\n}\n/**\n * @internal\n * @returns the parsed value or undefined if the parsed value is invalid.\n */\nexport function parseHeaderValueAsNumber(response, headerName) {\n    const value = response.headers.get(headerName);\n    if (!value)\n        return;\n    const valueAsNum = Number(value);\n    if (Number.isNaN(valueAsNum))\n        return;\n    return valueAsNum;\n}\n//# sourceMappingURL=helpers.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { parseHeaderValueAsNumber } from \"../util/helpers\";\n/**\n * The header that comes back from Azure services representing\n * the amount of time (minimum) to wait to retry (in seconds or timestamp after which we can retry).\n */\nconst RetryAfterHeader = \"Retry-After\";\n/**\n * The headers that come back from Azure services representing\n * the amount of time (minimum) to wait to retry.\n *\n * \"retry-after-ms\", \"x-ms-retry-after-ms\" : milliseconds\n * \"Retry-After\" : seconds or timestamp\n */\nconst AllRetryAfterHeaders = [\"retry-after-ms\", \"x-ms-retry-after-ms\", RetryAfterHeader];\n/**\n * A response is a throttling retry response if it has a throttling status code (429 or 503),\n * as long as one of the [ \"Retry-After\" or \"retry-after-ms\" or \"x-ms-retry-after-ms\" ] headers has a valid value.\n *\n * Returns the `retryAfterInMs` value if the response is a throttling retry response.\n * If not throttling retry response, returns `undefined`.\n *\n * @internal\n */\nfunction getRetryAfterInMs(response) {\n    if (!(response && [429, 503].includes(response.status)))\n        return undefined;\n    try {\n        // Headers: \"retry-after-ms\", \"x-ms-retry-after-ms\", \"Retry-After\"\n        for (const header of AllRetryAfterHeaders) {\n            const retryAfterValue = parseHeaderValueAsNumber(response, header);\n            if (retryAfterValue === 0 || retryAfterValue) {\n                // \"Retry-After\" header ==> seconds\n                // \"retry-after-ms\", \"x-ms-retry-after-ms\" headers ==> milli-seconds\n                const multiplyingFactor = header === RetryAfterHeader ? 1000 : 1;\n                return retryAfterValue * multiplyingFactor; // in milli-seconds\n            }\n        }\n        // RetryAfterHeader (\"Retry-After\") has a special case where it might be formatted as a date instead of a number of seconds\n        const retryAfterHeader = response.headers.get(RetryAfterHeader);\n        if (!retryAfterHeader)\n            return;\n        const date = Date.parse(retryAfterHeader);\n        const diff = date - Date.now();\n        // negative diff would mean a date in the past, so retry asap with 0 milliseconds\n        return Number.isFinite(diff) ? Math.max(0, diff) : undefined;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\n/**\n * A response is a retry response if it has a throttling status code (429 or 503),\n * as long as one of the [ \"Retry-After\" or \"retry-after-ms\" or \"x-ms-retry-after-ms\" ] headers has a valid value.\n */\nexport function isThrottlingRetryResponse(response) {\n    return Number.isFinite(getRetryAfterInMs(response));\n}\nexport function throttlingRetryStrategy() {\n    return {\n        name: \"throttlingRetryStrategy\",\n        retry({ response }) {\n            const retryAfterInMs = getRetryAfterInMs(response);\n            if (!Number.isFinite(retryAfterInMs)) {\n                return { skipStrategy: true };\n            }\n            return {\n                retryAfterInMs,\n            };\n        },\n    };\n}\n//# sourceMappingURL=throttlingRetryStrategy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { getRandomIntegerInclusive } from \"@azure/core-util\";\nimport { isThrottlingRetryResponse } from \"./throttlingRetryStrategy\";\n// intervals are in milliseconds\nconst DEFAULT_CLIENT_RETRY_INTERVAL = 1000;\nconst DEFAULT_CLIENT_MAX_RETRY_INTERVAL = 1000 * 64;\n/**\n * A retry strategy that retries with an exponentially increasing delay in these two cases:\n * - When there are errors in the underlying transport layer (e.g. DNS lookup failures).\n * - Or otherwise if the outgoing request fails (408, greater or equal than 500, except for 501 and 505).\n */\nexport function exponentialRetryStrategy(options = {}) {\n    var _a, _b;\n    const retryInterval = (_a = options.retryDelayInMs) !== null && _a !== void 0 ? _a : DEFAULT_CLIENT_RETRY_INTERVAL;\n    const maxRetryInterval = (_b = options.maxRetryDelayInMs) !== null && _b !== void 0 ? _b : DEFAULT_CLIENT_MAX_RETRY_INTERVAL;\n    let retryAfterInMs = retryInterval;\n    return {\n        name: \"exponentialRetryStrategy\",\n        retry({ retryCount, response, responseError }) {\n            const matchedSystemError = isSystemError(responseError);\n            const ignoreSystemErrors = matchedSystemError && options.ignoreSystemErrors;\n            const isExponential = isExponentialRetryResponse(response);\n            const ignoreExponentialResponse = isExponential && options.ignoreHttpStatusCodes;\n            const unknownResponse = response && (isThrottlingRetryResponse(response) || !isExponential);\n            if (unknownResponse || ignoreExponentialResponse || ignoreSystemErrors) {\n                return { skipStrategy: true };\n            }\n            if (responseError && !matchedSystemError && !isExponential) {\n                return { errorToThrow: responseError };\n            }\n            // Exponentially increase the delay each time\n            const exponentialDelay = retryAfterInMs * Math.pow(2, retryCount);\n            // Don't let the delay exceed the maximum\n            const clampedExponentialDelay = Math.min(maxRetryInterval, exponentialDelay);\n            // Allow the final value to have some \"jitter\" (within 50% of the delay size) so\n            // that retries across multiple clients don't occur simultaneously.\n            retryAfterInMs =\n                clampedExponentialDelay / 2 + getRandomIntegerInclusive(0, clampedExponentialDelay / 2);\n            return { retryAfterInMs };\n        },\n    };\n}\n/**\n * A response is a retry response if it has status codes:\n * - 408, or\n * - Greater or equal than 500, except for 501 and 505.\n */\nexport function isExponentialRetryResponse(response) {\n    return Boolean(response &&\n        response.status !== undefined &&\n        (response.status >= 500 || response.status === 408) &&\n        response.status !== 501 &&\n        response.status !== 505);\n}\n/**\n * Determines whether an error from a pipeline response was triggered in the network layer.\n */\nexport function isSystemError(err) {\n    if (!err) {\n        return false;\n    }\n    return (err.code === \"ETIMEDOUT\" ||\n        err.code === \"ESOCKETTIMEDOUT\" ||\n        err.code === \"ECONNREFUSED\" ||\n        err.code === \"ECONNRESET\" ||\n        err.code === \"ENOENT\");\n}\n//# sourceMappingURL=exponentialRetryStrategy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Returns a random integer value between a lower and upper bound,\n * inclusive of both bounds.\n * Note that this uses Math.random and isn't secure. If you need to use\n * this for any kind of security purpose, find a better source of random.\n * @param min - The smallest integer value allowed.\n * @param max - The largest integer value allowed.\n */\nexport function getRandomIntegerInclusive(min, max) {\n    // Make sure inputs are integers.\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    // Pick a random offset from zero to the size of the range.\n    // Since Math.random() can never return 1, we have to make the range one larger\n    // in order to be inclusive of the maximum value after we take the floor.\n    const offset = Math.floor(Math.random() * (max - min + 1));\n    return offset + min;\n}\n//# sourceMappingURL=random.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { delay } from \"../util/helpers\";\nimport { createClientLogger } from \"@azure/logger\";\nimport { AbortError } from \"@azure/abort-controller\";\nimport { DEFAULT_RETRY_POLICY_COUNT } from \"../constants\";\nconst retryPolicyLogger = createClientLogger(\"core-rest-pipeline retryPolicy\");\n/**\n * The programmatic identifier of the retryPolicy.\n */\nconst retryPolicyName = \"retryPolicy\";\n/**\n * retryPolicy is a generic policy to enable retrying requests when certain conditions are met\n */\nexport function retryPolicy(strategies, options = { maxRetries: DEFAULT_RETRY_POLICY_COUNT }) {\n    const logger = options.logger || retryPolicyLogger;\n    return {\n        name: retryPolicyName,\n        async sendRequest(request, next) {\n            var _a, _b;\n            let response;\n            let responseError;\n            let retryCount = -1;\n            // eslint-disable-next-line no-constant-condition\n            retryRequest: while (true) {\n                retryCount += 1;\n                response = undefined;\n                responseError = undefined;\n                try {\n                    logger.info(`Retry ${retryCount}: Attempting to send request`, request.requestId);\n                    response = await next(request);\n                    logger.info(`Retry ${retryCount}: Received a response from request`, request.requestId);\n                }\n                catch (e) {\n                    logger.error(`Retry ${retryCount}: Received an error from request`, request.requestId);\n                    // RestErrors are valid targets for the retry strategies.\n                    // If none of the retry strategies can work with them, they will be thrown later in this policy.\n                    // If the received error is not a RestError, it is immediately thrown.\n                    responseError = e;\n                    if (!e || responseError.name !== \"RestError\") {\n                        throw e;\n                    }\n                    response = responseError.response;\n                }\n                if ((_a = request.abortSignal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                    logger.error(`Retry ${retryCount}: Request aborted.`);\n                    const abortError = new AbortError();\n                    throw abortError;\n                }\n                if (retryCount >= ((_b = options.maxRetries) !== null && _b !== void 0 ? _b : DEFAULT_RETRY_POLICY_COUNT)) {\n                    logger.info(`Retry ${retryCount}: Maximum retries reached. Returning the last received response, or throwing the last received error.`);\n                    if (responseError) {\n                        throw responseError;\n                    }\n                    else if (response) {\n                        return response;\n                    }\n                    else {\n                        throw new Error(\"Maximum retries reached with no response or error to throw\");\n                    }\n                }\n                logger.info(`Retry ${retryCount}: Processing ${strategies.length} retry strategies.`);\n                strategiesLoop: for (const strategy of strategies) {\n                    const strategyLogger = strategy.logger || retryPolicyLogger;\n                    strategyLogger.info(`Retry ${retryCount}: Processing retry strategy ${strategy.name}.`);\n                    const modifiers = strategy.retry({\n                        retryCount,\n                        response,\n                        responseError,\n                    });\n                    if (modifiers.skipStrategy) {\n                        strategyLogger.info(`Retry ${retryCount}: Skipped.`);\n                        continue strategiesLoop;\n                    }\n                    const { errorToThrow, retryAfterInMs, redirectTo } = modifiers;\n                    if (errorToThrow) {\n                        strategyLogger.error(`Retry ${retryCount}: Retry strategy ${strategy.name} throws error:`, errorToThrow);\n                        throw errorToThrow;\n                    }\n                    if (retryAfterInMs || retryAfterInMs === 0) {\n                        strategyLogger.info(`Retry ${retryCount}: Retry strategy ${strategy.name} retries after ${retryAfterInMs}`);\n                        await delay(retryAfterInMs, undefined, { abortSignal: request.abortSignal });\n                        continue retryRequest;\n                    }\n                    if (redirectTo) {\n                        strategyLogger.info(`Retry ${retryCount}: Retry strategy ${strategy.name} redirects to ${redirectTo}`);\n                        request.url = redirectTo;\n                        continue retryRequest;\n                    }\n                }\n                if (responseError) {\n                    logger.info(`None of the retry strategies could work with the received error. Throwing it.`);\n                    throw responseError;\n                }\n                if (response) {\n                    logger.info(`None of the retry strategies could work with the received response. Returning it.`);\n                    return response;\n                }\n                // If all the retries skip and there's no response,\n                // we're still in the retry loop, so a new request will be sent\n                // until `maxRetries` is reached.\n            }\n        },\n    };\n}\n//# sourceMappingURL=retryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { exponentialRetryStrategy } from \"../retryStrategies/exponentialRetryStrategy\";\nimport { throttlingRetryStrategy } from \"../retryStrategies/throttlingRetryStrategy\";\nimport { retryPolicy } from \"./retryPolicy\";\nimport { DEFAULT_RETRY_POLICY_COUNT } from \"../constants\";\n/**\n * Name of the {@link defaultRetryPolicy}\n */\nexport const defaultRetryPolicyName = \"defaultRetryPolicy\";\n/**\n * A policy that retries according to three strategies:\n * - When the server sends a 429 response with a Retry-After header.\n * - When there are errors in the underlying transport layer (e.g. DNS lookup failures).\n * - Or otherwise if the outgoing request fails, it will retry with an exponentially increasing delay.\n */\nexport function defaultRetryPolicy(options = {}) {\n    var _a;\n    return {\n        name: defaultRetryPolicyName,\n        sendRequest: retryPolicy([throttlingRetryStrategy(), exponentialRetryStrategy(options)], {\n            maxRetries: (_a = options.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_RETRY_POLICY_COUNT,\n        }).sendRequest,\n    };\n}\n//# sourceMappingURL=defaultRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport FormData from \"form-data\";\n/**\n * The programmatic identifier of the formDataPolicy.\n */\nexport const formDataPolicyName = \"formDataPolicy\";\n/**\n * A policy that encodes FormData on the request into the body.\n */\nexport function formDataPolicy() {\n    return {\n        name: formDataPolicyName,\n        async sendRequest(request, next) {\n            if (request.formData) {\n                const contentType = request.headers.get(\"Content-Type\");\n                if (contentType && contentType.indexOf(\"application/x-www-form-urlencoded\") !== -1) {\n                    request.body = wwwFormUrlEncode(request.formData);\n                    request.formData = undefined;\n                }\n                else {\n                    await prepareFormData(request.formData, request);\n                }\n            }\n            return next(request);\n        },\n    };\n}\nfunction wwwFormUrlEncode(formData) {\n    const urlSearchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(formData)) {\n        if (Array.isArray(value)) {\n            for (const subValue of value) {\n                urlSearchParams.append(key, subValue.toString());\n            }\n        }\n        else {\n            urlSearchParams.append(key, value.toString());\n        }\n    }\n    return urlSearchParams.toString();\n}\nasync function prepareFormData(formData, request) {\n    const requestForm = new FormData();\n    for (const formKey of Object.keys(formData)) {\n        const formValue = formData[formKey];\n        if (Array.isArray(formValue)) {\n            for (const subValue of formValue) {\n                requestForm.append(formKey, subValue);\n            }\n        }\n        else {\n            requestForm.append(formKey, formValue);\n        }\n    }\n    request.body = requestForm;\n    request.formData = undefined;\n    const contentType = request.headers.get(\"Content-Type\");\n    if (contentType && contentType.indexOf(\"multipart/form-data\") !== -1) {\n        request.headers.set(\"Content-Type\", `multipart/form-data; boundary=${requestForm.getBoundary()}`);\n    }\n    try {\n        const contentLength = await new Promise((resolve, reject) => {\n            requestForm.getLength((err, length) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(length);\n                }\n            });\n        });\n        request.headers.set(\"Content-Length\", contentLength);\n    }\n    catch (e) {\n        // ignore setting the length if this fails\n    }\n}\n//# sourceMappingURL=formDataPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nvar _a;\n/**\n * A constant that indicates whether the environment the code is running is Node.JS.\n */\nexport const isNode = typeof process !== \"undefined\" && Boolean(process.version) && Boolean((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node);\n//# sourceMappingURL=isNode.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { HttpsProxyAgent } from \"https-proxy-agent\";\nimport { HttpProxyAgent } from \"http-proxy-agent\";\nimport { logger } from \"../log\";\nconst HTTPS_PROXY = \"HTTPS_PROXY\";\nconst HTTP_PROXY = \"HTTP_PROXY\";\nconst ALL_PROXY = \"ALL_PROXY\";\nconst NO_PROXY = \"NO_PROXY\";\n/**\n * The programmatic identifier of the proxyPolicy.\n */\nexport const proxyPolicyName = \"proxyPolicy\";\n/**\n * Stores the patterns specified in NO_PROXY environment variable.\n * @internal\n */\nexport const globalNoProxyList = [];\nlet noProxyListLoaded = false;\n/** A cache of whether a host should bypass the proxy. */\nconst globalBypassedMap = new Map();\nfunction getEnvironmentValue(name) {\n    if (process.env[name]) {\n        return process.env[name];\n    }\n    else if (process.env[name.toLowerCase()]) {\n        return process.env[name.toLowerCase()];\n    }\n    return undefined;\n}\nfunction loadEnvironmentProxyValue() {\n    if (!process) {\n        return undefined;\n    }\n    const httpsProxy = getEnvironmentValue(HTTPS_PROXY);\n    const allProxy = getEnvironmentValue(ALL_PROXY);\n    const httpProxy = getEnvironmentValue(HTTP_PROXY);\n    return httpsProxy || allProxy || httpProxy;\n}\n/**\n * Check whether the host of a given `uri` matches any pattern in the no proxy list.\n * If there's a match, any request sent to the same host shouldn't have the proxy settings set.\n * This implementation is a port of https://github.com/Azure/azure-sdk-for-net/blob/8cca811371159e527159c7eb65602477898683e2/sdk/core/Azure.Core/src/Pipeline/Internal/HttpEnvironmentProxy.cs#L210\n */\nfunction isBypassed(uri, noProxyList, bypassedMap) {\n    if (noProxyList.length === 0) {\n        return false;\n    }\n    const host = new URL(uri).hostname;\n    if (bypassedMap === null || bypassedMap === void 0 ? void 0 : bypassedMap.has(host)) {\n        return bypassedMap.get(host);\n    }\n    let isBypassedFlag = false;\n    for (const pattern of noProxyList) {\n        if (pattern[0] === \".\") {\n            // This should match either domain it self or any subdomain or host\n            // .foo.com will match foo.com it self or *.foo.com\n            if (host.endsWith(pattern)) {\n                isBypassedFlag = true;\n            }\n            else {\n                if (host.length === pattern.length - 1 && host === pattern.slice(1)) {\n                    isBypassedFlag = true;\n                }\n            }\n        }\n        else {\n            if (host === pattern) {\n                isBypassedFlag = true;\n            }\n        }\n    }\n    bypassedMap === null || bypassedMap === void 0 ? void 0 : bypassedMap.set(host, isBypassedFlag);\n    return isBypassedFlag;\n}\nexport function loadNoProxy() {\n    const noProxy = getEnvironmentValue(NO_PROXY);\n    noProxyListLoaded = true;\n    if (noProxy) {\n        return noProxy\n            .split(\",\")\n            .map((item) => item.trim())\n            .filter((item) => item.length);\n    }\n    return [];\n}\n/**\n * This method converts a proxy url into `ProxySettings` for use with ProxyPolicy.\n * If no argument is given, it attempts to parse a proxy URL from the environment\n * variables `HTTPS_PROXY` or `HTTP_PROXY`.\n * @param proxyUrl - The url of the proxy to use. May contain authentication information.\n */\nexport function getDefaultProxySettings(proxyUrl) {\n    if (!proxyUrl) {\n        proxyUrl = loadEnvironmentProxyValue();\n        if (!proxyUrl) {\n            return undefined;\n        }\n    }\n    const parsedUrl = new URL(proxyUrl);\n    const schema = parsedUrl.protocol ? parsedUrl.protocol + \"//\" : \"\";\n    return {\n        host: schema + parsedUrl.hostname,\n        port: Number.parseInt(parsedUrl.port || \"80\"),\n        username: parsedUrl.username,\n        password: parsedUrl.password,\n    };\n}\n/**\n * @internal\n */\nexport function getProxyAgentOptions(proxySettings, { headers, tlsSettings }) {\n    let parsedProxyUrl;\n    try {\n        parsedProxyUrl = new URL(proxySettings.host);\n    }\n    catch (_error) {\n        throw new Error(`Expecting a valid host string in proxy settings, but found \"${proxySettings.host}\".`);\n    }\n    if (tlsSettings) {\n        logger.warning(\"TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.\");\n    }\n    const proxyAgentOptions = {\n        hostname: parsedProxyUrl.hostname,\n        port: proxySettings.port,\n        protocol: parsedProxyUrl.protocol,\n        headers: headers.toJSON(),\n    };\n    if (proxySettings.username && proxySettings.password) {\n        proxyAgentOptions.auth = `${proxySettings.username}:${proxySettings.password}`;\n    }\n    else if (proxySettings.username) {\n        proxyAgentOptions.auth = `${proxySettings.username}`;\n    }\n    return proxyAgentOptions;\n}\nfunction setProxyAgentOnRequest(request, cachedAgents) {\n    // Custom Agent should take precedence so if one is present\n    // we should skip to avoid overwriting it.\n    if (request.agent) {\n        return;\n    }\n    const url = new URL(request.url);\n    const isInsecure = url.protocol !== \"https:\";\n    const proxySettings = request.proxySettings;\n    if (proxySettings) {\n        if (isInsecure) {\n            if (!cachedAgents.httpProxyAgent) {\n                const proxyAgentOptions = getProxyAgentOptions(proxySettings, request);\n                cachedAgents.httpProxyAgent = new HttpProxyAgent(proxyAgentOptions);\n            }\n            request.agent = cachedAgents.httpProxyAgent;\n        }\n        else {\n            if (!cachedAgents.httpsProxyAgent) {\n                const proxyAgentOptions = getProxyAgentOptions(proxySettings, request);\n                cachedAgents.httpsProxyAgent = new HttpsProxyAgent(proxyAgentOptions);\n            }\n            request.agent = cachedAgents.httpsProxyAgent;\n        }\n    }\n}\n/**\n * A policy that allows one to apply proxy settings to all requests.\n * If not passed static settings, they will be retrieved from the HTTPS_PROXY\n * or HTTP_PROXY environment variables.\n * @param proxySettings - ProxySettings to use on each request.\n * @param options - additional settings, for example, custom NO_PROXY patterns\n */\nexport function proxyPolicy(proxySettings = getDefaultProxySettings(), options) {\n    if (!noProxyListLoaded) {\n        globalNoProxyList.push(...loadNoProxy());\n    }\n    const cachedAgents = {};\n    return {\n        name: proxyPolicyName,\n        async sendRequest(request, next) {\n            var _a;\n            if (!request.proxySettings &&\n                !isBypassed(request.url, (_a = options === null || options === void 0 ? void 0 : options.customNoProxyList) !== null && _a !== void 0 ? _a : globalNoProxyList, (options === null || options === void 0 ? void 0 : options.customNoProxyList) ? undefined : globalBypassedMap)) {\n                request.proxySettings = proxySettings;\n            }\n            if (request.proxySettings) {\n                setProxyAgentOnRequest(request, cachedAgents);\n            }\n            return next(request);\n        },\n    };\n}\n//# sourceMappingURL=proxyPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The programmatic identifier of the setClientRequestIdPolicy.\n */\nexport const setClientRequestIdPolicyName = \"setClientRequestIdPolicy\";\n/**\n * Each PipelineRequest gets a unique id upon creation.\n * This policy passes that unique id along via an HTTP header to enable better\n * telemetry and tracing.\n * @param requestIdHeaderName - The name of the header to pass the request ID to.\n */\nexport function setClientRequestIdPolicy(requestIdHeaderName = \"x-ms-client-request-id\") {\n    return {\n        name: setClientRequestIdPolicyName,\n        async sendRequest(request, next) {\n            if (!request.headers.has(requestIdHeaderName)) {\n                request.headers.set(requestIdHeaderName, request.requestId);\n            }\n            return next(request);\n        },\n    };\n}\n//# sourceMappingURL=setClientRequestIdPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * Name of the TLS Policy\n */\nexport const tlsPolicyName = \"tlsPolicy\";\n/**\n * Gets a pipeline policy that adds the client certificate to the HttpClient agent for authentication.\n */\nexport function tlsPolicy(tlsSettings) {\n    return {\n        name: tlsPolicyName,\n        sendRequest: async (req, next) => {\n            // Users may define a request tlsSettings, honor those over the client level one\n            if (!req.tlsSettings) {\n                req.tlsSettings = tlsSettings;\n            }\n            return next(req);\n        },\n    };\n}\n//# sourceMappingURL=tlsPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/** @internal */\nexport const knownContextKeys = {\n    span: Symbol.for(\"@azure/core-tracing span\"),\n    namespace: Symbol.for(\"@azure/core-tracing namespace\"),\n};\n/**\n * Creates a new {@link TracingContext} with the given options.\n * @param options - A set of known keys that may be set on the context.\n * @returns A new {@link TracingContext} with the given options.\n *\n * @internal\n */\nexport function createTracingContext(options = {}) {\n    let context = new TracingContextImpl(options.parentContext);\n    if (options.span) {\n        context = context.setValue(knownContextKeys.span, options.span);\n    }\n    if (options.namespace) {\n        context = context.setValue(knownContextKeys.namespace, options.namespace);\n    }\n    return context;\n}\n/** @internal */\nexport class TracingContextImpl {\n    constructor(initialContext) {\n        this._contextMap =\n            initialContext instanceof TracingContextImpl\n                ? new Map(initialContext._contextMap)\n                : new Map();\n    }\n    setValue(key, value) {\n        const newContext = new TracingContextImpl(this);\n        newContext._contextMap.set(key, value);\n        return newContext;\n    }\n    getValue(key) {\n        return this._contextMap.get(key);\n    }\n    deleteValue(key) {\n        const newContext = new TracingContextImpl(this);\n        newContext._contextMap.delete(key);\n        return newContext;\n    }\n}\n//# sourceMappingURL=tracingContext.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createTracingContext } from \"./tracingContext\";\nexport function createDefaultTracingSpan() {\n    return {\n        end: () => {\n            // noop\n        },\n        isRecording: () => false,\n        recordException: () => {\n            // noop\n        },\n        setAttribute: () => {\n            // noop\n        },\n        setStatus: () => {\n            // noop\n        },\n    };\n}\nexport function createDefaultInstrumenter() {\n    return {\n        createRequestHeaders: () => {\n            return {};\n        },\n        parseTraceparentHeader: () => {\n            return undefined;\n        },\n        startSpan: (_name, spanOptions) => {\n            return {\n                span: createDefaultTracingSpan(),\n                tracingContext: createTracingContext({ parentContext: spanOptions.tracingContext }),\n            };\n        },\n        withContext(_context, callback, ...callbackArgs) {\n            return callback(...callbackArgs);\n        },\n    };\n}\n/** @internal */\nlet instrumenterImplementation;\n/**\n * Extends the Azure SDK with support for a given instrumenter implementation.\n *\n * @param instrumenter - The instrumenter implementation to use.\n */\nexport function useInstrumenter(instrumenter) {\n    instrumenterImplementation = instrumenter;\n}\n/**\n * Gets the currently set instrumenter, a No-Op instrumenter by default.\n *\n * @returns The currently set instrumenter\n */\nexport function getInstrumenter() {\n    if (!instrumenterImplementation) {\n        instrumenterImplementation = createDefaultInstrumenter();\n    }\n    return instrumenterImplementation;\n}\n//# sourceMappingURL=instrumenter.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { isObject } from \"./object\";\n/**\n * Typeguard for an error object shape (has name and message)\n * @param e - Something caught by a catch clause.\n */\nexport function isError(e) {\n    if (isObject(e)) {\n        const hasName = typeof e.name === \"string\";\n        const hasMessage = typeof e.message === \"string\";\n        return hasName && hasMessage;\n    }\n    return false;\n}\n/**\n * Given what is thought to be an error object, return the message if possible.\n * If the message is missing, returns a stringified version of the input.\n * @param e - Something thrown from a try block\n * @returns The error message or a string of the input\n */\nexport function getErrorMessage(e) {\n    if (isError(e)) {\n        return e.message;\n    }\n    else {\n        let stringified;\n        try {\n            if (typeof e === \"object\" && e) {\n                stringified = JSON.stringify(e);\n            }\n            else {\n                stringified = String(e);\n            }\n        }\n        catch (err) {\n            stringified = \"[unable to stringify input]\";\n        }\n        return `Unknown error ${stringified}`;\n    }\n}\n//# sourceMappingURL=error.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { inspect } from \"util\";\nexport const custom = inspect.custom;\n//# sourceMappingURL=inspect.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { isError } from \"@azure/core-util\";\nimport { custom } from \"./util/inspect\";\nimport { Sanitizer } from \"./util/sanitizer\";\nconst errorSanitizer = new Sanitizer();\n/**\n * A custom error type for failed pipeline requests.\n */\nexport class RestError extends Error {\n    constructor(message, options = {}) {\n        super(message);\n        this.name = \"RestError\";\n        this.code = options.code;\n        this.statusCode = options.statusCode;\n        this.request = options.request;\n        this.response = options.response;\n        Object.setPrototypeOf(this, RestError.prototype);\n    }\n    /**\n     * Logging method for util.inspect in Node\n     */\n    [custom]() {\n        return `RestError: ${this.message} \\n ${errorSanitizer.sanitize(this)}`;\n    }\n}\n/**\n * Something went wrong when making the request.\n * This means the actual request failed for some reason,\n * such as a DNS issue or the connection being lost.\n */\nRestError.REQUEST_SEND_ERROR = \"REQUEST_SEND_ERROR\";\n/**\n * This means that parsing the response from the server failed.\n * It may have been malformed.\n */\nRestError.PARSE_ERROR = \"PARSE_ERROR\";\n/**\n * Typeguard for RestError\n * @param e - Something caught by a catch clause.\n */\nexport function isRestError(e) {\n    if (e instanceof RestError) {\n        return true;\n    }\n    return isError(e) && e.name === \"RestError\";\n}\n//# sourceMappingURL=restError.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createTracingClient, } from \"@azure/core-tracing\";\nimport { SDK_VERSION } from \"../constants\";\nimport { getUserAgentValue } from \"../util/userAgent\";\nimport { logger } from \"../log\";\nimport { getErrorMessage, isError } from \"@azure/core-util\";\nimport { isRestError } from \"../restError\";\n/**\n * The programmatic identifier of the tracingPolicy.\n */\nexport const tracingPolicyName = \"tracingPolicy\";\n/**\n * A simple policy to create OpenTelemetry Spans for each request made by the pipeline\n * that has SpanOptions with a parent.\n * Requests made without a parent Span will not be recorded.\n * @param options - Options to configure the telemetry logged by the tracing policy.\n */\nexport function tracingPolicy(options = {}) {\n    const userAgent = getUserAgentValue(options.userAgentPrefix);\n    const tracingClient = tryCreateTracingClient();\n    return {\n        name: tracingPolicyName,\n        async sendRequest(request, next) {\n            var _a, _b;\n            if (!tracingClient || !((_a = request.tracingOptions) === null || _a === void 0 ? void 0 : _a.tracingContext)) {\n                return next(request);\n            }\n            const { span, tracingContext } = (_b = tryCreateSpan(tracingClient, request, userAgent)) !== null && _b !== void 0 ? _b : {};\n            if (!span || !tracingContext) {\n                return next(request);\n            }\n            try {\n                const response = await tracingClient.withContext(tracingContext, next, request);\n                tryProcessResponse(span, response);\n                return response;\n            }\n            catch (err) {\n                tryProcessError(span, err);\n                throw err;\n            }\n        },\n    };\n}\nfunction tryCreateTracingClient() {\n    try {\n        return createTracingClient({\n            namespace: \"\",\n            packageName: \"@azure/core-rest-pipeline\",\n            packageVersion: SDK_VERSION,\n        });\n    }\n    catch (e) {\n        logger.warning(`Error when creating the TracingClient: ${getErrorMessage(e)}`);\n        return undefined;\n    }\n}\nfunction tryCreateSpan(tracingClient, request, userAgent) {\n    try {\n        // As per spec, we do not need to differentiate between HTTP and HTTPS in span name.\n        const { span, updatedOptions } = tracingClient.startSpan(`HTTP ${request.method}`, { tracingOptions: request.tracingOptions }, {\n            spanKind: \"client\",\n            spanAttributes: {\n                \"http.method\": request.method,\n                \"http.url\": request.url,\n                requestId: request.requestId,\n            },\n        });\n        // If the span is not recording, don't do any more work.\n        if (!span.isRecording()) {\n            span.end();\n            return undefined;\n        }\n        if (userAgent) {\n            span.setAttribute(\"http.user_agent\", userAgent);\n        }\n        // set headers\n        const headers = tracingClient.createRequestHeaders(updatedOptions.tracingOptions.tracingContext);\n        for (const [key, value] of Object.entries(headers)) {\n            request.headers.set(key, value);\n        }\n        return { span, tracingContext: updatedOptions.tracingOptions.tracingContext };\n    }\n    catch (e) {\n        logger.warning(`Skipping creating a tracing span due to an error: ${getErrorMessage(e)}`);\n        return undefined;\n    }\n}\nfunction tryProcessError(span, error) {\n    try {\n        span.setStatus({\n            status: \"error\",\n            error: isError(error) ? error : undefined,\n        });\n        if (isRestError(error) && error.statusCode) {\n            span.setAttribute(\"http.status_code\", error.statusCode);\n        }\n        span.end();\n    }\n    catch (e) {\n        logger.warning(`Skipping tracing span processing due to an error: ${getErrorMessage(e)}`);\n    }\n}\nfunction tryProcessResponse(span, response) {\n    try {\n        span.setAttribute(\"http.status_code\", response.status);\n        const serviceRequestId = response.headers.get(\"x-ms-request-id\");\n        if (serviceRequestId) {\n            span.setAttribute(\"serviceRequestId\", serviceRequestId);\n        }\n        span.setStatus({\n            status: \"success\",\n        });\n        span.end();\n    }\n    catch (e) {\n        logger.warning(`Skipping tracing span processing due to an error: ${getErrorMessage(e)}`);\n    }\n}\n//# sourceMappingURL=tracingPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { getInstrumenter } from \"./instrumenter\";\nimport { knownContextKeys } from \"./tracingContext\";\n/**\n * Creates a new tracing client.\n *\n * @param options - Options used to configure the tracing client.\n * @returns - An instance of {@link TracingClient}.\n */\nexport function createTracingClient(options) {\n    const { namespace, packageName, packageVersion } = options;\n    function startSpan(name, operationOptions, spanOptions) {\n        var _a;\n        const startSpanResult = getInstrumenter().startSpan(name, Object.assign(Object.assign({}, spanOptions), { packageName: packageName, packageVersion: packageVersion, tracingContext: (_a = operationOptions === null || operationOptions === void 0 ? void 0 : operationOptions.tracingOptions) === null || _a === void 0 ? void 0 : _a.tracingContext }));\n        let tracingContext = startSpanResult.tracingContext;\n        const span = startSpanResult.span;\n        if (!tracingContext.getValue(knownContextKeys.namespace)) {\n            tracingContext = tracingContext.setValue(knownContextKeys.namespace, namespace);\n        }\n        span.setAttribute(\"az.namespace\", tracingContext.getValue(knownContextKeys.namespace));\n        const updatedOptions = Object.assign({}, operationOptions, {\n            tracingOptions: Object.assign(Object.assign({}, operationOptions === null || operationOptions === void 0 ? void 0 : operationOptions.tracingOptions), { tracingContext }),\n        });\n        return {\n            span,\n            updatedOptions,\n        };\n    }\n    async function withSpan(name, operationOptions, callback, spanOptions) {\n        const { span, updatedOptions } = startSpan(name, operationOptions, spanOptions);\n        try {\n            const result = await withContext(updatedOptions.tracingOptions.tracingContext, () => Promise.resolve(callback(updatedOptions, span)));\n            span.setStatus({ status: \"success\" });\n            return result;\n        }\n        catch (err) {\n            span.setStatus({ status: \"error\", error: err });\n            throw err;\n        }\n        finally {\n            span.end();\n        }\n    }\n    function withContext(context, callback, ...callbackArgs) {\n        return getInstrumenter().withContext(context, callback, ...callbackArgs);\n    }\n    /**\n     * Parses a traceparent header value into a span identifier.\n     *\n     * @param traceparentHeader - The traceparent header to parse.\n     * @returns An implementation-specific identifier for the span.\n     */\n    function parseTraceparentHeader(traceparentHeader) {\n        return getInstrumenter().parseTraceparentHeader(traceparentHeader);\n    }\n    /**\n     * Creates a set of request headers to propagate tracing information to a backend.\n     *\n     * @param tracingContext - The context containing the span to serialize.\n     * @returns The set of headers to add to a request.\n     */\n    function createRequestHeaders(tracingContext) {\n        return getInstrumenter().createRequestHeaders(tracingContext);\n    }\n    return {\n        startSpan,\n        withSpan,\n        withContext,\n        parseTraceparentHeader,\n        createRequestHeaders,\n    };\n}\n//# sourceMappingURL=tracingClient.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { logPolicy } from \"./policies/logPolicy\";\nimport { createEmptyPipeline } from \"./pipeline\";\nimport { redirectPolicy } from \"./policies/redirectPolicy\";\nimport { userAgentPolicy } from \"./policies/userAgentPolicy\";\nimport { decompressResponsePolicy } from \"./policies/decompressResponsePolicy\";\nimport { defaultRetryPolicy } from \"./policies/defaultRetryPolicy\";\nimport { formDataPolicy } from \"./policies/formDataPolicy\";\nimport { isNode } from \"@azure/core-util\";\nimport { proxyPolicy } from \"./policies/proxyPolicy\";\nimport { setClientRequestIdPolicy } from \"./policies/setClientRequestIdPolicy\";\nimport { tlsPolicy } from \"./policies/tlsPolicy\";\nimport { tracingPolicy } from \"./policies/tracingPolicy\";\n/**\n * Create a new pipeline with a default set of customizable policies.\n * @param options - Options to configure a custom pipeline.\n */\nexport function createPipelineFromOptions(options) {\n    const pipeline = createEmptyPipeline();\n    if (isNode) {\n        if (options.tlsOptions) {\n            pipeline.addPolicy(tlsPolicy(options.tlsOptions));\n        }\n        pipeline.addPolicy(proxyPolicy(options.proxyOptions));\n        pipeline.addPolicy(decompressResponsePolicy());\n    }\n    pipeline.addPolicy(formDataPolicy());\n    pipeline.addPolicy(userAgentPolicy(options.userAgentOptions));\n    pipeline.addPolicy(setClientRequestIdPolicy());\n    pipeline.addPolicy(defaultRetryPolicy(options.retryOptions), { phase: \"Retry\" });\n    pipeline.addPolicy(tracingPolicy(options.userAgentOptions), { afterPhase: \"Retry\" });\n    if (isNode) {\n        // Both XHR and Fetch expect to handle redirects automatically,\n        // so only include this policy when we're in Node.\n        pipeline.addPolicy(redirectPolicy(options.redirectOptions), { afterPhase: \"Retry\" });\n    }\n    pipeline.addPolicy(logPolicy(options.loggingOptions), { afterPhase: \"Sign\" });\n    return pipeline;\n}\n//# sourceMappingURL=createPipelineFromOptions.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nfunction normalizeName(name) {\n    return name.toLowerCase();\n}\nfunction* headerIterator(map) {\n    for (const entry of map.values()) {\n        yield [entry.name, entry.value];\n    }\n}\nclass HttpHeadersImpl {\n    constructor(rawHeaders) {\n        this._headersMap = new Map();\n        if (rawHeaders) {\n            for (const headerName of Object.keys(rawHeaders)) {\n                this.set(headerName, rawHeaders[headerName]);\n            }\n        }\n    }\n    /**\n     * Set a header in this collection with the provided name and value. The name is\n     * case-insensitive.\n     * @param name - The name of the header to set. This value is case-insensitive.\n     * @param value - The value of the header to set.\n     */\n    set(name, value) {\n        this._headersMap.set(normalizeName(name), { name, value: String(value) });\n    }\n    /**\n     * Get the header value for the provided header name, or undefined if no header exists in this\n     * collection with the provided name.\n     * @param name - The name of the header. This value is case-insensitive.\n     */\n    get(name) {\n        var _a;\n        return (_a = this._headersMap.get(normalizeName(name))) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    /**\n     * Get whether or not this header collection contains a header entry for the provided header name.\n     * @param name - The name of the header to set. This value is case-insensitive.\n     */\n    has(name) {\n        return this._headersMap.has(normalizeName(name));\n    }\n    /**\n     * Remove the header with the provided headerName.\n     * @param name - The name of the header to remove.\n     */\n    delete(name) {\n        this._headersMap.delete(normalizeName(name));\n    }\n    /**\n     * Get the JSON object representation of this HTTP header collection.\n     */\n    toJSON(options = {}) {\n        const result = {};\n        if (options.preserveCase) {\n            for (const entry of this._headersMap.values()) {\n                result[entry.name] = entry.value;\n            }\n        }\n        else {\n            for (const [normalizedName, entry] of this._headersMap) {\n                result[normalizedName] = entry.value;\n            }\n        }\n        return result;\n    }\n    /**\n     * Get the string representation of this HTTP header collection.\n     */\n    toString() {\n        return JSON.stringify(this.toJSON({ preserveCase: true }));\n    }\n    /**\n     * Iterate over tuples of header [name, value] pairs.\n     */\n    [Symbol.iterator]() {\n        return headerIterator(this._headersMap);\n    }\n}\n/**\n * Creates an object that satisfies the `HttpHeaders` interface.\n * @param rawHeaders - A simple object representing initial headers\n */\nexport function createHttpHeaders(rawHeaders) {\n    return new HttpHeadersImpl(rawHeaders);\n}\n//# sourceMappingURL=httpHeaders.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport * as http from \"http\";\nimport * as https from \"https\";\nimport * as zlib from \"zlib\";\nimport { Transform } from \"stream\";\nimport { AbortController, AbortError } from \"@azure/abort-controller\";\nimport { createHttpHeaders } from \"./httpHeaders\";\nimport { RestError } from \"./restError\";\nimport { logger } from \"./log\";\nconst DEFAULT_TLS_SETTINGS = {};\nfunction isReadableStream(body) {\n    return body && typeof body.pipe === \"function\";\n}\nfunction isStreamComplete(stream) {\n    return new Promise((resolve) => {\n        stream.on(\"close\", resolve);\n        stream.on(\"end\", resolve);\n        stream.on(\"error\", resolve);\n    });\n}\nfunction isArrayBuffer(body) {\n    return body && typeof body.byteLength === \"number\";\n}\nclass ReportTransform extends Transform {\n    constructor(progressCallback) {\n        super();\n        this.loadedBytes = 0;\n        this.progressCallback = progressCallback;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    _transform(chunk, _encoding, callback) {\n        this.push(chunk);\n        this.loadedBytes += chunk.length;\n        try {\n            this.progressCallback({ loadedBytes: this.loadedBytes });\n            callback();\n        }\n        catch (e) {\n            callback(e);\n        }\n    }\n}\n/**\n * A HttpClient implementation that uses Node's \"https\" module to send HTTPS requests.\n * @internal\n */\nclass NodeHttpClient {\n    constructor() {\n        this.cachedHttpsAgents = new WeakMap();\n    }\n    /**\n     * Makes a request over an underlying transport layer and returns the response.\n     * @param request - The request to be made.\n     */\n    async sendRequest(request) {\n        var _a, _b, _c;\n        const abortController = new AbortController();\n        let abortListener;\n        if (request.abortSignal) {\n            if (request.abortSignal.aborted) {\n                throw new AbortError(\"The operation was aborted.\");\n            }\n            abortListener = (event) => {\n                if (event.type === \"abort\") {\n                    abortController.abort();\n                }\n            };\n            request.abortSignal.addEventListener(\"abort\", abortListener);\n        }\n        if (request.timeout > 0) {\n            setTimeout(() => {\n                abortController.abort();\n            }, request.timeout);\n        }\n        const acceptEncoding = request.headers.get(\"Accept-Encoding\");\n        const shouldDecompress = (acceptEncoding === null || acceptEncoding === void 0 ? void 0 : acceptEncoding.includes(\"gzip\")) || (acceptEncoding === null || acceptEncoding === void 0 ? void 0 : acceptEncoding.includes(\"deflate\"));\n        let body = typeof request.body === \"function\" ? request.body() : request.body;\n        if (body && !request.headers.has(\"Content-Length\")) {\n            const bodyLength = getBodyLength(body);\n            if (bodyLength !== null) {\n                request.headers.set(\"Content-Length\", bodyLength);\n            }\n        }\n        let responseStream;\n        try {\n            if (body && request.onUploadProgress) {\n                const onUploadProgress = request.onUploadProgress;\n                const uploadReportStream = new ReportTransform(onUploadProgress);\n                uploadReportStream.on(\"error\", (e) => {\n                    logger.error(\"Error in upload progress\", e);\n                });\n                if (isReadableStream(body)) {\n                    body.pipe(uploadReportStream);\n                }\n                else {\n                    uploadReportStream.end(body);\n                }\n                body = uploadReportStream;\n            }\n            const res = await this.makeRequest(request, abortController, body);\n            const headers = getResponseHeaders(res);\n            const status = (_a = res.statusCode) !== null && _a !== void 0 ? _a : 0;\n            const response = {\n                status,\n                headers,\n                request,\n            };\n            // Responses to HEAD must not have a body.\n            // If they do return a body, that body must be ignored.\n            if (request.method === \"HEAD\") {\n                // call resume() and not destroy() to avoid closing the socket\n                // and losing keep alive\n                res.resume();\n                return response;\n            }\n            responseStream = shouldDecompress ? getDecodedResponseStream(res, headers) : res;\n            const onDownloadProgress = request.onDownloadProgress;\n            if (onDownloadProgress) {\n                const downloadReportStream = new ReportTransform(onDownloadProgress);\n                downloadReportStream.on(\"error\", (e) => {\n                    logger.error(\"Error in download progress\", e);\n                });\n                responseStream.pipe(downloadReportStream);\n                responseStream = downloadReportStream;\n            }\n            if (\n            // Value of POSITIVE_INFINITY in streamResponseStatusCodes is considered as any status code\n            ((_b = request.streamResponseStatusCodes) === null || _b === void 0 ? void 0 : _b.has(Number.POSITIVE_INFINITY)) ||\n                ((_c = request.streamResponseStatusCodes) === null || _c === void 0 ? void 0 : _c.has(response.status))) {\n                response.readableStreamBody = responseStream;\n            }\n            else {\n                response.bodyAsText = await streamToText(responseStream);\n            }\n            return response;\n        }\n        finally {\n            // clean up event listener\n            if (request.abortSignal && abortListener) {\n                let uploadStreamDone = Promise.resolve();\n                if (isReadableStream(body)) {\n                    uploadStreamDone = isStreamComplete(body);\n                }\n                let downloadStreamDone = Promise.resolve();\n                if (isReadableStream(responseStream)) {\n                    downloadStreamDone = isStreamComplete(responseStream);\n                }\n                Promise.all([uploadStreamDone, downloadStreamDone])\n                    .then(() => {\n                    var _a;\n                    // eslint-disable-next-line promise/always-return\n                    if (abortListener) {\n                        (_a = request.abortSignal) === null || _a === void 0 ? void 0 : _a.removeEventListener(\"abort\", abortListener);\n                    }\n                })\n                    .catch((e) => {\n                    logger.warning(\"Error when cleaning up abortListener on httpRequest\", e);\n                });\n            }\n        }\n    }\n    makeRequest(request, abortController, body) {\n        var _a;\n        const url = new URL(request.url);\n        const isInsecure = url.protocol !== \"https:\";\n        if (isInsecure && !request.allowInsecureConnection) {\n            throw new Error(`Cannot connect to ${request.url} while allowInsecureConnection is false.`);\n        }\n        const agent = (_a = request.agent) !== null && _a !== void 0 ? _a : this.getOrCreateAgent(request, isInsecure);\n        const options = {\n            agent,\n            hostname: url.hostname,\n            path: `${url.pathname}${url.search}`,\n            port: url.port,\n            method: request.method,\n            headers: request.headers.toJSON({ preserveCase: true }),\n        };\n        return new Promise((resolve, reject) => {\n            const req = isInsecure ? http.request(options, resolve) : https.request(options, resolve);\n            req.once(\"error\", (err) => {\n                var _a;\n                reject(new RestError(err.message, { code: (_a = err.code) !== null && _a !== void 0 ? _a : RestError.REQUEST_SEND_ERROR, request }));\n            });\n            abortController.signal.addEventListener(\"abort\", () => {\n                const abortError = new AbortError(\"The operation was aborted.\");\n                req.destroy(abortError);\n                reject(abortError);\n            });\n            if (body && isReadableStream(body)) {\n                body.pipe(req);\n            }\n            else if (body) {\n                if (typeof body === \"string\" || Buffer.isBuffer(body)) {\n                    req.end(body);\n                }\n                else if (isArrayBuffer(body)) {\n                    req.end(ArrayBuffer.isView(body) ? Buffer.from(body.buffer) : Buffer.from(body));\n                }\n                else {\n                    logger.error(\"Unrecognized body type\", body);\n                    reject(new RestError(\"Unrecognized body type\"));\n                }\n            }\n            else {\n                // streams don't like \"undefined\" being passed as data\n                req.end();\n            }\n        });\n    }\n    getOrCreateAgent(request, isInsecure) {\n        var _a;\n        const disableKeepAlive = request.disableKeepAlive;\n        // Handle Insecure requests first\n        if (isInsecure) {\n            if (disableKeepAlive) {\n                // keepAlive:false is the default so we don't need a custom Agent\n                return http.globalAgent;\n            }\n            if (!this.cachedHttpAgent) {\n                // If there is no cached agent create a new one and cache it.\n                this.cachedHttpAgent = new http.Agent({ keepAlive: true });\n            }\n            return this.cachedHttpAgent;\n        }\n        else {\n            if (disableKeepAlive && !request.tlsSettings) {\n                // When there are no tlsSettings and keepAlive is false\n                // we don't need a custom agent\n                return https.globalAgent;\n            }\n            // We use the tlsSettings to index cached clients\n            const tlsSettings = (_a = request.tlsSettings) !== null && _a !== void 0 ? _a : DEFAULT_TLS_SETTINGS;\n            // Get the cached agent or create a new one with the\n            // provided values for keepAlive and tlsSettings\n            let agent = this.cachedHttpsAgents.get(tlsSettings);\n            if (agent && agent.options.keepAlive === !disableKeepAlive) {\n                return agent;\n            }\n            logger.info(\"No cached TLS Agent exist, creating a new Agent\");\n            agent = new https.Agent(Object.assign({ \n                // keepAlive is true if disableKeepAlive is false.\n                keepAlive: !disableKeepAlive }, tlsSettings));\n            this.cachedHttpsAgents.set(tlsSettings, agent);\n            return agent;\n        }\n    }\n}\nfunction getResponseHeaders(res) {\n    const headers = createHttpHeaders();\n    for (const header of Object.keys(res.headers)) {\n        const value = res.headers[header];\n        if (Array.isArray(value)) {\n            if (value.length > 0) {\n                headers.set(header, value[0]);\n            }\n        }\n        else if (value) {\n            headers.set(header, value);\n        }\n    }\n    return headers;\n}\nfunction getDecodedResponseStream(stream, headers) {\n    const contentEncoding = headers.get(\"Content-Encoding\");\n    if (contentEncoding === \"gzip\") {\n        const unzip = zlib.createGunzip();\n        stream.pipe(unzip);\n        return unzip;\n    }\n    else if (contentEncoding === \"deflate\") {\n        const inflate = zlib.createInflate();\n        stream.pipe(inflate);\n        return inflate;\n    }\n    return stream;\n}\nfunction streamToText(stream) {\n    return new Promise((resolve, reject) => {\n        const buffer = [];\n        stream.on(\"data\", (chunk) => {\n            if (Buffer.isBuffer(chunk)) {\n                buffer.push(chunk);\n            }\n            else {\n                buffer.push(Buffer.from(chunk));\n            }\n        });\n        stream.on(\"end\", () => {\n            resolve(Buffer.concat(buffer).toString(\"utf8\"));\n        });\n        stream.on(\"error\", (e) => {\n            if (e && (e === null || e === void 0 ? void 0 : e.name) === \"AbortError\") {\n                reject(e);\n            }\n            else {\n                reject(new RestError(`Error reading response as text: ${e.message}`, {\n                    code: RestError.PARSE_ERROR,\n                }));\n            }\n        });\n    });\n}\n/** @internal */\nexport function getBodyLength(body) {\n    if (!body) {\n        return 0;\n    }\n    else if (Buffer.isBuffer(body)) {\n        return body.length;\n    }\n    else if (isReadableStream(body)) {\n        return null;\n    }\n    else if (isArrayBuffer(body)) {\n        return body.byteLength;\n    }\n    else if (typeof body === \"string\") {\n        return Buffer.from(body).length;\n    }\n    else {\n        return null;\n    }\n}\n/**\n * Create a new HttpClient instance for the NodeJS environment.\n * @internal\n */\nexport function createNodeHttpClient() {\n    return new NodeHttpClient();\n}\n//# sourceMappingURL=nodeHttpClient.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createNodeHttpClient } from \"./nodeHttpClient\";\n/**\n * Create the correct HttpClient for the current environment.\n */\nexport function createDefaultHttpClient() {\n    return createNodeHttpClient();\n}\n//# sourceMappingURL=defaultHttpClient.js.map","import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createHttpHeaders } from \"./httpHeaders\";\nimport { generateUuid } from \"./util/uuid\";\nclass PipelineRequestImpl {\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        this.url = options.url;\n        this.body = options.body;\n        this.headers = (_a = options.headers) !== null && _a !== void 0 ? _a : createHttpHeaders();\n        this.method = (_b = options.method) !== null && _b !== void 0 ? _b : \"GET\";\n        this.timeout = (_c = options.timeout) !== null && _c !== void 0 ? _c : 0;\n        this.formData = options.formData;\n        this.disableKeepAlive = (_d = options.disableKeepAlive) !== null && _d !== void 0 ? _d : false;\n        this.proxySettings = options.proxySettings;\n        this.streamResponseStatusCodes = options.streamResponseStatusCodes;\n        this.withCredentials = (_e = options.withCredentials) !== null && _e !== void 0 ? _e : false;\n        this.abortSignal = options.abortSignal;\n        this.tracingOptions = options.tracingOptions;\n        this.onUploadProgress = options.onUploadProgress;\n        this.onDownloadProgress = options.onDownloadProgress;\n        this.requestId = options.requestId || generateUuid();\n        this.allowInsecureConnection = (_f = options.allowInsecureConnection) !== null && _f !== void 0 ? _f : false;\n        this.enableBrowserStreams = (_g = options.enableBrowserStreams) !== null && _g !== void 0 ? _g : false;\n    }\n}\n/**\n * Creates a new pipeline request with the given options.\n * This method is to allow for the easy setting of default values and not required.\n * @param options - The options to create the request with.\n */\nexport function createPipelineRequest(options) {\n    return new PipelineRequestImpl(options);\n}\n//# sourceMappingURL=pipelineRequest.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { v4 as uuidv4 } from \"uuid\";\n/**\n * Generated Universally Unique Identifier\n *\n * @returns RFC4122 v4 UUID.\n * @internal\n */\nexport function generateUuid() {\n    return uuidv4();\n}\n//# sourceMappingURL=uuid.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { exponentialRetryStrategy } from \"../retryStrategies/exponentialRetryStrategy\";\nimport { retryPolicy } from \"./retryPolicy\";\nimport { DEFAULT_RETRY_POLICY_COUNT } from \"../constants\";\n/**\n * The programmatic identifier of the exponentialRetryPolicy.\n */\nexport const exponentialRetryPolicyName = \"exponentialRetryPolicy\";\n/**\n * A policy that attempts to retry requests while introducing an exponentially increasing delay.\n * @param options - Options that configure retry logic.\n */\nexport function exponentialRetryPolicy(options = {}) {\n    var _a;\n    return retryPolicy([\n        exponentialRetryStrategy(Object.assign(Object.assign({}, options), { ignoreSystemErrors: true })),\n    ], {\n        maxRetries: (_a = options.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_RETRY_POLICY_COUNT,\n    });\n}\n//# sourceMappingURL=exponentialRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { exponentialRetryStrategy } from \"../retryStrategies/exponentialRetryStrategy\";\nimport { retryPolicy } from \"./retryPolicy\";\nimport { DEFAULT_RETRY_POLICY_COUNT } from \"../constants\";\n/**\n * Name of the {@link systemErrorRetryPolicy}\n */\nexport const systemErrorRetryPolicyName = \"systemErrorRetryPolicy\";\n/**\n * A retry policy that specifically seeks to handle errors in the\n * underlying transport layer (e.g. DNS lookup failures) rather than\n * retryable error codes from the server itself.\n * @param options - Options that customize the policy.\n */\nexport function systemErrorRetryPolicy(options = {}) {\n    var _a;\n    return {\n        name: systemErrorRetryPolicyName,\n        sendRequest: retryPolicy([\n            exponentialRetryStrategy(Object.assign(Object.assign({}, options), { ignoreHttpStatusCodes: true })),\n        ], {\n            maxRetries: (_a = options.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_RETRY_POLICY_COUNT,\n        }).sendRequest,\n    };\n}\n//# sourceMappingURL=systemErrorRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { throttlingRetryStrategy } from \"../retryStrategies/throttlingRetryStrategy\";\nimport { retryPolicy } from \"./retryPolicy\";\nimport { DEFAULT_RETRY_POLICY_COUNT } from \"../constants\";\n/**\n * Name of the {@link throttlingRetryPolicy}\n */\nexport const throttlingRetryPolicyName = \"throttlingRetryPolicy\";\n/**\n * A policy that retries when the server sends a 429 response with a Retry-After header.\n *\n * To learn more, please refer to\n * https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-manager-request-limits,\n * https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits and\n * https://docs.microsoft.com/en-us/azure/virtual-machines/troubleshooting/troubleshooting-throttling-errors\n *\n * @param options - Options that configure retry logic.\n */\nexport function throttlingRetryPolicy(options = {}) {\n    var _a;\n    return {\n        name: throttlingRetryPolicyName,\n        sendRequest: retryPolicy([throttlingRetryStrategy()], {\n            maxRetries: (_a = options.maxRetries) !== null && _a !== void 0 ? _a : DEFAULT_RETRY_POLICY_COUNT,\n        }).sendRequest,\n    };\n}\n//# sourceMappingURL=throttlingRetryPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { delay } from \"./helpers\";\n// Default options for the cycler if none are provided\nexport const DEFAULT_CYCLER_OPTIONS = {\n    forcedRefreshWindowInMs: 1000,\n    retryIntervalInMs: 3000,\n    refreshWindowInMs: 1000 * 60 * 2, // Start refreshing 2m before expiry\n};\n/**\n * Converts an an unreliable access token getter (which may resolve with null)\n * into an AccessTokenGetter by retrying the unreliable getter in a regular\n * interval.\n *\n * @param getAccessToken - A function that produces a promise of an access token that may fail by returning null.\n * @param retryIntervalInMs - The time (in milliseconds) to wait between retry attempts.\n * @param refreshTimeout - The timestamp after which the refresh attempt will fail, throwing an exception.\n * @returns - A promise that, if it resolves, will resolve with an access token.\n */\nasync function beginRefresh(getAccessToken, retryIntervalInMs, refreshTimeout) {\n    // This wrapper handles exceptions gracefully as long as we haven't exceeded\n    // the timeout.\n    async function tryGetAccessToken() {\n        if (Date.now() < refreshTimeout) {\n            try {\n                return await getAccessToken();\n            }\n            catch (_a) {\n                return null;\n            }\n        }\n        else {\n            const finalToken = await getAccessToken();\n            // Timeout is up, so throw if it's still null\n            if (finalToken === null) {\n                throw new Error(\"Failed to refresh access token.\");\n            }\n            return finalToken;\n        }\n    }\n    let token = await tryGetAccessToken();\n    while (token === null) {\n        await delay(retryIntervalInMs);\n        token = await tryGetAccessToken();\n    }\n    return token;\n}\n/**\n * Creates a token cycler from a credential, scopes, and optional settings.\n *\n * A token cycler represents a way to reliably retrieve a valid access token\n * from a TokenCredential. It will handle initializing the token, refreshing it\n * when it nears expiration, and synchronizes refresh attempts to avoid\n * concurrency hazards.\n *\n * @param credential - the underlying TokenCredential that provides the access\n * token\n * @param tokenCyclerOptions - optionally override default settings for the cycler\n *\n * @returns - a function that reliably produces a valid access token\n */\nexport function createTokenCycler(credential, tokenCyclerOptions) {\n    let refreshWorker = null;\n    let token = null;\n    let tenantId;\n    const options = Object.assign(Object.assign({}, DEFAULT_CYCLER_OPTIONS), tokenCyclerOptions);\n    /**\n     * This little holder defines several predicates that we use to construct\n     * the rules of refreshing the token.\n     */\n    const cycler = {\n        /**\n         * Produces true if a refresh job is currently in progress.\n         */\n        get isRefreshing() {\n            return refreshWorker !== null;\n        },\n        /**\n         * Produces true if the cycler SHOULD refresh (we are within the refresh\n         * window and not already refreshing)\n         */\n        get shouldRefresh() {\n            var _a;\n            return (!cycler.isRefreshing &&\n                ((_a = token === null || token === void 0 ? void 0 : token.expiresOnTimestamp) !== null && _a !== void 0 ? _a : 0) - options.refreshWindowInMs < Date.now());\n        },\n        /**\n         * Produces true if the cycler MUST refresh (null or nearly-expired\n         * token).\n         */\n        get mustRefresh() {\n            return (token === null || token.expiresOnTimestamp - options.forcedRefreshWindowInMs < Date.now());\n        },\n    };\n    /**\n     * Starts a refresh job or returns the existing job if one is already\n     * running.\n     */\n    function refresh(scopes, getTokenOptions) {\n        var _a;\n        if (!cycler.isRefreshing) {\n            // We bind `scopes` here to avoid passing it around a lot\n            const tryGetAccessToken = () => credential.getToken(scopes, getTokenOptions);\n            // Take advantage of promise chaining to insert an assignment to `token`\n            // before the refresh can be considered done.\n            refreshWorker = beginRefresh(tryGetAccessToken, options.retryIntervalInMs, \n            // If we don't have a token, then we should timeout immediately\n            (_a = token === null || token === void 0 ? void 0 : token.expiresOnTimestamp) !== null && _a !== void 0 ? _a : Date.now())\n                .then((_token) => {\n                refreshWorker = null;\n                token = _token;\n                tenantId = getTokenOptions.tenantId;\n                return token;\n            })\n                .catch((reason) => {\n                // We also should reset the refresher if we enter a failed state.  All\n                // existing awaiters will throw, but subsequent requests will start a\n                // new retry chain.\n                refreshWorker = null;\n                token = null;\n                tenantId = undefined;\n                throw reason;\n            });\n        }\n        return refreshWorker;\n    }\n    return async (scopes, tokenOptions) => {\n        //\n        // Simple rules:\n        // - If we MUST refresh, then return the refresh task, blocking\n        //   the pipeline until a token is available.\n        // - If we SHOULD refresh, then run refresh but don't return it\n        //   (we can still use the cached token).\n        // - Return the token, since it's fine if we didn't return in\n        //   step 1.\n        //\n        // If the tenantId passed in token options is different to the one we have\n        // Or if we are in claim challenge and the token was rejected and a new access token need to be issued, we need to\n        // refresh the token with the new tenantId or token.\n        const mustRefresh = tenantId !== tokenOptions.tenantId || Boolean(tokenOptions.claims) || cycler.mustRefresh;\n        if (mustRefresh)\n            return refresh(scopes, tokenOptions);\n        if (cycler.shouldRefresh) {\n            refresh(scopes, tokenOptions);\n        }\n        return token;\n    };\n}\n//# sourceMappingURL=tokenCycler.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { createTokenCycler } from \"../util/tokenCycler\";\nimport { logger as coreLogger } from \"../log\";\n/**\n * The programmatic identifier of the bearerTokenAuthenticationPolicy.\n */\nexport const bearerTokenAuthenticationPolicyName = \"bearerTokenAuthenticationPolicy\";\n/**\n * Default authorize request handler\n */\nasync function defaultAuthorizeRequest(options) {\n    const { scopes, getAccessToken, request } = options;\n    const getTokenOptions = {\n        abortSignal: request.abortSignal,\n        tracingOptions: request.tracingOptions,\n    };\n    const accessToken = await getAccessToken(scopes, getTokenOptions);\n    if (accessToken) {\n        options.request.headers.set(\"Authorization\", `Bearer ${accessToken.token}`);\n    }\n}\n/**\n * We will retrieve the challenge only if the response status code was 401,\n * and if the response contained the header \"WWW-Authenticate\" with a non-empty value.\n */\nfunction getChallenge(response) {\n    const challenge = response.headers.get(\"WWW-Authenticate\");\n    if (response.status === 401 && challenge) {\n        return challenge;\n    }\n    return;\n}\n/**\n * A policy that can request a token from a TokenCredential implementation and\n * then apply it to the Authorization header of a request as a Bearer token.\n */\nexport function bearerTokenAuthenticationPolicy(options) {\n    var _a;\n    const { credential, scopes, challengeCallbacks } = options;\n    const logger = options.logger || coreLogger;\n    const callbacks = Object.assign({ authorizeRequest: (_a = challengeCallbacks === null || challengeCallbacks === void 0 ? void 0 : challengeCallbacks.authorizeRequest) !== null && _a !== void 0 ? _a : defaultAuthorizeRequest, authorizeRequestOnChallenge: challengeCallbacks === null || challengeCallbacks === void 0 ? void 0 : challengeCallbacks.authorizeRequestOnChallenge }, challengeCallbacks);\n    // This function encapsulates the entire process of reliably retrieving the token\n    // The options are left out of the public API until there's demand to configure this.\n    // Remember to extend `BearerTokenAuthenticationPolicyOptions` with `TokenCyclerOptions`\n    // in order to pass through the `options` object.\n    const getAccessToken = credential\n        ? createTokenCycler(credential /* , options */)\n        : () => Promise.resolve(null);\n    return {\n        name: bearerTokenAuthenticationPolicyName,\n        /**\n         * If there's no challenge parameter:\n         * - It will try to retrieve the token using the cache, or the credential's getToken.\n         * - Then it will try the next policy with or without the retrieved token.\n         *\n         * It uses the challenge parameters to:\n         * - Skip a first attempt to get the token from the credential if there's no cached token,\n         *   since it expects the token to be retrievable only after the challenge.\n         * - Prepare the outgoing request if the `prepareRequest` method has been provided.\n         * - Send an initial request to receive the challenge if it fails.\n         * - Process a challenge if the response contains it.\n         * - Retrieve a token with the challenge information, then re-send the request.\n         */\n        async sendRequest(request, next) {\n            if (!request.url.toLowerCase().startsWith(\"https://\")) {\n                throw new Error(\"Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.\");\n            }\n            await callbacks.authorizeRequest({\n                scopes: Array.isArray(scopes) ? scopes : [scopes],\n                request,\n                getAccessToken,\n                logger,\n            });\n            let response;\n            let error;\n            try {\n                response = await next(request);\n            }\n            catch (err) {\n                error = err;\n                response = err.response;\n            }\n            if (callbacks.authorizeRequestOnChallenge &&\n                (response === null || response === void 0 ? void 0 : response.status) === 401 &&\n                getChallenge(response)) {\n                // processes challenge\n                const shouldSendRequest = await callbacks.authorizeRequestOnChallenge({\n                    scopes: Array.isArray(scopes) ? scopes : [scopes],\n                    request,\n                    response,\n                    getAccessToken,\n                    logger,\n                });\n                if (shouldSendRequest) {\n                    return next(request);\n                }\n            }\n            if (error) {\n                throw error;\n            }\n            else {\n                return response;\n            }\n        },\n    };\n}\n//# sourceMappingURL=bearerTokenAuthenticationPolicy.js.map","// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n/**\n * The programmatic identifier of the ndJsonPolicy.\n */\nexport const ndJsonPolicyName = \"ndJsonPolicy\";\n/**\n * ndJsonPolicy is a policy used to control keep alive settings for every request.\n */\nexport function ndJsonPolicy() {\n    return {\n        name: ndJsonPolicyName,\n        async sendRequest(request, next) {\n            // There currently isn't a good way to bypass the serializer\n            if (typeof request.body === \"string\" && request.body.startsWith(\"[\")) {\n                const body = JSON.parse(request.body);\n                if (Array.isArray(body)) {\n                    request.body = body.map((item) => JSON.stringify(item) + \"\\n\").join(\"\");\n                }\n            }\n            return next(request);\n        },\n    };\n}\n//# sourceMappingURL=ndJsonPolicy.js.map","var CombinedStream = require('combined-stream');\nvar util = require('util');\nvar path = require('path');\nvar http = require('http');\nvar https = require('https');\nvar parseUrl = require('url').parse;\nvar fs = require('fs');\nvar Stream = require('stream').Stream;\nvar mime = require('mime-types');\nvar asynckit = require('asynckit');\nvar populate = require('./populate.js');\n\n// Public API\nmodule.exports = FormData;\n\n// make it a Stream\nutil.inherits(FormData, CombinedStream);\n\n/**\n * Create readable \"multipart/form-data\" streams.\n * Can be used to submit forms\n * and file uploads to other web applications.\n *\n * @constructor\n * @param {Object} options - Properties to be added/overriden for FormData and CombinedStream\n */\nfunction FormData(options) {\n  if (!(this instanceof FormData)) {\n    return new FormData(options);\n  }\n\n  this._overheadLength = 0;\n  this._valueLength = 0;\n  this._valuesToMeasure = [];\n\n  CombinedStream.call(this);\n\n  options = options || {};\n  for (var option in options) {\n    this[option] = options[option];\n  }\n}\n\nFormData.LINE_BREAK = '\\r\\n';\nFormData.DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nFormData.prototype.append = function(field, value, options) {\n\n  options = options || {};\n\n  // allow filename as single option\n  if (typeof options == 'string') {\n    options = {filename: options};\n  }\n\n  var append = CombinedStream.prototype.append.bind(this);\n\n  // all that streamy business can't handle numbers\n  if (typeof value == 'number') {\n    value = '' + value;\n  }\n\n  // https://github.com/felixge/node-form-data/issues/38\n  if (util.isArray(value)) {\n    // Please convert your array into string\n    // the way web server expects it\n    this._error(new Error('Arrays are not supported.'));\n    return;\n  }\n\n  var header = this._multiPartHeader(field, value, options);\n  var footer = this._multiPartFooter();\n\n  append(header);\n  append(value);\n  append(footer);\n\n  // pass along options.knownLength\n  this._trackLength(header, value, options);\n};\n\nFormData.prototype._trackLength = function(header, value, options) {\n  var valueLength = 0;\n\n  // used w/ getLengthSync(), when length is known.\n  // e.g. for streaming directly from a remote server,\n  // w/ a known file a size, and not wanting to wait for\n  // incoming file to finish to get its size.\n  if (options.knownLength != null) {\n    valueLength += +options.knownLength;\n  } else if (Buffer.isBuffer(value)) {\n    valueLength = value.length;\n  } else if (typeof value === 'string') {\n    valueLength = Buffer.byteLength(value);\n  }\n\n  this._valueLength += valueLength;\n\n  // @check why add CRLF? does this account for custom/multiple CRLFs?\n  this._overheadLength +=\n    Buffer.byteLength(header) +\n    FormData.LINE_BREAK.length;\n\n  // empty or either doesn't have path or not an http response or not a stream\n  if (!value || ( !value.path && !(value.readable && value.hasOwnProperty('httpVersion')) && !(value instanceof Stream))) {\n    return;\n  }\n\n  // no need to bother with the length\n  if (!options.knownLength) {\n    this._valuesToMeasure.push(value);\n  }\n};\n\nFormData.prototype._lengthRetriever = function(value, callback) {\n\n  if (value.hasOwnProperty('fd')) {\n\n    // take read range into a account\n    // `end` = Infinity –> read file till the end\n    //\n    // TODO: Looks like there is bug in Node fs.createReadStream\n    // it doesn't respect `end` options without `start` options\n    // Fix it when node fixes it.\n    // https://github.com/joyent/node/issues/7819\n    if (value.end != undefined && value.end != Infinity && value.start != undefined) {\n\n      // when end specified\n      // no need to calculate range\n      // inclusive, starts with 0\n      callback(null, value.end + 1 - (value.start ? value.start : 0));\n\n    // not that fast snoopy\n    } else {\n      // still need to fetch file size from fs\n      fs.stat(value.path, function(err, stat) {\n\n        var fileSize;\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        // update final size based on the range options\n        fileSize = stat.size - (value.start ? value.start : 0);\n        callback(null, fileSize);\n      });\n    }\n\n  // or http response\n  } else if (value.hasOwnProperty('httpVersion')) {\n    callback(null, +value.headers['content-length']);\n\n  // or request stream http://github.com/mikeal/request\n  } else if (value.hasOwnProperty('httpModule')) {\n    // wait till response come back\n    value.on('response', function(response) {\n      value.pause();\n      callback(null, +response.headers['content-length']);\n    });\n    value.resume();\n\n  // something else\n  } else {\n    callback('Unknown stream');\n  }\n};\n\nFormData.prototype._multiPartHeader = function(field, value, options) {\n  // custom header specified (as string)?\n  // it becomes responsible for boundary\n  // (e.g. to handle extra CRLFs on .NET servers)\n  if (typeof options.header == 'string') {\n    return options.header;\n  }\n\n  var contentDisposition = this._getContentDisposition(value, options);\n  var contentType = this._getContentType(value, options);\n\n  var contents = '';\n  var headers  = {\n    // add custom disposition as third element or keep it two elements if not\n    'Content-Disposition': ['form-data', 'name=\"' + field + '\"'].concat(contentDisposition || []),\n    // if no content type. allow it to be empty array\n    'Content-Type': [].concat(contentType || [])\n  };\n\n  // allow custom headers.\n  if (typeof options.header == 'object') {\n    populate(headers, options.header);\n  }\n\n  var header;\n  for (var prop in headers) {\n    if (!headers.hasOwnProperty(prop)) continue;\n    header = headers[prop];\n\n    // skip nullish headers.\n    if (header == null) {\n      continue;\n    }\n\n    // convert all headers to arrays.\n    if (!Array.isArray(header)) {\n      header = [header];\n    }\n\n    // add non-empty headers.\n    if (header.length) {\n      contents += prop + ': ' + header.join('; ') + FormData.LINE_BREAK;\n    }\n  }\n\n  return '--' + this.getBoundary() + FormData.LINE_BREAK + contents + FormData.LINE_BREAK;\n};\n\nFormData.prototype._getContentDisposition = function(value, options) {\n\n  var filename\n    , contentDisposition\n    ;\n\n  if (typeof options.filepath === 'string') {\n    // custom filepath for relative paths\n    filename = path.normalize(options.filepath).replace(/\\\\/g, '/');\n  } else if (options.filename || value.name || value.path) {\n    // custom filename take precedence\n    // formidable and the browser add a name property\n    // fs- and request- streams have path property\n    filename = path.basename(options.filename || value.name || value.path);\n  } else if (value.readable && value.hasOwnProperty('httpVersion')) {\n    // or try http response\n    filename = path.basename(value.client._httpMessage.path || '');\n  }\n\n  if (filename) {\n    contentDisposition = 'filename=\"' + filename + '\"';\n  }\n\n  return contentDisposition;\n};\n\nFormData.prototype._getContentType = function(value, options) {\n\n  // use custom content-type above all\n  var contentType = options.contentType;\n\n  // or try `name` from formidable, browser\n  if (!contentType && value.name) {\n    contentType = mime.lookup(value.name);\n  }\n\n  // or try `path` from fs-, request- streams\n  if (!contentType && value.path) {\n    contentType = mime.lookup(value.path);\n  }\n\n  // or if it's http-reponse\n  if (!contentType && value.readable && value.hasOwnProperty('httpVersion')) {\n    contentType = value.headers['content-type'];\n  }\n\n  // or guess it from the filepath or filename\n  if (!contentType && (options.filepath || options.filename)) {\n    contentType = mime.lookup(options.filepath || options.filename);\n  }\n\n  // fallback to the default content type if `value` is not simple value\n  if (!contentType && typeof value == 'object') {\n    contentType = FormData.DEFAULT_CONTENT_TYPE;\n  }\n\n  return contentType;\n};\n\nFormData.prototype._multiPartFooter = function() {\n  return function(next) {\n    var footer = FormData.LINE_BREAK;\n\n    var lastPart = (this._streams.length === 0);\n    if (lastPart) {\n      footer += this._lastBoundary();\n    }\n\n    next(footer);\n  }.bind(this);\n};\n\nFormData.prototype._lastBoundary = function() {\n  return '--' + this.getBoundary() + '--' + FormData.LINE_BREAK;\n};\n\nFormData.prototype.getHeaders = function(userHeaders) {\n  var header;\n  var formHeaders = {\n    'content-type': 'multipart/form-data; boundary=' + this.getBoundary()\n  };\n\n  for (header in userHeaders) {\n    if (userHeaders.hasOwnProperty(header)) {\n      formHeaders[header.toLowerCase()] = userHeaders[header];\n    }\n  }\n\n  return formHeaders;\n};\n\nFormData.prototype.setBoundary = function(boundary) {\n  this._boundary = boundary;\n};\n\nFormData.prototype.getBoundary = function() {\n  if (!this._boundary) {\n    this._generateBoundary();\n  }\n\n  return this._boundary;\n};\n\nFormData.prototype.getBuffer = function() {\n  var dataBuffer = new Buffer.alloc( 0 );\n  var boundary = this.getBoundary();\n\n  // Create the form content. Add Line breaks to the end of data.\n  for (var i = 0, len = this._streams.length; i < len; i++) {\n    if (typeof this._streams[i] !== 'function') {\n\n      // Add content to the buffer.\n      if(Buffer.isBuffer(this._streams[i])) {\n        dataBuffer = Buffer.concat( [dataBuffer, this._streams[i]]);\n      }else {\n        dataBuffer = Buffer.concat( [dataBuffer, Buffer.from(this._streams[i])]);\n      }\n\n      // Add break after content.\n      if (typeof this._streams[i] !== 'string' || this._streams[i].substring( 2, boundary.length + 2 ) !== boundary) {\n        dataBuffer = Buffer.concat( [dataBuffer, Buffer.from(FormData.LINE_BREAK)] );\n      }\n    }\n  }\n\n  // Add the footer and return the Buffer object.\n  return Buffer.concat( [dataBuffer, Buffer.from(this._lastBoundary())] );\n};\n\nFormData.prototype._generateBoundary = function() {\n  // This generates a 50 character boundary similar to those used by Firefox.\n  // They are optimized for boyer-moore parsing.\n  var boundary = '--------------------------';\n  for (var i = 0; i < 24; i++) {\n    boundary += Math.floor(Math.random() * 10).toString(16);\n  }\n\n  this._boundary = boundary;\n};\n\n// Note: getLengthSync DOESN'T calculate streams length\n// As workaround one can calculate file size manually\n// and add it as knownLength option\nFormData.prototype.getLengthSync = function() {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  // Don't get confused, there are 3 \"internal\" streams for each keyval pair\n  // so it basically checks if there is any value added to the form\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  // https://github.com/form-data/form-data/issues/40\n  if (!this.hasKnownLength()) {\n    // Some async length retrievers are present\n    // therefore synchronous length calculation is false.\n    // Please use getLength(callback) to get proper length\n    this._error(new Error('Cannot calculate proper length in synchronous way.'));\n  }\n\n  return knownLength;\n};\n\n// Public API to check if length of added values is known\n// https://github.com/form-data/form-data/issues/196\n// https://github.com/form-data/form-data/issues/262\nFormData.prototype.hasKnownLength = function() {\n  var hasKnownLength = true;\n\n  if (this._valuesToMeasure.length) {\n    hasKnownLength = false;\n  }\n\n  return hasKnownLength;\n};\n\nFormData.prototype.getLength = function(cb) {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  if (!this._valuesToMeasure.length) {\n    process.nextTick(cb.bind(this, null, knownLength));\n    return;\n  }\n\n  asynckit.parallel(this._valuesToMeasure, this._lengthRetriever, function(err, values) {\n    if (err) {\n      cb(err);\n      return;\n    }\n\n    values.forEach(function(length) {\n      knownLength += length;\n    });\n\n    cb(null, knownLength);\n  });\n};\n\nFormData.prototype.submit = function(params, cb) {\n  var request\n    , options\n    , defaults = {method: 'post'}\n    ;\n\n  // parse provided url if it's string\n  // or treat it as options object\n  if (typeof params == 'string') {\n\n    params = parseUrl(params);\n    options = populate({\n      port: params.port,\n      path: params.pathname,\n      host: params.hostname,\n      protocol: params.protocol\n    }, defaults);\n\n  // use custom params\n  } else {\n\n    options = populate(params, defaults);\n    // if no port provided use default one\n    if (!options.port) {\n      options.port = options.protocol == 'https:' ? 443 : 80;\n    }\n  }\n\n  // put that good code in getHeaders to some use\n  options.headers = this.getHeaders(params.headers);\n\n  // https if specified, fallback to http in any other case\n  if (options.protocol == 'https:') {\n    request = https.request(options);\n  } else {\n    request = http.request(options);\n  }\n\n  // get content length and fire away\n  this.getLength(function(err, length) {\n    if (err && err !== 'Unknown stream') {\n      this._error(err);\n      return;\n    }\n\n    // add content length\n    if (length) {\n      request.setHeader('Content-Length', length);\n    }\n\n    this.pipe(request);\n    if (cb) {\n      var onResponse;\n\n      var callback = function (error, responce) {\n        request.removeListener('error', callback);\n        request.removeListener('response', onResponse);\n\n        return cb.call(this, error, responce);\n      };\n\n      onResponse = callback.bind(this, null);\n\n      request.on('error', callback);\n      request.on('response', onResponse);\n    }\n  }.bind(this));\n\n  return request;\n};\n\nFormData.prototype._error = function(err) {\n  if (!this.error) {\n    this.error = err;\n    this.pause();\n    this.emit('error', err);\n  }\n};\n\nFormData.prototype.toString = function () {\n  return '[object FormData]';\n};\n","// populates missing values\nmodule.exports = function(dst, src) {\n\n  Object.keys(src).forEach(function(prop)\n  {\n    dst[prop] = dst[prop] || src[prop];\n  });\n\n  return dst;\n};\n","// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License. See License.txt in the project root for license information.\nvar Environment = /** @class */ (function () {\n    function Environment(parameters) {\n        /**\n         * Determines whether the authentication endpoint should be validated with Azure AD. Default value is true.\n         */\n        this.validateAuthority = true;\n        if (!parameters || typeof parameters !== \"object\") {\n            throw new Error(\"'parameters' is a required parameter and must be of type 'object'.\");\n        }\n        // Validate required parameters\n        var requiredParams = [\"name\", \"portalUrl\", \"managementEndpointUrl\", \"resourceManagerEndpointUrl\",\n            \"activeDirectoryEndpointUrl\", \"activeDirectoryResourceId\"];\n        requiredParams.forEach(function (param) {\n            if (!parameters[param] || typeof parameters[param].valueOf() !== \"string\") {\n                throw new Error(\"Please provide \\\"\" + param + \"\\\" for the environment and it must be of type \\\"string\\\".\");\n            }\n        });\n        this.name = parameters.name;\n        this.portalUrl = parameters.portalUrl;\n        this.managementEndpointUrl = parameters.managementEndpointUrl;\n        this.resourceManagerEndpointUrl = parameters.resourceManagerEndpointUrl;\n        this.activeDirectoryEndpointUrl = parameters.activeDirectoryEndpointUrl;\n        this.activeDirectoryResourceId = parameters.activeDirectoryResourceId;\n        if (this.activeDirectoryGraphApiVersion) {\n            this.activeDirectoryGraphApiVersion = parameters.activeDirectoryGraphApiVersion;\n        }\n        if (this.activeDirectoryGraphResourceId) {\n            this.activeDirectoryGraphResourceId = parameters.activeDirectoryGraphResourceId;\n        }\n        if (this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix) {\n            this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix = parameters.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix;\n        }\n        if (this.azureDataLakeStoreFileSystemEndpointSuffix) {\n            this.azureDataLakeStoreFileSystemEndpointSuffix = parameters.azureDataLakeStoreFileSystemEndpointSuffix;\n        }\n        if (this.batchResourceId) {\n            this.batchResourceId = parameters.batchResourceId;\n        }\n        if (this.galleryEndpointUrl) {\n            this.galleryEndpointUrl = parameters.galleryEndpointUrl;\n        }\n        if (this.keyVaultDnsSuffix) {\n            this.keyVaultDnsSuffix = parameters.keyVaultDnsSuffix;\n        }\n        if (this.publishingProfileUrl) {\n            this.publishingProfileUrl = parameters.publishingProfileUrl;\n        }\n        if (this.sqlManagementEndpointUrl) {\n            this.sqlManagementEndpointUrl = parameters.sqlManagementEndpointUrl;\n        }\n        if (this.sqlServerHostnameSuffix) {\n            this.sqlServerHostnameSuffix = parameters.sqlServerHostnameSuffix;\n        }\n        if (this.storageEndpointSuffix) {\n            this.storageEndpointSuffix = parameters.storageEndpointSuffix;\n        }\n    }\n    Environment.add = function (parameters) {\n        var envContainer = {};\n        var envObj = new Environment(parameters);\n        envContainer[parameters.name] = envObj;\n        Object.assign(Environment, envContainer);\n        return;\n    };\n    Environment.get = function (name) {\n        if (!name) {\n            throw new TypeError(\"name cannot be null or undefined and must be of type string.\");\n        }\n        return Environment[name];\n    };\n    Environment.AzureCloud = {\n        name: \"AzureCloud\",\n        portalUrl: \"https://portal.azure.com\",\n        publishingProfileUrl: \"https://go.microsoft.com/fwlink/?LinkId=254432\",\n        managementEndpointUrl: \"https://management.core.windows.net\",\n        resourceManagerEndpointUrl: \"https://management.azure.com/\",\n        sqlManagementEndpointUrl: \"https://management.core.windows.net:8443/\",\n        sqlServerHostnameSuffix: \".database.windows.net\",\n        galleryEndpointUrl: \"https://gallery.azure.com/\",\n        activeDirectoryEndpointUrl: \"https://login.microsoftonline.com/\",\n        activeDirectoryResourceId: \"https://management.core.windows.net/\",\n        activeDirectoryGraphResourceId: \"https://graph.windows.net/\",\n        batchResourceId: \"https://batch.core.windows.net/\",\n        activeDirectoryGraphApiVersion: \"2013-04-05\",\n        storageEndpointSuffix: \"core.windows.net\",\n        keyVaultDnsSuffix: \".vault.azure.net\",\n        azureDataLakeStoreFileSystemEndpointSuffix: \"azuredatalakestore.net\",\n        azureDataLakeAnalyticsCatalogAndJobEndpointSuffix: \"azuredatalakeanalytics.net\",\n        validateAuthority: true\n    };\n    Environment.ChinaCloud = {\n        name: \"AzureChinaCloud\",\n        portalUrl: \"https://portal.azure.cn\",\n        publishingProfileUrl: \"https://go.microsoft.com/fwlink/?LinkID=301774\",\n        managementEndpointUrl: \"https://management.core.chinacloudapi.cn\",\n        resourceManagerEndpointUrl: \"https://management.chinacloudapi.cn\",\n        sqlManagementEndpointUrl: \"https://management.core.chinacloudapi.cn:8443/\",\n        sqlServerHostnameSuffix: \".database.chinacloudapi.cn\",\n        galleryEndpointUrl: \"https://gallery.chinacloudapi.cn/\",\n        activeDirectoryEndpointUrl: \"https://login.chinacloudapi.cn/\",\n        activeDirectoryResourceId: \"https://management.core.chinacloudapi.cn/\",\n        activeDirectoryGraphResourceId: \"https://graph.chinacloudapi.cn/\",\n        activeDirectoryGraphApiVersion: \"2013-04-05\",\n        batchResourceId: \"https://batch.chinacloudapi.cn/\",\n        storageEndpointSuffix: \"core.chinacloudapi.cn\",\n        keyVaultDnsSuffix: \".vault.azure.cn\",\n        // TODO: add dns suffixes for the china cloud for datalake store and datalake analytics once they are defined.\n        azureDataLakeStoreFileSystemEndpointSuffix: \"N/A\",\n        azureDataLakeAnalyticsCatalogAndJobEndpointSuffix: \"N/A\",\n        validateAuthority: true\n    };\n    Environment.USGovernment = {\n        name: \"AzureUSGovernment\",\n        portalUrl: \"https://portal.azure.us\",\n        publishingProfileUrl: \"https://manage.windowsazure.us/publishsettings/index\",\n        managementEndpointUrl: \"https://management.core.usgovcloudapi.net\",\n        resourceManagerEndpointUrl: \"https://management.usgovcloudapi.net\",\n        sqlManagementEndpointUrl: \"https://management.core.usgovcloudapi.net:8443/\",\n        sqlServerHostnameSuffix: \".database.usgovcloudapi.net\",\n        galleryEndpointUrl: \"https://gallery.usgovcloudapi.net/\",\n        activeDirectoryEndpointUrl: \"https://login.microsoftonline.us/\",\n        activeDirectoryResourceId: \"https://management.core.usgovcloudapi.net/\",\n        activeDirectoryGraphResourceId: \"https://graph.windows.net/\",\n        batchResourceId: \"https://batch.core.usgovcloudapi.net/\",\n        activeDirectoryGraphApiVersion: \"2013-04-05\",\n        storageEndpointSuffix: \"core.usgovcloudapi.net\",\n        keyVaultDnsSuffix: \".vault.usgovcloudapi.net\",\n        azureDataLakeStoreFileSystemEndpointSuffix: \"N/A\",\n        azureDataLakeAnalyticsCatalogAndJobEndpointSuffix: \"N/A\",\n        validateAuthority: true\n    };\n    Environment.GermanCloud = {\n        name: \"AzureGermanCloud\",\n        portalUrl: \"https://portal.microsoftazure.de/\",\n        publishingProfileUrl: \"https://manage.microsoftazure.de/publishsettings/index\",\n        managementEndpointUrl: \"https://management.core.cloudapi.de\",\n        resourceManagerEndpointUrl: \"https://management.microsoftazure.de\",\n        sqlManagementEndpointUrl: \"https://management.core.cloudapi.de:8443/\",\n        sqlServerHostnameSuffix: \".database.cloudapi.de\",\n        galleryEndpointUrl: \"https://gallery.cloudapi.de/\",\n        activeDirectoryEndpointUrl: \"https://login.microsoftonline.de/\",\n        activeDirectoryResourceId: \"https://management.core.cloudapi.de/\",\n        activeDirectoryGraphResourceId: \"https://graph.cloudapi.de/\",\n        batchResourceId: \"https://batch.microsoftazure.de/\",\n        activeDirectoryGraphApiVersion: \"2013-04-05\",\n        storageEndpointSuffix: \"core.cloudapi.de\",\n        keyVaultDnsSuffix: \".vault.microsoftazure.de\",\n        azureDataLakeStoreFileSystemEndpointSuffix: \"N/A\",\n        azureDataLakeAnalyticsCatalogAndJobEndpointSuffix: \"N/A\",\n        validateAuthority: true\n    };\n    return Environment;\n}());\nexport { Environment };\n//# sourceMappingURL=azureEnvironment.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjAssign, ObjClass, ObjCreate, ObjDefineProperty, ObjHasOwnProperty, ObjProto, strDefault, strShimFunction, strShimHasOwnProperty, strShimPrototype } from \"./Constants\";\r\nimport { getGlobal, objCreateFn, throwTypeError } from \"./Helpers\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES3 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasSymbol = !!SymbolObj;\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strShimHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = ObjAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strShimHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreateFn(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (ObjHasOwnProperty.call(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && ObjDefineProperty(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !ObjHasOwnProperty.call(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (ObjDefineProperty) {\r\n        ObjDefineProperty(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n//  @skip-file-minify\r\nvar _a;\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\nvar FAILED = \"Failed\";\r\nvar FAILED_MONITOR_AJAX = FAILED + \"MonitorAjax\";\r\nvar TRACK = \"Track\";\r\nvar START = \"Start\";\r\nvar STOP = \"Stop\";\r\nvar EVENT = \"Event\";\r\nvar AUTH_CONTEXT = \"AuthContext\";\r\nvar EXCEPTION = \"Exception\";\r\nvar LOCAL = \"Local\";\r\nvar SESSION = \"Session\";\r\nvar STORAGE = \"Storage\";\r\nvar BROWSER = \"Browser\";\r\nvar CANNOT = \"Cannot\";\r\nvar BUFFER = \"Buffer\";\r\nvar INSTRUMENTATION_KEY = \"InstrumentationKey\";\r\nexport var LoggingSeverity = createEnumStyle({\r\n    CRITICAL: 1 /* eLoggingSeverity.CRITICAL */,\r\n    WARNING: 2 /* eLoggingSeverity.WARNING */\r\n});\r\n/**\r\n * Internal message ID. Please create a new one for every conceptually different message. Please keep alphabetically ordered\r\n */\r\nexport var _InternalMessageId = createEnumStyle((_a = {},\r\n    // Non user actionable\r\n    _a[BROWSER + \"DoesNotSupport\" + LOCAL + STORAGE] = 0 /* _eInternalMessageId.BrowserDoesNotSupportLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Read\" + LOCAL + STORAGE] = 1 /* _eInternalMessageId.BrowserCannotReadLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Read\" + SESSION + STORAGE] = 2 /* _eInternalMessageId.BrowserCannotReadSessionStorage */,\r\n    _a[BROWSER + CANNOT + \"Write\" + LOCAL + STORAGE] = 3 /* _eInternalMessageId.BrowserCannotWriteLocalStorage */,\r\n    _a[BROWSER + CANNOT + \"Write\" + SESSION + STORAGE] = 4 /* _eInternalMessageId.BrowserCannotWriteSessionStorage */,\r\n    _a[BROWSER + FAILED + \"RemovalFrom\" + LOCAL + STORAGE] = 5 /* _eInternalMessageId.BrowserFailedRemovalFromLocalStorage */,\r\n    _a[BROWSER + FAILED + \"RemovalFrom\" + SESSION + STORAGE] = 6 /* _eInternalMessageId.BrowserFailedRemovalFromSessionStorage */,\r\n    _a[CANNOT + \"SendEmptyTelemetry\"] = 7 /* _eInternalMessageId.CannotSendEmptyTelemetry */,\r\n    _a.ClientPerformanceMathError = 8 /* _eInternalMessageId.ClientPerformanceMathError */,\r\n    _a[\"ErrorParsingAI\" + SESSION + \"Cookie\"] = 9 /* _eInternalMessageId.ErrorParsingAISessionCookie */,\r\n    _a.ErrorPVCalc = 10 /* _eInternalMessageId.ErrorPVCalc */,\r\n    _a[EXCEPTION + \"WhileLoggingError\"] = 11 /* _eInternalMessageId.ExceptionWhileLoggingError */,\r\n    _a[FAILED + \"AddingTelemetryTo\" + BUFFER] = 12 /* _eInternalMessageId.FailedAddingTelemetryToBuffer */,\r\n    _a[FAILED_MONITOR_AJAX + \"Abort\"] = 13 /* _eInternalMessageId.FailedMonitorAjaxAbort */,\r\n    _a[FAILED_MONITOR_AJAX + \"Dur\"] = 14 /* _eInternalMessageId.FailedMonitorAjaxDur */,\r\n    _a[FAILED_MONITOR_AJAX + \"Open\"] = 15 /* _eInternalMessageId.FailedMonitorAjaxOpen */,\r\n    _a[FAILED_MONITOR_AJAX + \"RSC\"] = 16 /* _eInternalMessageId.FailedMonitorAjaxRSC */,\r\n    _a[FAILED_MONITOR_AJAX + \"Send\"] = 17 /* _eInternalMessageId.FailedMonitorAjaxSend */,\r\n    _a[FAILED_MONITOR_AJAX + \"GetCorrelationHeader\"] = 18 /* _eInternalMessageId.FailedMonitorAjaxGetCorrelationHeader */,\r\n    _a[FAILED + \"ToAddHandlerForOnBeforeUnload\"] = 19 /* _eInternalMessageId.FailedToAddHandlerForOnBeforeUnload */,\r\n    _a[FAILED + \"ToSendQueuedTelemetry\"] = 20 /* _eInternalMessageId.FailedToSendQueuedTelemetry */,\r\n    _a[FAILED + \"ToReportDataLoss\"] = 21 /* _eInternalMessageId.FailedToReportDataLoss */,\r\n    _a[\"Flush\" + FAILED] = 22 /* _eInternalMessageId.FlushFailed */,\r\n    _a.MessageLimitPerPVExceeded = 23 /* _eInternalMessageId.MessageLimitPerPVExceeded */,\r\n    _a.MissingRequiredFieldSpecification = 24 /* _eInternalMessageId.MissingRequiredFieldSpecification */,\r\n    _a.NavigationTimingNotSupported = 25 /* _eInternalMessageId.NavigationTimingNotSupported */,\r\n    _a.OnError = 26 /* _eInternalMessageId.OnError */,\r\n    _a[SESSION + \"RenewalDateIsZero\"] = 27 /* _eInternalMessageId.SessionRenewalDateIsZero */,\r\n    _a.SenderNotInitialized = 28 /* _eInternalMessageId.SenderNotInitialized */,\r\n    _a[START + TRACK + EVENT + FAILED] = 29 /* _eInternalMessageId.StartTrackEventFailed */,\r\n    _a[STOP + TRACK + EVENT + FAILED] = 30 /* _eInternalMessageId.StopTrackEventFailed */,\r\n    _a[START + TRACK + FAILED] = 31 /* _eInternalMessageId.StartTrackFailed */,\r\n    _a[STOP + TRACK + FAILED] = 32 /* _eInternalMessageId.StopTrackFailed */,\r\n    _a.TelemetrySampledAndNotSent = 33 /* _eInternalMessageId.TelemetrySampledAndNotSent */,\r\n    _a[TRACK + EVENT + FAILED] = 34 /* _eInternalMessageId.TrackEventFailed */,\r\n    _a[TRACK + EXCEPTION + FAILED] = 35 /* _eInternalMessageId.TrackExceptionFailed */,\r\n    _a[TRACK + \"Metric\" + FAILED] = 36 /* _eInternalMessageId.TrackMetricFailed */,\r\n    _a[TRACK + \"PV\" + FAILED] = 37 /* _eInternalMessageId.TrackPVFailed */,\r\n    _a[TRACK + \"PV\" + FAILED + \"Calc\"] = 38 /* _eInternalMessageId.TrackPVFailedCalc */,\r\n    _a[TRACK + \"Trace\" + FAILED] = 39 /* _eInternalMessageId.TrackTraceFailed */,\r\n    _a[\"Transmission\" + FAILED] = 40 /* _eInternalMessageId.TransmissionFailed */,\r\n    _a[FAILED + \"ToSet\" + STORAGE + BUFFER] = 41 /* _eInternalMessageId.FailedToSetStorageBuffer */,\r\n    _a[FAILED + \"ToRestore\" + STORAGE + BUFFER] = 42 /* _eInternalMessageId.FailedToRestoreStorageBuffer */,\r\n    _a.InvalidBackendResponse = 43 /* _eInternalMessageId.InvalidBackendResponse */,\r\n    _a[FAILED + \"ToFixDepricatedValues\"] = 44 /* _eInternalMessageId.FailedToFixDepricatedValues */,\r\n    _a.InvalidDurationValue = 45 /* _eInternalMessageId.InvalidDurationValue */,\r\n    _a.TelemetryEnvelopeInvalid = 46 /* _eInternalMessageId.TelemetryEnvelopeInvalid */,\r\n    _a.CreateEnvelopeError = 47 /* _eInternalMessageId.CreateEnvelopeError */,\r\n    // User actionable\r\n    _a[CANNOT + \"SerializeObject\"] = 48 /* _eInternalMessageId.CannotSerializeObject */,\r\n    _a[CANNOT + \"SerializeObjectNonSerializable\"] = 49 /* _eInternalMessageId.CannotSerializeObjectNonSerializable */,\r\n    _a.CircularReferenceDetected = 50 /* _eInternalMessageId.CircularReferenceDetected */,\r\n    _a[\"Clear\" + AUTH_CONTEXT + FAILED] = 51 /* _eInternalMessageId.ClearAuthContextFailed */,\r\n    _a[EXCEPTION + \"Truncated\"] = 52 /* _eInternalMessageId.ExceptionTruncated */,\r\n    _a.IllegalCharsInName = 53 /* _eInternalMessageId.IllegalCharsInName */,\r\n    _a.ItemNotInArray = 54 /* _eInternalMessageId.ItemNotInArray */,\r\n    _a.MaxAjaxPerPVExceeded = 55 /* _eInternalMessageId.MaxAjaxPerPVExceeded */,\r\n    _a.MessageTruncated = 56 /* _eInternalMessageId.MessageTruncated */,\r\n    _a.NameTooLong = 57 /* _eInternalMessageId.NameTooLong */,\r\n    _a.SampleRateOutOfRange = 58 /* _eInternalMessageId.SampleRateOutOfRange */,\r\n    _a[\"Set\" + AUTH_CONTEXT + FAILED] = 59 /* _eInternalMessageId.SetAuthContextFailed */,\r\n    _a[\"Set\" + AUTH_CONTEXT + FAILED + \"AccountName\"] = 60 /* _eInternalMessageId.SetAuthContextFailedAccountName */,\r\n    _a.StringValueTooLong = 61 /* _eInternalMessageId.StringValueTooLong */,\r\n    _a.StartCalledMoreThanOnce = 62 /* _eInternalMessageId.StartCalledMoreThanOnce */,\r\n    _a.StopCalledWithoutStart = 63 /* _eInternalMessageId.StopCalledWithoutStart */,\r\n    _a[\"TelemetryInitializer\" + FAILED] = 64 /* _eInternalMessageId.TelemetryInitializerFailed */,\r\n    _a.TrackArgumentsNotSpecified = 65 /* _eInternalMessageId.TrackArgumentsNotSpecified */,\r\n    _a.UrlTooLong = 66 /* _eInternalMessageId.UrlTooLong */,\r\n    _a[SESSION + STORAGE + BUFFER + \"Full\"] = 67 /* _eInternalMessageId.SessionStorageBufferFull */,\r\n    _a[CANNOT + \"AccessCookie\"] = 68 /* _eInternalMessageId.CannotAccessCookie */,\r\n    _a.IdTooLong = 69 /* _eInternalMessageId.IdTooLong */,\r\n    _a.InvalidEvent = 70 /* _eInternalMessageId.InvalidEvent */,\r\n    _a[FAILED_MONITOR_AJAX + \"SetRequestHeader\"] = 71 /* _eInternalMessageId.FailedMonitorAjaxSetRequestHeader */,\r\n    _a[\"Send\" + BROWSER + \"InfoOnUserInit\"] = 72 /* _eInternalMessageId.SendBrowserInfoOnUserInit */,\r\n    _a[\"Plugin\" + EXCEPTION] = 73 /* _eInternalMessageId.PluginException */,\r\n    _a[\"Notification\" + EXCEPTION] = 74 /* _eInternalMessageId.NotificationException */,\r\n    _a.SnippetScriptLoadFailure = 99 /* _eInternalMessageId.SnippetScriptLoadFailure */,\r\n    _a[\"Invalid\" + INSTRUMENTATION_KEY] = 100 /* _eInternalMessageId.InvalidInstrumentationKey */,\r\n    _a[CANNOT + \"ParseAiBlobValue\"] = 101 /* _eInternalMessageId.CannotParseAiBlobValue */,\r\n    _a.InvalidContentBlob = 102 /* _eInternalMessageId.InvalidContentBlob */,\r\n    _a[TRACK + \"PageAction\" + EVENT + FAILED] = 103 /* _eInternalMessageId.TrackPageActionEventFailed */,\r\n    _a[FAILED + \"AddingCustomDefinedRequestContext\"] = 104 /* _eInternalMessageId.FailedAddingCustomDefinedRequestContext */,\r\n    _a[\"InMemory\" + STORAGE + BUFFER + \"Full\"] = 105 /* _eInternalMessageId.InMemoryStorageBufferFull */,\r\n    _a[INSTRUMENTATION_KEY + \"Deprecation\"] = 106 /* _eInternalMessageId.InstrumentationKeyDeprecation */,\r\n    _a));\r\n//# sourceMappingURL=LoggingEnums.js.map","/*!\n * Microsoft Dynamic Proto Utility, 1.1.7\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n/**\r\n * Gets the runtime global reference\r\n * @returns\r\n */\r\nfunction _getGlobal() {\r\n    var result;\r\n    if (typeof globalThis !== UNDEFINED) {\r\n        result = globalThis;\r\n    }\r\n    if (!result && typeof self !== UNDEFINED) {\r\n        result = self;\r\n    }\r\n    if (!result && typeof window !== UNDEFINED) {\r\n        result = window;\r\n    }\r\n    if (!result && typeof global !== UNDEFINED) {\r\n        result = global;\r\n    }\r\n    return result || {};\r\n}\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = _getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper to check if the object contains a property of the name\r\n * @ignore\r\n */\r\nfunction _hasOwnProperty(obj, prop) {\r\n    return obj && Obj[Prototype].hasOwnProperty.call(obj, prop);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!_hasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && _hasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || _hasOwnProperty(target, funcName)));\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throw new TypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = {};\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = {};\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && _hasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || {};\r\n        instFunc = (instFuncTable[proto[DynClassName]] || {})[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !_hasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || {};\r\n        var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || {}); // fetch and assign if as it may not exist yet\r\n        // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n        if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n            instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n        }\r\n        _forEachProp(target, function (name) {\r\n            // Only add overridden functions\r\n            if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                instFuncs_1[name] = target[name];\r\n                delete target[name];\r\n                // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                if (!_hasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                    proto[name] = _createDynamicPrototype(proto, name);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (_hasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nfunction dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!_hasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (_hasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\n\nexport { dynamicProto as default };\n//# sourceMappingURL=dynamicproto-js.js.map\n","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Enums.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n* File containing the enums as constants.\r\n*/\r\nimport { __assignFn as __assign } from \"@microsoft/applicationinsights-shims\";\r\nimport { _InternalMessageId, createEnumStyle, objFreeze } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * The ValueKind contains a set of values that specify value kind of the property.\r\n * Either PII (Personal Identifiable Information) or customer content.\r\n */\r\nexport var ValueKind = createEnumStyle({\r\n    NotSet: 0 /* eValueKind.NotSet */,\r\n    Pii_DistinguishedName: 1 /* eValueKind.Pii_DistinguishedName */,\r\n    Pii_GenericData: 2 /* eValueKind.Pii_GenericData */,\r\n    Pii_IPV4Address: 3 /* eValueKind.Pii_IPV4Address */,\r\n    Pii_IPv6Address: 4 /* eValueKind.Pii_IPv6Address */,\r\n    Pii_MailSubject: 5 /* eValueKind.Pii_MailSubject */,\r\n    Pii_PhoneNumber: 6 /* eValueKind.Pii_PhoneNumber */,\r\n    Pii_QueryString: 7 /* eValueKind.Pii_QueryString */,\r\n    Pii_SipAddress: 8 /* eValueKind.Pii_SipAddress */,\r\n    Pii_SmtpAddress: 9 /* eValueKind.Pii_SmtpAddress */,\r\n    Pii_Identity: 10 /* eValueKind.Pii_Identity */,\r\n    Pii_Uri: 11 /* eValueKind.Pii_Uri */,\r\n    Pii_Fqdn: 12 /* eValueKind.Pii_Fqdn */,\r\n    Pii_IPV4AddressLegacy: 13 /* eValueKind.Pii_IPV4AddressLegacy */,\r\n    CustomerContent_GenericContent: 32 /* eValueKind.CustomerContent_GenericContent */\r\n});\r\n/**\r\n * The EventLatency contains a set of values that specify the latency with which an event is sent.\r\n */\r\nexport var EventLatency = createEnumStyle({\r\n    /**\r\n     * Normal latency.\r\n     */\r\n    Normal: 1 /* EventLatencyValue.Normal */,\r\n    /**\r\n     * Cost deferred latency. At the moment this latency is treated as Normal latency.\r\n     */\r\n    CostDeferred: 2 /* EventLatencyValue.CostDeferred */,\r\n    /**\r\n     * Real time latency.\r\n     */\r\n    RealTime: 3 /* EventLatencyValue.RealTime */,\r\n    /**\r\n     * Bypass normal batching/timing and send as soon as possible, this will still send asynchronously.\r\n     * Added in v3.1.1\r\n     */\r\n    Immediate: 4 /* EventLatencyValue.Immediate */\r\n});\r\n/**\r\n * Enum for property types.\r\n */\r\nexport var EventPropertyType = createEnumStyle({\r\n    Unspecified: 0 /* eEventPropertyType.Unspecified */,\r\n    String: 1 /* eEventPropertyType.String */,\r\n    Int32: 2 /* eEventPropertyType.Int32 */,\r\n    UInt32: 3 /* eEventPropertyType.UInt32 */,\r\n    Int64: 4 /* eEventPropertyType.Int64 */,\r\n    UInt64: 5 /* eEventPropertyType.UInt64 */,\r\n    Double: 6 /* eEventPropertyType.Double */,\r\n    Bool: 7 /* eEventPropertyType.Bool */,\r\n    Guid: 8 /* eEventPropertyType.Guid */,\r\n    DateTime: 9 /* eEventPropertyType.DateTime */\r\n});\r\n/**\r\n * The EventPersistence contains a set of values that specify the event's persistence.\r\n */\r\nexport var EventPersistence = createEnumStyle({\r\n    /**\r\n     * Normal persistence.\r\n     */\r\n    Normal: 1 /* EventPersistenceValue.Normal */,\r\n    /**\r\n     * Critical persistence.\r\n     */\r\n    Critical: 2 /* EventPersistenceValue.Critical */\r\n});\r\nexport var TraceLevel = createEnumStyle({\r\n    NONE: 0 /* eTraceLevel.NONE */,\r\n    ERROR: 1 /* eTraceLevel.ERROR */,\r\n    WARNING: 2 /* eTraceLevel.WARNING */,\r\n    INFORMATION: 3 /* eTraceLevel.INFORMATION */\r\n});\r\nexport var _ExtendedInternalMessageId = objFreeze(__assign(__assign({}, _InternalMessageId), createEnumStyle({\r\n    AuthHandShakeError: 501 /* _eExtendedInternalMessageId.AuthHandShakeError */,\r\n    AuthRedirectFail: 502 /* _eExtendedInternalMessageId.AuthRedirectFail */,\r\n    BrowserCannotReadLocalStorage: 503 /* _eExtendedInternalMessageId.BrowserCannotReadLocalStorage */,\r\n    BrowserCannotWriteLocalStorage: 504 /* _eExtendedInternalMessageId.BrowserCannotWriteLocalStorage */,\r\n    BrowserDoesNotSupportLocalStorage: 505 /* _eExtendedInternalMessageId.BrowserDoesNotSupportLocalStorage */,\r\n    CannotParseBiBlobValue: 506 /* _eExtendedInternalMessageId.CannotParseBiBlobValue */,\r\n    CannotParseDataAttribute: 507 /* _eExtendedInternalMessageId.CannotParseDataAttribute */,\r\n    CVPluginNotAvailable: 508 /* _eExtendedInternalMessageId.CVPluginNotAvailable */,\r\n    DroppedEvent: 509 /* _eExtendedInternalMessageId.DroppedEvent */,\r\n    ErrorParsingAISessionCookie: 510 /* _eExtendedInternalMessageId.ErrorParsingAISessionCookie */,\r\n    ErrorProvidedChannels: 511 /* _eExtendedInternalMessageId.ErrorProvidedChannels */,\r\n    FailedToGetCookies: 512 /* _eExtendedInternalMessageId.FailedToGetCookies */,\r\n    FailedToInitializeCorrelationVector: 513 /* _eExtendedInternalMessageId.FailedToInitializeCorrelationVector */,\r\n    FailedToInitializeSDK: 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */,\r\n    InvalidContentBlob: 515 /* _eExtendedInternalMessageId.InvalidContentBlob */,\r\n    InvalidCorrelationValue: 516 /* _eExtendedInternalMessageId.InvalidCorrelationValue */,\r\n    SessionRenewalDateIsZero: 517 /* _eExtendedInternalMessageId.SessionRenewalDateIsZero */,\r\n    SendPostOnCompleteFailure: 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */,\r\n    PostResponseHandler: 519 /* _eExtendedInternalMessageId.PostResponseHandler */,\r\n    SDKNotInitialized: 520 /* _eExtendedInternalMessageId.SDKNotInitialized */\r\n})));\r\n//# sourceMappingURL=Enums.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n// \r\nimport { _DYN_CONFIG, _DYN_CREATE_NEW, _DYN_FLUSH, _DYN_IDENTIFIER, _DYN_LENGTH, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { arrForEach, isArray, objFreeze, throwError } from \"./HelperFuncs\";\r\nimport { STR_PRIORITY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { initializePlugins } from \"./TelemetryHelpers\";\r\nexport var ChannelControllerPriority = 500;\r\nvar ChannelValidationMessage = \"Channel has invalid priority - \";\r\nfunction _addChannelQueue(channelQueue, queue, core) {\r\n    if (queue && isArray(queue) && queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        queue = queue.sort(function (a, b) {\r\n            return a[STR_PRIORITY /* @min:%2epriority */] - b[STR_PRIORITY /* @min:%2epriority */];\r\n        });\r\n        arrForEach(queue, function (queueItem) {\r\n            if (queueItem[STR_PRIORITY /* @min:%2epriority */] < ChannelControllerPriority) {\r\n                throwError(ChannelValidationMessage + queueItem[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n            }\r\n        });\r\n        channelQueue[_DYN_PUSH /* @min:%2epush */]({\r\n            queue: objFreeze(queue),\r\n            chain: createTelemetryProxyChain(queue, core[_DYN_CONFIG /* @min:%2econfig */], core)\r\n        });\r\n    }\r\n}\r\nexport function createChannelControllerPlugin(channelQueue, core) {\r\n    function _getTelCtx() {\r\n        return createProcessTelemetryContext(null, core[_DYN_CONFIG /* @min:%2econfig */], core, null);\r\n    }\r\n    function _processChannelQueue(theChannels, itemCtx, processFn, onComplete) {\r\n        var waiting = theChannels ? (theChannels[_DYN_LENGTH /* @min:%2elength */] + 1) : 1;\r\n        function _runChainOnComplete() {\r\n            waiting--;\r\n            if (waiting === 0) {\r\n                onComplete && onComplete();\r\n                onComplete = null;\r\n            }\r\n        }\r\n        if (waiting > 0) {\r\n            arrForEach(theChannels, function (channels) {\r\n                // pass on to first item in queue\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var channelChain = channels.chain;\r\n                    var chainCtx = itemCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](channelChain);\r\n                    chainCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_runChainOnComplete);\r\n                    // Cause this chain to start processing\r\n                    processFn(chainCtx);\r\n                }\r\n                else {\r\n                    waiting--;\r\n                }\r\n            });\r\n        }\r\n        _runChainOnComplete();\r\n    }\r\n    function _doUpdate(updateCtx, updateState) {\r\n        var theUpdateState = updateState || {\r\n            reason: 0 /* TelemetryUpdateReason.Unknown */\r\n        };\r\n        _processChannelQueue(channelQueue, updateCtx, function (chainCtx) {\r\n            chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUpdateState);\r\n        }, function () {\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUpdateState);\r\n        });\r\n        return true;\r\n    }\r\n    function _doTeardown(unloadCtx, unloadState) {\r\n        var theUnloadState = unloadState || {\r\n            reason: 0 /* TelemetryUnloadReason.ManualTeardown */,\r\n            isAsync: false\r\n        };\r\n        _processChannelQueue(channelQueue, unloadCtx, function (chainCtx) {\r\n            chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n        }, function () {\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n            isInitialized = false;\r\n        });\r\n        return true;\r\n    }\r\n    function _getChannel(pluginIdentifier) {\r\n        var thePlugin = null;\r\n        if (channelQueue && channelQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            arrForEach(channelQueue, function (channels) {\r\n                // pass on to first item in queue\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    arrForEach(channels.queue, function (ext) {\r\n                        if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier) {\r\n                            thePlugin = ext;\r\n                            // Cause arrForEach to stop iterating\r\n                            return -1;\r\n                        }\r\n                    });\r\n                    if (thePlugin) {\r\n                        // Cause arrForEach to stop iterating\r\n                        return -1;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return thePlugin;\r\n    }\r\n    var isInitialized = false;\r\n    var channelController = {\r\n        identifier: \"ChannelControllerPlugin\",\r\n        priority: ChannelControllerPriority,\r\n        initialize: function (config, core, extensions, pluginChain) {\r\n            isInitialized = true;\r\n            arrForEach(channelQueue, function (channels) {\r\n                if (channels && channels.queue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    initializePlugins(createProcessTelemetryContext(channels.chain, config, core), extensions);\r\n                }\r\n            });\r\n        },\r\n        isInitialized: function () {\r\n            return isInitialized;\r\n        },\r\n        processTelemetry: function (item, itemCtx) {\r\n            _processChannelQueue(channelQueue, itemCtx || _getTelCtx(), function (chainCtx) {\r\n                chainCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item);\r\n            }, function () {\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item);\r\n            });\r\n        },\r\n        update: _doUpdate,\r\n        pause: function () {\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    plugin.pause && plugin.pause();\r\n                });\r\n            }, null);\r\n        },\r\n        resume: function () {\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    plugin.resume && plugin.resume();\r\n                });\r\n            }, null);\r\n        },\r\n        teardown: _doTeardown,\r\n        getChannel: _getChannel,\r\n        flush: function (isAsync, callBack, sendReason, cbTimeout) {\r\n            // Setting waiting to one so that we don't call the callBack until we finish iterating\r\n            var waiting = 1;\r\n            var doneIterating = false;\r\n            var cbTimer = null;\r\n            cbTimeout = cbTimeout || 5000;\r\n            function doCallback() {\r\n                waiting--;\r\n                if (doneIterating && waiting === 0) {\r\n                    if (cbTimer) {\r\n                        clearTimeout(cbTimer);\r\n                        cbTimer = null;\r\n                    }\r\n                    callBack && callBack(doneIterating);\r\n                    callBack = null;\r\n                }\r\n            }\r\n            _processChannelQueue(channelQueue, _getTelCtx(), function (chainCtx) {\r\n                chainCtx.iterate(function (plugin) {\r\n                    if (plugin[_DYN_FLUSH /* @min:%2eflush */]) {\r\n                        waiting++;\r\n                        var handled_1 = false;\r\n                        // Not all channels will call this callback for every scenario\r\n                        if (!plugin[_DYN_FLUSH /* @min:%2eflush */](isAsync, function () {\r\n                            handled_1 = true;\r\n                            doCallback();\r\n                        }, sendReason)) {\r\n                            if (!handled_1) {\r\n                                // If any channel doesn't return true and it didn't call the callback, then we should assume that the callback\r\n                                // will never be called, so use a timeout to allow the channel(s) some time to \"finish\" before triggering any\r\n                                // followup function (such as unloading)\r\n                                if (isAsync && cbTimer == null) {\r\n                                    cbTimer = setTimeout(function () {\r\n                                        cbTimer = null;\r\n                                        doCallback();\r\n                                    }, cbTimeout);\r\n                                }\r\n                                else {\r\n                                    doCallback();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }, function () {\r\n                doneIterating = true;\r\n                doCallback();\r\n            });\r\n            return true;\r\n        },\r\n        _setQueue: function (queue) {\r\n            channelQueue = queue;\r\n        }\r\n    };\r\n    return channelController;\r\n}\r\nexport function createChannelQueues(channels, extensions, core) {\r\n    var channelQueue = [];\r\n    if (channels) {\r\n        // Add and sort the configuration channel queues\r\n        arrForEach(channels, function (queue) { return _addChannelQueue(channelQueue, queue, core); });\r\n    }\r\n    if (extensions) {\r\n        // Create a new channel queue for any extensions with a priority > the ChannelControllerPriority\r\n        var extensionQueue_1 = [];\r\n        arrForEach(extensions, function (plugin) {\r\n            if (plugin[STR_PRIORITY /* @min:%2epriority */] > ChannelControllerPriority) {\r\n                extensionQueue_1[_DYN_PUSH /* @min:%2epush */](plugin);\r\n            }\r\n        });\r\n        _addChannelQueue(channelQueue, extensionQueue_1, core);\r\n    }\r\n    return channelQueue;\r\n}\r\n//# sourceMappingURL=ChannelController.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n// \r\n// \r\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_APPLY, _DYN_DIAG_LOG, _DYN_LENGTH, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SPLICE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { BaseTelemetryPlugin } from \"./BaseTelemetryPlugin\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach, getExceptionName } from \"./HelperFuncs\";\r\nimport { STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nvar TelemetryInitializerPlugin = /** @class */ (function (_super) {\r\n    __extends(TelemetryInitializerPlugin, _super);\r\n    function TelemetryInitializerPlugin() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"TelemetryInitializerPlugin\";\r\n        _this.priority = 199;\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _id;\r\n        var _initializers;\r\n        _initDefaults();\r\n        dynamicProto(TelemetryInitializerPlugin, _this, function (_self, _base) {\r\n            _self.addTelemetryInitializer = function (telemetryInitializer) {\r\n                var theInitializer = {\r\n                    id: _id++,\r\n                    fn: telemetryInitializer\r\n                };\r\n                _initializers[_DYN_PUSH /* @min:%2epush */](theInitializer);\r\n                var handler = {\r\n                    remove: function () {\r\n                        arrForEach(_initializers, function (initializer, idx) {\r\n                            if (initializer.id === theInitializer.id) {\r\n                                _initializers[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                                return -1;\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                return handler;\r\n            };\r\n            _self[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */] = function (item, itemCtx) {\r\n                var doNotSendItem = false;\r\n                var telemetryInitializersCount = _initializers[_DYN_LENGTH /* @min:%2elength */];\r\n                for (var i = 0; i < telemetryInitializersCount; ++i) {\r\n                    var telemetryInitializer = _initializers[i];\r\n                    if (telemetryInitializer) {\r\n                        try {\r\n                            if (telemetryInitializer.fn[_DYN_APPLY /* @min:%2eapply */](null, [item]) === false) {\r\n                                doNotSendItem = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        catch (e) {\r\n                            // log error but dont stop executing rest of the telemetry initializers\r\n                            // doNotSendItem = true;\r\n                            _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 64 /* _eInternalMessageId.TelemetryInitializerFailed */, \"One of telemetry initializers failed, telemetry item will not be sent: \" + getExceptionName(e), { exception: dumpObj(e) }, true);\r\n                        }\r\n                    }\r\n                }\r\n                if (!doNotSendItem) {\r\n                    _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](item, itemCtx);\r\n                }\r\n            };\r\n            _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] = function () {\r\n                _initDefaults();\r\n            };\r\n        });\r\n        function _initDefaults() {\r\n            _id = 0;\r\n            _initializers = [];\r\n        }\r\n        return _this;\r\n    }\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.addTelemetryInitializer.\r\n// Removed Stub for TelemetryInitializerPlugin.prototype.processTelemetry.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    TelemetryInitializerPlugin.__ieDyn=1;\n\n    return TelemetryInitializerPlugin;\r\n}(BaseTelemetryPlugin));\r\nexport { TelemetryInitializerPlugin };\r\n//# sourceMappingURL=TelemetryInitializerPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { __spreadArrayFn as __spreadArray } from \"@microsoft/applicationinsights-shims\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { objCreateFn } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_CONFIG, _DYN_FLUSH, _DYN_GET_NOTIFY_MGR, _DYN_GET_PLUGIN, _DYN_GET_PROCESS_TEL_CONT0, _DYN_IDENTIFIER, _DYN_INITIALIZE, _DYN_INSTRUMENTATION_KEY, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_NAME, _DYN_ON_COMPLETE, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_2, _DYN_SET_ENABLED, _DYN_SPLICE, _DYN_STOP_POLLING_INTERNA3, _DYN_TEARDOWN, _DYN_TIME, _DYN__EXTENSIONS } from \"../__DynamicConstants\";\r\nimport { ChannelControllerPriority, createChannelControllerPlugin, createChannelQueues } from \"./ChannelController\";\r\nimport { createCookieMgr } from \"./CookieMgr\";\r\nimport { createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDebugListener } from \"./DbgExtensionUtils\";\r\nimport { DiagnosticLogger, _InternalLogMessage, _throwInternal, _warnToConsole } from \"./DiagnosticLogger\";\r\nimport { arrForEach, arrIndexOf, getCfgValue, getSetValue, isFunction, isNullOrUndefined, objExtend, objFreeze, proxyFunctionAs, proxyFunctions, throwError, toISOString } from \"./HelperFuncs\";\r\nimport { STR_CHANNELS, STR_CORE, STR_CREATE_PERF_MGR, STR_DISABLED, STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_EXTENSIONS, STR_EXTENSION_CONFIG, STR_GET_PERF_MGR, STR_PRIORITY } from \"./InternalConstants\";\r\nimport { PerfManager, getGblPerfMgr } from \"./PerfManager\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext, createTelemetryProxyChain } from \"./ProcessTelemetryContext\";\r\nimport { _getPluginState, createDistributedTraceContext, initializePlugins, sortPlugins } from \"./TelemetryHelpers\";\r\nimport { TelemetryInitializerPlugin } from \"./TelemetryInitializerPlugin\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nvar strValidationError = \"Plugins must provide initialize method\";\r\nvar strNotificationManager = \"_notificationManager\";\r\nvar strSdkUnloadingError = \"SDK is still unloading...\";\r\nvar strSdkNotInitialized = \"SDK is not initialized\";\r\n// const strPluginUnloadFailed = \"Failed to unload plugin\";\r\nvar defaultInitConfig = {\r\n    // Have the Diagnostic Logger default to log critical errors to the console\r\n    loggingLevelConsole: 1 /* eLoggingSeverity.CRITICAL */\r\n};\r\n/**\r\n * Helper to create the default performance manager\r\n * @param core\r\n * @param notificationMgr\r\n */\r\nfunction _createPerfManager(core, notificationMgr) {\r\n    return new PerfManager(notificationMgr);\r\n}\r\nfunction _validateExtensions(logger, channelPriority, allExtensions) {\r\n    var _a;\r\n    // Concat all available extensions\r\n    var coreExtensions = [];\r\n    // Check if any two extensions have the same priority, then warn to console\r\n    // And extract the local extensions from the\r\n    var extPriorities = {};\r\n    // Extension validation\r\n    arrForEach(allExtensions, function (ext) {\r\n        // Check for ext.initialize\r\n        if (isNullOrUndefined(ext) || isNullOrUndefined(ext[_DYN_INITIALIZE /* @min:%2einitialize */])) {\r\n            throwError(strValidationError);\r\n        }\r\n        var extPriority = ext[STR_PRIORITY /* @min:%2epriority */];\r\n        var identifier = ext[_DYN_IDENTIFIER /* @min:%2eidentifier */];\r\n        if (ext && extPriority) {\r\n            if (!isNullOrUndefined(extPriorities[extPriority])) {\r\n                _warnToConsole(logger, \"Two extensions have same priority #\" + extPriority + \" - \" + extPriorities[extPriority] + \", \" + identifier);\r\n            }\r\n            else {\r\n                // set a value\r\n                extPriorities[extPriority] = identifier;\r\n            }\r\n        }\r\n        // Split extensions to core and channelController\r\n        if (!extPriority || extPriority < channelPriority) {\r\n            // Add to core extension that will be managed by BaseCore\r\n            coreExtensions[_DYN_PUSH /* @min:%2epush */](ext);\r\n        }\r\n    });\r\n    return _a = {\r\n            all: allExtensions\r\n        },\r\n        _a[STR_CORE /* @min:core */] = coreExtensions,\r\n        _a;\r\n}\r\nfunction _isPluginPresent(thePlugin, plugins) {\r\n    var exists = false;\r\n    arrForEach(plugins, function (plugin) {\r\n        if (plugin === thePlugin) {\r\n            exists = true;\r\n            return -1;\r\n        }\r\n    });\r\n    return exists;\r\n}\r\nfunction _createDummyNotificationManager() {\r\n    var _a;\r\n    return objCreateFn((_a = {},\r\n        _a[_DYN_ADD_NOTIFICATION_LIS1 /* @min:addNotificationListener */] = function (listener) { },\r\n        _a[_DYN_REMOVE_NOTIFICATION_2 /* @min:removeNotificationListener */] = function (listener) { },\r\n        _a[STR_EVENTS_SENT /* @min:eventsSent */] = function (events) { },\r\n        _a[STR_EVENTS_DISCARDED /* @min:eventsDiscarded */] = function (events, reason) { },\r\n        _a[STR_EVENTS_SEND_REQUEST /* @min:eventsSendRequest */] = function (sendReason, isAsync) { },\r\n        _a));\r\n}\r\nvar BaseCore = /** @class */ (function () {\r\n    function BaseCore() {\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _config;\r\n        var _isInitialized;\r\n        var _eventQueue;\r\n        var _notificationManager;\r\n        var _perfManager;\r\n        var _cfgPerfManager;\r\n        var _cookieManager;\r\n        var _pluginChain;\r\n        var _configExtensions;\r\n        var _coreExtensions;\r\n        var _channelControl;\r\n        var _channelConfig;\r\n        var _channelQueue;\r\n        var _isUnloading;\r\n        var _telemetryInitializerPlugin;\r\n        var _internalLogsEventName;\r\n        var _evtNamespace;\r\n        var _unloadHandlers;\r\n        var _debugListener;\r\n        var _traceCtx;\r\n        /**\r\n         * Internal log poller\r\n         */\r\n        var _internalLogPoller = 0;\r\n        var _forceStopInternalLogPoller = false;\r\n        dynamicProto(BaseCore, this, function (_self) {\r\n            // Set the default values (also called during teardown)\r\n            _initDefaults();\r\n            _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () { return _isInitialized; };\r\n            // Creating the self.initialize = ()\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                if (_isUnloading) {\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                // Make sure core is only initialized once\r\n                if (_self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    throwError(\"Core should not be initialized more than once\");\r\n                }\r\n                _config = config || {};\r\n                _self[_DYN_CONFIG /* @min:%2econfig */] = _config;\r\n                if (isNullOrUndefined(config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */])) {\r\n                    throwError(\"Please provide instrumentation key\");\r\n                }\r\n                _notificationManager = notificationManager;\r\n                // For backward compatibility only\r\n                _self[strNotificationManager] = notificationManager;\r\n                _initDebugListener();\r\n                _initPerfManager();\r\n                // add notification to the extensions in the config so other plugins can access it\r\n                _initExtConfig();\r\n                if (logger) {\r\n                    _self[_DYN_LOGGER /* @min:%2elogger */] = logger;\r\n                }\r\n                var cfgExtensions = getSetValue(_config, STR_EXTENSIONS, []);\r\n                // Extension validation\r\n                _configExtensions = [];\r\n                _configExtensions[_DYN_PUSH /* @min:%2epush */].apply(_configExtensions, __spreadArray(__spreadArray([], extensions, false), cfgExtensions, false));\r\n                _channelConfig = getSetValue(_config, STR_CHANNELS, []);\r\n                _initPluginChain(null);\r\n                if (!_channelQueue || _channelQueue[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n                    throwError(\"No \" + STR_CHANNELS + \" available\");\r\n                }\r\n                _isInitialized = true;\r\n                _self.releaseQueue();\r\n            };\r\n            _self.getTransmissionControls = function () {\r\n                var controls = [];\r\n                if (_channelQueue) {\r\n                    arrForEach(_channelQueue, function (channels) {\r\n                        controls[_DYN_PUSH /* @min:%2epush */](channels.queue);\r\n                    });\r\n                }\r\n                return objFreeze(controls);\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                // setup default iKey if not passed in\r\n                telemetryItem.iKey = telemetryItem.iKey || _config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */];\r\n                // add default timestamp if not passed in\r\n                telemetryItem[_DYN_TIME /* @min:%2etime */] = telemetryItem[_DYN_TIME /* @min:%2etime */] || toISOString(new Date());\r\n                // Common Schema 4.0\r\n                telemetryItem.ver = telemetryItem.ver || \"4.0\";\r\n                if (!_isUnloading && _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]()) {\r\n                    // Process the telemetry plugin chain\r\n                    _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](telemetryItem);\r\n                }\r\n                else {\r\n                    // Queue events until all extensions are initialized\r\n                    _eventQueue[_DYN_PUSH /* @min:%2epush */](telemetryItem);\r\n                }\r\n            };\r\n            _self[_DYN_GET_PROCESS_TEL_CONT0 /* @min:%2egetProcessTelContext */] = _createTelCtx;\r\n            _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */] = function () {\r\n                if (!_notificationManager) {\r\n                    // Create Dummy notification manager\r\n                    _notificationManager = _createDummyNotificationManager();\r\n                    // For backward compatibility only\r\n                    _self[strNotificationManager] = _notificationManager;\r\n                }\r\n                return _notificationManager;\r\n            };\r\n            /**\r\n             * Adds a notification listener. The SDK calls methods on the listener when an appropriate notification is raised.\r\n             * The added plugins must raise notifications. If the plugins do not implement the notifications, then no methods will be\r\n             * called.\r\n             * @param {INotificationListener} listener - An INotificationListener object.\r\n             */\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](listener);\r\n                }\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param {INotificationListener} listener - INotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                if (_notificationManager) {\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */](listener);\r\n                }\r\n            };\r\n            _self.getCookieMgr = function () {\r\n                if (!_cookieManager) {\r\n                    _cookieManager = createCookieMgr(_config, _self[_DYN_LOGGER /* @min:%2elogger */]);\r\n                }\r\n                return _cookieManager;\r\n            };\r\n            _self.setCookieMgr = function (cookieMgr) {\r\n                _cookieManager = cookieMgr;\r\n            };\r\n            _self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */] = function () {\r\n                if (!_perfManager && !_cfgPerfManager) {\r\n                    if (getCfgValue(_config.enablePerfMgr)) {\r\n                        var createPerfMgr = getCfgValue(_config[STR_CREATE_PERF_MGR /* @min:%2ecreatePerfMgr */]);\r\n                        if (isFunction(createPerfMgr)) {\r\n                            _cfgPerfManager = createPerfMgr(_self, _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]());\r\n                        }\r\n                    }\r\n                }\r\n                return _perfManager || _cfgPerfManager || getGblPerfMgr();\r\n            };\r\n            _self.setPerfMgr = function (perfMgr) {\r\n                _perfManager = perfMgr;\r\n            };\r\n            _self.eventCnt = function () {\r\n                return _eventQueue[_DYN_LENGTH /* @min:%2elength */];\r\n            };\r\n            _self.releaseQueue = function () {\r\n                if (_isInitialized && _eventQueue[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var eventQueue = _eventQueue;\r\n                    _eventQueue = [];\r\n                    arrForEach(eventQueue, function (event) {\r\n                        _createTelCtx()[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](event);\r\n                    });\r\n                }\r\n            };\r\n            _self.pollInternalLogs = function (eventName) {\r\n                _internalLogsEventName = eventName || null;\r\n                _forceStopInternalLogPoller = false;\r\n                if (_internalLogPoller) {\r\n                    clearInterval(_internalLogPoller);\r\n                    _internalLogPoller = null;\r\n                }\r\n                return _startInternalLogTimer(true);\r\n            };\r\n            function _startInternalLogTimer(alwaysStart) {\r\n                if (!_internalLogPoller && !_forceStopInternalLogPoller) {\r\n                    var shouldStart = alwaysStart || (_self[_DYN_LOGGER /* @min:%2elogger */] && _self[_DYN_LOGGER /* @min:%2elogger */].queue[_DYN_LENGTH /* @min:%2elength */] > 0);\r\n                    if (shouldStart) {\r\n                        var interval = getCfgValue(_config.diagnosticLogInterval);\r\n                        if (!interval || !(interval > 0)) {\r\n                            interval = 10000;\r\n                        }\r\n                        // Keeping as an interval timer for backward compatibility as it returns the result\r\n                        _internalLogPoller = setInterval(function () {\r\n                            clearInterval(_internalLogPoller);\r\n                            _internalLogPoller = 0;\r\n                            _flushInternalLogs();\r\n                        }, interval);\r\n                    }\r\n                }\r\n                return _internalLogPoller;\r\n            }\r\n            _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */] = function () {\r\n                _forceStopInternalLogPoller = true;\r\n                if (_internalLogPoller) {\r\n                    clearInterval(_internalLogPoller);\r\n                    _internalLogPoller = 0;\r\n                    _flushInternalLogs();\r\n                }\r\n            };\r\n            // Add addTelemetryInitializer\r\n            proxyFunctions(_self, function () { return _telemetryInitializerPlugin; }, [\"addTelemetryInitializer\"]);\r\n            _self.unload = function (isAsync, unloadComplete, cbTimeout) {\r\n                var _a;\r\n                if (isAsync === void 0) { isAsync = true; }\r\n                if (!_isInitialized) {\r\n                    // The SDK is not initialized\r\n                    throwError(strSdkNotInitialized);\r\n                }\r\n                // Check if the SDK still unloading so throw\r\n                if (_isUnloading) {\r\n                    // The SDK is already unloading\r\n                    throwError(strSdkUnloadingError);\r\n                }\r\n                var unloadState = (_a = {\r\n                        reason: 50 /* TelemetryUnloadReason.SdkUnload */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                    _a.flushComplete = false,\r\n                    _a);\r\n                var processUnloadCtx = createProcessTelemetryUnloadContext(_getPluginChain(), _self);\r\n                processUnloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                    _initDefaults();\r\n                    unloadComplete && unloadComplete(unloadState);\r\n                }, _self);\r\n                function _doUnload(flushComplete) {\r\n                    unloadState.flushComplete = flushComplete;\r\n                    _isUnloading = true;\r\n                    // Run all of the unload handlers first (before unloading the plugins)\r\n                    _unloadHandlers.run(processUnloadCtx, unloadState);\r\n                    // Stop polling the internal logs\r\n                    _self[_DYN_STOP_POLLING_INTERNA3 /* @min:%2estopPollingInternalLogs */]();\r\n                    // Start unloading the components, from this point onwards the SDK should be considered to be in an unstable state\r\n                    processUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                _flushInternalLogs();\r\n                if (!_flushChannels(isAsync, _doUnload, 6 /* SendRequestReason.SdkUnload */, cbTimeout)) {\r\n                    _doUnload(false);\r\n                }\r\n            };\r\n            _self[_DYN_GET_PLUGIN /* @min:%2egetPlugin */] = _getPlugin;\r\n            _self.addPlugin = function (plugin, replaceExisting, isAsync, addCb) {\r\n                if (!plugin) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(strValidationError);\r\n                    return;\r\n                }\r\n                var existingPlugin = _getPlugin(plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */]);\r\n                if (existingPlugin && !replaceExisting) {\r\n                    addCb && addCb(false);\r\n                    _logOrThrowError(\"Plugin [\" + plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"] is already loaded!\");\r\n                    return;\r\n                }\r\n                var updateState = {\r\n                    reason: 16 /* TelemetryUpdateReason.PluginAdded */\r\n                };\r\n                function _addPlugin(removed) {\r\n                    _configExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                    updateState.added = [plugin];\r\n                    // Re-Initialize the plugin chain\r\n                    _initPluginChain(updateState);\r\n                    addCb && addCb(true);\r\n                }\r\n                if (existingPlugin) {\r\n                    var removedPlugins_1 = [existingPlugin.plugin];\r\n                    var unloadState = {\r\n                        reason: 2 /* TelemetryUnloadReason.PluginReplace */,\r\n                        isAsync: !!isAsync\r\n                    };\r\n                    _removePlugins(removedPlugins_1, unloadState, function (removed) {\r\n                        if (!removed) {\r\n                            // Previous plugin was successfully removed or was not installed\r\n                            addCb && addCb(false);\r\n                        }\r\n                        else {\r\n                            updateState.removed = removedPlugins_1;\r\n                            updateState.reason |= 32 /* TelemetryUpdateReason.PluginRemoved */;\r\n                            _addPlugin(true);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    _addPlugin(false);\r\n                }\r\n            };\r\n            _self.evtNamespace = function () {\r\n                return _evtNamespace;\r\n            };\r\n            _self[_DYN_FLUSH /* @min:%2eflush */] = _flushChannels;\r\n            _self.getTraceCtx = function (createNew) {\r\n                if (!_traceCtx) {\r\n                    _traceCtx = createDistributedTraceContext();\r\n                }\r\n                return _traceCtx;\r\n            };\r\n            _self.setTraceCtx = function (traceCtx) {\r\n                _traceCtx = traceCtx || null;\r\n            };\r\n            // Create the addUnloadCb\r\n            proxyFunctionAs(_self, \"addUnloadCb\", function () { return _unloadHandlers; }, \"add\");\r\n            function _initDefaults() {\r\n                _isInitialized = false;\r\n                // Use a default logger so initialization errors are not dropped on the floor with full logging\r\n                _config = objExtend(true, {}, defaultInitConfig);\r\n                _self[_DYN_CONFIG /* @min:%2econfig */] = _config;\r\n                _self[_DYN_LOGGER /* @min:%2elogger */] = new DiagnosticLogger(_config);\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = [];\r\n                _telemetryInitializerPlugin = new TelemetryInitializerPlugin();\r\n                _eventQueue = [];\r\n                _notificationManager = null;\r\n                _perfManager = null;\r\n                _cfgPerfManager = null;\r\n                _cookieManager = null;\r\n                _pluginChain = null;\r\n                _coreExtensions = null;\r\n                _configExtensions = [];\r\n                _channelControl = null;\r\n                _channelConfig = null;\r\n                _channelQueue = null;\r\n                _isUnloading = false;\r\n                _internalLogsEventName = null;\r\n                _evtNamespace = createUniqueNamespace(\"AIBaseCore\", true);\r\n                _unloadHandlers = createUnloadHandlerContainer();\r\n                _traceCtx = null;\r\n            }\r\n            function _createTelCtx() {\r\n                var theCtx = createProcessTelemetryContext(_getPluginChain(), _config, _self);\r\n                theCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startInternalLogTimer);\r\n                return theCtx;\r\n            }\r\n            // Initialize or Re-initialize the plugins\r\n            function _initPluginChain(updateState) {\r\n                // Extension validation\r\n                var theExtensions = _validateExtensions(_self[_DYN_LOGGER /* @min:%2elogger */], ChannelControllerPriority, _configExtensions);\r\n                _coreExtensions = theExtensions[STR_CORE /* @min:%2ecore */];\r\n                _pluginChain = null;\r\n                // Sort the complete set of extensions by priority\r\n                var allExtensions = theExtensions.all;\r\n                // Initialize the Channel Queues and the channel plugins first\r\n                _channelQueue = objFreeze(createChannelQueues(_channelConfig, allExtensions, _self));\r\n                if (_channelControl) {\r\n                    // During add / remove of a plugin this may get called again, so don't re-add if already present\r\n                    // But we also want the controller as the last, so remove if already present\r\n                    // And reusing the existing instance, just in case an installed plugin has a reference and\r\n                    // is using it.\r\n                    var idx = arrIndexOf(allExtensions, _channelControl);\r\n                    if (idx !== -1) {\r\n                        allExtensions[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    }\r\n                    idx = arrIndexOf(_coreExtensions, _channelControl);\r\n                    if (idx !== -1) {\r\n                        _coreExtensions[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                    }\r\n                    _channelControl._setQueue(_channelQueue);\r\n                }\r\n                else {\r\n                    _channelControl = createChannelControllerPlugin(_channelQueue, _self);\r\n                }\r\n                // Add on \"channelController\" as the last \"plugin\"\r\n                allExtensions[_DYN_PUSH /* @min:%2epush */](_channelControl);\r\n                _coreExtensions[_DYN_PUSH /* @min:%2epush */](_channelControl);\r\n                // Required to allow plugins to call core.getPlugin() during their own initialization\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = sortPlugins(allExtensions);\r\n                // Initialize the controls\r\n                _channelControl[_DYN_INITIALIZE /* @min:%2einitialize */](_config, _self, allExtensions);\r\n                var initCtx = _createTelCtx();\r\n                initializePlugins(initCtx, allExtensions);\r\n                // Now reset the extensions to just those being managed by Basecore\r\n                _self[_DYN__EXTENSIONS /* @min:%2e_extensions */] = objFreeze(sortPlugins(_coreExtensions || [])).slice();\r\n                if (updateState) {\r\n                    _doUpdate(updateState);\r\n                }\r\n            }\r\n            function _getPlugin(pluginIdentifier) {\r\n                var _a;\r\n                var theExt = null;\r\n                var thePlugin = null;\r\n                arrForEach(_self[_DYN__EXTENSIONS /* @min:%2e_extensions */], function (ext) {\r\n                    if (ext[_DYN_IDENTIFIER /* @min:%2eidentifier */] === pluginIdentifier && ext !== _channelControl && ext !== _telemetryInitializerPlugin) {\r\n                        thePlugin = ext;\r\n                        return -1;\r\n                    }\r\n                });\r\n                if (!thePlugin && _channelControl) {\r\n                    // Check the channel Controller\r\n                    thePlugin = _channelControl.getChannel(pluginIdentifier);\r\n                }\r\n                if (thePlugin) {\r\n                    theExt = (_a = {\r\n                            plugin: thePlugin\r\n                        },\r\n                        _a[_DYN_SET_ENABLED /* @min:setEnabled */] = function (enabled) {\r\n                            _getPluginState(thePlugin)[STR_DISABLED] = !enabled;\r\n                        },\r\n                        _a.isEnabled = function () {\r\n                            var pluginState = _getPluginState(thePlugin);\r\n                            return !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] && !pluginState[STR_DISABLED];\r\n                        },\r\n                        _a.remove = function (isAsync, removeCb) {\r\n                            var _a;\r\n                            if (isAsync === void 0) { isAsync = true; }\r\n                            var pluginsToRemove = [thePlugin];\r\n                            var unloadState = (_a = {\r\n                                    reason: 1 /* TelemetryUnloadReason.PluginUnload */\r\n                                },\r\n                                _a[_DYN_IS_ASYNC /* @min:isAsync */] = isAsync,\r\n                                _a);\r\n                            _removePlugins(pluginsToRemove, unloadState, function (removed) {\r\n                                if (removed) {\r\n                                    // Re-Initialize the plugin chain\r\n                                    _initPluginChain({\r\n                                        reason: 32 /* TelemetryUpdateReason.PluginRemoved */,\r\n                                        removed: pluginsToRemove\r\n                                    });\r\n                                }\r\n                                removeCb && removeCb(removed);\r\n                            });\r\n                        },\r\n                        _a);\r\n                }\r\n                return theExt;\r\n            }\r\n            function _getPluginChain() {\r\n                if (!_pluginChain) {\r\n                    // copy the collection of extensions\r\n                    var extensions = (_coreExtensions || []).slice();\r\n                    // During add / remove this may get called again, so don't readd if already present\r\n                    if (arrIndexOf(extensions, _telemetryInitializerPlugin) === -1) {\r\n                        extensions[_DYN_PUSH /* @min:%2epush */](_telemetryInitializerPlugin);\r\n                    }\r\n                    _pluginChain = createTelemetryProxyChain(sortPlugins(extensions), _config, _self);\r\n                }\r\n                return _pluginChain;\r\n            }\r\n            function _removePlugins(thePlugins, unloadState, removeComplete) {\r\n                if (thePlugins && thePlugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                    var unloadChain = createTelemetryProxyChain(thePlugins, _config, _self);\r\n                    var unloadCtx = createProcessTelemetryUnloadContext(unloadChain, _self);\r\n                    unloadCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](function () {\r\n                        var removed = false;\r\n                        // Remove the listed config extensions\r\n                        var newConfigExtensions = [];\r\n                        arrForEach(_configExtensions, function (plugin, idx) {\r\n                            if (!_isPluginPresent(plugin, thePlugins)) {\r\n                                newConfigExtensions[_DYN_PUSH /* @min:%2epush */](plugin);\r\n                            }\r\n                            else {\r\n                                removed = true;\r\n                            }\r\n                        });\r\n                        _configExtensions = newConfigExtensions;\r\n                        // Re-Create the channel config\r\n                        var newChannelConfig = [];\r\n                        if (_channelConfig) {\r\n                            arrForEach(_channelConfig, function (queue, idx) {\r\n                                var newQueue = [];\r\n                                arrForEach(queue, function (channel) {\r\n                                    if (!_isPluginPresent(channel, thePlugins)) {\r\n                                        newQueue[_DYN_PUSH /* @min:%2epush */](channel);\r\n                                    }\r\n                                    else {\r\n                                        removed = true;\r\n                                    }\r\n                                });\r\n                                newChannelConfig[_DYN_PUSH /* @min:%2epush */](newQueue);\r\n                            });\r\n                            _channelConfig = newChannelConfig;\r\n                        }\r\n                        removeComplete && removeComplete(removed);\r\n                        _startInternalLogTimer();\r\n                    });\r\n                    unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n                }\r\n                else {\r\n                    removeComplete(false);\r\n                }\r\n            }\r\n            function _flushInternalLogs() {\r\n                if (_self[_DYN_LOGGER /* @min:%2elogger */] && _self[_DYN_LOGGER /* @min:%2elogger */].queue) {\r\n                    var queue = _self[_DYN_LOGGER /* @min:%2elogger */].queue.slice(0);\r\n                    _self[_DYN_LOGGER /* @min:%2elogger */].queue[_DYN_LENGTH /* @min:%2elength */] = 0;\r\n                    arrForEach(queue, function (logMessage) {\r\n                        var _a;\r\n                        var item = (_a = {},\r\n                            _a[_DYN_NAME /* @min:name */] = _internalLogsEventName ? _internalLogsEventName : \"InternalMessageId: \" + logMessage[_DYN_MESSAGE_ID /* @min:%2emessageId */],\r\n                            _a.iKey = getCfgValue(_config[_DYN_INSTRUMENTATION_KEY /* @min:%2einstrumentationKey */]),\r\n                            _a.time = toISOString(new Date()),\r\n                            _a.baseType = _InternalLogMessage.dataType,\r\n                            _a.baseData = { message: logMessage[_DYN_MESSAGE /* @min:%2emessage */] },\r\n                            _a);\r\n                        _self.track(item);\r\n                    });\r\n                }\r\n            }\r\n            function _flushChannels(isAsync, callBack, sendReason, cbTimeout) {\r\n                if (_channelControl) {\r\n                    return _channelControl[_DYN_FLUSH /* @min:%2eflush */](isAsync, callBack, sendReason || 6 /* SendRequestReason.SdkUnload */, cbTimeout);\r\n                }\r\n                callBack && callBack(false);\r\n                return true;\r\n            }\r\n            function _initDebugListener() {\r\n                var disableDbgExt = getCfgValue(_config.disableDbgExt);\r\n                if (disableDbgExt === true && _debugListener) {\r\n                    // Remove any previously loaded debug listener\r\n                    _notificationManager[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */](_debugListener);\r\n                    _debugListener = null;\r\n                }\r\n                if (_notificationManager && !_debugListener && disableDbgExt !== true) {\r\n                    _debugListener = getDebugListener(_config);\r\n                    _notificationManager[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */](_debugListener);\r\n                }\r\n            }\r\n            function _initPerfManager() {\r\n                var enablePerfMgr = getCfgValue(_config.enablePerfMgr);\r\n                if (!enablePerfMgr && _cfgPerfManager) {\r\n                    // Remove any existing config based performance manager\r\n                    _cfgPerfManager = null;\r\n                }\r\n                if (enablePerfMgr) {\r\n                    // Set the performance manager creation function if not defined\r\n                    getSetValue(_config, STR_CREATE_PERF_MGR, _createPerfManager);\r\n                }\r\n            }\r\n            function _initExtConfig() {\r\n                var extConfig = getSetValue(_config, STR_EXTENSION_CONFIG, {});\r\n                extConfig.NotificationManager = _notificationManager;\r\n            }\r\n            function _doUpdate(updateState) {\r\n                var updateCtx = createProcessTelemetryUpdateContext(_getPluginChain(), _self);\r\n                updateCtx[_DYN_ON_COMPLETE /* @min:%2eonComplete */](_startInternalLogTimer);\r\n                if (!_self._updateHook || _self._updateHook(updateCtx, updateState) !== true) {\r\n                    updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n                }\r\n            }\r\n            function _logOrThrowError(message) {\r\n                var logger = _self[_DYN_LOGGER /* @min:%2elogger */];\r\n                if (logger) {\r\n                    // there should always be a logger\r\n                    _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, message);\r\n                    _startInternalLogTimer();\r\n                }\r\n                else {\r\n                    throwError(message);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for BaseCore.prototype.initialize.\r\n// Removed Stub for BaseCore.prototype.getTransmissionControls.\r\n// Removed Stub for BaseCore.prototype.track.\r\n// Removed Stub for BaseCore.prototype.getProcessTelContext.\r\n// Removed Stub for BaseCore.prototype.getNotifyMgr.\r\n// Removed Stub for BaseCore.prototype.addNotificationListener.\r\n// Removed Stub for BaseCore.prototype.removeNotificationListener.\r\n// Removed Stub for BaseCore.prototype.getCookieMgr.\r\n// Removed Stub for BaseCore.prototype.setCookieMgr.\r\n// Removed Stub for BaseCore.prototype.getPerfMgr.\r\n// Removed Stub for BaseCore.prototype.setPerfMgr.\r\n// Removed Stub for BaseCore.prototype.eventCnt.\r\n// Removed Stub for BaseCore.prototype.pollInternalLogs.\r\n// Removed Stub for BaseCore.prototype.stopPollingInternalLogs.\r\n// Removed Stub for BaseCore.prototype.addTelemetryInitializer.\r\n// Removed Stub for BaseCore.prototype.unload.\r\n// Removed Stub for BaseCore.prototype.getPlugin.\r\n// Removed Stub for BaseCore.prototype.addPlugin.\r\n// Removed Stub for BaseCore.prototype.evtNamespace.\r\n// Removed Stub for BaseCore.prototype.addUnloadCb.\r\n// Removed Stub for BaseCore.prototype.flush.\r\n// Removed Stub for BaseCore.prototype.getTraceCtx.\r\n// Removed Stub for BaseCore.prototype.setTraceCtx.\r\n// Removed Stub for BaseCore.prototype.releaseQueue.\r\n// Removed Stub for BaseCore.prototype._updateHook.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseCore.__ieDyn=1;\n\n    return BaseCore;\r\n}());\r\nexport { BaseCore };\r\n//# sourceMappingURL=BaseCore.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_ADD_NOTIFICATION_LIS1, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LISTENERS, _DYN_PUSH, _DYN_REMOVE_NOTIFICATION_2, _DYN_SPLICE } from \"../__DynamicConstants\";\r\nimport { arrForEach, arrIndexOf } from \"./HelperFuncs\";\r\nimport { STR_EVENTS_DISCARDED, STR_EVENTS_SEND_REQUEST, STR_EVENTS_SENT, STR_PERF_EVENT } from \"./InternalConstants\";\r\nfunction _runListeners(listeners, name, isAsync, callback) {\r\n    arrForEach(listeners, function (listener) {\r\n        if (listener && listener[name]) {\r\n            if (isAsync) {\r\n                setTimeout(function () { return callback(listener); }, 0);\r\n            }\r\n            else {\r\n                try {\r\n                    callback(listener);\r\n                }\r\n                catch (e) {\r\n                    // Catch errors to ensure we don't block sending the requests\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Class to manage sending notifications to all the listeners.\r\n */\r\nvar NotificationManager = /** @class */ (function () {\r\n    function NotificationManager(config) {\r\n        this.listeners = [];\r\n        var perfEvtsSendAll = !!(config || {}).perfEvtsSendAll;\r\n        dynamicProto(NotificationManager, this, function (_self) {\r\n            _self[_DYN_ADD_NOTIFICATION_LIS1 /* @min:%2eaddNotificationListener */] = function (listener) {\r\n                _self.listeners[_DYN_PUSH /* @min:%2epush */](listener);\r\n            };\r\n            /**\r\n             * Removes all instances of the listener.\r\n             * @param {INotificationListener} listener - AWTNotificationListener to remove.\r\n             */\r\n            _self[_DYN_REMOVE_NOTIFICATION_2 /* @min:%2eremoveNotificationListener */] = function (listener) {\r\n                var index = arrIndexOf(_self[_DYN_LISTENERS /* @min:%2elisteners */], listener);\r\n                while (index > -1) {\r\n                    _self.listeners[_DYN_SPLICE /* @min:%2esplice */](index, 1);\r\n                    index = arrIndexOf(_self[_DYN_LISTENERS /* @min:%2elisteners */], listener);\r\n                }\r\n            };\r\n            /**\r\n             * Notification for events sent.\r\n             * @param {ITelemetryItem[]} events - The array of events that have been sent.\r\n             */\r\n            _self[STR_EVENTS_SENT /* @min:%2eeventsSent */] = function (events) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_SENT, true, function (listener) {\r\n                    listener[STR_EVENTS_SENT /* @min:%2eeventsSent */](events);\r\n                });\r\n            };\r\n            /**\r\n             * Notification for events being discarded.\r\n             * @param {ITelemetryItem[]} events - The array of events that have been discarded by the SDK.\r\n             * @param {number} reason           - The reason for which the SDK discarded the events. The EventsDiscardedReason\r\n             * constant should be used to check the different values.\r\n             */\r\n            _self[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */] = function (events, reason) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_DISCARDED, true, function (listener) {\r\n                    listener[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */](events, reason);\r\n                });\r\n            };\r\n            /**\r\n             * [Optional] A function called when the events have been requested to be sent to the sever.\r\n             * @param {number} sendReason - The reason why the event batch is being sent.\r\n             * @param {boolean} isAsync   - A flag which identifies whether the requests are being sent in an async or sync manner.\r\n             */\r\n            _self[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */] = function (sendReason, isAsync) {\r\n                _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_EVENTS_SEND_REQUEST, isAsync, function (listener) {\r\n                    listener[STR_EVENTS_SEND_REQUEST /* @min:%2eeventsSendRequest */](sendReason, isAsync);\r\n                });\r\n            };\r\n            _self[STR_PERF_EVENT /* @min:%2eperfEvent */] = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    // Send all events or only parent events\r\n                    if (perfEvtsSendAll || !perfEvent[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */]()) {\r\n                        _runListeners(_self[_DYN_LISTENERS /* @min:%2elisteners */], STR_PERF_EVENT, false, function (listener) {\r\n                            if (perfEvent[_DYN_IS_ASYNC /* @min:%2eisAsync */]) {\r\n                                setTimeout(function () { return listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent); }, 0);\r\n                            }\r\n                            else {\r\n                                listener[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for NotificationManager.prototype.addNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.removeNotificationListener.\r\n// Removed Stub for NotificationManager.prototype.eventsSent.\r\n// Removed Stub for NotificationManager.prototype.eventsDiscarded.\r\n// Removed Stub for NotificationManager.prototype.eventsSendRequest.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    NotificationManager.__ieDyn=1;\n\n    return NotificationManager;\r\n}());\r\nexport { NotificationManager };\r\n//# sourceMappingURL=NotificationManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_GET_NOTIFY_MGR, _DYN_INITIALIZE, _DYN_NAME } from \"../__DynamicConstants\";\r\nimport { BaseCore } from \"./BaseCore\";\r\nimport { DiagnosticLogger } from \"./DiagnosticLogger\";\r\nimport { isNullOrUndefined, throwError } from \"./HelperFuncs\";\r\nimport { STR_EVENTS_DISCARDED, STR_GET_PERF_MGR } from \"./InternalConstants\";\r\nimport { NotificationManager } from \"./NotificationManager\";\r\nimport { doPerf } from \"./PerfManager\";\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, extensions, logger, notificationManager) {\r\n                _base[_DYN_INITIALIZE /* @min:%2einitialize */](config, extensions, logger || new DiagnosticLogger(config), notificationManager || new NotificationManager(config));\r\n            };\r\n            _self.track = function (telemetryItem) {\r\n                doPerf(_self[STR_GET_PERF_MGR /* @min:%2egetPerfMgr */](), function () { return \"AppInsightsCore:track\"; }, function () {\r\n                    if (telemetryItem === null) {\r\n                        _notifyInvalidEvent(telemetryItem);\r\n                        // throw error\r\n                        throwError(\"Invalid telemetry item\");\r\n                    }\r\n                    // do basic validation before sending it through the pipeline\r\n                    _validateTelemetryItem(telemetryItem);\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: telemetryItem }); }, !(telemetryItem.sync));\r\n            };\r\n            function _validateTelemetryItem(telemetryItem) {\r\n                if (isNullOrUndefined(telemetryItem[_DYN_NAME /* @min:%2ename */])) {\r\n                    _notifyInvalidEvent(telemetryItem);\r\n                    throwError(\"telemetry name required\");\r\n                }\r\n            }\r\n            function _notifyInvalidEvent(telemetryItem) {\r\n                var manager = _self[_DYN_GET_NOTIFY_MGR /* @min:%2egetNotifyMgr */]();\r\n                if (manager) {\r\n                    manager[STR_EVENTS_DISCARDED /* @min:%2eeventsDiscarded */]([telemetryItem], 2 /* eEventsDiscardedReason.InvalidEvent */);\r\n                }\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(BaseCore));\r\nexport { AppInsightsCore };\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* AppInsightsCore.ts\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { AppInsightsCore as InternalCore, DiagnosticLogger, _throwInternal, arrForEach, doPerf, dumpObj, throwError } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DEFAULT_ENDPOINT_URL, STR_EMPTY, STR_PROPERTIES, STR_VERSION } from \"./InternalConstants\";\r\nimport { FullVersionString, getTime, isLatency } from \"./Utils\";\r\nvar AppInsightsCore = /** @class */ (function (_super) {\r\n    __extends(AppInsightsCore, _super);\r\n    function AppInsightsCore() {\r\n        var _this = _super.call(this) || this;\r\n        _this.pluginVersionStringArr = [];\r\n        dynamicProto(AppInsightsCore, _this, function (_self, _base) {\r\n            if (!_self.logger || !_self.logger.queue) {\r\n                // The AI Base can inject a No-Op logger so if not defined or the No-Op, change to use a default logger so initialization errors\r\n                // are not dropped on the floor if one is not already defined\r\n                _self.logger = new DiagnosticLogger({ loggingLevelConsole: 1 /* eLoggingSeverity.CRITICAL */ });\r\n            }\r\n            _self.initialize = function (config, extensions, logger, notificationManager) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.initialize\"; }, function () {\r\n                    var _pluginVersionStringArr = _self.pluginVersionStringArr;\r\n                    // Add default collector url\r\n                    if (config) {\r\n                        if (!config.endpointUrl) {\r\n                            config.endpointUrl = STR_DEFAULT_ENDPOINT_URL;\r\n                        }\r\n                        var propertyStorageOverride = config.propertyStorageOverride;\r\n                        // Validate property storage override\r\n                        if (propertyStorageOverride && (!propertyStorageOverride.getProperty || !propertyStorageOverride.setProperty)) {\r\n                            throwError(\"Invalid property storage override passed.\");\r\n                        }\r\n                        if (config.channels) {\r\n                            arrForEach(config.channels, function (channels) {\r\n                                if (channels) {\r\n                                    arrForEach(channels, function (channel) {\r\n                                        if (channel.identifier && channel.version) {\r\n                                            var ver = channel.identifier + \"=\" + channel.version;\r\n                                            _pluginVersionStringArr.push(ver);\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    _self.getWParam = function () {\r\n                        return (typeof document !== \"undefined\" || !!config.enableWParam) ? 0 : -1;\r\n                    };\r\n                    if (extensions) {\r\n                        arrForEach(extensions, function (ext) {\r\n                            if (ext && ext.identifier && ext.version) {\r\n                                var ver = ext.identifier + \"=\" + ext.version;\r\n                                _pluginVersionStringArr.push(ver);\r\n                            }\r\n                        });\r\n                    }\r\n                    _self.pluginVersionString = _pluginVersionStringArr.join(\";\");\r\n                    _self.pluginVersionStringArr = _pluginVersionStringArr;\r\n                    try {\r\n                        _base.initialize(config, extensions, logger, notificationManager);\r\n                        _self.pollInternalLogs(\"InternalLog\");\r\n                    }\r\n                    catch (e) {\r\n                        var logger_1 = _self.logger;\r\n                        var message = dumpObj(e);\r\n                        if (message.indexOf(\"channels\") !== -1) {\r\n                            // Add some additional context to the underlying reported error\r\n                            message += \"\\n - Channels must be provided through config.channels only!\";\r\n                        }\r\n                        _throwInternal(logger_1, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"SDK Initialization Failed - no telemetry will be sent: \" + message);\r\n                    }\r\n                }, function () { return ({ config: config, extensions: extensions, logger: logger, notificationManager: notificationManager }); });\r\n            };\r\n            _self.track = function (item) {\r\n                doPerf(_self, function () { return \"AppInsightsCore.track\"; }, function () {\r\n                    var telemetryItem = item;\r\n                    if (telemetryItem) {\r\n                        telemetryItem.timings = telemetryItem.timings || {};\r\n                        telemetryItem.timings.trackStart = getTime();\r\n                        if (!isLatency(telemetryItem.latency)) {\r\n                            telemetryItem.latency = 1 /* EventLatencyValue.Normal */;\r\n                        }\r\n                        var itemExt = telemetryItem.ext = telemetryItem.ext || {};\r\n                        itemExt.sdk = itemExt.sdk || {};\r\n                        itemExt.sdk.ver = FullVersionString;\r\n                        var baseData = telemetryItem.baseData = telemetryItem.baseData || {};\r\n                        baseData[STR_PROPERTIES] = baseData[STR_PROPERTIES] || {};\r\n                        var itemProperties = baseData[STR_PROPERTIES];\r\n                        itemProperties[STR_VERSION] = itemProperties[STR_VERSION] || _self.pluginVersionString || STR_EMPTY;\r\n                    }\r\n                    _base.track(telemetryItem);\r\n                }, function () { return ({ item: item }); }, !(item.sync));\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for AppInsightsCore.prototype.initialize.\r\n// Removed Stub for AppInsightsCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    AppInsightsCore.__ieDyn=1;\n\n    return AppInsightsCore;\r\n}(InternalCore));\r\nexport default AppInsightsCore;\r\n//# sourceMappingURL=AppInsightsCore.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* BaseCore.ts\r\n* Base Core is a subset of 1DS Web SDK Core. The purpose of Base Core is to generate a smaller bundle size while providing essential features of Core. Features that are not included in Base Core are:\r\n* 1. Internal logging\r\n* 2. Sending notifications on telemetry sent/discarded\r\n* @author Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseCore as InternalCore, _throwInternal, dumpObj } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_DEFAULT_ENDPOINT_URL } from \"./InternalConstants\";\r\nimport { FullVersionString, isDocumentObjectAvailable } from \"./Utils\";\r\nvar BaseCore = /** @class */ (function (_super) {\r\n    __extends(BaseCore, _super);\r\n    function BaseCore() {\r\n        var _this = _super.call(this) || this;\r\n        dynamicProto(BaseCore, _this, function (_self, _base) {\r\n            _self.initialize = function (config, extensions, logger, notificationManager) {\r\n                if (config && !config.endpointUrl) {\r\n                    config.endpointUrl = STR_DEFAULT_ENDPOINT_URL;\r\n                }\r\n                _self.getWParam = function () {\r\n                    return (isDocumentObjectAvailable || !!config.enableWParam) ? 0 : -1;\r\n                };\r\n                try {\r\n                    _base.initialize(config, extensions, logger, notificationManager);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_self.logger, 1 /* eLoggingSeverity.CRITICAL */, 514 /* _eExtendedInternalMessageId.FailedToInitializeSDK */, \"Initialization Failed: \" + dumpObj(e) + \"\\n - Note: Channels must be provided through config.channels only\");\r\n                }\r\n            };\r\n            _self.track = function (item) {\r\n                var telemetryItem = item;\r\n                if (telemetryItem) {\r\n                    var ext = telemetryItem.ext = telemetryItem.ext || {};\r\n                    ext.sdk = ext.sdk || {};\r\n                    ext.sdk.ver = FullVersionString;\r\n                }\r\n                _base.track(telemetryItem);\r\n            };\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for BaseCore.prototype.initialize.\r\n// Removed Stub for BaseCore.prototype.track.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseCore.__ieDyn=1;\n\n    return BaseCore;\r\n}(InternalCore));\r\nexport default BaseCore;\r\n//# sourceMappingURL=BaseCore.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ESPromise.ts\r\n* @author  Nev Wylie (newylie))\r\n* @copyright Microsoft 2019\r\n* Simplified wrapper to provide ES6 style Promise callback handling for older browsers\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { isFunction } from \"@microsoft/applicationinsights-core-js\";\r\n/**\r\n * @ignore -- Don't include in the generated documentation\r\n * Using a local variable to assist with minfication\r\n */\r\nvar _isFunction = isFunction;\r\n/**\r\n * @ignore -- Don't include in the generated documentation\r\n * This function will be used as onFulfilled handler for any Promise found in the iterable passed to Promise.all.\r\n * The goal here is to capture in a closure the index of the current item from the iterable. If we did not create\r\n * this closure, the captured index variable would be the same one that the for loop updates and thus would always\r\n * be pointing to the last index in the iterable by the time that the onFulfilled handler is called.\r\n * However, note that for the resolvedCallback callback we want the opposite. For this one we do want to capture\r\n * the same variable that the for loop updates so that we have the full count of pending promises by the time\r\n * the onFulfilled handlers start getting called.\r\n * @param values The resolving promise values\r\n * @param index The index of this callback function\r\n * @param resolvedCallback THe callback function used to check if the \"all\" promise is complete\r\n */\r\nfunction _createPromiseAllOnResolvedFunction(values, index, resolvedCallback) {\r\n    return function (value) {\r\n        values[index] = value;\r\n        resolvedCallback();\r\n    };\r\n}\r\n/**\r\n * Simplified wrapper to provide ES6 style Promise callback handling for older browsers\r\n */\r\nvar ESPromise = /** @class */ (function () {\r\n    /**\r\n     * The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.\r\n     * @param resolverFunc A function that is passed with the arguments resolve and reject. The executor function is executed\r\n     * immediately by the Promise implementation, passing resolve and reject functions (the executor is called before the Promise\r\n     * constructor even returns the created object). The resolve and reject functions, when called, resolve or reject the promise,\r\n     * respectively. The executor normally initiates some asynchronous work, and then, once that completes, either calls the resolve\r\n     * function to resolve the promise or else rejects it if an error occurred. If an error is thrown in the executor function, the\r\n     * promise is rejected. The return value of the executor is ignored.\r\n     */\r\n    function ESPromise(resolverFunc) {\r\n        var _state = 0 /* PromiseState.Pending */;\r\n        var _settledValue = null;\r\n        var _queue = [];\r\n        dynamicProto(ESPromise, this, function (_this) {\r\n            _this.then = function (onResolved, onRejected) {\r\n                return new ESPromise(function (resolve, reject) {\r\n                    // Queue the new promise returned to be resolved or rejected\r\n                    // when this promise settles.\r\n                    _enqueue(onResolved, onRejected, resolve, reject);\r\n                });\r\n            };\r\n            _this[\"catch\"] = function (onRejected) {\r\n                return _this.then(null, onRejected);\r\n            };\r\n        });\r\n        function _enqueue(onResolved, onRejected, resolve, reject) {\r\n            _queue.push(function () {\r\n                var value;\r\n                try {\r\n                    // First call the onFulfilled or onRejected handler, on the settled value\r\n                    // of this promise. If the corresponding handler does not exist, simply\r\n                    // pass through the settled value.\r\n                    if (_state === 1 /* PromiseState.Resolved */) {\r\n                        value = _isFunction(onResolved) ? onResolved(_settledValue) : _settledValue;\r\n                    }\r\n                    else {\r\n                        value = _isFunction(onRejected) ? onRejected(_settledValue) : _settledValue;\r\n                    }\r\n                    if (value instanceof ESPromise) {\r\n                        // The called handlers returned a new promise, so the chained promise\r\n                        // will follow the state of this promise.\r\n                        value.then(resolve, reject);\r\n                    }\r\n                    else if (_state === 2 /* PromiseState.Rejected */ && !_isFunction(onRejected)) {\r\n                        // If there wasn't an onRejected handler and this promise is rejected, then\r\n                        // the chained promise also rejects with the same reason.\r\n                        reject(value);\r\n                    }\r\n                    else {\r\n                        // If this promise is fulfilled, then the chained promise is also fulfilled\r\n                        // with either the settled value of this promise (if no onFulfilled handler\r\n                        // was available) or the return value of the handler. If this promise is\r\n                        // rejected and there was an onRejected handler, then the chained promise is\r\n                        // fulfilled with the return value of the handler.\r\n                        resolve(value);\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    // The chained promise will reject if there is any exception thrown while\r\n                    // calling the onFulfilled or onRejected handlers.\r\n                    reject(error);\r\n                    return;\r\n                }\r\n            });\r\n            // If this promise is already settled, then immediately process the callback we\r\n            // just added to the queue.\r\n            if (_state !== 0 /* PromiseState.Pending */) {\r\n                _processQueue();\r\n            }\r\n        }\r\n        function _processQueue() {\r\n            if (_queue.length > 0) {\r\n                // The onFulfilled and onRejected handlers must be called asynchronously. Thus,\r\n                // we make a copy of the queue and work on it once the current call stack unwinds.\r\n                var pending_1 = _queue.slice();\r\n                _queue = [];\r\n                setTimeout(function () {\r\n                    for (var i = 0, len = pending_1.length; i < len; ++i) {\r\n                        try {\r\n                            pending_1[i]();\r\n                        }\r\n                        catch (e) {\r\n                            // Don't let 1 failing handler break all others\r\n                            // TODO (newylie): Add some form of error reporting (i.e. Call any registered JS error handler so the error is reported)\r\n                        }\r\n                    }\r\n                }, 0);\r\n            }\r\n        }\r\n        function _resolve(value) {\r\n            if (_state === 0 /* PromiseState.Pending */) {\r\n                _settledValue = value;\r\n                _state = 1 /* PromiseState.Resolved */;\r\n                _processQueue();\r\n            }\r\n        }\r\n        function _reject(reason) {\r\n            if (_state === 0 /* PromiseState.Pending */) {\r\n                _settledValue = reason;\r\n                _state = 2 /* PromiseState.Rejected */;\r\n                _processQueue();\r\n            }\r\n        }\r\n        (function _initialize() {\r\n            if (!_isFunction(resolverFunc)) {\r\n                throw new TypeError(\"ESPromise: resolvedFunc argument is not a Function\");\r\n            }\r\n            try {\r\n                resolverFunc(_resolve, _reject);\r\n            }\r\n            catch (error) {\r\n                // This promise will immediately reject if any exception is thrown\r\n                // from within the executor function.\r\n                _reject(error);\r\n            }\r\n        })();\r\n    }\r\n    /**\r\n     * The Promise.resolve() method returns a Promise object that is resolved with a given value. If the value is a promise, that promise is returned;\r\n     * if the value is a thenable (i.e. has a \"then\" method), the returned promise will \"follow\" that thenable, adopting its eventual state; otherwise\r\n     * the returned promise will be fulfilled with the value. This function flattens nested layers of promise-like objects (e.g. a promise that resolves\r\n     * to a promise that resolves to something) into a single layer.\r\n     * @param value Argument to be resolved by this Promise. Can also be a Promise or a thenable to resolve.\r\n     */\r\n    ESPromise.resolve = function (value) {\r\n        if (value instanceof ESPromise) {\r\n            // Value is a Promise so just return it\r\n            return value;\r\n        }\r\n        else if (value && _isFunction(value.then)) {\r\n            // Value looks like a promise or thenable (has a then function)\r\n            return new ESPromise(function (resolve, reject) {\r\n                try {\r\n                    value.then(resolve, reject);\r\n                }\r\n                catch (error) {\r\n                    reject(error);\r\n                }\r\n            });\r\n        }\r\n        return new ESPromise(function (resolve) {\r\n            resolve(value);\r\n        });\r\n    };\r\n    /**\r\n     * The Promise.reject() method returns a Promise object that is rejected with a given reason.\r\n     * @param reason The reason why this Promise rejected.\r\n     */\r\n    ESPromise.reject = function (reason) {\r\n        return new ESPromise(function (resolve, reject) {\r\n            reject(reason);\r\n        });\r\n    };\r\n    /**\r\n     * The Promise.all() method returns a single Promise that resolves when all of the promises passed as an iterable\r\n     * have resolved or when the iterable contains no promises. It rejects with the reason of the first promise that\r\n     * rejects. There is no implied ordering in the execution of the array of Promises given. On some computers, they\r\n     * may be executed in parallel, or in some sense concurrently, while on others they may be executed serially. For\r\n     * this reason, there must be no dependency in any Promise on the order of execution of the Promises.\r\n     * This method can be useful for aggregating the results of multiple promises.\r\n     * FulfillmentSection - The returned promise is fulfilled with an array containing all the values of the iterable\r\n     * passed as argument (also non-promise values).\r\n     * If an empty iterable is passed, then this method returns (synchronously) an already resolved promise.\r\n     * If all of the passed-in promises fulfill, or are not promises, the promise returned by Promise.all is fulfilled\r\n     * asynchronously.\r\n     * RejectionSection - If any of the passed-in promises reject, Promise.all asynchronously rejects with the value of\r\n     * the promise that rejected, whether or not the other promises have resolved.\r\n     * @param iterable\r\n     */\r\n    ESPromise.all = function (iterable) {\r\n        if (!iterable || !iterable.length) {\r\n            return;\r\n        }\r\n        return new ESPromise(function (resolve, reject) {\r\n            try {\r\n                var values_1 = [];\r\n                var pending_2 = 0;\r\n                for (var lp = 0; lp < iterable.length; lp++) {\r\n                    var item = iterable[lp];\r\n                    // Quick and direct check for a Promise (will also catch a thenable)\r\n                    if (item && _isFunction(item.then)) {\r\n                        pending_2++;\r\n                        item.then(_createPromiseAllOnResolvedFunction(values_1, lp, function () {\r\n                            if (--pending_2 === 0) {\r\n                                resolve(values_1);\r\n                            }\r\n                        }), reject);\r\n                    }\r\n                    else {\r\n                        values_1[lp] = item;\r\n                    }\r\n                }\r\n                if (pending_2 === 0) {\r\n                    // All promises were either resolved or where not a promise\r\n                    setTimeout(function () {\r\n                        resolve(values_1);\r\n                    }, 0);\r\n                }\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * The race function returns a Promise that is settled the same way (and takes the same value) as the first promise\r\n     * that settles amongst the promises of the iterable passed as an argument.\r\n     * If the iterable passed is empty, the promise returned will be forever pending.\r\n     * If the iterable contains one or more non-promise value and/or an already settled promise, then Promise.race will\r\n     * resolve to the first of these values found in the iterable.\r\n     * @param iterable\r\n     */\r\n    ESPromise.race = function (iterable) {\r\n        return new ESPromise(function (resolve, reject) {\r\n            if (!iterable || !iterable.length) {\r\n                return;\r\n            }\r\n            try {\r\n                var _loop_1 = function (lp) {\r\n                    var item = iterable[lp];\r\n                    // Quick and direct check for a Promise (will also catch a thenable)\r\n                    if (item && _isFunction(item.then)) {\r\n                        item.then(resolve, reject);\r\n                    }\r\n                    else {\r\n                        setTimeout(function () {\r\n                            resolve(item);\r\n                        }, 0);\r\n                    }\r\n                };\r\n                for (var lp = 0; lp < iterable.length; lp++) {\r\n                    _loop_1(lp);\r\n                }\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    };\r\n// Removed Stub for ESPromise.prototype.then.\r\n// Removed Stub for ESPromise.prototype[\"catch\"].\r\n    return ESPromise;\r\n}());\r\nexport default ESPromise;\r\n//# sourceMappingURL=ESPromise.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ESPromiseScheduler.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2019\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport ESPromise from \"./ESPromise\";\r\nimport { _warnToConsole, getGlobal } from \"@microsoft/applicationinsights-core-js\";\r\n/** This is a default timeout that will cause outstanding running promises to be removed/rejected to avoid filling up memory with blocked events */\r\nvar LazyRejectPeriod = 600000; // 10 Minutes\r\n// These are global variables that are shared across ALL instances of the scheduler\r\n/**\r\n * @ignore\r\n */\r\nvar _schedulerId = 0;\r\n/**\r\n * @ignore\r\n */\r\nvar _running = [];\r\n/**\r\n * @ignore\r\n */\r\nvar _waiting = [];\r\n/**\r\n * @ignore\r\n */\r\nvar _timedOut = [];\r\n/**\r\n * @ignore\r\n */\r\nfunction _getTime() {\r\n    return new Date().getTime();\r\n}\r\n/**\r\n * Provides a simple mechanism queueing mechanism for scheduling events based on the ESPromise callbacks, this is used to ensure\r\n * order of async operations that are required to be executed in a specific order.\r\n */\r\nvar ESPromiseScheduler = /** @class */ (function () {\r\n    function ESPromiseScheduler(name, diagLog) {\r\n        var _promiseId = 0;\r\n        var _scheduledName = (name || \"<unnamed>\") + \".\" + _schedulerId;\r\n        _schedulerId++;\r\n        dynamicProto(ESPromiseScheduler, this, function (_this) {\r\n            var _lastEvent = null;\r\n            var _eventCount = 0;\r\n            _this.scheduleEvent = function (startEventAction, eventName, timeout) {\r\n                var uniqueId = _scheduledName + \".\" + _eventCount;\r\n                _eventCount++;\r\n                if (eventName) {\r\n                    uniqueId += \"-(\" + eventName + \")\";\r\n                }\r\n                var uniqueEventId = uniqueId + \"{\" + _promiseId + \"}\";\r\n                _promiseId++;\r\n                // Create the next scheduled event details\r\n                var newScheduledEvent = {\r\n                    evt: null,\r\n                    tm: _getTime(),\r\n                    id: uniqueEventId,\r\n                    isRunning: false,\r\n                    isAborted: false\r\n                };\r\n                if (!_lastEvent) {\r\n                    // We don't have any currently running event, so just start the next event\r\n                    newScheduledEvent.evt = _startWaitingEvent(newScheduledEvent);\r\n                }\r\n                else {\r\n                    // Start a new promise which will wait until all current active events are complete before starting\r\n                    // the new event, it does not resolve this scheduled event until after the new event is resolve to\r\n                    // ensure that all scheduled events are completed in the correct order\r\n                    newScheduledEvent.evt = _waitForPreviousEvent(newScheduledEvent, _lastEvent);\r\n                }\r\n                // Set this new event as the last one, so that any future events will wait for this one\r\n                _lastEvent = newScheduledEvent;\r\n                _lastEvent.evt._schId = uniqueEventId;\r\n                return newScheduledEvent.evt;\r\n                function _abortAndRemoveOldEvents(eventQueue) {\r\n                    var now = _getTime();\r\n                    var expired = now - LazyRejectPeriod;\r\n                    var len = eventQueue.length;\r\n                    var lp = 0;\r\n                    while (lp < len) {\r\n                        var evt = eventQueue[lp];\r\n                        if (evt && evt.tm < expired) {\r\n                            var message = null;\r\n                            if (evt.abort) {\r\n                                message = \"Aborting [\" + evt.id + \"] due to Excessive runtime (\" + (now - evt.tm) + \" ms)\";\r\n                                evt.abort(message);\r\n                            }\r\n                            else {\r\n                                message = \"Removing [\" + evt.id + \"] due to Excessive runtime (\" + (now - evt.tm) + \" ms)\";\r\n                            }\r\n                            _warnLog(message);\r\n                            eventQueue.splice(lp, 1);\r\n                            len--;\r\n                        }\r\n                        else {\r\n                            lp++;\r\n                        }\r\n                    }\r\n                }\r\n                function _cleanup(eventId, completed) {\r\n                    var toQueue = false;\r\n                    var removed = _removeQueuedEvent(_running, eventId);\r\n                    if (!removed) {\r\n                        removed = _removeQueuedEvent(_timedOut, eventId);\r\n                        toQueue = true;\r\n                    }\r\n                    if (removed) {\r\n                        if (removed.to) {\r\n                            // If there was a timeout stop it\r\n                            clearTimeout(removed.to);\r\n                            removed.to = null;\r\n                        }\r\n                        // TODO (newylie): Convert this into reportable metrics\r\n                        var tm = _getTime() - removed.tm;\r\n                        if (completed) {\r\n                            if (!toQueue) {\r\n                                _debugLog(\"Promise [\" + eventId + \"] Complete -- \" + tm + \" ms\");\r\n                            }\r\n                            else {\r\n                                _warnLog(\"Timed out event [\" + eventId + \"] finally complete -- \" + tm + \" ms\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            _timedOut.push(removed);\r\n                            _warnLog(\"Event [\" + eventId + \"] Timed out and removed -- \" + tm + \" ms\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        _debugLog(\"Failed to remove [\" + eventId + \"] from running queue\");\r\n                    }\r\n                    // Also if the last scheduled event was this event then clear it as we are now finished\r\n                    if (_lastEvent && _lastEvent.id === eventId) {\r\n                        _lastEvent = null;\r\n                    }\r\n                    _abortAndRemoveOldEvents(_running);\r\n                    _abortAndRemoveOldEvents(_waiting);\r\n                    _abortAndRemoveOldEvents(_timedOut);\r\n                }\r\n                // Return a callback function that will be called when the waiting promise is resolved or rejected to ensure\r\n                // that any outer promise is also resolved or rejected\r\n                function _removeScheduledEvent(eventId, callback) {\r\n                    return function (value) {\r\n                        _cleanup(eventId, true);\r\n                        callback && callback(value);\r\n                        return value;\r\n                    };\r\n                }\r\n                function _waitForFinalResult(eventId, startResult, schEventResolve, schEventReject) {\r\n                    startResult.then(function (value) {\r\n                        if (value instanceof ESPromise) {\r\n                            // If the result is a promise then this appears to be a chained result, so wait for this promise to complete\r\n                            _debugLog(\"Event [\" + eventId + \"] returned a promise -- waiting\");\r\n                            _waitForFinalResult(eventId, value, schEventResolve, schEventReject);\r\n                            return value;\r\n                        }\r\n                        else {\r\n                            return _removeScheduledEvent(eventId, schEventResolve)(value);\r\n                        }\r\n                    }, _removeScheduledEvent(eventId, schEventReject));\r\n                }\r\n                // Add the passed event to the active event list with resolve and reject callbacks that will remove\r\n                // it from the active event list\r\n                function _createScheduledEvent(eventDetails, startEvent) {\r\n                    var eventId = eventDetails.id;\r\n                    return new ESPromise(function (schEventResolve, schEventReject) {\r\n                        _debugLog(\"Event [\" + eventId + \"] Starting -- waited for \" + (eventDetails.wTm || \"--\") + \" ms\");\r\n                        eventDetails.isRunning = true;\r\n                        eventDetails.abort = function (message) {\r\n                            eventDetails.abort = null;\r\n                            eventDetails.isAborted = true;\r\n                            _cleanup(eventId, false);\r\n                            schEventReject(new Error(message));\r\n                        };\r\n                        var startResult = startEvent(eventId);\r\n                        if (startResult instanceof ESPromise) {\r\n                            if (timeout) {\r\n                                // Note: Only starting a timer if a timeout was specified\r\n                                eventDetails.to = setTimeout(function () {\r\n                                    _cleanup(eventId, false);\r\n                                    // Cause the listeners to reject (Note: We can't actually reject the waiting event)\r\n                                    schEventReject(new Error(\"Timed out after [\" + timeout + \"] ms\"));\r\n                                }, timeout);\r\n                            }\r\n                            _waitForFinalResult(eventId, startResult, function (theResult) {\r\n                                _debugLog(\"Event [\" + eventId + \"] Resolving after \" + (_getTime() - eventDetails.tm) + \" ms\");\r\n                                schEventResolve(theResult);\r\n                            }, schEventReject);\r\n                        }\r\n                        else {\r\n                            // The startEvent didn't return a promise so just return a resolved promise\r\n                            _debugLog(\"Promise [\" + eventId + \"] Auto completed as the start action did not return a promise\");\r\n                            schEventResolve();\r\n                        }\r\n                    });\r\n                }\r\n                function _startWaitingEvent(eventDetails) {\r\n                    var now = _getTime();\r\n                    eventDetails.wTm = now - eventDetails.tm;\r\n                    eventDetails.tm = now;\r\n                    if (eventDetails.isAborted) {\r\n                        return ESPromise.reject(new Error(\"[\" + uniqueId + \"] was aborted\"));\r\n                    }\r\n                    _running.push(eventDetails);\r\n                    return _createScheduledEvent(eventDetails, startEventAction);\r\n                }\r\n                // Start a new promise which will wait until all current active events are complete before starting\r\n                // the new event, it does not resolve this scheduled event until after the new event is resolve to\r\n                // ensure that all scheduled events are completed in the correct order\r\n                function _waitForPreviousEvent(eventDetails, waitForEvent) {\r\n                    var waitEvent = new ESPromise(function (waitResolve, waitReject) {\r\n                        var runTime = _getTime() - waitForEvent.tm;\r\n                        var prevId = waitForEvent.id;\r\n                        _debugLog(\"[\" + uniqueId + \"] is waiting for [\" + prevId + \":\" + runTime + \" ms] to complete before starting -- [\" + _waiting.length + \"] waiting and [\" + _running.length + \"] running\");\r\n                        eventDetails.abort = function (message) {\r\n                            eventDetails.abort = null;\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            eventDetails.isAborted = true;\r\n                            waitReject(new Error(message));\r\n                        };\r\n                        // Wait for the previous event to complete\r\n                        waitForEvent.evt.then(function (value) {\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            // Wait for the last event to complete before starting the new one, this ensures the execution\r\n                            // order so that we don't try and remove events that havn't been committed yet\r\n                            _startWaitingEvent(eventDetails).then(waitResolve, waitReject);\r\n                        }, function (reason) {\r\n                            _removeQueuedEvent(_waiting, uniqueId);\r\n                            // Wait for the last event to complete before starting the new one, this ensures the execution\r\n                            // order so that we don't try and remove events that havn't been committed yet\r\n                            _startWaitingEvent(eventDetails).then(waitResolve, waitReject);\r\n                        });\r\n                    });\r\n                    _waiting.push(eventDetails);\r\n                    return waitEvent;\r\n                }\r\n            };\r\n            function _removeQueuedEvent(queue, eventId) {\r\n                for (var lp = 0; lp < queue.length; lp++) {\r\n                    if (queue[lp].id === eventId) {\r\n                        return queue.splice(lp, 1)[0];\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n        });\r\n        function _debugLog(message) {\r\n            // Only log if running within test harness\r\n            var global = getGlobal();\r\n            if (global && global[\"QUnit\"]) {\r\n                // tslint:disable-next-line:no-console\r\n                console && console.log(\"ESPromiseScheduler[\" + _scheduledName + \"] \" + message);\r\n            }\r\n        }\r\n        function _warnLog(message) {\r\n            _warnToConsole(diagLog, \"ESPromiseScheduler[\" + _scheduledName + \"] \" + message);\r\n        }\r\n    }\r\n    ESPromiseScheduler.incomplete = function () {\r\n        return _running;\r\n    };\r\n    ESPromiseScheduler.waitingToStart = function () {\r\n        return _waiting;\r\n    };\r\n// Removed Stub for ESPromiseScheduler.prototype.scheduleEvent.\r\n    return ESPromiseScheduler;\r\n}());\r\nexport default ESPromiseScheduler;\r\n//# sourceMappingURL=ESPromiseScheduler.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { isNullOrUndefined, isString, objForEachKey } from \"@microsoft/applicationinsights-core-js\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { getFieldValueType, isValueAssigned, isValueKind } from \"./Utils\";\r\nvar ValueSanitizer = /** @class */ (function () {\r\n    function ValueSanitizer(fieldSanitizerProvider) {\r\n        var _self = this;\r\n        // To aid with performance this is a lookup map to check if the field value sanitizer supports this field\r\n        var _sanitizerMap = {};\r\n        var _sanitizers = [];\r\n        var _fieldSanitizers = [];\r\n        if (fieldSanitizerProvider) {\r\n            _fieldSanitizers.push(fieldSanitizerProvider);\r\n        }\r\n        function _getFieldSanitizer(path, name) {\r\n            var result;\r\n            var fieldLookup = _sanitizerMap[path];\r\n            if (fieldLookup) {\r\n                result = fieldLookup[name];\r\n            }\r\n            if (!result && result !== null) {\r\n                // Null is a valid result indicating that the value sanitizer does not support this field\r\n                if (isString(path) && isString(name)) {\r\n                    if (_fieldSanitizers.length > 0) {\r\n                        for (var lp = 0; lp < _fieldSanitizers.length; lp++) {\r\n                            if (_fieldSanitizers[lp].handleField(path, name)) {\r\n                                result = {\r\n                                    canHandle: true,\r\n                                    fieldHandler: _fieldSanitizers[lp]\r\n                                };\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (_sanitizers.length === 0) {\r\n                        // Special use-case where there is no sanitizer to pass on to, so just resolving the field\r\n                        // and returning the resulting value (same as sanitizeProperty())\r\n                        result = {\r\n                            canHandle: true\r\n                        };\r\n                    }\r\n                }\r\n                // We still don't have a handler so lets lookup the providers\r\n                if (!result && result !== null) {\r\n                    // Setting the result to null -- which means we and any contained sanitizers can't handle this field\r\n                    result = null;\r\n                    for (var lp = 0; lp < _sanitizers.length; lp++) {\r\n                        if (_sanitizers[lp].handleField(path, name)) {\r\n                            result = {\r\n                                canHandle: true,\r\n                                handler: _sanitizers[lp],\r\n                                fieldHandler: null\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (!fieldLookup) {\r\n                    fieldLookup = _sanitizerMap[path] = {};\r\n                }\r\n                fieldLookup[name] = result;\r\n            }\r\n            return result;\r\n        }\r\n        _self.addSanitizer = function (newSanitizer) {\r\n            if (newSanitizer) {\r\n                _sanitizers.push(newSanitizer);\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self.addFieldSanitizer = function (fieldSanitizer) {\r\n            if (fieldSanitizer) {\r\n                _fieldSanitizers.push(fieldSanitizer);\r\n                // Invalidate any previously mapped fields\r\n                _sanitizerMap = {};\r\n            }\r\n        };\r\n        _self.handleField = function (path, name) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            return mapValue ? mapValue.canHandle : false;\r\n        };\r\n        _self.value = function (path, name, value, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (mapValue && mapValue.canHandle) {\r\n                if (!mapValue || !mapValue.canHandle) {\r\n                    return null;\r\n                }\r\n                if (mapValue.handler) {\r\n                    // This value sanitizer can't handle this field so pass it only the next one\r\n                    return mapValue.handler.value(path, name, value, stringifyObjects);\r\n                }\r\n                // Check that property is valid\r\n                if (!isString(name) || isNullOrUndefined(value) || value === STR_EMPTY) {\r\n                    return null;\r\n                }\r\n                var property = null;\r\n                var fieldType = getFieldValueType(value);\r\n                if ((fieldType & 8192 /* FieldValueSanitizerType.EventProperty */) === 8192 /* FieldValueSanitizerType.EventProperty */) {\r\n                    var subType = fieldType & ~8192 /* FieldValueSanitizerType.EventProperty */;\r\n                    property = value;\r\n                    if (!isValueAssigned(property.value) ||\r\n                        (subType !== 1 /* FieldValueSanitizerType.String */ &&\r\n                            subType !== 2 /* FieldValueSanitizerType.Number */ &&\r\n                            subType !== 3 /* FieldValueSanitizerType.Boolean */ &&\r\n                            (subType & 4096 /* FieldValueSanitizerType.Array */) !== 4096 /* FieldValueSanitizerType.Array */)) {\r\n                        // Not a supported IEventProperty type to be able to sanitize\r\n                        return null;\r\n                    }\r\n                }\r\n                else if (fieldType === 1 /* FieldValueSanitizerType.String */ ||\r\n                    fieldType === 2 /* FieldValueSanitizerType.Number */ ||\r\n                    fieldType === 3 /* FieldValueSanitizerType.Boolean */ ||\r\n                    (fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */) {\r\n                    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n                    property = _convertToProperty(path, name, value);\r\n                }\r\n                else if (fieldType === 4 /* FieldValueSanitizerType.Object */) {\r\n                    property = _convertToProperty(path, name, !!stringifyObjects ? JSON.stringify(value) : value);\r\n                }\r\n                if (property) {\r\n                    return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        _self.property = function (path, name, property, stringifyObjects) {\r\n            var mapValue = _getFieldSanitizer(path, name);\r\n            if (!mapValue || !mapValue.canHandle) {\r\n                return null;\r\n            }\r\n            // Check that property is valid\r\n            if (!isString(name) || isNullOrUndefined(property) || !isValueAssigned(property.value)) {\r\n                return null;\r\n            }\r\n            var fieldType = getFieldValueType(property.value);\r\n            if (fieldType === 0 /* FieldValueSanitizerType.NotSet */) {\r\n                // Not a supported field that we can sanitize or serialize\r\n                return null;\r\n            }\r\n            return _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects);\r\n        };\r\n        function _handleProperty(mapValue, path, name, fieldType, property, stringifyObjects) {\r\n            if (mapValue.handler) {\r\n                // This value sanitizer can't handle this field so pass it only the next one\r\n                return mapValue.handler.property(path, name, property, stringifyObjects);\r\n            }\r\n            // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n            // If the value is a complex type like an array that can't be converted to string we will drop\r\n            // the property.\r\n            if (!isNullOrUndefined(property.kind)) {\r\n                if ((fieldType & 4096 /* FieldValueSanitizerType.Array */) === 4096 /* FieldValueSanitizerType.Array */ || !isValueKind(property.kind)) {\r\n                    return null;\r\n                }\r\n                // Convert the value to a string and assign back to the original value\r\n                property.value = property.value.toString();\r\n            }\r\n            return _callFieldSanitizer(mapValue.fieldHandler, path, name, fieldType, property);\r\n        }\r\n        function _convertToProperty(path, name, value) {\r\n            if (isValueAssigned(value)) {\r\n                return { value: value };\r\n            }\r\n            return null;\r\n        }\r\n        function _callFieldSanitizer(fieldProvider, path, name, theType, property) {\r\n            if (property && fieldProvider) {\r\n                var sanitizer = fieldProvider.getSanitizer(path, name, theType, property.kind, property.propertyType);\r\n                if (sanitizer) {\r\n                    // This is where we the field will call the handler to \"scrub\" the value. This the primary hook for the ClientHashing Plugin to\r\n                    // be able to apply the hashFunc() / Sha256 conversion of the properties value\r\n                    if (theType === 4 /* FieldValueSanitizerType.Object */) {\r\n                        // Special case of an embedded object (ext.metadata, data.properties)\r\n                        var newValue_1 = {};\r\n                        var propValue = property.value;\r\n                        objForEachKey(propValue, function (propKey, theValue) {\r\n                            var newPath = path + \".\" + name;\r\n                            if (isValueAssigned(theValue)) {\r\n                                var newProp = _convertToProperty(newPath, propKey, theValue);\r\n                                newProp = _callFieldSanitizer(fieldProvider, newPath, propKey, getFieldValueType(theValue), newProp);\r\n                                if (newProp) {\r\n                                    newValue_1[propKey] = newProp.value;\r\n                                }\r\n                            }\r\n                        });\r\n                        property.value = newValue_1;\r\n                    }\r\n                    else {\r\n                        var details = {\r\n                            path: path,\r\n                            name: name,\r\n                            type: theType,\r\n                            prop: property,\r\n                            sanitizer: _self\r\n                        };\r\n                        property = sanitizer.call(_self, details);\r\n                    }\r\n                }\r\n            }\r\n            return property;\r\n        }\r\n    }\r\n    ValueSanitizer.getFieldType = getFieldValueType;\r\n    return ValueSanitizer;\r\n}());\r\nexport { ValueSanitizer };\r\n//# sourceMappingURL=ValueSanitizer.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\"use strict\";\r\nexport var MinChannelPriorty = 100;\r\n//# sourceMappingURL=IChannelControls.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_DEFAULT_ENDPOINT_URL = \"https://browser.events.data.microsoft.com/OneCollector/1.0/\";\r\nexport var STR_PLUGIN_VERSION_STRING = \"pluginVersionString\";\r\nexport var STR_PLUGIN_VERSION_STRING_ARR = STR_PLUGIN_VERSION_STRING + \"Arr\";\r\nexport var STR_VERSION = \"version\";\r\nexport var STR_PROPERTIES = \"properties\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK Core, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* Utils.ts\r\n* @author  Abhilash Panwar (abpanwar) Hector Hernandez (hectorh)\r\n* @copyright Microsoft 2018\r\n* File containing utility functions.\r\n*/\r\nimport { addEventHandler, addPageUnloadEventListener, areCookiesSupported, arrForEach, arrIndexOf, arrMap, arrReduce, dateNow, generateW3CId, getDocument, getGlobalInst, getNavigator, getWindow, hasOwnProperty, isArray, isBeaconsSupported, isBoolean, isDate, isError, isFunction, isIE, isNullOrUndefined, isNumber, isObject, isReactNative, isString, isTypeof, isUndefined, mwcRandom32, mwcRandomSeed, newGuid, newId, objDefineAccessors, objForEachKey, objKeys, perfNow, random32, randomValue, safeGetCookieMgr, strEndsWith, strObject, strTrim, strUndefined, toISOString, uaDisallowsSameSiteNone, useXDomainRequest } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ObjHasOwnProperty, objCreateFn, strShimObject, strShimPrototype } from \"@microsoft/applicationinsights-shims\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nexport var Version = '3.2.13';\r\nexport var FullVersionString = \"1DS-Web-JS-\" + Version;\r\n// Defining here so we don't need to take (import) the ApplicationInsights Common module\r\nvar strDisabledPropertyName = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nvar strWithCredentials = \"withCredentials\";\r\nvar strTimeout = \"timeout\";\r\n// If value is array just get the type for the first element\r\nvar _fieldTypeEventPropMap = (_a = {},\r\n    _a[0 /* FieldValueSanitizerType.NotSet */] = 0 /* eEventPropertyType.Unspecified */,\r\n    _a[2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 2 /* FieldValueSanitizerType.Number */] = 6 /* eEventPropertyType.Double */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 1 /* FieldValueSanitizerType.String */] = 1 /* eEventPropertyType.String */,\r\n    _a[4096 /* FieldValueSanitizerType.Array */ | 3 /* FieldValueSanitizerType.Boolean */] = 7 /* eEventPropertyType.Bool */,\r\n    _a);\r\n/**\r\n * @ignore\r\n */\r\n// let _uaDisallowsSameSiteNone = null;\r\nvar uInt8ArraySupported = null;\r\n// var _areCookiesAvailable: boolean | undefined;\r\n/**\r\n * Checks if document object is available\r\n */\r\nexport var isDocumentObjectAvailable = Boolean(getDocument());\r\n/**\r\n * Checks if window object is available\r\n */\r\nexport var isWindowObjectAvailable = Boolean(getWindow());\r\n/**\r\n * Checks if value is assigned to the given param.\r\n * @param value - The token from which the tenant id is to be extracted.\r\n * @returns True/false denoting if value is assigned to the param.\r\n */\r\nexport function isValueAssigned(value) {\r\n    /// <summary> takes a value and checks for undefined, null and empty string </summary>\r\n    /// <param type=\"any\"> value to be tested </param>\r\n    /// <returns> true if value is null undefined or emptyString </returns>\r\n    return !(value === STR_EMPTY || isNullOrUndefined(value));\r\n}\r\n/**\r\n * Gets the tenant id from the tenant token.\r\n * @param apiKey - The token from which the tenant id is to be extracted.\r\n * @returns The tenant id.\r\n */\r\nexport function getTenantId(apiKey) {\r\n    if (apiKey) {\r\n        var indexTenantId = apiKey.indexOf(\"-\");\r\n        if (indexTenantId > -1) {\r\n            return apiKey.substring(0, indexTenantId);\r\n        }\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Checks if Uint8Array are available in the current environment. Safari and Firefox along with\r\n * ReactNative are known to not support Uint8Array properly.\r\n * @returns True if available, false otherwise.\r\n */\r\nexport function isUint8ArrayAvailable() {\r\n    if (uInt8ArraySupported === null) {\r\n        uInt8ArraySupported = !isUndefined(Uint8Array) && !isSafariOrFirefox() && !isReactNative();\r\n    }\r\n    return uInt8ArraySupported;\r\n}\r\n/**\r\n * Checks if the value is a valid EventLatency.\r\n * @param value - The value that needs to be checked.\r\n * @returns True if the value is in AWTEventLatency, false otherwise.\r\n */\r\nexport function isLatency(value) {\r\n    if (value && isNumber(value) && value >= 1 /* EventLatencyValue.Normal */ && value <= 4 /* EventLatencyValue.Immediate */) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Sanitizes the Property. It checks the that the property name and value are valid. It also\r\n * checks/populates the correct type and pii of the property value.\r\n * @param name - property name                          - The property name.\r\n * @param property - The property value or an IEventProperty containing value,\r\n * type ,pii and customer content.\r\n * @returns IEventProperty containing valid name, value, pii and type or null if invalid.\r\n */\r\nexport function sanitizeProperty(name, property, stringifyObjects) {\r\n    // Check that property is valid\r\n    if ((!property && !isValueAssigned(property)) || typeof name !== \"string\") {\r\n        return null;\r\n    }\r\n    // Perf optimization -- only need to get the type once not multiple times\r\n    var propType = typeof property;\r\n    // If the property isn't IEventProperty (and is either string, number, boolean or array), convert it into one.\r\n    if (propType === \"string\" || propType === \"number\" || propType === \"boolean\" || isArray(property)) {\r\n        property = { value: property };\r\n    }\r\n    else if (propType === \"object\" && !ObjHasOwnProperty.call(property, \"value\")) {\r\n        property = { value: stringifyObjects ? JSON.stringify(property) : property };\r\n    }\r\n    else if (isNullOrUndefined(property.value)\r\n        || property.value === STR_EMPTY || (!isString(property.value)\r\n        && !isNumber(property.value) && !isBoolean(property.value)\r\n        && !isArray(property.value))) {\r\n        // Since property is IEventProperty, we need to validate its value\r\n        return null;\r\n    }\r\n    // We need to check that if the property value is an array, it is valid\r\n    if (isArray(property.value) &&\r\n        !isArrayValid(property.value)) {\r\n        return null;\r\n    }\r\n    // If either pii or cc is set convert value to string (since only string pii/cc is allowed).\r\n    // If the value is a complex type like an array that can't be converted to string we will drop\r\n    // the property.\r\n    if (!isNullOrUndefined(property.kind)) {\r\n        if (isArray(property.value) || !isValueKind(property.kind)) {\r\n            return null;\r\n        }\r\n        property.value = property.value.toString();\r\n    }\r\n    return property;\r\n}\r\nexport function getCommonSchemaMetaData(value, kind, type) {\r\n    var encodedTypeValue = -1;\r\n    if (!isUndefined(value)) {\r\n        if (kind > 0) {\r\n            if (kind === 32) {\r\n                // encode customer content. Value can only be string. bit 13-16 are for cc\r\n                encodedTypeValue = (1 << 13);\r\n            }\r\n            else if (kind <= 13) {\r\n                // encode PII. Value can only be string. bits 5-12 are for Pii\r\n                encodedTypeValue = (kind << 5);\r\n            }\r\n        }\r\n        // isDataType checks that the \"type\" is a number so we don't need to check for undefined\r\n        if (isDataType(type)) {\r\n            // Data Type is provided and valid, so use that\r\n            if (encodedTypeValue === -1) {\r\n                // Don't return -1\r\n                encodedTypeValue = 0;\r\n            }\r\n            encodedTypeValue |= type;\r\n        }\r\n        else {\r\n            var propType = _fieldTypeEventPropMap[getFieldValueType(value)] || -1;\r\n            if (encodedTypeValue !== -1 && propType !== -1) {\r\n                // pii exists so we must return correct type\r\n                encodedTypeValue |= propType;\r\n            }\r\n            else if (propType === 6 /* eEventPropertyType.Double */) {\r\n                encodedTypeValue = propType;\r\n            }\r\n        }\r\n    }\r\n    return encodedTypeValue;\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().disable()\r\n * Force the SDK not to store and read any data from cookies.\r\n * Overriding the applicationinsights-core version for tree-shaking\r\n */\r\nexport function disableCookies() {\r\n    safeGetCookieMgr(null).setEnabled(false);\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().set()\r\n * Sets the value of a cookie.\r\n * @param name - Cookie name.\r\n * @param value - Cookie value.\r\n * @param days - Expiration days.\r\n */\r\nexport function setCookie(name, value, days) {\r\n    if (areCookiesSupported(null)) {\r\n        safeGetCookieMgr(null).set(name, value, days * 86400, null, \"/\");\r\n    }\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().del()\r\n * Deletes a cookie, by setting its expiration to -1.\r\n * @param name - Cookie name to delete.\r\n */\r\nexport function deleteCookie(name) {\r\n    if (areCookiesSupported(null)) {\r\n        safeGetCookieMgr(null).del(name);\r\n    }\r\n}\r\n/**\r\n * @deprecated - Use the oneDs.getCookieMgr().get()\r\n * Gets the cookie value for the specified cookie.\r\n * if value is k1=v1&k2==v2 then will return 'v1' for key 'k1'\r\n * @param cookieName - Cookie name.\r\n */\r\nexport function getCookie(name) {\r\n    if (areCookiesSupported(null)) {\r\n        return getCookieValue(safeGetCookieMgr(null), name);\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Helper to get and decode the cookie value using decodeURIComponent, this is for historical\r\n * backward compatibility where the document.cookie value was decoded before parsing.\r\n * @param cookieMgr - The cookie manager to use\r\n * @param name - The name of the cookie to get\r\n * @param decode - A flag to indicate whether the cookie value should be decoded\r\n * @returns The decoded cookie value (if available) otherwise an empty string.\r\n */\r\nexport function getCookieValue(cookieMgr, name, decode) {\r\n    if (decode === void 0) { decode = true; }\r\n    var cookieValue;\r\n    if (cookieMgr) {\r\n        cookieValue = cookieMgr.get(name);\r\n        if (decode && cookieValue && decodeURIComponent) {\r\n            cookieValue = decodeURIComponent(cookieValue);\r\n        }\r\n    }\r\n    return cookieValue || STR_EMPTY;\r\n}\r\n/**\r\n * Create a new guid.\r\n * @param style - The style of guid to generated, defaults to Digits\r\n * Digits (Default) : 32 digits separated by hyphens: 00000000-0000-0000-0000-000000000000\r\n * Braces - 32 digits separated by hyphens, enclosed in braces: {00000000-0000-0000-0000-000000000000}\r\n * Parentheses - 32 digits separated by hyphens, enclosed in parentheses: (00000000-0000-0000-0000-000000000000)\r\n * Numeric - 32 digits: 00000000000000000000000000000000\r\n * @returns The formatted guid.\r\n */\r\nexport function createGuid(style) {\r\n    if (style === void 0) { style = \"D\" /* GuidStyle.Digits */; }\r\n    var theGuid = newGuid();\r\n    if (style === \"B\" /* GuidStyle.Braces */) {\r\n        theGuid = \"{\" + theGuid + \"}\";\r\n    }\r\n    else if (style === \"P\" /* GuidStyle.Parentheses */) {\r\n        theGuid = \"(\" + theGuid + \")\";\r\n    }\r\n    else if (style === \"N\" /* GuidStyle.Numeric */) {\r\n        theGuid = theGuid.replace(/-/g, STR_EMPTY);\r\n    }\r\n    return theGuid;\r\n}\r\n/**\r\n * Pass in the objects to merge as arguments.\r\n * @param obj1 - object to merge.  Set this argument to 'true' for a deep extend.\r\n * @param obj2 - object to merge.\r\n * @param obj3 - object to merge.\r\n * @param obj4 - object to merge.\r\n * @param obj5 - object to merge.\r\n * @returns The extended object.\r\n */\r\nexport function extend(obj, obj2, obj3, obj4, obj5) {\r\n    // Variables\r\n    var extended = {};\r\n    var deep = false;\r\n    var i = 0;\r\n    var length = arguments.length;\r\n    var objProto = Object[strShimPrototype];\r\n    var theArgs = arguments;\r\n    // Check if a deep merge\r\n    if (objProto.toString.call(theArgs[0]) === \"[object Boolean]\") {\r\n        deep = theArgs[0];\r\n        i++;\r\n    }\r\n    // Loop through each object and conduct a merge\r\n    for (; i < length; i++) {\r\n        var obj = theArgs[i];\r\n        objForEachKey(obj, function (prop, value) {\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && value && isObject(value)) {\r\n                if (isArray(value)) {\r\n                    extended[prop] = extended[prop] || [];\r\n                    arrForEach(value, function (arrayValue, arrayIndex) {\r\n                        if (arrayValue && isObject(arrayValue)) {\r\n                            extended[prop][arrayIndex] = extend(true, extended[prop][arrayIndex], arrayValue);\r\n                        }\r\n                        else {\r\n                            extended[prop][arrayIndex] = arrayValue;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    extended[prop] = extend(true, extended[prop], value);\r\n                }\r\n            }\r\n            else {\r\n                extended[prop] = value;\r\n            }\r\n        });\r\n    }\r\n    return extended;\r\n}\r\nexport var getTime = perfNow;\r\nexport function isValueKind(value) {\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value === 0 /* eValueKind.NotSet */ || ((value > 0 /* eValueKind.NotSet */ && value <= 13 /* eValueKind.Pii_IPV4AddressLegacy */) || value === 32 /* eValueKind.CustomerContent_GenericContent */)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isDataType(value) {\r\n    // Remark: 0 returns false, but it doesn't affect encoding anyways\r\n    // Always assume that it's a number (no type checking) for performance as this is used during the JSON serialization\r\n    if (value >= 0 && value <= 9) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSafariOrFirefox() {\r\n    var nav = getNavigator();\r\n    // If non-browser navigator will be undefined\r\n    if (!isUndefined(nav) && nav.userAgent) {\r\n        var ua = nav.userAgent.toLowerCase();\r\n        if ((ua.indexOf(\"safari\") >= 0 || ua.indexOf(\"firefox\") >= 0) && ua.indexOf(\"chrome\") < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isArrayValid(value) {\r\n    return value.length > 0;\r\n}\r\nexport function setProcessTelemetryTimings(event, identifier) {\r\n    var evt = event;\r\n    evt.timings = evt.timings || {};\r\n    evt.timings.processTelemetryStart = evt.timings.processTelemetryStart || {};\r\n    evt.timings.processTelemetryStart[identifier] = getTime();\r\n}\r\n/**\r\n * Returns a bitwise value for the FieldValueSanitizerType enum representing the decoded type of the passed value\r\n * @param value The value to determine the type\r\n */\r\nexport function getFieldValueType(value) {\r\n    var theType = 0 /* FieldValueSanitizerType.NotSet */;\r\n    if (value !== null && value !== undefined) {\r\n        var objType = typeof value;\r\n        if (objType === \"string\") {\r\n            theType = 1 /* FieldValueSanitizerType.String */;\r\n        }\r\n        else if (objType === \"number\") {\r\n            theType = 2 /* FieldValueSanitizerType.Number */;\r\n        }\r\n        else if (objType === \"boolean\") {\r\n            theType = 3 /* FieldValueSanitizerType.Boolean */;\r\n        }\r\n        else if (objType === strShimObject) {\r\n            theType = 4 /* FieldValueSanitizerType.Object */;\r\n            if (isArray(value)) {\r\n                theType = 4096 /* FieldValueSanitizerType.Array */;\r\n                if (value.length > 0) {\r\n                    // Empty arrays are not supported and are considered to be the same as null\r\n                    theType |= getFieldValueType(value[0]);\r\n                }\r\n            }\r\n            else if (ObjHasOwnProperty.call(value, \"value\")) {\r\n                // Looks like an IEventProperty\r\n                theType = 8192 /* FieldValueSanitizerType.EventProperty */ | getFieldValueType(value.value);\r\n            }\r\n        }\r\n    }\r\n    return theType;\r\n}\r\nexport var Utils = {\r\n    Version: Version,\r\n    FullVersionString: FullVersionString,\r\n    strUndefined: strUndefined,\r\n    strObject: strObject,\r\n    Undefined: strUndefined,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    objKeys: objKeys,\r\n    toISOString: toISOString,\r\n    isReactNative: isReactNative,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    isFunction: isFunction,\r\n    isArray: isArray,\r\n    isObject: isObject,\r\n    strTrim: strTrim,\r\n    isDocumentObjectAvailable: isDocumentObjectAvailable,\r\n    isWindowObjectAvailable: isWindowObjectAvailable,\r\n    isValueAssigned: isValueAssigned,\r\n    getTenantId: getTenantId,\r\n    isBeaconsSupported: isBeaconsSupported,\r\n    isUint8ArrayAvailable: isUint8ArrayAvailable,\r\n    isLatency: isLatency,\r\n    sanitizeProperty: sanitizeProperty,\r\n    getISOString: toISOString,\r\n    useXDomainRequest: useXDomainRequest,\r\n    getCommonSchemaMetaData: getCommonSchemaMetaData,\r\n    cookieAvailable: areCookiesSupported,\r\n    disallowsSameSiteNone: uaDisallowsSameSiteNone,\r\n    setCookie: setCookie,\r\n    deleteCookie: deleteCookie,\r\n    getCookie: getCookie,\r\n    createGuid: createGuid,\r\n    extend: extend,\r\n    getTime: getTime,\r\n    isValueKind: isValueKind,\r\n    isArrayValid: isArrayValid,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addPageUnloadEventListener: addPageUnloadEventListener,\r\n    setProcessTelemetryTimings: setProcessTelemetryTimings,\r\n    addEventHandler: addEventHandler,\r\n    getFieldValueType: getFieldValueType,\r\n    strEndsWith: strEndsWith,\r\n    objForEachKey: objForEachKey\r\n};\r\n/**\r\n * Provides a collection of utility functions, included for backward compatibility with previous releases.\r\n * @deprecated Marking this instance as deprecated in favor of direct usage of the helper functions\r\n * as direct usage provides better tree-shaking and minification by avoiding the inclusion of the unused items\r\n * in your resulting code.\r\n * Overriding the applicationinsights-core version for tree-shaking\r\n */\r\nexport var CoreUtils = {\r\n    _canUseCookies: undefined,\r\n    isTypeof: isTypeof,\r\n    isUndefined: isUndefined,\r\n    isNullOrUndefined: isNullOrUndefined,\r\n    hasOwnProperty: hasOwnProperty,\r\n    isFunction: isFunction,\r\n    isObject: isObject,\r\n    isDate: isDate,\r\n    isArray: isArray,\r\n    isError: isError,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    toISOString: toISOString,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    strTrim: strTrim,\r\n    objCreate: objCreateFn,\r\n    objKeys: objKeys,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addEventHandler: addEventHandler,\r\n    dateNow: dateNow,\r\n    isIE: isIE,\r\n    disableCookies: disableCookies,\r\n    newGuid: newGuid,\r\n    perfNow: perfNow,\r\n    newId: newId,\r\n    randomValue: randomValue,\r\n    random32: random32,\r\n    mwcRandomSeed: mwcRandomSeed,\r\n    mwcRandom32: mwcRandom32,\r\n    generateW3CId: generateW3CId\r\n};\r\n/**\r\n * Helper to identify whether we are running in a chromium based browser environment\r\n */\r\nexport function isChromium() {\r\n    return !!getGlobalInst(\"chrome\");\r\n}\r\n/**\r\n * Create and open an XMLHttpRequest object\r\n * @param method - The request method\r\n * @param urlString - The url\r\n * @param withCredentials - Option flag indicating that credentials should be sent\r\n * @param disabled - Optional flag indicating that the XHR object should be marked as disabled and not tracked (default is false)\r\n * @param isSync - Optional flag indicating if the instance should be a synchronous request (defaults to false)\r\n * @param timeout - Optional value identifying the timeout value that should be assigned to the XHR request\r\n * @returns A new opened XHR request\r\n */\r\nexport function openXhr(method, urlString, withCredentials, disabled, isSync, timeout) {\r\n    if (disabled === void 0) { disabled = false; }\r\n    if (isSync === void 0) { isSync = false; }\r\n    function _wrapSetXhrProp(xhr, prop, value) {\r\n        try {\r\n            xhr[prop] = value;\r\n        }\r\n        catch (e) {\r\n            // - Wrapping as depending on the environment setting the property may fail (non-terminally)\r\n        }\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (disabled) {\r\n        // Tag the instance so it's not tracked (trackDependency)\r\n        // If the environment has locked down the XMLHttpRequest (preventExtensions and/or freeze), this would\r\n        // cause the request to fail and we no telemetry would be sent\r\n        _wrapSetXhrProp(xhr, strDisabledPropertyName, disabled);\r\n    }\r\n    if (withCredentials) {\r\n        // Some libraries require that the withCredentials flag is set \"before\" open and\r\n        // - Wrapping as IE 10 has started throwing when setting before open\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    xhr.open(method, urlString, !isSync);\r\n    if (withCredentials) {\r\n        // withCredentials should be set AFTER open (https://xhr.spec.whatwg.org/#the-withcredentials-attribute)\r\n        // And older firefox instances from 11+ will throw for sync events (current versions don't) which happens during unload processing\r\n        _wrapSetXhrProp(xhr, strWithCredentials, withCredentials);\r\n    }\r\n    // Only set the timeout for asynchronous requests as\r\n    // \"Timeout shouldn't be used for synchronous XMLHttpRequests requests used in a document environment or it will throw an InvalidAccessError exception.\"\"\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout\r\n    if (!isSync && timeout) {\r\n        _wrapSetXhrProp(xhr, strTimeout, timeout);\r\n    }\r\n    return xhr;\r\n}\r\n//# sourceMappingURL=Utils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { deepFreeze, objForEachKey } from \"../JavaScriptSDK/HelperFuncs\";\r\n/**\r\n * Create an enum style object which has both the key => value and value => key mappings\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createEnumStyle(values) {\r\n    var enumClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        enumClass[field] = value;\r\n        enumClass[value] = field;\r\n    });\r\n    return deepFreeze(enumClass);\r\n}\r\n/**\r\n * Create a 2 index map that maps an enum's key as both the key and value, X[\"key\"] => \"key\" and X[0] => \"keyof 0\".\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createEnumMap(values) {\r\n    var mapClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        mapClass[field] = field;\r\n        mapClass[value] = field;\r\n    });\r\n    return deepFreeze(mapClass);\r\n}\r\n/**\r\n * Create a 2 index map that maps an enum's key and value to the defined map value, X[\"key\"] => mapValue and X[0] => mapValue.\r\n * Generic values\r\n * - E = the const enum type (typeof eRequestHeaders);\r\n * - V = Identifies the valid values for the keys, this should include both the enum numeric and string key of the type. The\r\n * resulting \"Value\" of each entry identifies the valid values withing the assignments.\r\n * @param values - The values to populate on the new object\r\n * @returns\r\n */\r\nexport function createValueMap(values) {\r\n    var mapClass = {};\r\n    objForEachKey(values, function (field, value) {\r\n        mapClass[field] = value[1];\r\n        mapClass[value[0]] = value[1];\r\n    });\r\n    return deepFreeze(mapClass);\r\n}\r\n//# sourceMappingURL=EnumHelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { createEnumStyle } from \"../JavaScriptSDK.Enums/EnumHelperFuncs\";\r\n/**\r\n * The EventsDiscardedReason enumeration contains a set of values that specify the reason for discarding an event.\r\n */\r\nexport var EventsDiscardedReason = createEnumStyle({\r\n    /**\r\n     * Unknown.\r\n     */\r\n    Unknown: 0 /* eEventsDiscardedReason.Unknown */,\r\n    /**\r\n     * Status set to non-retryable.\r\n     */\r\n    NonRetryableStatus: 1 /* eEventsDiscardedReason.NonRetryableStatus */,\r\n    /**\r\n     * The event is invalid.\r\n     */\r\n    InvalidEvent: 2 /* eEventsDiscardedReason.InvalidEvent */,\r\n    /**\r\n     * The size of the event is too large.\r\n     */\r\n    SizeLimitExceeded: 3 /* eEventsDiscardedReason.SizeLimitExceeded */,\r\n    /**\r\n     * The server is not accepting events from this instrumentation key.\r\n     */\r\n    KillSwitch: 4 /* eEventsDiscardedReason.KillSwitch */,\r\n    /**\r\n     * The event queue is full.\r\n     */\r\n    QueueFull: 5 /* eEventsDiscardedReason.QueueFull */\r\n});\r\n//# sourceMappingURL=EventsDiscardedReason.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PROCESS_TEL_CONT0, _DYN_INITIALIZE, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { arrForEach, isArray, isFunction, isNullOrUndefined, proxyFunctionAs, setValue } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_EXTENSION_CONFIG, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { createProcessTelemetryContext, createProcessTelemetryUnloadContext, createProcessTelemetryUpdateContext } from \"./ProcessTelemetryContext\";\r\nimport { createUnloadHandlerContainer } from \"./UnloadHandlerContainer\";\r\nvar strGetPlugin = \"getPlugin\";\r\n/**\r\n * BaseTelemetryPlugin provides a basic implementation of the ITelemetryPlugin interface so that plugins\r\n * can avoid implementation the same set of boiler plate code as well as provide a base\r\n * implementation so that new default implementations can be added without breaking all plugins.\r\n */\r\nvar BaseTelemetryPlugin = /** @class */ (function () {\r\n    function BaseTelemetryPlugin() {\r\n        var _self = this; // Setting _self here as it's used outside of the dynamicProto as well\r\n        // NOTE!: DON'T set default values here, instead set them in the _initDefaults() function as it is also called during teardown()\r\n        var _isinitialized;\r\n        var _rootCtx; // Used as the root context, holding the current config and initialized core\r\n        var _nextPlugin; // Used for backward compatibility where plugins don't call the main pipeline\r\n        var _unloadHandlerContainer;\r\n        var _hooks;\r\n        _initDefaults();\r\n        dynamicProto(BaseTelemetryPlugin, _self, function (_self) {\r\n            _self[_DYN_INITIALIZE /* @min:%2einitialize */] = function (config, core, extensions, pluginChain) {\r\n                _setDefaults(config, core, pluginChain);\r\n                _isinitialized = true;\r\n            };\r\n            _self[_DYN_TEARDOWN /* @min:%2eteardown */] = function (unloadCtx, unloadState) {\r\n                var _a;\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (unloadCtx && core !== unloadCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing as either the plugin is not initialized or was not initialized by the current core\r\n                    return;\r\n                }\r\n                var result;\r\n                var unloadDone = false;\r\n                var theUnloadCtx = unloadCtx || createProcessTelemetryUnloadContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUnloadState = unloadState || (_a = {\r\n                        reason: 0 /* TelemetryUnloadReason.ManualTeardown */\r\n                    },\r\n                    _a[_DYN_IS_ASYNC /* @min:isAsync */] = false,\r\n                    _a);\r\n                function _unloadCallback() {\r\n                    if (!unloadDone) {\r\n                        unloadDone = true;\r\n                        _unloadHandlerContainer.run(theUnloadCtx, unloadState);\r\n                        var oldHooks = _hooks;\r\n                        _hooks = [];\r\n                        // Remove all instrumentation hooks\r\n                        arrForEach(oldHooks, function (fn) {\r\n                            fn.rm();\r\n                        });\r\n                        if (result === true) {\r\n                            theUnloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](theUnloadState);\r\n                        }\r\n                        _initDefaults();\r\n                    }\r\n                }\r\n                if (!_self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */] || _self[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */](theUnloadCtx, theUnloadState, _unloadCallback) !== true) {\r\n                    _unloadCallback();\r\n                }\r\n                else {\r\n                    // Tell the caller that we will be calling processNext()\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self[_DYN_UPDATE /* @min:%2eupdate */] = function (updateCtx, updateState) {\r\n                // If this plugin has already been torn down (not operational) or is not initialized (core is not set)\r\n                // or the core being used for unload was not the same core used for initialization.\r\n                var core = _self[STR_CORE /* @min:%2ecore */];\r\n                if (!core || (updateCtx && core !== updateCtx[STR_CORE /* @min:%2ecore */]())) {\r\n                    // Do Nothing\r\n                    return;\r\n                }\r\n                var result;\r\n                var updateDone = false;\r\n                var theUpdateCtx = updateCtx || createProcessTelemetryUpdateContext(null, core, _nextPlugin && _nextPlugin[strGetPlugin] ? _nextPlugin[strGetPlugin]() : _nextPlugin);\r\n                var theUpdateState = updateState || {\r\n                    reason: 0 /* TelemetryUpdateReason.Unknown */\r\n                };\r\n                function _updateCallback() {\r\n                    if (!updateDone) {\r\n                        updateDone = true;\r\n                        _setDefaults(theUpdateCtx.getCfg(), theUpdateCtx.core(), theUpdateCtx[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n                    }\r\n                }\r\n                if (!_self._doUpdate || _self._doUpdate(theUpdateCtx, theUpdateState, _updateCallback) !== true) {\r\n                    _updateCallback();\r\n                }\r\n                else {\r\n                    result = true;\r\n                }\r\n                return result;\r\n            };\r\n            _self._addHook = function (hooks) {\r\n                if (hooks) {\r\n                    if (isArray(hooks)) {\r\n                        _hooks = _hooks.concat(hooks);\r\n                    }\r\n                    else {\r\n                        _hooks[_DYN_PUSH /* @min:%2epush */](hooks);\r\n                    }\r\n                }\r\n            };\r\n            proxyFunctionAs(_self, \"_addUnloadCb\", function () { return _unloadHandlerContainer; }, \"add\");\r\n        });\r\n        // These are added after the dynamicProto so that are not moved to the prototype\r\n        _self[_DYN_DIAG_LOG /* @min:%2ediagLog */] = function (itemCtx) {\r\n            return _getTelCtx(itemCtx)[_DYN_DIAG_LOG /* @min:%2ediagLog */]();\r\n        };\r\n        _self[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = function () {\r\n            return _isinitialized;\r\n        };\r\n        _self.setInitialized = function (isInitialized) {\r\n            _isinitialized = isInitialized;\r\n        };\r\n        // _self.getNextPlugin = () => DO NOT IMPLEMENT\r\n        // Sub-classes of this base class *should* not be relying on this value and instead\r\n        // should use processNext() function. If you require access to the plugin use the\r\n        // IProcessTelemetryContext.getNext().getPlugin() while in the pipeline, Note getNext() may return null.\r\n        _self[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */] = function (next) {\r\n            _nextPlugin = next;\r\n        };\r\n        _self[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = function (env, itemCtx) {\r\n            if (itemCtx) {\r\n                // Normal core execution sequence\r\n                itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n            }\r\n            else if (_nextPlugin && isFunction(_nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Looks like backward compatibility or out of band processing. And as it looks\r\n                // like a ITelemetryPlugin or ITelemetryPluginChain, just call processTelemetry\r\n                _nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, null);\r\n            }\r\n        };\r\n        _self._getTelCtx = _getTelCtx;\r\n        function _getTelCtx(currentCtx) {\r\n            if (currentCtx === void 0) { currentCtx = null; }\r\n            var itemCtx = currentCtx;\r\n            if (!itemCtx) {\r\n                var rootCtx = _rootCtx || createProcessTelemetryContext(null, {}, _self[STR_CORE /* @min:%2ecore */]);\r\n                // tslint:disable-next-line: prefer-conditional-expression\r\n                if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                    // Looks like a chain object\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin[strGetPlugin]);\r\n                }\r\n                else {\r\n                    itemCtx = rootCtx[_DYN_CREATE_NEW /* @min:%2ecreateNew */](null, _nextPlugin);\r\n                }\r\n            }\r\n            return itemCtx;\r\n        }\r\n        function _setDefaults(config, core, pluginChain) {\r\n            if (config) {\r\n                // Make sure the extensionConfig exists\r\n                setValue(config, STR_EXTENSION_CONFIG, [], null, isNullOrUndefined);\r\n            }\r\n            if (!pluginChain && core) {\r\n                // Get the first plugin from the core\r\n                pluginChain = core[_DYN_GET_PROCESS_TEL_CONT0 /* @min:%2egetProcessTelContext */]()[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n            }\r\n            var nextPlugin = _nextPlugin;\r\n            if (_nextPlugin && _nextPlugin[strGetPlugin]) {\r\n                // If it looks like a proxy/chain then get the plugin\r\n                nextPlugin = _nextPlugin[strGetPlugin]();\r\n            }\r\n            // Support legacy plugins where core was defined as a property\r\n            _self[STR_CORE /* @min:%2ecore */] = core;\r\n            _rootCtx = createProcessTelemetryContext(pluginChain, config, core, nextPlugin);\r\n        }\r\n        function _initDefaults() {\r\n            _isinitialized = false;\r\n            _self[STR_CORE /* @min:%2ecore */] = null;\r\n            _rootCtx = null;\r\n            _nextPlugin = null;\r\n            _hooks = [];\r\n            _unloadHandlerContainer = createUnloadHandlerContainer();\r\n        }\r\n    }\r\n// Removed Stub for BaseTelemetryPlugin.prototype.initialize.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.teardown.\r\n// Removed Stub for BaseTelemetryPlugin.prototype.update.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addUnloadCb.\r\n// Removed Stub for BaseTelemetryPlugin.prototype._addHook.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    BaseTelemetryPlugin.__ieDyn=1;\n\n    return BaseTelemetryPlugin;\r\n}());\r\nexport { BaseTelemetryPlugin };\r\n//# sourceMappingURL=BaseTelemetryPlugin.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { _DYN_COOKIE_CFG, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_LOGGER, _DYN_SET_ENABLED, _DYN_SPLIT, _DYN_SUBSTRING, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj, getDocument, getLocation, getNavigator, isIE } from \"./EnvUtils\";\r\nimport { arrForEach, dateNow, getExceptionName, isArray, isFunction, isNotNullOrUndefined, isNullOrUndefined, isString, isTruthy, isUndefined, objForEachKey, setValue, strContains, strEndsWith, strTrim } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar strToGMTString = \"toGMTString\";\r\nvar strToUTCString = \"toUTCString\";\r\nvar strCookie = \"cookie\";\r\nvar strExpires = \"expires\";\r\nvar strEnabled = \"enabled\";\r\nvar strIsCookieUseDisabled = \"isCookieUseDisabled\";\r\nvar strDisableCookiesUsage = \"disableCookiesUsage\";\r\nvar strConfigCookieMgr = \"_ckMgr\";\r\nvar _supportsCookies = null;\r\nvar _allowUaSameSite = null;\r\nvar _parsedCookieValue = null;\r\nvar _doc = getDocument();\r\nvar _cookieCache = {};\r\nvar _globalCookieConfig = {};\r\n/**\r\n * @ignore\r\n * DO NOT USE or export from the module, this is exposed as public to support backward compatibility of previous static utility methods only.\r\n * If you want to manager cookies either use the ICookieMgr available from the core instance via getCookieMgr() or create\r\n * your own instance of the CookieMgr and use that.\r\n * Using this directly for enabling / disabling cookie handling will not only affect your usage but EVERY user of cookies.\r\n * Example, if you are using a shared component that is also using Application Insights you will affect their cookie handling.\r\n * @param logger - The DiagnosticLogger to use for reporting errors.\r\n */\r\nexport function _gblCookieMgr(config, logger) {\r\n    // Stash the global instance against the BaseCookieMgr class\r\n    var inst = createCookieMgr[strConfigCookieMgr] || _globalCookieConfig[strConfigCookieMgr];\r\n    if (!inst) {\r\n        // Note: not using the getSetValue() helper as that would require always creating a temporary cookieMgr\r\n        // that ultimately is never used\r\n        inst = createCookieMgr[strConfigCookieMgr] = createCookieMgr(config, logger);\r\n        _globalCookieConfig[strConfigCookieMgr] = inst;\r\n    }\r\n    return inst;\r\n}\r\nfunction _isMgrEnabled(cookieMgr) {\r\n    if (cookieMgr) {\r\n        return cookieMgr.isEnabled();\r\n    }\r\n    return true;\r\n}\r\nfunction _createCookieMgrConfig(rootConfig) {\r\n    var cookieMgrCfg = rootConfig[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */] = rootConfig[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */] || {};\r\n    // Sets the values from the root config if not already present on the cookieMgrCfg\r\n    setValue(cookieMgrCfg, \"domain\", rootConfig.cookieDomain, isNotNullOrUndefined, isNullOrUndefined);\r\n    setValue(cookieMgrCfg, \"path\", rootConfig.cookiePath || \"/\", null, isNullOrUndefined);\r\n    if (isNullOrUndefined(cookieMgrCfg[strEnabled])) {\r\n        // Set the enabled from the provided setting or the legacy root values\r\n        var cookieEnabled = void 0;\r\n        if (!isUndefined(rootConfig[strIsCookieUseDisabled])) {\r\n            cookieEnabled = !rootConfig[strIsCookieUseDisabled];\r\n        }\r\n        if (!isUndefined(rootConfig[strDisableCookiesUsage])) {\r\n            cookieEnabled = !rootConfig[strDisableCookiesUsage];\r\n        }\r\n        cookieMgrCfg[strEnabled] = cookieEnabled;\r\n    }\r\n    return cookieMgrCfg;\r\n}\r\nfunction _isIgnoredCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.ignoreCookies)) {\r\n        return cookieMgrCfg.ignoreCookies[_DYN_INDEX_OF /* @min:%2eindexOf */](name) !== -1;\r\n    }\r\n    return false;\r\n}\r\nfunction _isBlockedCookie(cookieMgrCfg, name) {\r\n    if (name && cookieMgrCfg && isArray(cookieMgrCfg.blockedCookies)) {\r\n        if (cookieMgrCfg.blockedCookies[_DYN_INDEX_OF /* @min:%2eindexOf */](name) !== -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return _isIgnoredCookie(cookieMgrCfg, name);\r\n}\r\n/**\r\n * Helper to return the ICookieMgr from the core (if not null/undefined) or a default implementation\r\n * associated with the configuration or a legacy default.\r\n * @param core\r\n * @param config\r\n * @returns\r\n */\r\nexport function safeGetCookieMgr(core, config) {\r\n    var cookieMgr;\r\n    if (core) {\r\n        // Always returns an instance\r\n        cookieMgr = core.getCookieMgr();\r\n    }\r\n    else if (config) {\r\n        var cookieCfg = config[_DYN_COOKIE_CFG /* @min:%2ecookieCfg */];\r\n        if (cookieCfg[strConfigCookieMgr]) {\r\n            cookieMgr = cookieCfg[strConfigCookieMgr];\r\n        }\r\n        else {\r\n            cookieMgr = createCookieMgr(config);\r\n        }\r\n    }\r\n    if (!cookieMgr) {\r\n        // Get or initialize the default global (legacy) cookie manager if we couldn't find one\r\n        cookieMgr = _gblCookieMgr(config, (core || {})[_DYN_LOGGER /* @min:%2elogger */]);\r\n    }\r\n    return cookieMgr;\r\n}\r\nexport function createCookieMgr(rootConfig, logger) {\r\n    var _a;\r\n    var cookieMgrConfig = _createCookieMgrConfig(rootConfig || _globalCookieConfig);\r\n    var _path = cookieMgrConfig.path || \"/\";\r\n    var _domain = cookieMgrConfig.domain;\r\n    // Explicitly checking against false, so that setting to undefined will === true\r\n    var _enabled = cookieMgrConfig[strEnabled] !== false;\r\n    var cookieMgr = (_a = {\r\n            isEnabled: function () {\r\n                var enabled = _enabled && areCookiesSupported(logger);\r\n                // Using an indirect lookup for any global cookie manager to support tree shaking for SDK's\r\n                // that don't use the \"applicationinsights-core\" version of the default cookie function\r\n                var gblManager = _globalCookieConfig[strConfigCookieMgr];\r\n                if (enabled && gblManager && cookieMgr !== gblManager) {\r\n                    // Make sure the GlobalCookie Manager instance (if not this instance) is also enabled.\r\n                    // As the global (deprecated) functions may have been called (for backward compatibility)\r\n                    enabled = _isMgrEnabled(gblManager);\r\n                }\r\n                return enabled;\r\n            }\r\n        },\r\n        _a[_DYN_SET_ENABLED /* @min:setEnabled */] = function (value) {\r\n            // Explicitly checking against false, so that setting to undefined will === true\r\n            _enabled = value !== false;\r\n        },\r\n        _a.set = function (name, value, maxAgeSec, domain, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr) && !_isBlockedCookie(cookieMgrConfig, name)) {\r\n                var values = {};\r\n                var theValue = strTrim(value || STR_EMPTY);\r\n                var idx = theValue[_DYN_INDEX_OF /* @min:%2eindexOf */](\";\");\r\n                if (idx !== -1) {\r\n                    theValue = strTrim(value[_DYN_SUBSTRING /* @min:%2esubstring */](0, idx));\r\n                    values = _extractParts(value[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                }\r\n                // Only update domain if not already present (isUndefined) and the value is truthy (not null, undefined or empty string)\r\n                setValue(values, \"domain\", domain || _domain, isTruthy, isUndefined);\r\n                if (!isNullOrUndefined(maxAgeSec)) {\r\n                    var _isIE = isIE();\r\n                    if (isUndefined(values[strExpires])) {\r\n                        var nowMs = dateNow();\r\n                        // Only add expires if not already present\r\n                        var expireMs = nowMs + (maxAgeSec * 1000);\r\n                        // Sanity check, if zero or -ve then ignore\r\n                        if (expireMs > 0) {\r\n                            var expiry = new Date();\r\n                            expiry.setTime(expireMs);\r\n                            setValue(values, strExpires, _formatDate(expiry, !_isIE ? strToUTCString : strToGMTString) || _formatDate(expiry, _isIE ? strToGMTString : strToUTCString) || STR_EMPTY, isTruthy);\r\n                        }\r\n                    }\r\n                    if (!_isIE) {\r\n                        // Only replace if not already present\r\n                        setValue(values, \"max-age\", STR_EMPTY + maxAgeSec, null, isUndefined);\r\n                    }\r\n                }\r\n                var location_1 = getLocation();\r\n                if (location_1 && location_1.protocol === \"https:\") {\r\n                    setValue(values, \"secure\", null, null, isUndefined);\r\n                    // Only set same site if not also secure\r\n                    if (_allowUaSameSite === null) {\r\n                        _allowUaSameSite = !uaDisallowsSameSiteNone((getNavigator() || {})[_DYN_USER_AGENT /* @min:%2euserAgent */]);\r\n                    }\r\n                    if (_allowUaSameSite) {\r\n                        setValue(values, \"SameSite\", \"None\", null, isUndefined);\r\n                    }\r\n                }\r\n                setValue(values, \"path\", path || _path, null, isUndefined);\r\n                var setCookieFn = cookieMgrConfig.setCookie || _setCookieValue;\r\n                setCookieFn(name, _formatCookieValue(theValue, values));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        _a.get = function (name) {\r\n            var value = STR_EMPTY;\r\n            if (_isMgrEnabled(cookieMgr) && !_isIgnoredCookie(cookieMgrConfig, name)) {\r\n                value = (cookieMgrConfig.getCookie || _getCookieValue)(name);\r\n            }\r\n            return value;\r\n        },\r\n        _a.del = function (name, path) {\r\n            var result = false;\r\n            if (_isMgrEnabled(cookieMgr)) {\r\n                // Only remove the cookie if the manager and cookie support has not been disabled\r\n                result = cookieMgr.purge(name, path);\r\n            }\r\n            return result;\r\n        },\r\n        _a.purge = function (name, path) {\r\n            var _a;\r\n            var result = false;\r\n            if (areCookiesSupported(logger)) {\r\n                // Setting the expiration date in the past immediately removes the cookie\r\n                var values = (_a = {},\r\n                    _a[\"path\"] = path ? path : \"/\",\r\n                    _a[strExpires] = \"Thu, 01 Jan 1970 00:00:01 GMT\",\r\n                    _a);\r\n                if (!isIE()) {\r\n                    // Set max age to expire now\r\n                    values[\"max-age\"] = \"0\";\r\n                }\r\n                var delCookie = cookieMgrConfig.delCookie || _setCookieValue;\r\n                delCookie(name, _formatCookieValue(STR_EMPTY, values));\r\n                result = true;\r\n            }\r\n            return result;\r\n        },\r\n        _a);\r\n    // Associated this cookie manager with the config\r\n    cookieMgr[strConfigCookieMgr] = cookieMgr;\r\n    return cookieMgr;\r\n}\r\n/*\r\n* Helper method to tell if document.cookie object is supported by the runtime\r\n*/\r\nexport function areCookiesSupported(logger) {\r\n    if (_supportsCookies === null) {\r\n        _supportsCookies = false;\r\n        try {\r\n            var doc = _doc || {};\r\n            _supportsCookies = doc[strCookie] !== undefined;\r\n        }\r\n        catch (e) {\r\n            _throwInternal(logger, 2 /* eLoggingSeverity.WARNING */, 68 /* _eInternalMessageId.CannotAccessCookie */, \"Cannot access document.cookie - \" + getExceptionName(e), { exception: dumpObj(e) });\r\n        }\r\n    }\r\n    return _supportsCookies;\r\n}\r\nfunction _extractParts(theValue) {\r\n    var values = {};\r\n    if (theValue && theValue[_DYN_LENGTH /* @min:%2elength */]) {\r\n        var parts = strTrim(theValue)[_DYN_SPLIT /* @min:%2esplit */](\";\");\r\n        arrForEach(parts, function (thePart) {\r\n            thePart = strTrim(thePart || STR_EMPTY);\r\n            if (thePart) {\r\n                var idx = thePart[_DYN_INDEX_OF /* @min:%2eindexOf */](\"=\");\r\n                if (idx === -1) {\r\n                    values[thePart] = null;\r\n                }\r\n                else {\r\n                    values[strTrim(thePart[_DYN_SUBSTRING /* @min:%2esubstring */](0, idx))] = strTrim(thePart[_DYN_SUBSTRING /* @min:%2esubstring */](idx + 1));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return values;\r\n}\r\nfunction _formatDate(theDate, func) {\r\n    if (isFunction(theDate[func])) {\r\n        return theDate[func]();\r\n    }\r\n    return null;\r\n}\r\nfunction _formatCookieValue(value, values) {\r\n    var cookieValue = value || STR_EMPTY;\r\n    objForEachKey(values, function (name, theValue) {\r\n        cookieValue += \"; \" + name + (!isNullOrUndefined(theValue) ? \"=\" + theValue : STR_EMPTY);\r\n    });\r\n    return cookieValue;\r\n}\r\nfunction _getCookieValue(name) {\r\n    var cookieValue = STR_EMPTY;\r\n    if (_doc) {\r\n        var theCookie = _doc[strCookie] || STR_EMPTY;\r\n        if (_parsedCookieValue !== theCookie) {\r\n            _cookieCache = _extractParts(theCookie);\r\n            _parsedCookieValue = theCookie;\r\n        }\r\n        cookieValue = strTrim(_cookieCache[name] || STR_EMPTY);\r\n    }\r\n    return cookieValue;\r\n}\r\nfunction _setCookieValue(name, cookieValue) {\r\n    if (_doc) {\r\n        _doc[strCookie] = name + \"=\" + cookieValue;\r\n    }\r\n}\r\nexport function uaDisallowsSameSiteNone(userAgent) {\r\n    if (!isString(userAgent)) {\r\n        return false;\r\n    }\r\n    // Cover all iOS based browsers here. This includes:\r\n    // - Safari on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad\r\n    // - Chrome on iOS 12 for iPhone, iPod Touch, iPad\r\n    // All of which are broken by SameSite=None, because they use the iOS networking stack\r\n    if (strContains(userAgent, \"CPU iPhone OS 12\") || strContains(userAgent, \"iPad; CPU OS 12\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:\r\n    // - Safari on Mac OS X\r\n    // This does not include:\r\n    // - Internal browser on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strContains(userAgent, \"Version/\") && strContains(userAgent, \"Safari\")) {\r\n        return true;\r\n    }\r\n    // Cover Mac OS X internal browsers that use the Mac OS networking stack. This includes:\r\n    // - Internal browser on Mac OS X\r\n    // This does not include:\r\n    // - Safari on Mac OS X\r\n    // - Chrome on Mac OS X\r\n    // - Chromium on Mac OS X\r\n    // Because they do not use the Mac OS networking stack.\r\n    if (strContains(userAgent, \"Macintosh; Intel Mac OS X 10_14\") && strEndsWith(userAgent, \"AppleWebKit/605.1.15 (KHTML, like Gecko)\")) {\r\n        return true;\r\n    }\r\n    // Cover Chrome 50-69, because some versions are broken by SameSite=None, and none in this range require it.\r\n    // Note: this covers some pre-Chromium Edge versions, but pre-Chromim Edge does not require SameSite=None, so this is fine.\r\n    // Note: this regex applies to Windows, Mac OS X, and Linux, deliberately.\r\n    if (strContains(userAgent, \"Chrome/5\") || strContains(userAgent, \"Chrome/6\")) {\r\n        return true;\r\n    }\r\n    // Unreal Engine runs Chromium 59, but does not advertise as Chrome until 4.23. Treat versions of Unreal\r\n    // that don't specify their Chrome version as lacking support for SameSite=None.\r\n    if (strContains(userAgent, \"UnrealEngine\") && !strContains(userAgent, \"Chrome\")) {\r\n        return true;\r\n    }\r\n    // UCBrowser < 12.13.2 ignores Set-Cookie headers with SameSite=None\r\n    // NB: this rule isn't complete - you need regex to make a complete rule.\r\n    // See: https://www.chromium.org/updates/same-site/incompatible-clients\r\n    if (strContains(userAgent, \"UCBrowser/12\") || strContains(userAgent, \"UCBrowser/11\")) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=CookieMgr.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { objCreateFn, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_LENGTH, _DYN_PUSH, _DYN_SET_ENABLED, _DYN_SUBSTR, _DYN_SUBSTRING } from \"../__DynamicConstants\";\r\nimport { _gblCookieMgr } from \"./CookieMgr\";\r\nimport { getPerformance, isIE } from \"./EnvUtils\";\r\nimport { addEventHandler, attachEvent, detachEvent } from \"./EventHelpers\";\r\nimport { arrForEach, arrIndexOf, arrMap, arrReduce, dateNow, hasOwnProperty, isArray, isBoolean, isDate, isError, isFunction, isNullOrUndefined, isNumber, isObject, isString, isTypeof, isUndefined, objDefineAccessors, objKeys, strTrim, toISOString } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { mwcRandom32, mwcRandomSeed, newId, random32, randomValue } from \"./RandomHelper\";\r\nvar _cookieMgrs = null;\r\nvar _canUseCookies; // legacy supported config\r\n// Added to help with minfication\r\nexport var Undefined = strShimUndefined;\r\nexport function newGuid() {\r\n    var uuid = generateW3CId();\r\n    return uuid[_DYN_SUBSTRING /* @min:%2esubstring */](0, 8) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](8, 12) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](12, 16) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](16, 20) + \"-\" + uuid[_DYN_SUBSTRING /* @min:%2esubstring */](20);\r\n}\r\n/**\r\n * Return the current value of the Performance Api now() function (if available) and fallback to dateNow() if it is unavailable (IE9 or less)\r\n * https://caniuse.com/#search=performance.now\r\n */\r\nexport function perfNow() {\r\n    var perf = getPerformance();\r\n    if (perf && perf.now) {\r\n        return perf.now();\r\n    }\r\n    return dateNow();\r\n}\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value, search) {\r\n    if (value && search) {\r\n        var len = value[_DYN_LENGTH /* @min:%2elength */];\r\n        var start = len - search[_DYN_LENGTH /* @min:%2elength */];\r\n        return value[_DYN_SUBSTRING /* @min:%2esubstring */](start >= 0 ? start : 0, len) === search;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * generate W3C trace id\r\n */\r\nexport function generateW3CId() {\r\n    var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n    // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n    var oct = STR_EMPTY, tmp;\r\n    for (var a = 0; a < 4; a++) {\r\n        tmp = random32();\r\n        oct +=\r\n            hexValues[tmp & 0xF] +\r\n                hexValues[tmp >> 4 & 0xF] +\r\n                hexValues[tmp >> 8 & 0xF] +\r\n                hexValues[tmp >> 12 & 0xF] +\r\n                hexValues[tmp >> 16 & 0xF] +\r\n                hexValues[tmp >> 20 & 0xF] +\r\n                hexValues[tmp >> 24 & 0xF] +\r\n                hexValues[tmp >> 28 & 0xF];\r\n    }\r\n    // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n    var clockSequenceHi = hexValues[8 + (random32() & 0x03) | 0];\r\n    return oct[_DYN_SUBSTR /* @min:%2esubstr */](0, 8) + oct[_DYN_SUBSTR /* @min:%2esubstr */](9, 4) + \"4\" + oct[_DYN_SUBSTR /* @min:%2esubstr */](13, 3) + clockSequenceHi + oct[_DYN_SUBSTR /* @min:%2esubstr */](16, 3) + oct[_DYN_SUBSTR /* @min:%2esubstr */](19, 12);\r\n}\r\n/**\r\n * Provides a collection of utility functions, included for backward compatibility with previous releases.\r\n * @deprecated Marking this instance as deprecated in favor of direct usage of the helper functions\r\n * as direct usage provides better tree-shaking and minification by avoiding the inclusion of the unused items\r\n * in your resulting code.\r\n */\r\nexport var CoreUtils = {\r\n    _canUseCookies: undefined,\r\n    isTypeof: isTypeof,\r\n    isUndefined: isUndefined,\r\n    isNullOrUndefined: isNullOrUndefined,\r\n    hasOwnProperty: hasOwnProperty,\r\n    isFunction: isFunction,\r\n    isObject: isObject,\r\n    isDate: isDate,\r\n    isArray: isArray,\r\n    isError: isError,\r\n    isString: isString,\r\n    isNumber: isNumber,\r\n    isBoolean: isBoolean,\r\n    toISOString: toISOString,\r\n    arrForEach: arrForEach,\r\n    arrIndexOf: arrIndexOf,\r\n    arrMap: arrMap,\r\n    arrReduce: arrReduce,\r\n    strTrim: strTrim,\r\n    objCreate: objCreateFn,\r\n    objKeys: objKeys,\r\n    objDefineAccessors: objDefineAccessors,\r\n    addEventHandler: addEventHandler,\r\n    dateNow: dateNow,\r\n    isIE: isIE,\r\n    disableCookies: disableCookies,\r\n    newGuid: newGuid,\r\n    perfNow: perfNow,\r\n    newId: newId,\r\n    randomValue: randomValue,\r\n    random32: random32,\r\n    mwcRandomSeed: mwcRandomSeed,\r\n    mwcRandom32: mwcRandom32,\r\n    generateW3CId: generateW3CId\r\n};\r\nvar GuidRegex = /[xy]/g;\r\nexport var EventHelper = {\r\n    Attach: attachEvent,\r\n    AttachEvent: attachEvent,\r\n    Detach: detachEvent,\r\n    DetachEvent: detachEvent\r\n};\r\n/**\r\n * Helper to support backward compatibility for users that use the legacy cookie handling functions and the use the internal\r\n * CoreUtils._canUseCookies global flag to enable/disable cookies usage.\r\n * Note: This has the following deliberate side-effects\r\n * - Creates the global (legacy) cookie manager if it does not already exist\r\n * - Attempts to add \"listeners\" to the CoreUtils._canUseCookies property to support the legacy usage\r\n * @param config\r\n * @param logger\r\n * @returns\r\n */\r\nexport function _legacyCookieMgr(config, logger) {\r\n    var cookieMgr = _gblCookieMgr(config, logger);\r\n    var legacyCanUseCookies = CoreUtils._canUseCookies;\r\n    if (_cookieMgrs === null) {\r\n        _cookieMgrs = [];\r\n        _canUseCookies = legacyCanUseCookies;\r\n        // Dynamically create get/set property accessors for backward compatibility for enabling / disabling cookies\r\n        // this WILL NOT work for ES3 browsers (< IE8)\r\n        objDefineAccessors(CoreUtils, \"_canUseCookies\", function () {\r\n            return _canUseCookies;\r\n        }, function (value) {\r\n            _canUseCookies = value;\r\n            arrForEach(_cookieMgrs, function (mgr) {\r\n                mgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](value);\r\n            });\r\n        });\r\n    }\r\n    if (arrIndexOf(_cookieMgrs, cookieMgr) === -1) {\r\n        _cookieMgrs[_DYN_PUSH /* @min:%2epush */](cookieMgr);\r\n    }\r\n    if (isBoolean(legacyCanUseCookies)) {\r\n        cookieMgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](legacyCanUseCookies);\r\n    }\r\n    if (isBoolean(_canUseCookies)) {\r\n        cookieMgr[_DYN_SET_ENABLED /* @min:%2esetEnabled */](_canUseCookies);\r\n    }\r\n    return cookieMgr;\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().disable()\r\n * Force the SDK not to store and read any data from cookies.\r\n */\r\nexport function disableCookies() {\r\n    _legacyCookieMgr()[_DYN_SET_ENABLED /* @min:%2esetEnabled */](false);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().isEnabled()\r\n * Helper method to tell if document.cookie object is available and whether it can be used.\r\n */\r\nexport function canUseCookies(logger) {\r\n    return _legacyCookieMgr(null, logger).isEnabled();\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().get()\r\n * helper method to access userId and sessionId cookie\r\n */\r\nexport function getCookie(logger, name) {\r\n    return _legacyCookieMgr(null, logger).get(name);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().set()\r\n * helper method to set userId and sessionId cookie\r\n */\r\nexport function setCookie(logger, name, value, domain) {\r\n    _legacyCookieMgr(null, logger).set(name, value, null, domain);\r\n}\r\n/**\r\n * @deprecated - Use the core.getCookieMgr().del()\r\n * Deletes a cookie by setting it's expiration time in the past.\r\n * @param name - The name of the cookie to delete.\r\n */\r\nexport function deleteCookie(logger, name) {\r\n    return _legacyCookieMgr(null, logger).del(name);\r\n}\r\n//# sourceMappingURL=CoreUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjDefineProperty } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_NODE_TYPE } from \"../__DynamicConstants\";\r\nimport { normalizeJsName } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nimport { newId } from \"./RandomHelper\";\r\nvar _objDefineProperty = ObjDefineProperty;\r\nvar version = '2.8.15';\r\nvar instanceName = \".\" + newId(6);\r\nvar _dataUid = 0;\r\nfunction _createAccessor(target, prop, value) {\r\n    if (_objDefineProperty) {\r\n        try {\r\n            _objDefineProperty(target, prop, {\r\n                value: value,\r\n                enumerable: false,\r\n                configurable: true\r\n            });\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            // IE8 Defines a defineProperty on Object but it's only supported for DOM elements so it will throw\r\n            // We will just ignore this here.\r\n        }\r\n    }\r\n    return false;\r\n}\r\n// Accepts only:\r\n//  - Node\r\n//    - Node.ELEMENT_NODE\r\n//    - Node.DOCUMENT_NODE\r\n//  - Object\r\n//    - Any\r\nfunction _canAcceptData(target) {\r\n    return target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 1 || target[_DYN_NODE_TYPE /* @min:%2enodeType */] === 9 || !(+target[_DYN_NODE_TYPE /* @min:%2enodeType */]);\r\n}\r\nfunction _getCache(data, target) {\r\n    var theCache = target[data.id];\r\n    if (!theCache) {\r\n        theCache = {};\r\n        try {\r\n            if (_canAcceptData(target)) {\r\n                if (!_createAccessor(target, data.id, theCache)) {\r\n                    // Environment doesn't support accessor, so just use direct assignment\r\n                    target[data.id] = theCache;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Not all environments allow extending all objects, so just ignore the cache in those cases\r\n        }\r\n    }\r\n    return theCache;\r\n}\r\nexport function createUniqueNamespace(name, includeVersion) {\r\n    if (includeVersion === void 0) { includeVersion = false; }\r\n    return normalizeJsName(name + (_dataUid++) + (includeVersion ? \".\" + version : STR_EMPTY) + instanceName);\r\n}\r\nexport function createElmNodeData(name) {\r\n    var data = {\r\n        id: createUniqueNamespace(\"_aiData-\" + (name || STR_EMPTY) + \".\" + version),\r\n        accept: function (target) {\r\n            return _canAcceptData(target);\r\n        },\r\n        get: function (target, name, defValue, addDefault) {\r\n            var theCache = target[data.id];\r\n            if (!theCache) {\r\n                if (addDefault) {\r\n                    // Side effect is adds the cache\r\n                    theCache = _getCache(data, target);\r\n                    theCache[normalizeJsName(name)] = defValue;\r\n                }\r\n                return defValue;\r\n            }\r\n            return theCache[normalizeJsName(name)];\r\n        },\r\n        kill: function (target, name) {\r\n            if (target && target[name]) {\r\n                try {\r\n                    delete target[name];\r\n                }\r\n                catch (e) {\r\n                    // Just cleaning up, so if this fails -- ignore\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return data;\r\n}\r\n//# sourceMappingURL=DataCacheHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_APPLY, _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getGlobalInst } from \"./EnvUtils\";\r\nvar listenerFuncs = [\"eventsSent\", \"eventsDiscarded\", \"eventsSendRequest\", \"perfEvent\"];\r\nvar _aiNamespace = null;\r\nvar _debugListener;\r\nfunction _listenerProxyFunc(name, config) {\r\n    return function () {\r\n        var args = arguments;\r\n        var dbgExt = getDebugExt(config);\r\n        if (dbgExt) {\r\n            var listener = dbgExt.listener;\r\n            if (listener && listener[name]) {\r\n                listener[name][_DYN_APPLY /* @min:%2eapply */](listener, args);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction _getExtensionNamespace() {\r\n    // Cache the lookup of the global namespace object\r\n    var target = getGlobalInst(\"Microsoft\");\r\n    if (target) {\r\n        _aiNamespace = target[\"ApplicationInsights\"];\r\n    }\r\n    return _aiNamespace;\r\n}\r\nexport function getDebugExt(config) {\r\n    var ns = _aiNamespace;\r\n    if (!ns && config.disableDbgExt !== true) {\r\n        ns = _aiNamespace || _getExtensionNamespace();\r\n    }\r\n    return ns ? ns[\"ChromeDbgExt\"] : null;\r\n}\r\nexport function getDebugListener(config) {\r\n    if (!_debugListener) {\r\n        _debugListener = {};\r\n        for (var lp = 0; lp < listenerFuncs[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n            _debugListener[listenerFuncs[lp]] = _listenerProxyFunc(listenerFuncs[lp], config);\r\n        }\r\n    }\r\n    return _debugListener;\r\n}\r\n//# sourceMappingURL=DbgExtensionUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_DIAG_LOG, _DYN_ENABLE_DEBUG_EXCEPTI4, _DYN_LOGGER, _DYN_LOG_INTERNAL_MESSAGE, _DYN_MESSAGE, _DYN_MESSAGE_ID, _DYN_PUSH, _DYN_REPLACE } from \"../__DynamicConstants\";\r\nimport { getDebugExt } from \"./DbgExtensionUtils\";\r\nimport { dumpObj, getConsole, getJSON, hasJSON } from \"./EnvUtils\";\r\nimport { getCfgValue, isFunction, isUndefined } from \"./HelperFuncs\";\r\nimport { STR_EMPTY, STR_ERROR_TO_CONSOLE, STR_WARN_TO_CONSOLE } from \"./InternalConstants\";\r\n/**\r\n * For user non actionable traces use AI Internal prefix.\r\n */\r\nvar AiNonUserActionablePrefix = \"AI (Internal): \";\r\n/**\r\n * Prefix of the traces in portal.\r\n */\r\nvar AiUserActionablePrefix = \"AI: \";\r\n/**\r\n *  Session storage key for the prefix for the key indicating message type already logged\r\n */\r\nvar AIInternalMessagePrefix = \"AITR_\";\r\nfunction _sanitizeDiagnosticText(text) {\r\n    if (text) {\r\n        return \"\\\"\" + text[_DYN_REPLACE /* @min:%2ereplace */](/\\\"/g, STR_EMPTY) + \"\\\"\";\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _logToConsole(func, message) {\r\n    var theConsole = getConsole();\r\n    if (!!theConsole) {\r\n        var logFunc = \"log\";\r\n        if (theConsole[func]) {\r\n            logFunc = func;\r\n        }\r\n        if (isFunction(theConsole[logFunc])) {\r\n            theConsole[logFunc](message);\r\n        }\r\n    }\r\n}\r\nvar _InternalLogMessage = /** @class */ (function () {\r\n    function _InternalLogMessage(msgId, msg, isUserAct, properties) {\r\n        if (isUserAct === void 0) { isUserAct = false; }\r\n        var _self = this;\r\n        _self[_DYN_MESSAGE_ID /* @min:%2emessageId */] = msgId;\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] =\r\n            (isUserAct ? AiUserActionablePrefix : AiNonUserActionablePrefix) +\r\n                msgId;\r\n        var strProps = STR_EMPTY;\r\n        if (hasJSON()) {\r\n            strProps = getJSON().stringify(properties);\r\n        }\r\n        var diagnosticText = (msg ? \" message:\" + _sanitizeDiagnosticText(msg) : STR_EMPTY) +\r\n            (properties ? \" props:\" + _sanitizeDiagnosticText(strProps) : STR_EMPTY);\r\n        _self[_DYN_MESSAGE /* @min:%2emessage */] += diagnosticText;\r\n    }\r\n    _InternalLogMessage.dataType = \"MessageData\";\r\n    return _InternalLogMessage;\r\n}());\r\nexport { _InternalLogMessage };\r\nexport function safeGetLogger(core, config) {\r\n    return (core || {})[_DYN_LOGGER /* @min:%2elogger */] || new DiagnosticLogger(config);\r\n}\r\nvar DiagnosticLogger = /** @class */ (function () {\r\n    function DiagnosticLogger(config) {\r\n        this.identifier = \"DiagnosticLogger\";\r\n        /**\r\n         * The internal logging queue\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * Count of internal messages sent\r\n         */\r\n        var _messageCount = 0;\r\n        /**\r\n         * Holds information about what message types were already logged to console or sent to server.\r\n         */\r\n        var _messageLogged = {};\r\n        var _loggingLevelConsole;\r\n        var _loggingLevelTelemetry;\r\n        var _maxInternalMessageLimit;\r\n        var _enableDebug;\r\n        dynamicProto(DiagnosticLogger, this, function (_self) {\r\n            _setDefaultsFromConfig(config || {});\r\n            _self.consoleLoggingLevel = function () { return _loggingLevelConsole; };\r\n            _self.telemetryLoggingLevel = function () { return _loggingLevelTelemetry; };\r\n            _self.maxInternalMessageLimit = function () { return _maxInternalMessageLimit; };\r\n            _self[_DYN_ENABLE_DEBUG_EXCEPTI4 /* @min:%2eenableDebugExceptions */] = function () { return _enableDebug; };\r\n            /**\r\n             * This method will throw exceptions in debug mode or attempt to log the error as a console warning.\r\n             * @param severity {LoggingSeverity} - The severity of the log message\r\n             * @param message {_InternalLogMessage} - The log message.\r\n             */\r\n            _self.throwInternal = function (severity, msgId, msg, properties, isUserAct) {\r\n                if (isUserAct === void 0) { isUserAct = false; }\r\n                var message = new _InternalLogMessage(msgId, msg, isUserAct, properties);\r\n                if (_enableDebug) {\r\n                    throw dumpObj(message);\r\n                }\r\n                else {\r\n                    // Get the logging function and fallback to warnToConsole of for some reason errorToConsole doesn't exist\r\n                    var logFunc = severity === 1 /* eLoggingSeverity.CRITICAL */ ? STR_ERROR_TO_CONSOLE : STR_WARN_TO_CONSOLE;\r\n                    if (!isUndefined(message[_DYN_MESSAGE /* @min:%2emessage */])) {\r\n                        if (isUserAct) {\r\n                            // check if this message type was already logged to console for this page view and if so, don't log it again\r\n                            var messageKey = +message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                            if (!_messageLogged[messageKey] && _loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                                _messageLogged[messageKey] = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Only log traces if the console Logging Level is >= the throwInternal severity level\r\n                            if (_loggingLevelConsole >= severity) {\r\n                                _self[logFunc](message[_DYN_MESSAGE /* @min:%2emessage */]);\r\n                            }\r\n                        }\r\n                        _logInternalMessage(severity, message);\r\n                    }\r\n                    else {\r\n                        _debugExtMsg(\"throw\" + (severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"Critical\" : \"Warning\"), message);\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * This will write a warning to the console if possible\r\n             * @param message {string} - The warning message\r\n             */\r\n            _self[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */] = function (message) {\r\n                _logToConsole(\"warn\", message);\r\n                _debugExtMsg(\"warning\", message);\r\n            };\r\n            /**\r\n             * This will write an error to the console if possible\r\n             * @param message {string} - The error message\r\n             */\r\n            _self[STR_ERROR_TO_CONSOLE /* @min:%2eerrorToConsole */] = function (message) {\r\n                _logToConsole(\"error\", message);\r\n                _debugExtMsg(\"error\", message);\r\n            };\r\n            /**\r\n             * Resets the internal message count\r\n             */\r\n            _self.resetInternalMessageCount = function () {\r\n                _messageCount = 0;\r\n                _messageLogged = {};\r\n            };\r\n            /**\r\n             * Logs a message to the internal queue.\r\n             * @param severity {LoggingSeverity} - The severity of the log message\r\n             * @param message {_InternalLogMessage} - The message to log.\r\n             */\r\n            _self[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */] = _logInternalMessage;\r\n            function _logInternalMessage(severity, message) {\r\n                if (_areInternalMessagesThrottled()) {\r\n                    return;\r\n                }\r\n                // check if this message type was already logged for this session and if so, don't log it again\r\n                var logMessage = true;\r\n                var messageKey = AIInternalMessagePrefix + message[_DYN_MESSAGE_ID /* @min:%2emessageId */];\r\n                // if the session storage is not available, limit to only one message type per page view\r\n                if (_messageLogged[messageKey]) {\r\n                    logMessage = false;\r\n                }\r\n                else {\r\n                    _messageLogged[messageKey] = true;\r\n                }\r\n                if (logMessage) {\r\n                    // Push the event in the internal queue\r\n                    if (severity <= _loggingLevelTelemetry) {\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](message);\r\n                        _messageCount++;\r\n                        _debugExtMsg((severity === 1 /* eLoggingSeverity.CRITICAL */ ? \"error\" : \"warn\"), message);\r\n                    }\r\n                    // When throttle limit reached, send a special event\r\n                    if (_messageCount === _maxInternalMessageLimit) {\r\n                        var throttleLimitMessage = \"Internal events throttle limit per PageView reached for this app.\";\r\n                        var throttleMessage = new _InternalLogMessage(23 /* _eInternalMessageId.MessageLimitPerPVExceeded */, throttleLimitMessage, false);\r\n                        _self.queue[_DYN_PUSH /* @min:%2epush */](throttleMessage);\r\n                        if (severity === 1 /* eLoggingSeverity.CRITICAL */) {\r\n                            _self[STR_ERROR_TO_CONSOLE /* @min:%2eerrorToConsole */](throttleLimitMessage);\r\n                        }\r\n                        else {\r\n                            _self[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](throttleLimitMessage);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _setDefaultsFromConfig(config) {\r\n                _loggingLevelConsole = getCfgValue(config.loggingLevelConsole, 0);\r\n                _loggingLevelTelemetry = getCfgValue(config.loggingLevelTelemetry, 1);\r\n                _maxInternalMessageLimit = getCfgValue(config.maxMessageLimit, 25);\r\n                _enableDebug = getCfgValue(config.enableDebug, getCfgValue(config[_DYN_ENABLE_DEBUG_EXCEPTI4 /* @min:%2eenableDebugExceptions */], false));\r\n            }\r\n            function _areInternalMessagesThrottled() {\r\n                return _messageCount >= _maxInternalMessageLimit;\r\n            }\r\n            function _debugExtMsg(name, data) {\r\n                var dbgExt = getDebugExt(config || {});\r\n                if (dbgExt && dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */]) {\r\n                    dbgExt[_DYN_DIAG_LOG /* @min:%2ediagLog */](name, data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for DiagnosticLogger.prototype.enableDebugExceptions.\r\n// Removed Stub for DiagnosticLogger.prototype.consoleLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.telemetryLoggingLevel.\r\n// Removed Stub for DiagnosticLogger.prototype.maxInternalMessageLimit.\r\n// Removed Stub for DiagnosticLogger.prototype.throwInternal.\r\n// Removed Stub for DiagnosticLogger.prototype.warnToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.errorToConsole.\r\n// Removed Stub for DiagnosticLogger.prototype.resetInternalMessageCount.\r\n// Removed Stub for DiagnosticLogger.prototype.logInternalMessage.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    DiagnosticLogger.__ieDyn=1;\n\n    return DiagnosticLogger;\r\n}());\r\nexport { DiagnosticLogger };\r\nfunction _getLogger(logger) {\r\n    return (logger || new DiagnosticLogger());\r\n}\r\n/**\r\n * This is a helper method which will call throwInternal on the passed logger, will throw exceptions in\r\n * debug mode or attempt to log the error as a console warning. This helper is provided mostly to better\r\n * support minification as logger.throwInternal() will not compress the publish \"throwInternal\" used throughout\r\n * the code.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity {LoggingSeverity} - The severity of the log message\r\n * @param message {_InternalLogMessage} - The log message.\r\n */\r\nexport function _throwInternal(logger, severity, msgId, msg, properties, isUserAct) {\r\n    if (isUserAct === void 0) { isUserAct = false; }\r\n    _getLogger(logger).throwInternal(severity, msgId, msg, properties, isUserAct);\r\n}\r\n/**\r\n * This is a helper method which will call warnToConsole on the passed logger with the provided message.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param message {_InternalLogMessage} - The log message.\r\n */\r\nexport function _warnToConsole(logger, message) {\r\n    _getLogger(logger)[STR_WARN_TO_CONSOLE /* @min:%2ewarnToConsole */](message);\r\n}\r\n/**\r\n * Logs a message to the internal queue.\r\n * @param logger - The Diagnostic Logger instance to use.\r\n * @param severity {LoggingSeverity} - The severity of the log message\r\n * @param message {_InternalLogMessage} - The message to log.\r\n */\r\nexport function _logInternalMessage(logger, severity, message) {\r\n    _getLogger(logger)[_DYN_LOG_INTERNAL_MESSAGE /* @min:%2elogInternalMessage */](severity, message);\r\n}\r\n//# sourceMappingURL=DiagnosticLogger.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { getGlobal, strShimObject, strShimPrototype, strShimUndefined } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_CALL, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_SPLIT, _DYN_TO_LOWER_CASE, _DYN_USER_AGENT } from \"../__DynamicConstants\";\r\nimport { isFunction, isString, isUndefined, strContains } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n/**\r\n * This file exists to hold environment utilities that are required to check and\r\n * validate the current operating environment. Unless otherwise required, please\r\n * only use defined methods (functions) in this class so that users of these\r\n * functions/properties only need to include those that are used within their own modules.\r\n */\r\nvar strWindow = \"window\";\r\nvar strDocument = \"document\";\r\nvar strDocumentMode = \"documentMode\";\r\nvar strNavigator = \"navigator\";\r\nvar strHistory = \"history\";\r\nvar strLocation = \"location\";\r\nvar strConsole = \"console\";\r\nvar strPerformance = \"performance\";\r\nvar strJSON = \"JSON\";\r\nvar strCrypto = \"crypto\";\r\nvar strMsCrypto = \"msCrypto\";\r\nvar strReactNative = \"ReactNative\";\r\nvar strMsie = \"msie\";\r\nvar strTrident = \"trident/\";\r\nvar strXMLHttpRequest = \"XMLHttpRequest\";\r\nvar _isTrident = null;\r\nvar _navUserAgentCheck = null;\r\nvar _enableMocks = false;\r\nvar _useXDomainRequest = null;\r\nvar _beaconsSupported = null;\r\nfunction _hasProperty(theClass, property) {\r\n    var supported = false;\r\n    if (theClass) {\r\n        try {\r\n            supported = property in theClass;\r\n            if (!supported) {\r\n                var proto = theClass[strShimPrototype];\r\n                if (proto) {\r\n                    supported = property in proto;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Do Nothing\r\n        }\r\n        if (!supported) {\r\n            try {\r\n                var tmp = new theClass();\r\n                supported = !isUndefined(tmp[property]);\r\n            }\r\n            catch (e) {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n    return supported;\r\n}\r\n/**\r\n * Enable the lookup of test mock objects if requested\r\n * @param enabled\r\n */\r\nexport function setEnableEnvMocks(enabled) {\r\n    _enableMocks = enabled;\r\n}\r\n/**\r\n * Return the named global object if available, will return null if the object is not available.\r\n * @param name The globally named object\r\n */\r\nexport function getGlobalInst(name) {\r\n    var gbl = getGlobal();\r\n    if (gbl && gbl[name]) {\r\n        return gbl[name];\r\n    }\r\n    // Test workaround, for environments where <global>.window (when global == window) doesn't return the base window\r\n    if (name === strWindow && hasWindow()) {\r\n        // tslint:disable-next-line: no-angle-bracket-type-assertion\r\n        return window;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks if window object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a window\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: window is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasWindow() {\r\n    return Boolean(typeof window === strShimObject && window);\r\n}\r\n/**\r\n * Returns the global window object if it is present otherwise null.\r\n * This helper is used to access the window object without causing an exception\r\n * \"Uncaught ReferenceError: window is not defined\"\r\n */\r\nexport function getWindow() {\r\n    if (hasWindow()) {\r\n        return window;\r\n    }\r\n    // Return the global instance or null\r\n    return getGlobalInst(strWindow);\r\n}\r\n/**\r\n * Checks if document object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a document\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: document is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasDocument() {\r\n    return Boolean(typeof document === strShimObject && document);\r\n}\r\n/**\r\n * Returns the global document object if it is present otherwise null.\r\n * This helper is used to access the document object without causing an exception\r\n * \"Uncaught ReferenceError: document is not defined\"\r\n */\r\nexport function getDocument() {\r\n    if (hasDocument()) {\r\n        return document;\r\n    }\r\n    return getGlobalInst(strDocument);\r\n}\r\n/**\r\n * Checks if navigator object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a navigator\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: navigator is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasNavigator() {\r\n    return Boolean(typeof navigator === strShimObject && navigator);\r\n}\r\n/**\r\n * Returns the global navigator object if it is present otherwise null.\r\n * This helper is used to access the navigator object without causing an exception\r\n * \"Uncaught ReferenceError: navigator is not defined\"\r\n */\r\nexport function getNavigator() {\r\n    if (hasNavigator()) {\r\n        return navigator;\r\n    }\r\n    return getGlobalInst(strNavigator);\r\n}\r\n/**\r\n * Checks if history object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: history is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasHistory() {\r\n    return Boolean(typeof history === strShimObject && history);\r\n}\r\n/**\r\n * Returns the global history object if it is present otherwise null.\r\n * This helper is used to access the history object without causing an exception\r\n * \"Uncaught ReferenceError: history is not defined\"\r\n */\r\nexport function getHistory() {\r\n    if (hasHistory()) {\r\n        return history;\r\n    }\r\n    return getGlobalInst(strHistory);\r\n}\r\n/**\r\n * Returns the global location object if it is present otherwise null.\r\n * This helper is used to access the location object without causing an exception\r\n * \"Uncaught ReferenceError: location is not defined\"\r\n */\r\nexport function getLocation(checkForMock) {\r\n    if (checkForMock && _enableMocks) {\r\n        var mockLocation = getGlobalInst(\"__mockLocation\");\r\n        if (mockLocation) {\r\n            return mockLocation;\r\n        }\r\n    }\r\n    if (typeof location === strShimObject && location) {\r\n        return location;\r\n    }\r\n    return getGlobalInst(strLocation);\r\n}\r\n/**\r\n * Returns the global console object\r\n */\r\nexport function getConsole() {\r\n    if (typeof console !== strShimUndefined) {\r\n        return console;\r\n    }\r\n    return getGlobalInst(strConsole);\r\n}\r\n/**\r\n * Returns the performance object if it is present otherwise null.\r\n * This helper is used to access the performance object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getPerformance() {\r\n    return getGlobalInst(strPerformance);\r\n}\r\n/**\r\n * Checks if JSON object is available, this is required as we support the API running without a\r\n * window /document (eg. Node server, electron webworkers) and if we attempt to assign a history\r\n * object to a local variable or pass as an argument an \"Uncaught ReferenceError: JSON is not defined\"\r\n * exception will be thrown.\r\n * Defined as a function to support lazy / late binding environments.\r\n */\r\nexport function hasJSON() {\r\n    return Boolean((typeof JSON === strShimObject && JSON) || getGlobalInst(strJSON) !== null);\r\n}\r\n/**\r\n * Returns the global JSON object if it is present otherwise null.\r\n * This helper is used to access the JSON object without causing an exception\r\n * \"Uncaught ReferenceError: JSON is not defined\"\r\n */\r\nexport function getJSON() {\r\n    if (hasJSON()) {\r\n        return JSON || getGlobalInst(strJSON);\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getCrypto() {\r\n    return getGlobalInst(strCrypto);\r\n}\r\n/**\r\n * Returns the crypto object if it is present otherwise null.\r\n * This helper is used to access the crypto object from the current\r\n * global instance which could be window or globalThis for a web worker\r\n */\r\nexport function getMsCrypto() {\r\n    return getGlobalInst(strMsCrypto);\r\n}\r\n/**\r\n * Returns whether the environment is reporting that we are running in a React Native Environment\r\n */\r\nexport function isReactNative() {\r\n    // If running in React Native, navigator.product will be populated\r\n    var nav = getNavigator();\r\n    if (nav && nav.product) {\r\n        return nav.product === strReactNative;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Identifies whether the current environment appears to be IE\r\n */\r\nexport function isIE() {\r\n    var nav = getNavigator();\r\n    if (nav && (nav[_DYN_USER_AGENT /* @min:%2euserAgent */] !== _navUserAgentCheck || _isTrident === null)) {\r\n        // Added to support test mocking of the user agent\r\n        _navUserAgentCheck = nav[_DYN_USER_AGENT /* @min:%2euserAgent */];\r\n        var userAgent = (_navUserAgentCheck || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n        _isTrident = (strContains(userAgent, strMsie) || strContains(userAgent, strTrident));\r\n    }\r\n    return _isTrident;\r\n}\r\n/**\r\n * Gets IE version returning the document emulation mode if we are running on IE, or null otherwise\r\n */\r\nexport function getIEVersion(userAgentStr) {\r\n    if (userAgentStr === void 0) { userAgentStr = null; }\r\n    if (!userAgentStr) {\r\n        var navigator_1 = getNavigator() || {};\r\n        userAgentStr = navigator_1 ? (navigator_1[_DYN_USER_AGENT /* @min:%2euserAgent */] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    // Also check for documentMode in case X-UA-Compatible meta tag was included in HTML.\r\n    if (strContains(ua, strMsie)) {\r\n        var doc = getDocument() || {};\r\n        return Math.max(parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strMsie)[1]), (doc[strDocumentMode] || 0));\r\n    }\r\n    else if (strContains(ua, strTrident)) {\r\n        var tridentVer = parseInt(ua[_DYN_SPLIT /* @min:%2esplit */](strTrident)[1]);\r\n        if (tridentVer) {\r\n            return tridentVer + 4;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns string representation of an object suitable for diagnostics logging.\r\n */\r\nexport function dumpObj(object) {\r\n    var objectTypeDump = Object[strShimPrototype].toString[_DYN_CALL /* @min:%2ecall */](object);\r\n    var propertyValueDump = STR_EMPTY;\r\n    if (objectTypeDump === \"[object Error]\") {\r\n        propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object[_DYN_NAME /* @min:%2ename */] + \"'\";\r\n    }\r\n    else if (hasJSON()) {\r\n        propertyValueDump = getJSON().stringify(object);\r\n    }\r\n    return objectTypeDump + propertyValueDump;\r\n}\r\nexport function isSafari(userAgentStr) {\r\n    if (!userAgentStr || !isString(userAgentStr)) {\r\n        var navigator_2 = getNavigator() || {};\r\n        userAgentStr = navigator_2 ? (navigator_2[_DYN_USER_AGENT /* @min:%2euserAgent */] || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]() : STR_EMPTY;\r\n    }\r\n    var ua = (userAgentStr || STR_EMPTY)[_DYN_TO_LOWER_CASE /* @min:%2etoLowerCase */]();\r\n    return (ua[_DYN_INDEX_OF /* @min:%2eindexOf */](\"safari\") >= 0);\r\n}\r\n/**\r\n * Checks if HTML5 Beacons are supported in the current environment.\r\n * @returns True if supported, false otherwise.\r\n */\r\nexport function isBeaconsSupported() {\r\n    if (_beaconsSupported === null) {\r\n        _beaconsSupported = hasNavigator() && Boolean(getNavigator().sendBeacon);\r\n    }\r\n    return _beaconsSupported;\r\n}\r\n/**\r\n * Checks if the Fetch API is supported in the current environment.\r\n * @param withKeepAlive - [Optional] If True, check if fetch is available and it supports the keepalive feature, otherwise only check if fetch is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isFetchSupported(withKeepAlive) {\r\n    var isSupported = false;\r\n    try {\r\n        isSupported = !!getGlobalInst(\"fetch\");\r\n        var request = getGlobalInst(\"Request\");\r\n        if (isSupported && withKeepAlive && request) {\r\n            isSupported = _hasProperty(request, \"keepalive\");\r\n        }\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nexport function useXDomainRequest() {\r\n    if (_useXDomainRequest === null) {\r\n        _useXDomainRequest = (typeof XDomainRequest !== strShimUndefined);\r\n        if (_useXDomainRequest && isXhrSupported()) {\r\n            _useXDomainRequest = _useXDomainRequest && !_hasProperty(getGlobalInst(strXMLHttpRequest), \"withCredentials\");\r\n        }\r\n    }\r\n    return _useXDomainRequest;\r\n}\r\n/**\r\n * Checks if XMLHttpRequest is supported\r\n * @returns True if supported, otherwise false\r\n */\r\nexport function isXhrSupported() {\r\n    var isSupported = false;\r\n    try {\r\n        var xmlHttpRequest = getGlobalInst(strXMLHttpRequest);\r\n        isSupported = !!xmlHttpRequest;\r\n    }\r\n    catch (e) {\r\n        // Just Swallow any failure during availability checks\r\n    }\r\n    return isSupported;\r\n}\r\nfunction _getNamedValue(values, name) {\r\n    if (values) {\r\n        for (var i = 0; i < values[_DYN_LENGTH /* @min:%2elength */]; i++) {\r\n            var value = values[i];\r\n            if (value[_DYN_NAME /* @min:%2ename */]) {\r\n                if (value[_DYN_NAME /* @min:%2ename */] === name) {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Helper function to fetch the named meta-tag from the page.\r\n * @param name\r\n */\r\nexport function findMetaTag(name) {\r\n    var doc = getDocument();\r\n    if (doc && name) {\r\n        // Look for a meta-tag\r\n        return _getNamedValue(doc.querySelectorAll(\"meta\"), name).content;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper function to fetch the named server timing value from the page response (first navigation event).\r\n * @param name\r\n */\r\nexport function findNamedServerTiming(name) {\r\n    var value;\r\n    var perf = getPerformance();\r\n    if (perf) {\r\n        // Try looking for a server-timing header\r\n        var navPerf = perf.getEntriesByType(\"navigation\") || [];\r\n        value = _getNamedValue((navPerf[_DYN_LENGTH /* @min:%2elength */] > 0 ? navPerf[0] : {}).serverTiming, name).description;\r\n    }\r\n    return value;\r\n}\r\n// TODO: should reuse this method for analytics plugin\r\nexport function dispatchEvent(target, evnt) {\r\n    if (target && target.dispatchEvent && evnt) {\r\n        target.dispatchEvent(evnt);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function createCustomDomEvent(eventName, details) {\r\n    var event = null;\r\n    var detail = { detail: details || null };\r\n    if (isFunction(CustomEvent)) { // Use CustomEvent constructor when available\r\n        event = new CustomEvent(eventName, detail);\r\n    }\r\n    else { // CustomEvent has no constructor in IE\r\n        var doc = getDocument();\r\n        if (doc && doc.createEvent) {\r\n            event = doc.createEvent(\"CustomEvent\");\r\n            event.initCustomEvent(eventName, true, true, detail);\r\n        }\r\n    }\r\n    return event;\r\n}\r\nexport function sendCustomEvent(evtName, cfg, customDetails) {\r\n    var global = getGlobal();\r\n    if (global && global.CustomEvent) {\r\n        try {\r\n            var details = { cfg: cfg || null, customDetails: customDetails || null };\r\n            return dispatchEvent(global, createCustomDomEvent(evtName, details));\r\n        }\r\n        catch (e) {\r\n            // eslint-disable-next-line no-empty\r\n        }\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=EnvUtils.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_HANDLER, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_REPLACE, _DYN_SPLICE, _DYN_SPLIT, _DYN_TYPE } from \"../__DynamicConstants\";\r\nimport { createElmNodeData, createUniqueNamespace } from \"./DataCacheHelper\";\r\nimport { getDocument, getWindow } from \"./EnvUtils\";\r\nimport { arrForEach, arrIndexOf, isArray, objForEachKey, objKeys } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// Added to help with minfication\r\nvar strOnPrefix = \"on\";\r\nvar strAttachEvent = \"attachEvent\";\r\nvar strAddEventHelper = \"addEventListener\";\r\nvar strDetachEvent = \"detachEvent\";\r\nvar strRemoveEventListener = \"removeEventListener\";\r\nvar strEvents = \"events\";\r\nvar strVisibilityChangeEvt = \"visibilitychange\";\r\nvar strPageHide = \"pagehide\";\r\nvar strPageShow = \"pageshow\";\r\nvar strUnload = \"unload\";\r\nvar strBeforeUnload = \"beforeunload\";\r\nvar strPageHideNamespace = createUniqueNamespace(\"aiEvtPageHide\");\r\nvar strPageShowNamespace = createUniqueNamespace(\"aiEvtPageShow\");\r\nvar rRemoveEmptyNs = /\\.[\\.]+/g;\r\nvar rRemoveTrailingEmptyNs = /[\\.]+$/;\r\nvar _guid = 1;\r\nvar elmNodeData = createElmNodeData(\"events\");\r\nvar eventNamespace = /^([^.]*)(?:\\.(.+)|)/;\r\nfunction _normalizeNamespace(name) {\r\n    if (name && name[_DYN_REPLACE /* @min:%2ereplace */]) {\r\n        return name[_DYN_REPLACE /* @min:%2ereplace */](/^[\\s\\.]+|(?=[\\s\\.])[\\.\\s]+$/g, STR_EMPTY);\r\n    }\r\n    return name;\r\n}\r\nfunction _getEvtNamespace(eventName, evtNamespace) {\r\n    var _a;\r\n    if (evtNamespace) {\r\n        var theNamespace_1 = STR_EMPTY;\r\n        if (isArray(evtNamespace)) {\r\n            theNamespace_1 = STR_EMPTY;\r\n            arrForEach(evtNamespace, function (name) {\r\n                name = _normalizeNamespace(name);\r\n                if (name) {\r\n                    if (name[0] !== \".\") {\r\n                        name = \".\" + name;\r\n                    }\r\n                    theNamespace_1 += name;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            theNamespace_1 = _normalizeNamespace(evtNamespace);\r\n        }\r\n        if (theNamespace_1) {\r\n            if (theNamespace_1[0] !== \".\") {\r\n                theNamespace_1 = \".\" + theNamespace_1;\r\n            }\r\n            // We may only have the namespace and not an eventName\r\n            eventName = (eventName || STR_EMPTY) + theNamespace_1;\r\n        }\r\n    }\r\n    var parsedEvent = (eventNamespace.exec(eventName || STR_EMPTY) || []);\r\n    return _a = {},\r\n        _a[_DYN_TYPE /* @min:type */] = parsedEvent[1],\r\n        _a.ns = ((parsedEvent[2] || STR_EMPTY).replace(rRemoveEmptyNs, \".\").replace(rRemoveTrailingEmptyNs, STR_EMPTY)[_DYN_SPLIT /* @min:%2esplit */](\".\").sort()).join(\".\"),\r\n        _a;\r\n}\r\n/**\r\n * Get all of the registered events on the target object, this is primarily used for testing cleanup but may also be used by\r\n * applications to remove their own events\r\n * @param target - The EventTarget that has registered events\r\n * @param eventName - [Optional] The name of the event to return the registered handlers and full name (with namespaces)\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n */\r\nexport function __getRegisteredEvents(target, eventName, evtNamespace) {\r\n    var theEvents = [];\r\n    var eventCache = elmNodeData.get(target, strEvents, {}, false);\r\n    var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n    objForEachKey(eventCache, function (evtType, registeredEvents) {\r\n        arrForEach(registeredEvents, function (value) {\r\n            var _a;\r\n            if (!evtName[_DYN_TYPE /* @min:%2etype */] || evtName[_DYN_TYPE /* @min:%2etype */] === value.evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n                if (!evtName.ns || evtName.ns === evtName.ns) {\r\n                    theEvents[_DYN_PUSH /* @min:%2epush */]((_a = {},\r\n                        _a[_DYN_NAME /* @min:name */] = value.evtName[_DYN_TYPE /* @min:%2etype */] + (value.evtName.ns ? \".\" + value.evtName.ns : STR_EMPTY),\r\n                        _a.handler = value[_DYN_HANDLER /* @min:%2ehandler */],\r\n                        _a));\r\n                }\r\n            }\r\n        });\r\n    });\r\n    return theEvents;\r\n}\r\n// Exported for internal unit testing only\r\nfunction _getRegisteredEvents(target, evtName, addDefault) {\r\n    if (addDefault === void 0) { addDefault = true; }\r\n    var aiEvts = elmNodeData.get(target, strEvents, {}, addDefault);\r\n    var registeredEvents = aiEvts[evtName];\r\n    if (!registeredEvents) {\r\n        registeredEvents = aiEvts[evtName] = [];\r\n    }\r\n    return registeredEvents;\r\n}\r\nfunction _doDetach(obj, evtName, handlerRef, useCapture) {\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        if (obj[strRemoveEventListener]) {\r\n            obj[strRemoveEventListener](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n        }\r\n        else if (obj[strDetachEvent]) {\r\n            obj[strDetachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n        }\r\n    }\r\n}\r\nfunction _doAttach(obj, evtName, handlerRef, useCapture) {\r\n    var result = false;\r\n    if (obj && evtName && evtName[_DYN_TYPE /* @min:%2etype */] && handlerRef) {\r\n        if (obj[strAddEventHelper]) {\r\n            // all browsers except IE before version 9\r\n            obj[strAddEventHelper](evtName[_DYN_TYPE /* @min:%2etype */], handlerRef, useCapture);\r\n            result = true;\r\n        }\r\n        else if (obj[strAttachEvent]) {\r\n            // IE before version 9\r\n            obj[strAttachEvent](strOnPrefix + evtName[_DYN_TYPE /* @min:%2etype */], handlerRef);\r\n            result = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction _doUnregister(target, events, evtName, unRegFn) {\r\n    var idx = events[_DYN_LENGTH /* @min:%2elength */];\r\n    while (idx--) {\r\n        var theEvent = events[idx];\r\n        if (theEvent) {\r\n            if (!evtName.ns || evtName.ns === theEvent.evtName.ns) {\r\n                if (!unRegFn || unRegFn(theEvent)) {\r\n                    _doDetach(target, theEvent.evtName, theEvent[_DYN_HANDLER /* @min:%2ehandler */], theEvent.capture);\r\n                    // Remove the registered event\r\n                    events[_DYN_SPLICE /* @min:%2esplice */](idx, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction _unregisterEvents(target, evtName, unRegFn) {\r\n    if (evtName[_DYN_TYPE /* @min:%2etype */]) {\r\n        _doUnregister(target, _getRegisteredEvents(target, evtName[_DYN_TYPE /* @min:%2etype */]), evtName, unRegFn);\r\n    }\r\n    else {\r\n        var eventCache = elmNodeData.get(target, strEvents, {});\r\n        objForEachKey(eventCache, function (evtType, events) {\r\n            _doUnregister(target, events, evtName, unRegFn);\r\n        });\r\n        // Cleanup\r\n        if (objKeys(eventCache)[_DYN_LENGTH /* @min:%2elength */] === 0) {\r\n            elmNodeData.kill(target, strEvents);\r\n        }\r\n    }\r\n}\r\nexport function mergeEvtNamespace(theNamespace, namespaces) {\r\n    var newNamespaces;\r\n    if (namespaces) {\r\n        if (isArray(namespaces)) {\r\n            newNamespaces = [theNamespace].concat(namespaces);\r\n        }\r\n        else {\r\n            newNamespaces = [theNamespace, namespaces];\r\n        }\r\n        // resort the namespaces so they are always in order\r\n        newNamespaces = (_getEvtNamespace(\"xx\", newNamespaces).ns)[_DYN_SPLIT /* @min:%2esplit */](\".\");\r\n    }\r\n    else {\r\n        newNamespaces = theNamespace;\r\n    }\r\n    return newNamespaces;\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj Object to add the event too.\r\n * @param eventName String that specifies any of the standard DHTML Events without \"on\" prefix, if may also include an optional (dot \".\" prefixed)\r\n * namespaces \"click\" \"click.mynamespace\" in addition to specific namespaces.\r\n * @param handlerRef Pointer that specifies the function to call when event fires\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function eventOn(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    var _a;\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    var result = false;\r\n    if (target) {\r\n        try {\r\n            var evtName = _getEvtNamespace(eventName, evtNamespace);\r\n            result = _doAttach(target, evtName, handlerRef, useCapture);\r\n            if (result && elmNodeData.accept(target)) {\r\n                var registeredEvent = (_a = {\r\n                        guid: _guid++,\r\n                        evtName: evtName\r\n                    },\r\n                    _a[_DYN_HANDLER /* @min:handler */] = handlerRef,\r\n                    _a.capture = useCapture,\r\n                    _a);\r\n                _getRegisteredEvents(target, evtName.type)[_DYN_PUSH /* @min:%2epush */](registeredEvent);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object to remove the event from\r\n * @param eventName {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Additional namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace,\r\n * if the eventName also includes a namespace the namespace(s) are merged into a single namespace\r\n * @param useCapture [Optional] Defaults to false\r\n */\r\nexport function eventOff(target, eventName, handlerRef, evtNamespace, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    if (target) {\r\n        try {\r\n            var evtName_1 = _getEvtNamespace(eventName, evtNamespace);\r\n            var found_1 = false;\r\n            _unregisterEvents(target, evtName_1, function (regEvent) {\r\n                if ((evtName_1.ns && !handlerRef) || regEvent[_DYN_HANDLER /* @min:%2ehandler */] === handlerRef) {\r\n                    found_1 = true;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!found_1) {\r\n                // fallback to try and remove as requested\r\n                _doDetach(target, evtName_1, handlerRef, useCapture);\r\n            }\r\n        }\r\n        catch (e) {\r\n            // Just Ignore any error so that we don't break any execution path\r\n        }\r\n    }\r\n}\r\n/**\r\n * Binds the specified function to an event, so that the function gets called whenever the event fires on the object\r\n * @param obj Object to add the event too.\r\n * @param eventNameWithoutOn String that specifies any of the standard DHTML Events without \"on\" prefix and optional (dot \".\" prefixed) namespaces \"click\" \"click.mynamespace\".\r\n * @param handlerRef Pointer that specifies the function to call when event fires\r\n * @param useCapture [Optional] Defaults to false\r\n * @returns True if the function was bound successfully to the event, otherwise false\r\n */\r\nexport function attachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    return eventOn(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Removes an event handler for the specified event\r\n * @param Object to remove the event from\r\n * @param eventNameWithoutOn {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param handlerRef {any} - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param useCapture [Optional] Defaults to false\r\n */\r\nexport function detachEvent(obj, eventNameWithoutOn, handlerRef, useCapture) {\r\n    if (useCapture === void 0) { useCapture = false; }\r\n    eventOff(obj, eventNameWithoutOn, handlerRef, null, useCapture);\r\n}\r\n/**\r\n * Trys to add an event handler for the specified event to the window, body and document\r\n * @param eventName {string} - The name of the event\r\n * @param callback {any} - The callback function that needs to be executed for the given event\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @return {boolean} - true if the handler was successfully added\r\n */\r\nexport function addEventHandler(eventName, callback, evtNamespace) {\r\n    var result = false;\r\n    var w = getWindow();\r\n    if (w) {\r\n        result = eventOn(w, eventName, callback, evtNamespace);\r\n        result = eventOn(w[\"body\"], eventName, callback, evtNamespace) || result;\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        result = eventOn(doc, eventName, callback, evtNamespace) || result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Trys to remove event handler(s) for the specified event/namespace to the window, body and document\r\n * @param eventName {string} - The name of the event, with optional namespaces or just the namespaces,\r\n * such as \"click\", \"click.mynamespace\" or \".mynamespace\"\r\n * @param callback {any} - - The callback function that needs to be removed from the given event, when using a\r\n * namespace (with or without a qualifying event) this may be null to remove all previously attached event handlers\r\n * otherwise this will only remove events with this specific handler.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventHandler(eventName, callback, evtNamespace) {\r\n    var w = getWindow();\r\n    if (w) {\r\n        eventOff(w, eventName, callback, evtNamespace);\r\n        eventOff(w[\"body\"], eventName, callback, evtNamespace);\r\n    }\r\n    var doc = getDocument();\r\n    if (doc) {\r\n        eventOff(doc, eventName, callback, evtNamespace);\r\n    }\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nfunction _addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && events[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                if (!excludeEvents || arrIndexOf(excludeEvents, name) === -1) {\r\n                    added = addEventHandler(name, listener, evtNamespace) || added;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Bind the listener to the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addEventListeners(events, listener, excludeEvents, evtNamespace) {\r\n    var added = false;\r\n    if (listener && events && isArray(events)) {\r\n        added = _addEventListeners(events, listener, excludeEvents, evtNamespace);\r\n        if (!added && excludeEvents && excludeEvents[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n            // Failed to add any listeners and we excluded some, so just attempt to add the excluded events\r\n            added = _addEventListeners(events, listener, null, evtNamespace);\r\n        }\r\n    }\r\n    return added;\r\n}\r\n/**\r\n * Remove the listener from the array of events\r\n * @param events An string array of event names to bind the listener to\r\n * @param listener The event callback to call when the event is triggered\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n */\r\nexport function removeEventListeners(events, listener, evtNamespace) {\r\n    if (events && isArray(events)) {\r\n        arrForEach(events, function (name) {\r\n            if (name) {\r\n                removeEventHandler(name, listener, evtNamespace);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Listen to the 'beforeunload', 'unload' and 'pagehide' events which indicates a page unload is occurring,\r\n * this does NOT listen to the 'visibilitychange' event as while it does indicate that the page is being hidden\r\n * it does not *necessarily* mean that the page is being completely unloaded, it can mean that the user is\r\n * just navigating to a different Tab and may come back (without unloading the page). As such you may also\r\n * need to listen to the 'addPageHideEventListener' and 'addPageShowEventListener' events.\r\n * @param listener - The event callback to call when a page unload event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked, unless no other events can be.\r\n * @param evtNamespace - [Optional] Namespace(s) to append to the event listeners so they can be uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageUnloadEventListener(listener, excludeEvents, evtNamespace) {\r\n    // Hook the unload event for the document, window and body to ensure that the client events are flushed to the server\r\n    // As just hooking the window does not always fire (on chrome) for page navigation's.\r\n    return addEventListeners([strBeforeUnload, strUnload, strPageHide], listener, excludeEvents, evtNamespace);\r\n}\r\n/**\r\n * Remove any matching 'beforeunload', 'unload' and 'pagehide' events that may have been added via addEventListener,\r\n * addEventListeners, addPageUnloadEventListener or addPageHideEventListener.\r\n * @param listener - The specific event callback to to be removed\r\n * @param evtNamespace - [Optional] Namespace(s) uniquely identified and removed based on this namespace.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function removePageUnloadEventListener(listener, evtNamespace) {\r\n    removeEventListeners([strBeforeUnload, strUnload, strPageHide], listener, evtNamespace);\r\n}\r\n/**\r\n * Listen to the pagehide and visibility changing to 'hidden' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page hide event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional] A Namespace to append to the event listeners so they can be uniquely identified and removed\r\n * based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageHideEventListener\" can remove these events.\r\n * Suggestion: pass as true if you are also calling addPageUnloadEventListener as that also hooks pagehide\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageHideEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"hidden\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    var pageUnloadAdded = _addEventListeners([strPageHide], listener, excludeEvents, newNamespaces);\r\n    if (!excludeEvents || arrIndexOf(excludeEvents, strVisibilityChangeEvt) === -1) {\r\n        pageUnloadAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageUnloadAdded;\r\n    }\r\n    if (!pageUnloadAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageUnloadAdded = addPageHideEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageUnloadAdded;\r\n}\r\n/**\r\n * Removes the pageHide event listeners added by addPageHideEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageHideEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageHideEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pagehide\"\r\n    var newNamespaces = mergeEvtNamespace(strPageHideNamespace, evtNamespace);\r\n    removeEventListeners([strPageHide], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n/**\r\n * Listen to the pageshow and visibility changing to 'visible' events, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when if you plan to call\r\n * removePageShowEventListener as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The event callback to call when a page is show event is triggered\r\n * @param excludeEvents - [Optional] An array of events that should not be hooked (if possible), unless no other events can be.\r\n * @param evtNamespace - [Optional/Recommended] A Namespace to append to the event listeners so they can be uniquely\r\n * identified and removed based on this namespace. This call also adds an additional unique \"pageshow\" namespace to the events\r\n * so that only the matching \"removePageShowEventListener\" can remove these events.\r\n * @returns true - when at least one of the events was registered otherwise false\r\n */\r\nexport function addPageShowEventListener(listener, excludeEvents, evtNamespace) {\r\n    function _handlePageVisibility(evt) {\r\n        var doc = getDocument();\r\n        if (listener && doc && doc.visibilityState === \"visible\") {\r\n            listener(evt);\r\n        }\r\n    }\r\n    // add the unique page show namespace to any provided namespace so we can only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    var pageShowAdded = _addEventListeners([strPageShow], listener, excludeEvents, newNamespaces);\r\n    pageShowAdded = _addEventListeners([strVisibilityChangeEvt], _handlePageVisibility, excludeEvents, newNamespaces) || pageShowAdded;\r\n    if (!pageShowAdded && excludeEvents) {\r\n        // Failed to add any listeners and we where requested to exclude some, so just call again without excluding anything\r\n        pageShowAdded = addPageShowEventListener(listener, null, evtNamespace);\r\n    }\r\n    return pageShowAdded;\r\n}\r\n/**\r\n * Removes the pageShow event listeners added by addPageShowEventListener, because the 'visibilitychange' uses\r\n * an internal proxy to detect the visibility state you SHOULD use a unique namespace when calling addPageShowEventListener\r\n * as the remove ignores the listener argument for the 'visibilitychange' event.\r\n * @param listener - The specific listener to remove for the 'pageshow' event only (ignored for 'visibilitychange')\r\n * @param evtNamespace - The unique namespace used when calling addPageShowEventListener\r\n */\r\nexport function removePageShowEventListener(listener, evtNamespace) {\r\n    // add the unique page show namespace to any provided namespace so we only remove the ones added by \"pageshow\"\r\n    var newNamespaces = mergeEvtNamespace(strPageShowNamespace, evtNamespace);\r\n    removeEventListeners([strPageShow], listener, newNamespaces);\r\n    removeEventListeners([strVisibilityChangeEvt], null, newNamespaces);\r\n}\r\n//# sourceMappingURL=EventHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { ObjAssign, ObjClass, ObjDefineProperty, ObjHasOwnProperty, ObjProto, strShimFunction, strShimObject, strShimPrototype, strShimUndefined, throwTypeError } from \"@microsoft/applicationinsights-shims\";\r\nimport { _DYN_APPLY, _DYN_CALL, _DYN_INDEX_OF, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_REPLACE } from \"../__DynamicConstants\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n// RESTRICT and AVOID circular dependencies you should not import other contained modules or export the contents of this file directly\r\n// Added to help with minfication\r\nvar strToISOString = \"toISOString\";\r\nvar cStrEndsWith = \"endsWith\";\r\nvar cStrStartsWith = \"startsWith\";\r\nvar strIndexOf = \"indexOf\";\r\nvar strMap = \"map\";\r\nvar strReduce = \"reduce\";\r\nvar cStrTrim = \"trim\";\r\nvar strToString = \"toString\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n  * Constant string defined to support minimization\r\n  * @ignore\r\n  */\r\nvar strConstructor = \"constructor\";\r\nvar _objDefineProperty = ObjDefineProperty;\r\nvar _objFreeze = ObjClass.freeze;\r\nvar _objSeal = ObjClass.seal;\r\nvar _objKeys = ObjClass.keys;\r\nvar StringProto = String[strShimPrototype];\r\nvar _strTrim = StringProto[cStrTrim];\r\nvar _strEndsWith = StringProto[cStrEndsWith];\r\nvar _strStartsWith = StringProto[cStrStartsWith];\r\nvar DateProto = Date[strShimPrototype];\r\nvar _dataToISOString = DateProto[strToISOString];\r\nvar _isArray = Array.isArray;\r\nvar _objToString = ObjProto[strToString];\r\nvar _fnToString = ObjHasOwnProperty[strToString];\r\n// Cache what this browser reports as the object function constructor (as a string)\r\nvar _objFunctionString = _fnToString[_DYN_CALL /* @min:%2ecall */](ObjClass);\r\nvar rCamelCase = /-([a-z])/g;\r\nvar rNormalizeInvalid = /([^\\w\\d_$])/g;\r\nvar rLeadingNumeric = /^(\\d+[\\w\\d_$])/;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Object[\"getPrototypeOf\"];\r\n/**\r\n  * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n  * @ignore\r\n  */\r\nexport function _getObjProto(target) {\r\n    if (target) {\r\n        // This method doesn't existing in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        // target[Constructor] May break if the constructor has been changed or removed\r\n        var newProto = target[str__Proto] || target[strShimPrototype] || target[strConstructor];\r\n        if (newProto) {\r\n            return newProto;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function objToString(obj) {\r\n    return _objToString[_DYN_CALL /* @min:%2ecall */](obj);\r\n}\r\nexport function isTypeof(value, theType) {\r\n    return typeof value === theType;\r\n}\r\nexport function isUndefined(value) {\r\n    return value === undefined || typeof value === strShimUndefined;\r\n}\r\nexport function isNotUndefined(value) {\r\n    return !isUndefined(value);\r\n}\r\nexport function isNullOrUndefined(value) {\r\n    return (value === null || isUndefined(value));\r\n}\r\nexport function isNotNullOrUndefined(value) {\r\n    return !isNullOrUndefined(value);\r\n}\r\nexport function hasOwnProperty(obj, prop) {\r\n    return !!(obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, prop));\r\n}\r\nexport function isObject(value) {\r\n    // Changing to inline for performance\r\n    return !!(value && typeof value === strShimObject);\r\n}\r\nexport function isFunction(value) {\r\n    // Changing to inline for performance\r\n    return !!(value && typeof value === strShimFunction);\r\n}\r\nexport function isPromiseLike(value) {\r\n    return value && isFunction(value.then);\r\n}\r\n/**\r\n * Validates that the string name conforms to the JS IdentifierName specification and if not\r\n * normalizes the name so that it would. This method does not identify or change any keywords\r\n * meaning that if you pass in a known keyword the same value will be returned.\r\n * This is a simplified version\r\n * @param name The name to validate\r\n */\r\nexport function normalizeJsName(name) {\r\n    var value = name;\r\n    if (value && isString(value)) {\r\n        // CamelCase everything after the \"-\" and remove the dash\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rCamelCase, function (_all, letter) {\r\n            return letter.toUpperCase();\r\n        });\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rNormalizeInvalid, \"_\");\r\n        value = value[_DYN_REPLACE /* @min:%2ereplace */](rLeadingNumeric, function (_all, match) {\r\n            return \"_\" + match;\r\n        });\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * This is a helper function for the equivalent of arForEach(objKeys(target), callbackFn), this is a\r\n * performance optimization to avoid the creation of a new array for large objects\r\n * @param target The target object to find and process the keys\r\n * @param callbackfn The function to call with the details\r\n */\r\nexport function objForEachKey(target, callbackfn) {\r\n    if (target) {\r\n        for (var prop in target) {\r\n            if (ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](target, prop)) {\r\n                callbackfn[_DYN_CALL /* @min:%2ecall */](target, prop, target[prop]);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * The strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function strEndsWith(value, search) {\r\n    var result = false;\r\n    if (value && search && !(result = value === search)) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        result = _strEndsWith ? value[cStrEndsWith](search) : _strEndsWithPoly(value, search);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The _strEndsWith() method determines whether a string ends with the characters of a specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param search - The characters to be searched for at the end of the value.\r\n * @returns true if the given search value is found at the end of the string, otherwise false.\r\n */\r\nexport function _strEndsWithPoly(value, search) {\r\n    var result = false;\r\n    var searchLen = search ? search[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    var valLen = value ? value[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    if (searchLen && valLen && valLen >= searchLen && !(result = value === search)) {\r\n        var pos = valLen - 1;\r\n        for (var lp = searchLen - 1; lp >= 0; lp--) {\r\n            if (value[pos] != search[lp]) {\r\n                return false;\r\n            }\r\n            pos--;\r\n        }\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The strStartsWith() method determines whether a string starts with the characters of the specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param checkValue - The characters to be searched for at the start of the value.\r\n * @returns true if the given search value is found at the start of the string, otherwise false.\r\n */\r\nexport function strStartsWith(value, checkValue) {\r\n    var result = false;\r\n    if (value && checkValue && !(result = value === checkValue)) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        result = _strStartsWith ? value[cStrStartsWith](checkValue) : _strStartsWithPoly(value, checkValue);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * The strStartsWith() method determines whether a string starts with the characters of the specified string, returning true or false as appropriate.\r\n * @param value - The value to check whether it ends with the search value.\r\n * @param checkValue - The characters to be searched for at the start of the value.\r\n * @returns true if the given search value is found at the start of the string, otherwise false.\r\n */\r\nexport function _strStartsWithPoly(value, checkValue) {\r\n    // Using helper for performance and because string startsWith() is not available on IE\r\n    var result = false;\r\n    var chkLen = checkValue ? checkValue[_DYN_LENGTH /* @min:%2elength */] : 0;\r\n    if (value && chkLen && value[_DYN_LENGTH /* @min:%2elength */] >= chkLen && !(result = value === checkValue)) {\r\n        for (var lp = 0; lp < chkLen; lp++) {\r\n            if (value[lp] !== checkValue[lp]) {\r\n                return false;\r\n            }\r\n        }\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * A simple wrapper (for minification support) to check if the value contains the search string.\r\n * @param value - The string value to check for the existence of the search value\r\n * @param search - The value search within the value\r\n */\r\nexport function strContains(value, search) {\r\n    if (value && search) {\r\n        return value[_DYN_INDEX_OF /* @min:%2eindexOf */](search) !== -1;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Check if an object is of type Date\r\n */\r\nexport function isDate(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Date]\");\r\n}\r\n/**\r\n * Check if an object is of type Array with optional generic T, the generic type is not validated\r\n * and exists to help with TypeScript validation only.\r\n */\r\nexport var isArray = _isArray || _isArrayPoly;\r\nfunction _isArrayPoly(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Array]\");\r\n}\r\n/**\r\n * Check if an object is of type Error\r\n */\r\nexport function isError(obj) {\r\n    return !!(obj && _objToString[_DYN_CALL /* @min:%2ecall */](obj) === \"[object Error]\");\r\n}\r\n/**\r\n * Checks if the type of value is a string.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a string, false otherwise.\r\n */\r\nexport function isString(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"string\";\r\n}\r\n/**\r\n * Checks if the type of value is a number.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a number, false otherwise.\r\n */\r\nexport function isNumber(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"number\";\r\n}\r\n/**\r\n * Checks if the type of value is a boolean.\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a boolean, false otherwise.\r\n */\r\nexport function isBoolean(value) {\r\n    // Changing to inline for performance\r\n    return typeof value === \"boolean\";\r\n}\r\n/**\r\n * Checks if the type of value is a Symbol.\r\n * This only returns a boolean as returning value is Symbol will cause issues for older TypeScript consumers\r\n * @param {any} value - Value to be checked.\r\n * @return {boolean} True if the value is a Symbol, false otherwise.\r\n */\r\nexport function isSymbol(value) {\r\n    return typeof value === \"symbol\";\r\n}\r\n/**\r\n * Checks if the type of the value is a normal plain object (not a null or data)\r\n * @param value\r\n */\r\nexport function isPlainObject(value) {\r\n    var result = false;\r\n    if (value && typeof value === \"object\") {\r\n        // Inlining _objGetPrototypeOf for performance to avoid an additional function call\r\n        var proto = _objGetPrototypeOf ? _objGetPrototypeOf(value) : _getObjProto(value);\r\n        if (!proto) {\r\n            // No prototype found so this is a plain Object eg. 'Object.create(null)'\r\n            result = true;\r\n        }\r\n        else {\r\n            // Objects that have a prototype are plain only if they were created using the Object global (native) function\r\n            if (proto[strConstructor] && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](proto, strConstructor)) {\r\n                proto = proto[strConstructor];\r\n            }\r\n            result = typeof proto === strShimFunction && _fnToString[_DYN_CALL /* @min:%2ecall */](proto) === _objFunctionString;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function toISOString(date) {\r\n    if (date) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        return _dataToISOString ? date[strToISOString]() : _toISOStringPoly(date);\r\n    }\r\n}\r\n/**\r\n * Convert a date to I.S.O. format in IE8\r\n */\r\nexport function _toISOStringPoly(date) {\r\n    if (date && date.getUTCFullYear) {\r\n        var pad = function (num) {\r\n            var r = String(num);\r\n            if (r[_DYN_LENGTH /* @min:%2elength */] === 1) {\r\n                r = \"0\" + r;\r\n            }\r\n            return r;\r\n        };\r\n        return date.getUTCFullYear()\r\n            + \"-\" + pad(date.getUTCMonth() + 1)\r\n            + \"-\" + pad(date.getUTCDate())\r\n            + \"T\" + pad(date.getUTCHours())\r\n            + \":\" + pad(date.getUTCMinutes())\r\n            + \":\" + pad(date.getUTCSeconds())\r\n            + \".\" + String((date.getUTCMilliseconds() / 1000).toFixed(3)).slice(2, 5)\r\n            + \"Z\";\r\n    }\r\n}\r\n/**\r\n * Performs the specified action for each element in an array. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype\r\n * implementation. Note: For consistency this will not use the Array.prototype.xxxx implementation if it exists as this would\r\n * cause a testing requirement to test with and without the implementations\r\n * @param callbackfn  A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array. It can return -1 to break out of the loop\r\n * @param thisArg  [Optional] An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\nexport function arrForEach(arr, callbackfn, thisArg) {\r\n    var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n    try {\r\n        for (var idx = 0; idx < len; idx++) {\r\n            if (idx in arr) {\r\n                if (callbackfn[_DYN_CALL /* @min:%2ecall */](thisArg || arr, arr[idx], idx, arr) === -1) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n    }\r\n}\r\n/**\r\n * Returns the index of the first occurrence of a value in an array. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype\r\n * implementation. Note: For consistency this will not use the Array.prototype.xxxx implementation if it exists as this would\r\n * cause a testing requirement to test with and without the implementations\r\n * @param searchElement The value to locate in the array.\r\n * @param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.\r\n */\r\nexport function arrIndexOf(arr, searchElement, fromIndex) {\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strIndexOf]) {\r\n            return arr[strIndexOf](searchElement, fromIndex);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var from = fromIndex || 0;\r\n        try {\r\n            for (var lp = Math.max(from >= 0 ? from : len - Math.abs(from), 0); lp < len; lp++) {\r\n                if (lp in arr && arr[lp] === searchElement) {\r\n                    return lp;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Calls a defined callback function on each element of an array, and returns an array that contains the results. This helper exists\r\n * to avoid adding a polyfil for older browsers that do not define Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page\r\n * checks for presence/absence of the prototype implementation. Note: For consistency this will not use the Array.prototype.xxxx\r\n * implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\r\n * @param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\r\n */\r\nexport function arrMap(arr, callbackfn, thisArg) {\r\n    var results;\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strMap]) {\r\n            return arr[strMap](callbackfn, thisArg);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var _this = thisArg || arr;\r\n        results = new Array(len);\r\n        try {\r\n            for (var lp = 0; lp < len; lp++) {\r\n                if (lp in arr) {\r\n                    results[lp] = callbackfn[_DYN_CALL /* @min:%2ecall */](_this, arr[lp], arr);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // This can happen with some native browser objects, but should not happen for the type we are checking for\r\n        }\r\n    }\r\n    return results;\r\n}\r\n/**\r\n * Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is\r\n * provided as an argument in the next call to the callback function. This helper exists to avoid adding a polyfil for older browsers that do not define\r\n * Array.prototype.xxxx (eg. ES3 only, IE8) just in case any page checks for presence/absence of the prototype implementation. Note: For consistency\r\n * this will not use the Array.prototype.xxxx implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\r\n * @param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\r\n */\r\nexport function arrReduce(arr, callbackfn, initialValue) {\r\n    var value;\r\n    if (arr) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        if (arr[strReduce]) {\r\n            return arr[strReduce](callbackfn, initialValue);\r\n        }\r\n        var len = arr[_DYN_LENGTH /* @min:%2elength */];\r\n        var lp = 0;\r\n        // Specifically checking the number of passed arguments as the value could be anything\r\n        if (arguments[_DYN_LENGTH /* @min:%2elength */] >= 3) {\r\n            value = arguments[2];\r\n        }\r\n        else {\r\n            while (lp < len && !(lp in arr)) {\r\n                lp++;\r\n            }\r\n            value = arr[lp++];\r\n        }\r\n        while (lp < len) {\r\n            if (lp in arr) {\r\n                value = callbackfn(value, arr[lp], lp, arr);\r\n            }\r\n            lp++;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n */\r\nexport function strTrim(str) {\r\n    if (str) {\r\n        // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n        str = (_strTrim && str[cStrTrim]) ? str[cStrTrim]() : (str[_DYN_REPLACE /* @min:%2ereplace */] ? str[_DYN_REPLACE /* @min:%2ereplace */](/^\\s+|(?=\\s)\\s+$/g, STR_EMPTY) : str);\r\n    }\r\n    return str;\r\n}\r\nvar _objKeysHasDontEnumBug = !({ toString: null }).propertyIsEnumerable(\"toString\");\r\nvar _objKeysDontEnums = [\r\n    \"toString\",\r\n    \"toLocaleString\",\r\n    \"valueOf\",\r\n    \"hasOwnProperty\",\r\n    \"isPrototypeOf\",\r\n    \"propertyIsEnumerable\",\r\n    \"constructor\"\r\n];\r\n/**\r\n * Returns the names of the enumerable string properties and methods of an object. This helper exists to avoid adding a polyfil for older browsers\r\n * that do not define Object.keys eg. ES3 only, IE8 just in case any page checks for presence/absence of the prototype implementation.\r\n * Note: For consistency this will not use the Object.keys implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param obj Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\r\n */\r\nexport function objKeys(obj) {\r\n    var objType = typeof obj;\r\n    if (objType !== strShimFunction && (objType !== strShimObject || obj === null)) {\r\n        throwTypeError(\"objKeys called on non-object\");\r\n    }\r\n    // For Performance try and use the native instance, using string lookup of the function to easily pass the ES3 build checks and minification\r\n    if (!_objKeysHasDontEnumBug && _objKeys) {\r\n        return _objKeys(obj);\r\n    }\r\n    var result = [];\r\n    for (var prop in obj) {\r\n        if (obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, prop)) {\r\n            result[_DYN_PUSH /* @min:%2epush */](prop);\r\n        }\r\n    }\r\n    if (_objKeysHasDontEnumBug) {\r\n        var dontEnumsLength = _objKeysDontEnums[_DYN_LENGTH /* @min:%2elength */];\r\n        for (var lp = 0; lp < dontEnumsLength; lp++) {\r\n            if (obj && ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](obj, _objKeysDontEnums[lp])) {\r\n                result[_DYN_PUSH /* @min:%2epush */](_objKeysDontEnums[lp]);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Try to define get/set object property accessors for the target object/prototype, this will provide compatibility with\r\n * existing API definition when run within an ES5+ container that supports accessors but still enable the code to be loaded\r\n * and executed in an ES3 container, providing basic IE8 compatibility.\r\n * @param target The object on which to define the property.\r\n * @param prop The name of the property to be defined or modified.\r\n * @param getProp The getter function to wire against the getter.\r\n * @param setProp The setter function to wire against the setter.\r\n * @returns True if it was able to create the accessors otherwise false\r\n */\r\nexport function objDefineAccessors(target, prop, getProp, setProp) {\r\n    if (_objDefineProperty) {\r\n        try {\r\n            var descriptor = {\r\n                enumerable: true,\r\n                configurable: true\r\n            };\r\n            if (getProp) {\r\n                descriptor.get = getProp;\r\n            }\r\n            if (setProp) {\r\n                descriptor.set = setProp;\r\n            }\r\n            _objDefineProperty(target, prop, descriptor);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            // IE8 Defines a defineProperty on Object but it's only supported for DOM elements so it will throw\r\n            // We will just ignore this here.\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction _doNothing(value) {\r\n    return value;\r\n}\r\nexport function deepFreeze(obj) {\r\n    if (_objFreeze) {\r\n        objForEachKey(obj, function (name, value) {\r\n            if (isArray(value) || isObject(value)) {\r\n                _objFreeze(value);\r\n            }\r\n        });\r\n    }\r\n    return objFreeze(obj);\r\n}\r\nexport var objFreeze = _objFreeze || _doNothing;\r\nexport var objSeal = _objSeal || _doNothing;\r\n/**\r\n * Return the current time via the Date now() function (if available) and falls back to (new Date()).getTime() if now() is unavailable (IE8 or less)\r\n * https://caniuse.com/#search=Date.now\r\n */\r\nexport function dateNow() {\r\n    var dt = Date;\r\n    return dt.now ? dt.now() : new dt().getTime();\r\n}\r\n/**\r\n * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n */\r\nexport function getExceptionName(object) {\r\n    if (isError(object)) {\r\n        return object[_DYN_NAME /* @min:%2ename */];\r\n    }\r\n    return STR_EMPTY;\r\n}\r\n/**\r\n * Sets the provided value on the target instance using the field name when the provided chk function returns true, the chk\r\n * function will only be called if the new value is no equal to the original value.\r\n * @param target - The target object\r\n * @param field - The key of the target\r\n * @param value - The value to set\r\n * @param valChk - [Optional] Callback to check the value that if supplied will be called check if the new value can be set\r\n * @param srcChk - [Optional] Callback to check to original value that if supplied will be called if the new value should be set (if allowed)\r\n * @returns The existing or new value, depending what was set\r\n */\r\nexport function setValue(target, field, value, valChk, srcChk) {\r\n    var theValue = value;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (theValue !== value && (!srcChk || srcChk(theValue)) && (!valChk || valChk(value))) {\r\n            theValue = value;\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Returns the current value from the target object if not null or undefined otherwise sets the new value and returns it\r\n * @param target - The target object to return or set the default value\r\n * @param field - The key for the field to set on the target\r\n * @param defValue - [Optional] The value to set if not already present, when not provided a empty object will be added\r\n */\r\nexport function getSetValue(target, field, defValue) {\r\n    var theValue;\r\n    if (target) {\r\n        theValue = target[field];\r\n        if (!theValue && isNullOrUndefined(theValue)) {\r\n            // Supports having the default as null\r\n            theValue = !isUndefined(defValue) ? defValue : {};\r\n            target[field] = theValue;\r\n        }\r\n    }\r\n    else {\r\n        // Expanded for performance so we only check defValue if required\r\n        theValue = !isUndefined(defValue) ? defValue : {};\r\n    }\r\n    return theValue;\r\n}\r\n/**\r\n * Get the mapped config value, if null or undefined any supplied defaultValue will be returned.\r\n * @param field - The name of the field as the named enum value (number) or the string name.\r\n * @param defaultValue - The default value to return if the config field is not present, null or undefined.\r\n */\r\nexport function getCfgValue(theValue, defaultValue) {\r\n    return !isNullOrUndefined(theValue) ? theValue : defaultValue;\r\n}\r\nexport function isNotTruthy(value) {\r\n    return !value;\r\n}\r\nexport function isTruthy(value) {\r\n    return !!value;\r\n}\r\nexport function throwError(message) {\r\n    throw new Error(message);\r\n}\r\nfunction _createProxyFunction(source, funcName) {\r\n    var srcFunc = null;\r\n    var src = null;\r\n    if (isFunction(source)) {\r\n        srcFunc = source;\r\n    }\r\n    else {\r\n        src = source;\r\n    }\r\n    return function () {\r\n        // Capture the original arguments passed to the method\r\n        var originalArguments = arguments;\r\n        if (srcFunc) {\r\n            src = srcFunc();\r\n        }\r\n        if (src) {\r\n            return src[funcName][_DYN_APPLY /* @min:%2eapply */](src, originalArguments);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Effectively assigns all enumerable properties (not just own properties) and functions (including inherited prototype) from\r\n * the source object to the target, it attempts to use proxy getters / setters (if possible) and proxy functions to avoid potential\r\n * implementation issues by assigning prototype functions as instance ones\r\n *\r\n * This method is the primary method used to \"update\" the snippet proxy with the ultimate implementations.\r\n *\r\n * Special ES3 Notes:\r\n * Updates (setting) of direct property values on the target or indirectly on the source object WILL NOT WORK PROPERLY, updates to the\r\n * properties of \"referenced\" object will work (target.context.newValue = 10 => will be reflected in the source.context as it's the\r\n * same object). ES3 Failures: assigning target.myProp = 3 -> Won't change source.myProp = 3, likewise the reverse would also fail.\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param chkSet - An optional callback to determine whether a specific property/function should be proxied\r\n */\r\nexport function proxyAssign(target, source, chkSet) {\r\n    if (target && source && isObject(target) && isObject(source)) {\r\n        var _loop_1 = function (field) {\r\n            if (isString(field)) {\r\n                var value = source[field];\r\n                if (isFunction(value)) {\r\n                    if (!chkSet || chkSet(field, true, source, target)) {\r\n                        // Create a proxy function rather than just copying the (possible) prototype to the new object as an instance function\r\n                        target[field] = _createProxyFunction(source, field);\r\n                    }\r\n                }\r\n                else if (!chkSet || chkSet(field, false, source, target)) {\r\n                    if (hasOwnProperty(target, field)) {\r\n                        // Remove any previous instance property\r\n                        delete target[field];\r\n                    }\r\n                    if (!objDefineAccessors(target, field, function () {\r\n                        return source[field];\r\n                    }, function (theValue) {\r\n                        source[field] = theValue;\r\n                    })) {\r\n                        // Unable to create an accessor, so just assign the values as a fallback\r\n                        // -- this will (mostly) work for objects\r\n                        // -- but will fail for accessing primitives (if the source changes it) and all types of \"setters\" as the source won't be modified\r\n                        target[field] = value;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        // effectively apply/proxy full source to the target instance\r\n        for (var field in source) {\r\n            _loop_1(field);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Creates a proxy function on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param name - The function name that will be added on the target\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param theFunc - The function name on the source that will be proxied on the target\r\n * @param overwriteTarget - If `false` this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctionAs(target, name, source, theFunc, overwriteTarget) {\r\n    if (target && name && source) {\r\n        if (overwriteTarget !== false || isUndefined(target[name])) {\r\n            target[name] = _createProxyFunction(source, theFunc);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Creates proxy functions on the target which internally will call the source version with all arguments passed to the target method.\r\n *\r\n * @param target - The target object to be assigned with the source properties and functions\r\n * @param source - The source object which will be assigned / called by setting / calling the targets proxies\r\n * @param functionsToProxy - An array of function names that will be proxied on the target\r\n * @param overwriteTarget - If false this will not replace any pre-existing name otherwise (the default) it will overwrite any existing name\r\n */\r\nexport function proxyFunctions(target, source, functionsToProxy, overwriteTarget) {\r\n    if (target && source && isObject(target) && isArray(functionsToProxy)) {\r\n        arrForEach(functionsToProxy, function (theFuncName) {\r\n            if (isString(theFuncName)) {\r\n                proxyFunctionAs(target, theFuncName, source, theFuncName, overwriteTarget);\r\n            }\r\n        });\r\n    }\r\n    return target;\r\n}\r\n/**\r\n * Simpler helper to create a dynamic class that implements the interface and populates the values with the defaults.\r\n * Only instance properties (hasOwnProperty) values are copied from the defaults to the new instance\r\n * @param defaults Simple helper\r\n */\r\nexport function createClassFromInterface(defaults) {\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            var _this_1 = this;\r\n            if (defaults) {\r\n                objForEachKey(defaults, function (field, value) {\r\n                    _this_1[field] = value;\r\n                });\r\n            }\r\n        }\r\n        return class_1;\r\n    }());\r\n}\r\n/**\r\n * A helper function to assist with JIT performance for objects that have properties added / removed dynamically\r\n * this is primarily for chromium based browsers and has limited effects on Firefox and none of IE. Only call this\r\n * function after you have finished \"updating\" the object, calling this within loops reduces or defeats the benefits.\r\n * This helps when iterating using for..in, objKeys() and objForEach()\r\n * @param theObject - The object to be optimized if possible\r\n */\r\nexport function optimizeObject(theObject) {\r\n    // V8 Optimization to cause the JIT compiler to create a new optimized object for looking up the own properties\r\n    // primarily for object with <= 19 properties for >= 20 the effect is reduced or non-existent\r\n    if (theObject && ObjAssign) {\r\n        theObject = ObjClass(ObjAssign({}, theObject));\r\n    }\r\n    return theObject;\r\n}\r\nexport function objExtend(obj1, obj2, obj3, obj4, obj5, obj6) {\r\n    // Variables\r\n    var theArgs = arguments;\r\n    var extended = theArgs[0] || {};\r\n    var argLen = theArgs[_DYN_LENGTH /* @min:%2elength */];\r\n    var deep = false;\r\n    var idx = 1;\r\n    // Check for \"Deep\" flag\r\n    if (argLen > 0 && isBoolean(extended)) {\r\n        deep = extended;\r\n        extended = theArgs[idx] || {};\r\n        idx++;\r\n    }\r\n    // Handle case when target is a string or something (possible in deep copy)\r\n    if (!isObject(extended)) {\r\n        extended = {};\r\n    }\r\n    // Loop through each remaining object and conduct a merge\r\n    for (; idx < argLen; idx++) {\r\n        var arg = theArgs[idx];\r\n        var isArgArray = isArray(arg);\r\n        var isArgObj = isObject(arg);\r\n        for (var prop in arg) {\r\n            var propOk = (isArgArray && (prop in arg)) || (isArgObj && (ObjHasOwnProperty[_DYN_CALL /* @min:%2ecall */](arg, prop)));\r\n            if (!propOk) {\r\n                continue;\r\n            }\r\n            var newValue = arg[prop];\r\n            var isNewArray = void 0;\r\n            // If deep merge and property is an object, merge properties\r\n            if (deep && newValue && ((isNewArray = isArray(newValue)) || isPlainObject(newValue))) {\r\n                // Grab the current value of the extended object\r\n                var clone = extended[prop];\r\n                if (isNewArray) {\r\n                    if (!isArray(clone)) {\r\n                        // We can't \"merge\" an array with a non-array so overwrite the original\r\n                        clone = [];\r\n                    }\r\n                }\r\n                else if (!isPlainObject(clone)) {\r\n                    // We can't \"merge\" an object with a non-object\r\n                    clone = {};\r\n                }\r\n                // Never move the original objects always clone them\r\n                newValue = objExtend(deep, clone, newValue);\r\n            }\r\n            // Assign the new (or previous) value (unless undefined)\r\n            if (newValue !== undefined) {\r\n                extended[prop] = newValue;\r\n            }\r\n        }\r\n    }\r\n    return extended;\r\n}\r\n//# sourceMappingURL=HelperFuncs.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_CHANNELS = \"channels\";\r\nexport var STR_CORE = \"core\";\r\nexport var STR_CREATE_PERF_MGR = \"createPerfMgr\";\r\nexport var STR_DISABLED = \"disabled\";\r\nexport var STR_EXTENSION_CONFIG = \"extensionConfig\";\r\nexport var STR_EXTENSIONS = \"extensions\";\r\nexport var STR_PROCESS_TELEMETRY = \"processTelemetry\";\r\nexport var STR_PRIORITY = \"priority\";\r\nexport var STR_EVENTS_SENT = \"eventsSent\";\r\nexport var STR_EVENTS_DISCARDED = \"eventsDiscarded\";\r\nexport var STR_EVENTS_SEND_REQUEST = \"eventsSendRequest\";\r\nexport var STR_PERF_EVENT = \"perfEvent\";\r\nexport var STR_ERROR_TO_CONSOLE = \"errorToConsole\";\r\nexport var STR_WARN_TO_CONSOLE = \"warnToConsole\";\r\nexport var STR_GET_PERF_MGR = \"getPerfMgr\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { _DYN_COMPLETE, _DYN_GET_CTX, _DYN_IS_ASYNC, _DYN_IS_CHILD_EVT, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_CTX, _DYN_TIME } from \"../__DynamicConstants\";\r\nimport { dateNow, isArray, isFunction, objDefineAccessors } from \"./HelperFuncs\";\r\nimport { STR_GET_PERF_MGR, STR_PERF_EVENT } from \"./InternalConstants\";\r\nvar strExecutionContextKey = \"ctx\";\r\nvar strParentContextKey = \"ParentContextKey\";\r\nvar strChildrenContextKey = \"ChildrenContextKey\";\r\nvar _defaultPerfManager = null;\r\nvar PerfEvent = /** @class */ (function () {\r\n    function PerfEvent(name, payloadDetails, isAsync) {\r\n        var _self = this;\r\n        var accessorDefined = false;\r\n        _self.start = dateNow();\r\n        _self[_DYN_NAME /* @min:%2ename */] = name;\r\n        _self[_DYN_IS_ASYNC /* @min:%2eisAsync */] = isAsync;\r\n        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return false; };\r\n        if (isFunction(payloadDetails)) {\r\n            // Create an accessor to minimize the potential performance impact of executing the payloadDetails callback\r\n            var theDetails_1;\r\n            accessorDefined = objDefineAccessors(_self, \"payload\", function () {\r\n                // Delay the execution of the payloadDetails until needed\r\n                if (!theDetails_1 && isFunction(payloadDetails)) {\r\n                    theDetails_1 = payloadDetails();\r\n                    // clear it out now so the referenced objects can be garbage collected\r\n                    payloadDetails = null;\r\n                }\r\n                return theDetails_1;\r\n            });\r\n        }\r\n        _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n            if (key) {\r\n                // The parent and child links are located directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey] || key === PerfEvent[strChildrenContextKey]) {\r\n                    return _self[key];\r\n                }\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            }\r\n            return null;\r\n        };\r\n        _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n            if (key) {\r\n                // Put the parent and child links directly on the object (for better viewing in the DebugPlugin)\r\n                if (key === PerfEvent[strParentContextKey]) {\r\n                    // Simple assumption, if we are setting a parent then we must be a child\r\n                    if (!_self[key]) {\r\n                        _self[_DYN_IS_CHILD_EVT /* @min:%2eisChildEvt */] = function () { return true; };\r\n                    }\r\n                    _self[key] = value;\r\n                }\r\n                else if (key === PerfEvent[strChildrenContextKey]) {\r\n                    _self[key] = value;\r\n                }\r\n                else {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            }\r\n        };\r\n        _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () {\r\n            var childTime = 0;\r\n            var childEvts = _self[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n            if (isArray(childEvts)) {\r\n                for (var lp = 0; lp < childEvts[_DYN_LENGTH /* @min:%2elength */]; lp++) {\r\n                    var childEvt = childEvts[lp];\r\n                    if (childEvt) {\r\n                        childTime += childEvt[_DYN_TIME /* @min:%2etime */];\r\n                    }\r\n                }\r\n            }\r\n            _self[_DYN_TIME /* @min:%2etime */] = dateNow() - _self.start;\r\n            _self.exTime = _self[_DYN_TIME /* @min:%2etime */] - childTime;\r\n            _self[_DYN_COMPLETE /* @min:%2ecomplete */] = function () { };\r\n            if (!accessorDefined && isFunction(payloadDetails)) {\r\n                // If we couldn't define the property set during complete -- to minimize the perf impact until after the time\r\n                _self.payload = payloadDetails();\r\n            }\r\n        };\r\n    }\r\n    PerfEvent.ParentContextKey = \"parent\";\r\n    PerfEvent.ChildrenContextKey = \"childEvts\";\r\n    return PerfEvent;\r\n}());\r\nexport { PerfEvent };\r\nvar PerfManager = /** @class */ (function () {\r\n    function PerfManager(manager) {\r\n        /**\r\n         * General bucket used for execution context set and retrieved via setCtx() and getCtx.\r\n         * Defined as private so it can be visualized via the DebugPlugin\r\n         */\r\n        this.ctx = {};\r\n        dynamicProto(PerfManager, this, function (_self) {\r\n            _self.create = function (src, payloadDetails, isAsync) {\r\n                // TODO (@MSNev): at some point we will want to add additional configuration to \"select\" which events to instrument\r\n                // for now this is just a simple do everything.\r\n                return new PerfEvent(src, payloadDetails, isAsync);\r\n            };\r\n            _self.fire = function (perfEvent) {\r\n                if (perfEvent) {\r\n                    perfEvent[_DYN_COMPLETE /* @min:%2ecomplete */]();\r\n                    if (manager && isFunction(manager[STR_PERF_EVENT /* @min:%2eperfEvent */])) {\r\n                        manager[STR_PERF_EVENT /* @min:%2eperfEvent */](perfEvent);\r\n                    }\r\n                }\r\n            };\r\n            _self[_DYN_SET_CTX /* @min:%2esetCtx */] = function (key, value) {\r\n                if (key) {\r\n                    var ctx = _self[strExecutionContextKey] = _self[strExecutionContextKey] || {};\r\n                    ctx[key] = value;\r\n                }\r\n            };\r\n            _self[_DYN_GET_CTX /* @min:%2egetCtx */] = function (key) {\r\n                return (_self[strExecutionContextKey] || {})[key];\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for PerfManager.prototype.create.\r\n// Removed Stub for PerfManager.prototype.fire.\r\n// Removed Stub for PerfManager.prototype.setCtx.\r\n// Removed Stub for PerfManager.prototype.getCtx.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    PerfManager.__ieDyn=1;\n\n    return PerfManager;\r\n}());\r\nexport { PerfManager };\r\nvar doPerfActiveKey = \"CoreUtils.doPerf\";\r\n/**\r\n * Helper function to wrap a function with a perf event\r\n * @param mgrSource - The Performance Manager or a Performance provider source (may be null)\r\n * @param getSource - The callback to create the source name for the event (if perf monitoring is enabled)\r\n * @param func - The function to call and measure\r\n * @param details - A function to return the payload details\r\n * @param isAsync - Is the event / function being call asynchronously or synchronously\r\n */\r\nexport function doPerf(mgrSource, getSource, func, details, isAsync) {\r\n    if (mgrSource) {\r\n        var perfMgr = mgrSource;\r\n        if (perfMgr[STR_GET_PERF_MGR]) {\r\n            // Looks like a perf manager provider object\r\n            perfMgr = perfMgr[STR_GET_PERF_MGR]();\r\n        }\r\n        if (perfMgr) {\r\n            var perfEvt = void 0;\r\n            var currentActive = perfMgr[_DYN_GET_CTX /* @min:%2egetCtx */](doPerfActiveKey);\r\n            try {\r\n                perfEvt = perfMgr.create(getSource(), details, isAsync);\r\n                if (perfEvt) {\r\n                    if (currentActive && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                        perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strParentContextKey], currentActive);\r\n                        if (currentActive[_DYN_GET_CTX /* @min:%2egetCtx */] && currentActive[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                            var children = currentActive[_DYN_GET_CTX /* @min:%2egetCtx */](PerfEvent[strChildrenContextKey]);\r\n                            if (!children) {\r\n                                children = [];\r\n                                currentActive[_DYN_SET_CTX /* @min:%2esetCtx */](PerfEvent[strChildrenContextKey], children);\r\n                            }\r\n                            children[_DYN_PUSH /* @min:%2epush */](perfEvt);\r\n                        }\r\n                    }\r\n                    // Set this event as the active event now\r\n                    perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, perfEvt);\r\n                    return func(perfEvt);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (perfEvt && perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */]) {\r\n                    perfEvt[_DYN_SET_CTX /* @min:%2esetCtx */](\"exception\", ex);\r\n                }\r\n            }\r\n            finally {\r\n                // fire the perf event\r\n                if (perfEvt) {\r\n                    perfMgr.fire(perfEvt);\r\n                }\r\n                // Reset the active event to the previous value\r\n                perfMgr[_DYN_SET_CTX /* @min:%2esetCtx */](doPerfActiveKey, currentActive);\r\n            }\r\n        }\r\n    }\r\n    return func();\r\n}\r\n/**\r\n * Set the global performance manager to use when there is no core instance or it has not been initialized yet.\r\n * @param perfManager - The IPerfManager instance to use when no performance manager is supplied.\r\n */\r\nexport function setGblPerfMgr(perfManager) {\r\n    _defaultPerfManager = perfManager;\r\n}\r\n/**\r\n * Get the current global performance manager that will be used with no performance manager is supplied.\r\n * @returns - The current default manager\r\n */\r\nexport function getGblPerfMgr() {\r\n    return _defaultPerfManager;\r\n}\r\n//# sourceMappingURL=PerfManager.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { _DYN_CALL, _DYN_CONFIG, _DYN_CREATE_NEW, _DYN_DIAG_LOG, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_IDENTIFIER, _DYN_IS_ASYNC, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_LOGGER, _DYN_PROCESS_NEXT, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_TEARDOWN, _DYN_UPDATE } from \"../__DynamicConstants\";\r\nimport { _throwInternal, safeGetLogger } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach, isArray, isFunction, isNullOrUndefined, isObject, isUndefined, objExtend, objForEachKey, objFreeze, objKeys, proxyFunctions } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_DISABLED, STR_EMPTY, STR_EXTENSION_CONFIG, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { doPerf } from \"./PerfManager\";\r\nimport { _getPluginState } from \"./TelemetryHelpers\";\r\nvar strTelemetryPluginChain = \"TelemetryPluginChain\";\r\nvar strHasRunFlags = \"_hasRun\";\r\nvar strGetTelCtx = \"_getTelCtx\";\r\nvar _chainId = 0;\r\nfunction _getNextProxyStart(proxy, core, startAt) {\r\n    while (proxy) {\r\n        if (proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]() === startAt) {\r\n            return proxy;\r\n        }\r\n        proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    }\r\n    // This wasn't found in the existing chain so create an isolated one with just this plugin\r\n    return createTelemetryProxyChain([startAt], core[_DYN_CONFIG /* @min:%2econfig */] || {}, core);\r\n}\r\n/**\r\n * @ignore\r\n * @param telemetryChain\r\n * @param config\r\n * @param core\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n * @returns\r\n */\r\nfunction _createInternalContext(telemetryChain, config, core, startAt) {\r\n    // We have a special case where we want to start execution from this specific plugin\r\n    // or we simply reuse the existing telemetry plugin chain (normal execution case)\r\n    var _nextProxy = null; // By Default set as no next plugin\r\n    var _onComplete = [];\r\n    if (startAt !== null) {\r\n        // There is no next element (null) vs not defined (undefined) so use the full chain\r\n        _nextProxy = startAt ? _getNextProxyStart(telemetryChain, core, startAt) : telemetryChain;\r\n    }\r\n    var context = {\r\n        _next: _moveNext,\r\n        ctx: {\r\n            core: function () {\r\n                return core;\r\n            },\r\n            diagLog: function () {\r\n                return safeGetLogger(core, config);\r\n            },\r\n            getCfg: function () {\r\n                return config;\r\n            },\r\n            getExtCfg: _getExtCfg,\r\n            getConfig: _getConfig,\r\n            hasNext: function () {\r\n                return !!_nextProxy;\r\n            },\r\n            getNext: function () {\r\n                return _nextProxy;\r\n            },\r\n            setNext: function (nextPlugin) {\r\n                _nextProxy = nextPlugin;\r\n            },\r\n            iterate: _iterateChain,\r\n            onComplete: _addOnComplete\r\n        }\r\n    };\r\n    function _addOnComplete(onComplete, that) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (onComplete) {\r\n            _onComplete[_DYN_PUSH /* @min:%2epush */]({\r\n                func: onComplete,\r\n                self: !isUndefined(that) ? that : context.ctx,\r\n                args: args\r\n            });\r\n        }\r\n    }\r\n    function _moveNext() {\r\n        var nextProxy = _nextProxy;\r\n        // Automatically move to the next plugin\r\n        _nextProxy = nextProxy ? nextProxy[_DYN_GET_NEXT /* @min:%2egetNext */]() : null;\r\n        if (!nextProxy) {\r\n            var onComplete = _onComplete;\r\n            if (onComplete && onComplete[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n                arrForEach(onComplete, function (completeDetails) {\r\n                    try {\r\n                        completeDetails.func[_DYN_CALL /* @min:%2ecall */](completeDetails.self, completeDetails.args);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(core[_DYN_LOGGER /* @min:%2elogger */], 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected Exception during onComplete - \" + dumpObj(e));\r\n                    }\r\n                });\r\n                _onComplete = [];\r\n            }\r\n        }\r\n        return nextProxy;\r\n    }\r\n    function _getExtCfg(identifier, defaultValue, mergeDefault) {\r\n        if (defaultValue === void 0) { defaultValue = {}; }\r\n        if (mergeDefault === void 0) { mergeDefault = 0 /* GetExtCfgMergeType.None */; }\r\n        var theConfig;\r\n        if (config) {\r\n            var extConfig = config[STR_EXTENSION_CONFIG /* @min:%2eextensionConfig */];\r\n            if (extConfig && identifier) {\r\n                theConfig = extConfig[identifier];\r\n            }\r\n        }\r\n        if (!theConfig) {\r\n            // Just use the defaults\r\n            theConfig = defaultValue;\r\n        }\r\n        else if (isObject(defaultValue)) {\r\n            if (mergeDefault !== 0 /* GetExtCfgMergeType.None */) {\r\n                // Merge the defaults and configured values\r\n                var newConfig_1 = objExtend(true, defaultValue, theConfig);\r\n                if (config && mergeDefault === 2 /* GetExtCfgMergeType.MergeDefaultFromRootOrDefault */) {\r\n                    // Enumerate over the defaultValues and if not already populated attempt to\r\n                    // find a value from the root config\r\n                    objForEachKey(defaultValue, function (field) {\r\n                        // for each unspecified field, set the default value\r\n                        if (isNullOrUndefined(newConfig_1[field])) {\r\n                            var cfgValue = config[field];\r\n                            if (!isNullOrUndefined(cfgValue)) {\r\n                                newConfig_1[field] = cfgValue;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                theConfig = newConfig_1;\r\n            }\r\n        }\r\n        return theConfig;\r\n    }\r\n    function _getConfig(identifier, field, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = false; }\r\n        var theValue;\r\n        var extConfig = _getExtCfg(identifier, null);\r\n        if (extConfig && !isNullOrUndefined(extConfig[field])) {\r\n            theValue = extConfig[field];\r\n        }\r\n        else if (config && !isNullOrUndefined(config[field])) {\r\n            theValue = config[field];\r\n        }\r\n        return !isNullOrUndefined(theValue) ? theValue : defaultValue;\r\n    }\r\n    function _iterateChain(cb) {\r\n        // Keep processing until we reach the end of the chain\r\n        var nextPlugin;\r\n        while (!!(nextPlugin = context._next())) {\r\n            var plugin = nextPlugin[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n            if (plugin) {\r\n                // callback with the current on\r\n                cb(plugin);\r\n            }\r\n        }\r\n    }\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryContext(telemetryChain, config, core, startAt) {\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(env) {\r\n        var nextPlugin = internalContext._next();\r\n        // Run the next plugin which will call \"processNext()\"\r\n        nextPlugin && nextPlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, context);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), config, core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for handling the unloading of the chain\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUnloadContext(telemetryChain, core, startAt) {\r\n    var config = core[_DYN_CONFIG /* @min:%2econfig */] || {};\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(unloadState) {\r\n        var nextPlugin = internalContext._next();\r\n        nextPlugin && nextPlugin.unload(context, unloadState);\r\n        return !nextPlugin;\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryUnloadContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates a new Telemetry Item context with the current config, core and plugin execution chain for updating the configuration\r\n * @param plugins - The plugin instances that will be executed\r\n * @param config - The current config\r\n * @param core - The current core instance\r\n * @param startAt - Identifies the next plugin to execute, if null there is no \"next\" plugin and if undefined it should assume the start of the chain\r\n */\r\nexport function createProcessTelemetryUpdateContext(telemetryChain, core, startAt) {\r\n    var config = core[_DYN_CONFIG /* @min:%2econfig */] || {};\r\n    var internalContext = _createInternalContext(telemetryChain, config, core, startAt);\r\n    var context = internalContext.ctx;\r\n    function _processNext(updateState) {\r\n        return context.iterate(function (plugin) {\r\n            if (isFunction(plugin[_DYN_UPDATE /* @min:%2eupdate */])) {\r\n                plugin[_DYN_UPDATE /* @min:%2eupdate */](context, updateState);\r\n            }\r\n        });\r\n    }\r\n    function _createNew(plugins, startAt) {\r\n        if (plugins === void 0) { plugins = null; }\r\n        if (isArray(plugins)) {\r\n            plugins = createTelemetryProxyChain(plugins, config, core, startAt);\r\n        }\r\n        return createProcessTelemetryUpdateContext(plugins || context[_DYN_GET_NEXT /* @min:%2egetNext */](), core, startAt);\r\n    }\r\n    context[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */] = _processNext;\r\n    context[_DYN_CREATE_NEW /* @min:%2ecreateNew */] = _createNew;\r\n    return context;\r\n}\r\n/**\r\n * Creates an execution chain from the array of plugins\r\n * @param plugins - The array of plugins that will be executed in this order\r\n * @param defItemCtx - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n */\r\nexport function createTelemetryProxyChain(plugins, config, core, startAt) {\r\n    var firstProxy = null;\r\n    var add = startAt ? false : true;\r\n    if (isArray(plugins) && plugins[_DYN_LENGTH /* @min:%2elength */] > 0) {\r\n        // Create the proxies and wire up the next plugin chain\r\n        var lastProxy_1 = null;\r\n        arrForEach(plugins, function (thePlugin) {\r\n            if (!add && startAt === thePlugin) {\r\n                add = true;\r\n            }\r\n            if (add && thePlugin && isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Only add plugins that are processors\r\n                var newProxy = createTelemetryPluginProxy(thePlugin, config, core);\r\n                if (!firstProxy) {\r\n                    firstProxy = newProxy;\r\n                }\r\n                if (lastProxy_1) {\r\n                    // Set this new proxy as the next for the previous one\r\n                    lastProxy_1._setNext(newProxy);\r\n                }\r\n                lastProxy_1 = newProxy;\r\n            }\r\n        });\r\n    }\r\n    if (startAt && !firstProxy) {\r\n        // Special case where the \"startAt\" was not in the original list of plugins\r\n        return createTelemetryProxyChain([startAt], config, core);\r\n    }\r\n    return firstProxy;\r\n}\r\n/**\r\n * Create the processing telemetry proxy instance, the proxy is used to abstract the current plugin to allow monitoring and\r\n * execution plugins while passing around the dynamic execution state (IProcessTelemetryContext), the proxy instance no longer\r\n * contains any execution state and can be reused between requests (this was not the case for 2.7.2 and earlier with the\r\n * TelemetryPluginChain class).\r\n * @param plugin - The plugin instance to proxy\r\n * @param config - The default execution context to use when no telemetry context is passed to processTelemetry(), this\r\n * should be for legacy plugins only. Currently, only used for passing the current core instance and to provide better error\r\n * reporting (hasRun) when errors occur.\r\n * @returns\r\n */\r\nexport function createTelemetryPluginProxy(plugin, config, core) {\r\n    var nextProxy = null;\r\n    var hasProcessTelemetry = isFunction(plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */]);\r\n    var hasSetNext = isFunction(plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]);\r\n    var chainId;\r\n    if (plugin) {\r\n        chainId = plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] + \"-\" + plugin[STR_PRIORITY /* @min:%2epriority */] + \"-\" + _chainId++;\r\n    }\r\n    else {\r\n        chainId = \"Unknown-0-\" + _chainId++;\r\n    }\r\n    var proxyChain = {\r\n        getPlugin: function () {\r\n            return plugin;\r\n        },\r\n        getNext: function () {\r\n            return nextProxy;\r\n        },\r\n        processTelemetry: _processTelemetry,\r\n        unload: _unloadPlugin,\r\n        update: _updatePlugin,\r\n        _id: chainId,\r\n        _setNext: function (nextPlugin) {\r\n            nextProxy = nextPlugin;\r\n        }\r\n    };\r\n    function _getTelCtx() {\r\n        var itemCtx;\r\n        // Looks like a plugin didn't pass the (optional) context, so create a new one\r\n        if (plugin && isFunction(plugin[strGetTelCtx])) {\r\n            // This plugin extends from the BaseTelemetryPlugin so lets use it\r\n            itemCtx = plugin[strGetTelCtx]();\r\n        }\r\n        if (!itemCtx) {\r\n            // Create a temporary one\r\n            itemCtx = createProcessTelemetryContext(proxyChain, config, core);\r\n        }\r\n        return itemCtx;\r\n    }\r\n    function _processChain(itemCtx, processPluginFn, name, details, isAsync) {\r\n        var hasRun = false;\r\n        var identifier = plugin ? plugin[_DYN_IDENTIFIER /* @min:%2eidentifier */] : strTelemetryPluginChain;\r\n        var hasRunContext = itemCtx[strHasRunFlags];\r\n        if (!hasRunContext) {\r\n            // Assign and populate\r\n            hasRunContext = itemCtx[strHasRunFlags] = {};\r\n        }\r\n        // Ensure that we keep the context in sync\r\n        itemCtx.setNext(nextProxy);\r\n        if (plugin) {\r\n            doPerf(itemCtx[STR_CORE /* @min:%2ecore */](), function () { return identifier + \":\" + name; }, function () {\r\n                // Mark this component as having run\r\n                hasRunContext[chainId] = true;\r\n                try {\r\n                    // Set a flag on the next plugin so we know if it was attempted to be executed\r\n                    var nextId = nextProxy ? nextProxy._id : STR_EMPTY;\r\n                    if (nextId) {\r\n                        hasRunContext[nextId] = false;\r\n                    }\r\n                    hasRun = processPluginFn(itemCtx);\r\n                }\r\n                catch (error) {\r\n                    var hasNextRun = nextProxy ? hasRunContext[nextProxy._id] : true;\r\n                    if (hasNextRun) {\r\n                        // The next plugin after us has already run so set this one as complete\r\n                        hasRun = true;\r\n                    }\r\n                    if (!nextProxy || !hasNextRun) {\r\n                        // Either we have no next plugin or the current one did not attempt to call the next plugin\r\n                        // Which means the current one is the root of the failure so log/report this failure\r\n                        _throwInternal(itemCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 1 /* eLoggingSeverity.CRITICAL */, 73 /* _eInternalMessageId.PluginException */, \"Plugin [\" + identifier + \"] failed during \" + name + \" - \" + dumpObj(error) + \", run flags: \" + dumpObj(hasRunContext));\r\n                    }\r\n                }\r\n            }, details, isAsync);\r\n        }\r\n        return hasRun;\r\n    }\r\n    function _processTelemetry(env, itemCtx) {\r\n        itemCtx = itemCtx || _getTelCtx();\r\n        function _callProcessTelemetry(itemCtx) {\r\n            if (!plugin || !hasProcessTelemetry) {\r\n                return false;\r\n            }\r\n            var pluginState = _getPluginState(plugin);\r\n            if (pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] || pluginState[STR_DISABLED]) {\r\n                return false;\r\n            }\r\n            // Ensure that we keep the context in sync (for processNext()), just in case a plugin\r\n            // doesn't calls processTelemetry() instead of itemContext.processNext() or some\r\n            // other form of error occurred\r\n            if (hasSetNext) {\r\n                // Backward compatibility setting the next plugin on the instance\r\n                plugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](nextProxy);\r\n            }\r\n            plugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */](env, itemCtx);\r\n            // Process Telemetry is expected to call itemCtx.processNext() or nextPlugin.processTelemetry()\r\n            return true;\r\n        }\r\n        if (!_processChain(itemCtx, _callProcessTelemetry, \"processTelemetry\", function () { return ({ item: env }); }, !(env.sync))) {\r\n            // The underlying plugin is either not defined, not enabled or does not have a processTelemetry implementation\r\n            // so we still want the next plugin to be executed.\r\n            itemCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](env);\r\n        }\r\n    }\r\n    function _unloadPlugin(unloadCtx, unloadState) {\r\n        function _callTeardown() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only teardown the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === unloadCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    // Handle plugins that don't extend from the BaseTelemetryPlugin\r\n                    pluginState[STR_CORE /* @min:%2ecore */] = null;\r\n                    pluginState[_DYN_TEARDOWN /* @min:%2eteardown */] = true;\r\n                    pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = false;\r\n                    if (plugin[_DYN_TEARDOWN /* @min:%2eteardown */] && plugin[_DYN_TEARDOWN /* @min:%2eteardown */](unloadCtx, unloadState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(unloadCtx, _callTeardown, \"unload\", function () { }, unloadState[_DYN_IS_ASYNC /* @min:%2eisAsync */])) {\r\n            // Only called if we hasRun was not true\r\n            unloadCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](unloadState);\r\n        }\r\n    }\r\n    function _updatePlugin(updateCtx, updateState) {\r\n        function _callUpdate() {\r\n            // Setting default of hasRun as false so the proxyProcessFn() is called as teardown() doesn't have to exist or call unloadNext().\r\n            var hasRun = false;\r\n            if (plugin) {\r\n                var pluginState = _getPluginState(plugin);\r\n                var pluginCore = plugin[STR_CORE] || pluginState[STR_CORE /* @min:%2ecore */];\r\n                // Only update the plugin if it was initialized by the current core (i.e. It's not a shared plugin)\r\n                if (plugin && (!pluginCore || pluginCore === updateCtx.core()) && !pluginState[_DYN_TEARDOWN /* @min:%2eteardown */]) {\r\n                    if (plugin[_DYN_UPDATE /* @min:%2eupdate */] && plugin[_DYN_UPDATE /* @min:%2eupdate */](updateCtx, updateState) === true) {\r\n                        // plugin told us that it was going to (or has) call unloadCtx.processNext()\r\n                        hasRun = true;\r\n                    }\r\n                }\r\n            }\r\n            return hasRun;\r\n        }\r\n        if (!_processChain(updateCtx, _callUpdate, \"update\", function () { }, false)) {\r\n            // Only called if we hasRun was not true\r\n            updateCtx[_DYN_PROCESS_NEXT /* @min:%2eprocessNext */](updateState);\r\n        }\r\n    }\r\n    return objFreeze(proxyChain);\r\n}\r\n/**\r\n * This class will be removed!\r\n * @deprecated use createProcessTelemetryContext() instead\r\n */\r\nvar ProcessTelemetryContext = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Telemetry Item context with the current config, core and plugin execution chain\r\n     * @param plugins - The plugin instances that will be executed\r\n     * @param config - The current config\r\n     * @param core - The current core instance\r\n     */\r\n    function ProcessTelemetryContext(pluginChain, config, core, startAt) {\r\n        var _self = this;\r\n        var context = createProcessTelemetryContext(pluginChain, config, core, startAt);\r\n        // Proxy all functions of the context to this object\r\n        proxyFunctions(_self, context, objKeys(context));\r\n    }\r\n    return ProcessTelemetryContext;\r\n}());\r\nexport { ProcessTelemetryContext };\r\n//# sourceMappingURL=ProcessTelemetryContext.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_LENGTH } from \"../__DynamicConstants\";\r\nimport { getCrypto, getMsCrypto, isIE } from \"./EnvUtils\";\r\nimport { dateNow } from \"./HelperFuncs\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\nvar UInt32Mask = 0x100000000;\r\nvar MaxUInt32 = 0xffffffff;\r\n// MWC based Random generator (for IE)\r\nvar _mwcSeeded = false;\r\nvar _mwcW = 123456789;\r\nvar _mwcZ = 987654321;\r\n// Takes any integer\r\nfunction _mwcSeed(seedValue) {\r\n    if (seedValue < 0) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        seedValue >>>= 0;\r\n    }\r\n    _mwcW = (123456789 + seedValue) & MaxUInt32;\r\n    _mwcZ = (987654321 - seedValue) & MaxUInt32;\r\n    _mwcSeeded = true;\r\n}\r\nfunction _autoSeedMwc() {\r\n    // Simple initialization using default Math.random() - So we inherit any entropy from the browser\r\n    // and bitwise XOR with the current milliseconds\r\n    try {\r\n        var now = dateNow() & 0x7fffffff;\r\n        _mwcSeed(((Math.random() * UInt32Mask) ^ now) + now);\r\n    }\r\n    catch (e) {\r\n        // Don't crash if something goes wrong\r\n    }\r\n}\r\n/**\r\n * Generate a random value between 0 and maxValue, max value should be limited to a 32-bit maximum.\r\n * So maxValue(16) will produce a number from 0..16 (range of 17)\r\n * @param maxValue\r\n */\r\nexport function randomValue(maxValue) {\r\n    if (maxValue > 0) {\r\n        return Math.floor((random32() / MaxUInt32) * (maxValue + 1)) >>> 0;\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate a random 32-bit number (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), defaults un-unsigned.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function random32(signed) {\r\n    var value = 0;\r\n    var c = getCrypto() || getMsCrypto();\r\n    if (c && c.getRandomValues) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = c.getRandomValues(new Uint32Array(1))[0] & MaxUInt32;\r\n    }\r\n    if (value === 0 && isIE()) {\r\n        // For IE 6, 7, 8 (especially on XP) Math.random is not very random\r\n        if (!_mwcSeeded) {\r\n            // Set the seed for the Mwc algorithm\r\n            _autoSeedMwc();\r\n        }\r\n        // Don't use Math.random for IE\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = mwcRandom32() & MaxUInt32;\r\n    }\r\n    if (value === 0) {\r\n        // Make sure the number is converted into the specified range (-0x80000000..0x7FFFFFFF)\r\n        value = Math.floor((UInt32Mask * Math.random()) | 0);\r\n    }\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Seed the MWC random number generator with the specified seed or a random value\r\n * @param value - optional the number to used as the seed, if undefined, null or zero a random value will be chosen\r\n */\r\nexport function mwcRandomSeed(value) {\r\n    if (!value) {\r\n        _autoSeedMwc();\r\n    }\r\n    else {\r\n        _mwcSeed(value);\r\n    }\r\n}\r\n/**\r\n * Generate a random 32-bit number between (0x000000..0xFFFFFFFF) or (-0x80000000..0x7FFFFFFF), using MWC (Multiply with carry)\r\n * instead of Math.random() defaults to un-signed.\r\n * Used as a replacement random generator for IE to avoid issues with older IE instances.\r\n * @param signed - True to return a signed 32-bit number (-0x80000000..0x7FFFFFFF) otherwise an unsigned one (0x000000..0xFFFFFFFF)\r\n */\r\nexport function mwcRandom32(signed) {\r\n    _mwcZ = (36969 * (_mwcZ & 0xFFFF) + (_mwcZ >> 16)) & MaxUInt32;\r\n    _mwcW = (18000 * (_mwcW & 0xFFFF) + (_mwcW >> 16)) & MaxUInt32;\r\n    var value = (((_mwcZ << 16) + (_mwcW & 0xFFFF)) >>> 0) & MaxUInt32 | 0;\r\n    if (!signed) {\r\n        // Make sure we end up with a positive number and not -ve one.\r\n        value >>>= 0;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Generate random base64 id string.\r\n * The default length is 22 which is 132-bits so almost the same as a GUID but as base64 (the previous default was 5)\r\n * @param maxLength - Optional value to specify the length of the id to be generated, defaults to 22\r\n */\r\nexport function newId(maxLength) {\r\n    if (maxLength === void 0) { maxLength = 22; }\r\n    var base64chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    // Start with an initial random number, consuming the value in reverse byte order\r\n    var number = random32() >>> 0; // Make sure it's a +ve number\r\n    var chars = 0;\r\n    var result = STR_EMPTY;\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < maxLength) {\r\n        chars++;\r\n        result += base64chars.charAt(number & 0x3F);\r\n        number >>>= 6; // Zero fill with right shift\r\n        if (chars === 5) {\r\n            // 5 base64 characters === 30 bits so we don't have enough bits for another base64 char\r\n            // So add on another 30 bits and make sure it's +ve\r\n            number = (((random32() << 2) & 0xFFFFFFFF) | (number & 0x03)) >>> 0;\r\n            chars = 0; // We need to reset the number every 5 chars (30 bits)\r\n        }\r\n    }\r\n    return result;\r\n}\r\n//# sourceMappingURL=RandomHelper.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n\"use strict\";\r\nimport { _DYN_CALL, _DYN_GET_NEXT, _DYN_GET_PLUGIN, _DYN_INITIALIZE, _DYN_IS_INITIALIZED, _DYN_LENGTH, _DYN_NAME, _DYN_PUSH, _DYN_SET_NEXT_PLUGIN, _DYN_SPAN_ID, _DYN_TEARDOWN, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN__DO_TEARDOWN } from \"../__DynamicConstants\";\r\nimport { createElmNodeData } from \"./DataCacheHelper\";\r\nimport { arrForEach, isFunction } from \"./HelperFuncs\";\r\nimport { STR_CORE, STR_PRIORITY, STR_PROCESS_TELEMETRY } from \"./InternalConstants\";\r\nimport { isValidSpanId, isValidTraceId } from \"./W3cTraceParent\";\r\nvar pluginStateData = createElmNodeData(\"plugin\");\r\nexport function _getPluginState(plugin) {\r\n    return pluginStateData.get(plugin, \"state\", {}, true);\r\n}\r\n/**\r\n * Initialize the queue of plugins\r\n * @param plugins - The array of plugins to initialize and setting of the next plugin\r\n * @param config The current config for the instance\r\n * @param core THe current core instance\r\n * @param extensions The extensions\r\n */\r\nexport function initializePlugins(processContext, extensions) {\r\n    // Set the next plugin and identified the uninitialized plugins\r\n    var initPlugins = [];\r\n    var lastPlugin = null;\r\n    var proxy = processContext[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n    var pluginState;\r\n    while (proxy) {\r\n        var thePlugin = proxy[_DYN_GET_PLUGIN /* @min:%2egetPlugin */]();\r\n        if (thePlugin) {\r\n            if (lastPlugin &&\r\n                isFunction(lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */]) &&\r\n                isFunction(thePlugin[STR_PROCESS_TELEMETRY /* @min:%2eprocessTelemetry */])) {\r\n                // Set this plugin as the next for the previous one\r\n                lastPlugin[_DYN_SET_NEXT_PLUGIN /* @min:%2esetNextPlugin */](thePlugin);\r\n            }\r\n            var isInitialized = false;\r\n            if (isFunction(thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */])) {\r\n                isInitialized = thePlugin[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */]();\r\n            }\r\n            else {\r\n                pluginState = _getPluginState(thePlugin);\r\n                isInitialized = pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */];\r\n            }\r\n            if (!isInitialized) {\r\n                initPlugins[_DYN_PUSH /* @min:%2epush */](thePlugin);\r\n            }\r\n            lastPlugin = thePlugin;\r\n            proxy = proxy[_DYN_GET_NEXT /* @min:%2egetNext */]();\r\n        }\r\n    }\r\n    // Now initialize the plugins\r\n    arrForEach(initPlugins, function (thePlugin) {\r\n        var core = processContext[STR_CORE]();\r\n        thePlugin[_DYN_INITIALIZE /* @min:%2einitialize */](processContext.getCfg(), core, extensions, processContext[_DYN_GET_NEXT /* @min:%2egetNext */]());\r\n        pluginState = _getPluginState(thePlugin);\r\n        // Only add the core to the state if the plugin didn't set it (doesn't extent from BaseTelemetryPlugin)\r\n        if (!thePlugin[STR_CORE] && !pluginState[STR_CORE]) {\r\n            pluginState[STR_CORE] = core;\r\n        }\r\n        pluginState[_DYN_IS_INITIALIZED /* @min:%2eisInitialized */] = true;\r\n        delete pluginState[_DYN_TEARDOWN /* @min:%2eteardown */];\r\n    });\r\n}\r\nexport function sortPlugins(plugins) {\r\n    // Sort by priority\r\n    return plugins.sort(function (extA, extB) {\r\n        var result = 0;\r\n        if (extB) {\r\n            var bHasProcess = isFunction(extB[STR_PROCESS_TELEMETRY]);\r\n            if (isFunction(extA[STR_PROCESS_TELEMETRY])) {\r\n                result = bHasProcess ? extA[STR_PRIORITY] - extB[STR_PRIORITY] : 1;\r\n            }\r\n            else if (bHasProcess) {\r\n                result = -1;\r\n            }\r\n        }\r\n        else {\r\n            result = extA ? 1 : -1;\r\n        }\r\n        return result;\r\n    });\r\n    // sort complete\r\n}\r\n/**\r\n * Teardown / Unload helper to perform teardown/unloading operations for the provided components synchronously or asynchronously, this will call any\r\n * _doTeardown() or _doUnload() functions on the provided components to allow them to finish removal.\r\n * @param components - The components you want to unload\r\n * @param unloadCtx - This is the context that should be used during unloading.\r\n * @param unloadState - The details / state of the unload process, it holds details like whether it should be unloaded synchronously or asynchronously and the reason for the unload.\r\n * @param asyncCallback - An optional callback that the plugin must call if it returns true to inform the caller that it has completed any async unload/teardown operations.\r\n * @returns boolean - true if the plugin has or will call asyncCallback, this allows the plugin to perform any asynchronous operations.\r\n */\r\nexport function unloadComponents(components, unloadCtx, unloadState, asyncCallback) {\r\n    var idx = 0;\r\n    function _doUnload() {\r\n        while (idx < components[_DYN_LENGTH /* @min:%2elength */]) {\r\n            var component = components[idx++];\r\n            if (component) {\r\n                var func = component._doUnload || component[_DYN__DO_TEARDOWN /* @min:%2e_doTeardown */];\r\n                if (isFunction(func)) {\r\n                    if (func[_DYN_CALL /* @min:%2ecall */](component, unloadCtx, unloadState, _doUnload) === true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return _doUnload();\r\n}\r\n/**\r\n * Creates a IDistributedTraceContext which optionally also \"sets\" the value on a parent\r\n * @param parentCtx - An optional parent distributed trace instance\r\n * @returns A new IDistributedTraceContext instance that uses an internal temporary object\r\n */\r\nexport function createDistributedTraceContext(parentCtx) {\r\n    var trace = {};\r\n    return {\r\n        getName: function () {\r\n            return trace[_DYN_NAME /* @min:%2ename */];\r\n        },\r\n        setName: function (newValue) {\r\n            parentCtx && parentCtx.setName(newValue);\r\n            trace[_DYN_NAME /* @min:%2ename */] = newValue;\r\n        },\r\n        getTraceId: function () {\r\n            return trace[_DYN_TRACE_ID /* @min:%2etraceId */];\r\n        },\r\n        setTraceId: function (newValue) {\r\n            parentCtx && parentCtx.setTraceId(newValue);\r\n            if (isValidTraceId(newValue)) {\r\n                trace[_DYN_TRACE_ID /* @min:%2etraceId */] = newValue;\r\n            }\r\n        },\r\n        getSpanId: function () {\r\n            return trace[_DYN_SPAN_ID /* @min:%2espanId */];\r\n        },\r\n        setSpanId: function (newValue) {\r\n            parentCtx && parentCtx.setSpanId(newValue);\r\n            if (isValidSpanId(newValue)) {\r\n                trace[_DYN_SPAN_ID /* @min:%2espanId */] = newValue;\r\n            }\r\n        },\r\n        getTraceFlags: function () {\r\n            return trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */];\r\n        },\r\n        setTraceFlags: function (newTraceFlags) {\r\n            parentCtx && parentCtx.setTraceFlags(newTraceFlags);\r\n            trace[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] = newTraceFlags;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=TelemetryHelpers.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\nimport { _DYN_DIAG_LOG, _DYN_PUSH } from \"../__DynamicConstants\";\r\nimport { _throwInternal } from \"./DiagnosticLogger\";\r\nimport { dumpObj } from \"./EnvUtils\";\r\nimport { arrForEach } from \"./HelperFuncs\";\r\nexport function createUnloadHandlerContainer() {\r\n    var handlers = [];\r\n    function _addHandler(handler) {\r\n        if (handler) {\r\n            handlers[_DYN_PUSH /* @min:%2epush */](handler);\r\n        }\r\n    }\r\n    function _runHandlers(unloadCtx, unloadState) {\r\n        arrForEach(handlers, function (handler) {\r\n            try {\r\n                handler(unloadCtx, unloadState);\r\n            }\r\n            catch (e) {\r\n                _throwInternal(unloadCtx[_DYN_DIAG_LOG /* @min:%2ediagLog */](), 2 /* eLoggingSeverity.WARNING */, 73 /* _eInternalMessageId.PluginException */, \"Unexpected error calling unload handler - \" + dumpObj(e));\r\n            }\r\n        });\r\n        handlers = [];\r\n    }\r\n    return {\r\n        add: _addHandler,\r\n        run: _runHandlers\r\n    };\r\n}\r\n//# sourceMappingURL=UnloadHandlerContainer.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nimport { _DYN_LENGTH, _DYN_SPAN_ID, _DYN_SUBSTR, _DYN_TRACE_FLAGS, _DYN_TRACE_ID, _DYN_VERSION } from \"../__DynamicConstants\";\r\nimport { generateW3CId } from \"./CoreUtils\";\r\nimport { findMetaTag, findNamedServerTiming } from \"./EnvUtils\";\r\nimport { isArray, isString, strTrim } from \"./HelperFuncs\";\r\n// using {0,16} for leading and trailing whitespace just to constrain the possible runtime of a random string\r\nvar TRACE_PARENT_REGEX = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})(-[^\\s]*)?$/;\r\nvar DEFAULT_VERSION = \"00\";\r\nvar INVALID_VERSION = \"ff\";\r\nvar INVALID_TRACE_ID = \"00000000000000000000000000000000\";\r\nvar INVALID_SPAN_ID = \"0000000000000000\";\r\nvar SAMPLED_FLAG = 0x01;\r\nfunction _isValid(value, len, invalidValue) {\r\n    if (value && value[_DYN_LENGTH /* @min:%2elength */] === len && value !== invalidValue) {\r\n        return !!value.match(/^[\\da-f]*$/);\r\n    }\r\n    return false;\r\n}\r\nfunction _formatValue(value, len, defValue) {\r\n    if (_isValid(value, len)) {\r\n        return value;\r\n    }\r\n    return defValue;\r\n}\r\nfunction _formatFlags(value) {\r\n    if (isNaN(value) || value < 0 || value > 255) {\r\n        value = 0x01;\r\n    }\r\n    var result = value.toString(16);\r\n    while (result[_DYN_LENGTH /* @min:%2elength */] < 2) {\r\n        result = \"0\" + result;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new ITraceParent instance using the provided values.\r\n * @param traceId - The traceId to use, when invalid a new random W3C id will be generated.\r\n * @param spanId - The parent/span id to use, a new random value will be generated if it is invalid.\r\n * @param flags - The traceFlags to use, defaults to zero (0) if not supplied or invalid\r\n * @param version - The version to used, defaults to version \"01\" if not supplied or invalid.\r\n * @returns\r\n */\r\nexport function createTraceParent(traceId, spanId, flags, version) {\r\n    var _a;\r\n    return _a = {},\r\n        _a[_DYN_VERSION /* @min:version */] = _isValid(version, 2, INVALID_VERSION) ? version : DEFAULT_VERSION,\r\n        _a[_DYN_TRACE_ID /* @min:traceId */] = isValidTraceId(traceId) ? traceId : generateW3CId(),\r\n        _a.spanId = isValidSpanId(spanId) ? spanId : generateW3CId()[_DYN_SUBSTR /* @min:%2esubstr */](0, 16),\r\n        _a.traceFlags = flags >= 0 && flags <= 0xFF ? flags : 1,\r\n        _a;\r\n}\r\n/**\r\n * Attempt to parse the provided string as a W3C TraceParent header value (https://www.w3.org/TR/trace-context/#traceparent-header)\r\n *\r\n * @param value\r\n * @returns\r\n */\r\nexport function parseTraceParent(value) {\r\n    var _a;\r\n    if (!value) {\r\n        // Don't pass a null/undefined or empty string\r\n        return null;\r\n    }\r\n    if (isArray(value)) {\r\n        // The value may have been encoded on the page into an array so handle this automatically\r\n        value = value[0] || \"\";\r\n    }\r\n    if (!value || !isString(value) || value[_DYN_LENGTH /* @min:%2elength */] > 8192) {\r\n        // limit potential processing based on total length\r\n        return null;\r\n    }\r\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\r\n    var match = TRACE_PARENT_REGEX.exec(strTrim(value));\r\n    if (!match || // No match\r\n        match[1] === INVALID_VERSION || // version ff is forbidden\r\n        match[2] === INVALID_TRACE_ID || // All zeros is considered to be invalid\r\n        match[3] === INVALID_SPAN_ID) { // All zeros is considered to be invalid\r\n        return null;\r\n    }\r\n    return _a = {},\r\n        _a[_DYN_VERSION /* @min:version */] = match[1],\r\n        _a[_DYN_TRACE_ID /* @min:traceId */] = match[2],\r\n        _a[_DYN_SPAN_ID /* @min:spanId */] = match[3],\r\n        _a[_DYN_TRACE_FLAGS /* @min:traceFlags */] = parseInt(match[4], 16),\r\n        _a;\r\n}\r\n/**\r\n * Is the provided W3c Trace Id a valid string representation, it must be a 32-character string\r\n * of lowercase hexadecimal characters for example, 4bf92f3577b34da6a3ce929d0e0e4736.\r\n * If all characters as zero (00000000000000000000000000000000) it will be considered an invalid value.\r\n * @param value - The W3c trace Id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidTraceId(value) {\r\n    return _isValid(value, 32, INVALID_TRACE_ID);\r\n}\r\n/**\r\n * Is the provided W3c span id (aka. parent id) a valid string representation, it must be a 16-character\r\n * string of lowercase hexadecimal characters, for example, 00f067aa0ba902b7.\r\n * If all characters are zero (0000000000000000) this is considered an invalid value.\r\n * @param value - The W3c span id to be validated\r\n * @returns true if valid otherwise false\r\n */\r\nexport function isValidSpanId(value) {\r\n    return _isValid(value, 16, INVALID_SPAN_ID);\r\n}\r\n/**\r\n * Validates that the provided ITraceParent instance conforms to the currently supported specifications\r\n * @param value\r\n * @returns\r\n */\r\nexport function isValidTraceParent(value) {\r\n    if (!value ||\r\n        !_isValid(value[_DYN_VERSION /* @min:%2eversion */], 2, INVALID_VERSION) ||\r\n        !_isValid(value[_DYN_TRACE_ID /* @min:%2etraceId */], 32, INVALID_TRACE_ID) ||\r\n        !_isValid(value[_DYN_SPAN_ID /* @min:%2espanId */], 16, INVALID_SPAN_ID) ||\r\n        !_isValid(_formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]), 2)) {\r\n        // Each known field must contain a valid value\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Is the parsed traceParent indicating that the trace is currently sampled.\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function isSampledFlag(value) {\r\n    if (isValidTraceParent(value)) {\r\n        return (value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */] & SAMPLED_FLAG) === SAMPLED_FLAG;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Format the ITraceParent value as a string using the supported and know version formats.\r\n * So even if the passed traceParent is a later version the string value returned from this\r\n * function will convert it to only the known version formats.\r\n * This currently only supports version \"00\" and invalid \"ff\"\r\n * @param value - The parsed traceParent value\r\n * @returns\r\n */\r\nexport function formatTraceParent(value) {\r\n    if (value) {\r\n        // Special Note: This only supports formatting as version 00, future versions should encode any known supported version\r\n        // So parsing a future version will populate the correct version value but reformatting will reduce it to version 00.\r\n        var flags = _formatFlags(value[_DYN_TRACE_FLAGS /* @min:%2etraceFlags */]);\r\n        if (!_isValid(flags, 2)) {\r\n            flags = \"01\";\r\n        }\r\n        var version = value[_DYN_VERSION /* @min:%2eversion */] || DEFAULT_VERSION;\r\n        if (version !== \"00\" && version !== \"ff\") {\r\n            // Reduce version to \"00\"\r\n            version = DEFAULT_VERSION;\r\n        }\r\n        // Format as version 00\r\n        return \"\".concat(version, \"-\").concat(_formatValue(value.traceId, 32, INVALID_TRACE_ID), \"-\").concat(_formatValue(value.spanId, 16, INVALID_SPAN_ID), \"-\").concat(flags);\r\n    }\r\n    return \"\";\r\n}\r\n/**\r\n * Helper function to fetch the passed traceparent from the page, looking for it as a meta-tag or a Server-Timing header.\r\n * @returns\r\n */\r\nexport function findW3cTraceParent() {\r\n    var name = \"traceparent\";\r\n    var traceParent = parseTraceParent(findMetaTag(name));\r\n    if (!traceParent) {\r\n        traceParent = parseTraceParent(findNamedServerTiming(name));\r\n    }\r\n    return traceParent;\r\n}\r\n//# sourceMappingURL=W3cTraceParent.js.map","/*\n * Application Insights JavaScript SDK - Core, 2.8.15\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\n\r\n\r\n// @skip-file-minify\r\n// ##############################################################\r\n// AUTO GENERATED FILE: This file is Auto Generated during build.\r\n// ##############################################################\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nexport var _DYN_INITIALIZE = \"initialize\"; // Count: 8\r\nexport var _DYN_NAME = \"name\"; // Count: 11\r\nexport var _DYN_GET_NOTIFY_MGR = \"getNotifyMgr\"; // Count: 3\r\nexport var _DYN_IDENTIFIER = \"identifier\"; // Count: 8\r\nexport var _DYN_PUSH = \"push\"; // Count: 30\r\nexport var _DYN_IS_INITIALIZED = \"isInitialized\"; // Count: 10\r\nexport var _DYN_CONFIG = \"config\"; // Count: 7\r\nexport var _DYN_INSTRUMENTATION_KEY = \"instrumentationKey\"; // Count: 3\r\nexport var _DYN_LOGGER = \"logger\"; // Count: 10\r\nexport var _DYN_LENGTH = \"length\"; // Count: 44\r\nexport var _DYN_TIME = \"time\"; // Count: 5\r\nexport var _DYN_PROCESS_NEXT = \"processNext\"; // Count: 21\r\nexport var _DYN_GET_PROCESS_TEL_CONT0 = \"getProcessTelContext\"; // Count: 2\r\nexport var _DYN_ADD_NOTIFICATION_LIS1 = \"addNotificationListener\"; // Count: 5\r\nexport var _DYN_REMOVE_NOTIFICATION_2 = \"removeNotificationListener\"; // Count: 5\r\nexport var _DYN_STOP_POLLING_INTERNA3 = \"stopPollingInternalLogs\"; // Count: 2\r\nexport var _DYN_ON_COMPLETE = \"onComplete\"; // Count: 6\r\nexport var _DYN_GET_PLUGIN = \"getPlugin\"; // Count: 5\r\nexport var _DYN_FLUSH = \"flush\"; // Count: 5\r\nexport var _DYN__EXTENSIONS = \"_extensions\"; // Count: 4\r\nexport var _DYN_SPLICE = \"splice\"; // Count: 6\r\nexport var _DYN_TEARDOWN = \"teardown\"; // Count: 10\r\nexport var _DYN_MESSAGE_ID = \"messageId\"; // Count: 4\r\nexport var _DYN_MESSAGE = \"message\"; // Count: 7\r\nexport var _DYN_IS_ASYNC = \"isAsync\"; // Count: 7\r\nexport var _DYN__DO_TEARDOWN = \"_doTeardown\"; // Count: 4\r\nexport var _DYN_UPDATE = \"update\"; // Count: 7\r\nexport var _DYN_GET_NEXT = \"getNext\"; // Count: 12\r\nexport var _DYN_DIAG_LOG = \"diagLog\"; // Count: 8\r\nexport var _DYN_SET_NEXT_PLUGIN = \"setNextPlugin\"; // Count: 5\r\nexport var _DYN_CREATE_NEW = \"createNew\"; // Count: 6\r\nexport var _DYN_COOKIE_CFG = \"cookieCfg\"; // Count: 3\r\nexport var _DYN_INDEX_OF = \"indexOf\"; // Count: 6\r\nexport var _DYN_SUBSTRING = \"substring\"; // Count: 10\r\nexport var _DYN_USER_AGENT = \"userAgent\"; // Count: 5\r\nexport var _DYN_SPLIT = \"split\"; // Count: 5\r\nexport var _DYN_SET_ENABLED = \"setEnabled\"; // Count: 5\r\nexport var _DYN_SUBSTR = \"substr\"; // Count: 6\r\nexport var _DYN_NODE_TYPE = \"nodeType\"; // Count: 3\r\nexport var _DYN_APPLY = \"apply\"; // Count: 6\r\nexport var _DYN_REPLACE = \"replace\"; // Count: 10\r\nexport var _DYN_ENABLE_DEBUG_EXCEPTI4 = \"enableDebugExceptions\"; // Count: 2\r\nexport var _DYN_LOG_INTERNAL_MESSAGE = \"logInternalMessage\"; // Count: 2\r\nexport var _DYN_TO_LOWER_CASE = \"toLowerCase\"; // Count: 5\r\nexport var _DYN_CALL = \"call\"; // Count: 18\r\nexport var _DYN_TYPE = \"type\"; // Count: 14\r\nexport var _DYN_HANDLER = \"handler\"; // Count: 5\r\nexport var _DYN_LISTENERS = \"listeners\"; // Count: 6\r\nexport var _DYN_IS_CHILD_EVT = \"isChildEvt\"; // Count: 3\r\nexport var _DYN_GET_CTX = \"getCtx\"; // Count: 6\r\nexport var _DYN_SET_CTX = \"setCtx\"; // Count: 10\r\nexport var _DYN_COMPLETE = \"complete\"; // Count: 3\r\nexport var _DYN_TRACE_ID = \"traceId\"; // Count: 5\r\nexport var _DYN_SPAN_ID = \"spanId\"; // Count: 5\r\nexport var _DYN_TRACE_FLAGS = \"traceFlags\"; // Count: 6\r\nexport var _DYN_VERSION = \"version\"; // Count: 4\r\n//# sourceMappingURL=__DynamicConstants.js.map","/*!\n * Microsoft Dynamic Proto Utility, 1.1.9\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n/**\r\n * Gets the runtime global reference\r\n * @returns\r\n */\r\nfunction _getGlobal() {\r\n    var result;\r\n    if (typeof globalThis !== UNDEFINED) {\r\n        result = globalThis;\r\n    }\r\n    if (!result && typeof self !== UNDEFINED) {\r\n        result = self;\r\n    }\r\n    if (!result && typeof window !== UNDEFINED) {\r\n        result = window;\r\n    }\r\n    if (!result && typeof global !== UNDEFINED) {\r\n        result = global;\r\n    }\r\n    return result || {};\r\n}\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = _getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper to check if the object contains a property of the name\r\n * @ignore\r\n */\r\nfunction _hasOwnProperty(obj, prop) {\r\n    return obj && Obj[Prototype].hasOwnProperty.call(obj, prop);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!_hasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && _hasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || _hasOwnProperty(target, funcName)));\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throw new TypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = {};\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = {};\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && _hasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || {};\r\n        instFunc = (instFuncTable[proto[DynClassName]] || {})[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !_hasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || {};\r\n        var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || {}); // fetch and assign if as it may not exist yet\r\n        // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n        if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n            instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n        }\r\n        _forEachProp(target, function (name) {\r\n            // Only add overridden functions\r\n            if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                instFuncs_1[name] = target[name];\r\n                delete target[name];\r\n                // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                if (!_hasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                    proto[name] = _createDynamicPrototype(proto, name);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (_hasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nfunction dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!_hasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (_hasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\n\nexport { dynamicProto as default };\n//# sourceMappingURL=dynamicproto-js.js.map\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strShimHasOwnProperty = \"hasOwnProperty\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\nexport var ObjAssign = ObjClass[\"assign\"];\r\nexport var ObjCreate = ObjClass[\"create\"];\r\nexport var ObjDefineProperty = ObjClass[\"defineProperty\"];\r\nexport var ObjHasOwnProperty = ObjProto[strShimHasOwnProperty];\r\n//# sourceMappingURL=Constants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjCreate, strShimFunction, strShimObject, strShimPrototype, strShimUndefined } from \"./Constants\";\r\nvar _cachedGlobal = null;\r\n/**\r\n * Returns the current global scope object, for a normal web page this will be the current\r\n * window, for a Web Worker this will be current worker global scope via \"self\". The internal\r\n * implementation returns the first available instance object in the following order\r\n * - globalThis (New standard)\r\n * - self (Will return the current window instance for supported browsers)\r\n * - window (fallback for older browser implementations)\r\n * - global (NodeJS standard)\r\n * - <null> (When all else fails)\r\n * While the return type is a Window for the normal case, not all environments will support all\r\n * of the properties or functions.\r\n */\r\nexport function getGlobal(useCached) {\r\n    if (useCached === void 0) { useCached = true; }\r\n    var result = useCached === false ? null : _cachedGlobal;\r\n    if (!result) {\r\n        if (typeof globalThis !== strShimUndefined) {\r\n            result = globalThis;\r\n        }\r\n        if (!result && typeof self !== strShimUndefined) {\r\n            result = self;\r\n        }\r\n        if (!result && typeof window !== strShimUndefined) {\r\n            result = window;\r\n        }\r\n        if (!result && typeof global !== strShimUndefined) {\r\n            result = global;\r\n        }\r\n        _cachedGlobal = result;\r\n    }\r\n    return result;\r\n}\r\nexport function throwTypeError(message) {\r\n    throw new TypeError(message);\r\n}\r\n/**\r\n * Creates an object that has the specified prototype, and that optionally contains specified properties. This helper exists to avoid adding a polyfil\r\n * for older browsers that do not define Object.create eg. ES3 only, IE8 just in case any page checks for presence/absence of the prototype implementation.\r\n * Note: For consistency this will not use the Object.create implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param obj Object to use as a prototype. May be null\r\n */\r\nexport function objCreateFn(obj) {\r\n    var func = ObjCreate;\r\n    // Use build in Object.create\r\n    if (func) {\r\n        // Use Object create method if it exists\r\n        return func(obj);\r\n    }\r\n    if (obj == null) {\r\n        return {};\r\n    }\r\n    var type = typeof obj;\r\n    if (type !== strShimObject && type !== strShimFunction) {\r\n        throwTypeError(\"Object prototype may only be an Object:\" + obj);\r\n    }\r\n    function tmpFunc() { }\r\n    tmpFunc[strShimPrototype] = obj;\r\n    return new tmpFunc();\r\n}\r\n//# sourceMappingURL=Helpers.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport var strShimFunction = \"function\";\r\nexport var strShimObject = \"object\";\r\nexport var strShimUndefined = \"undefined\";\r\nexport var strShimPrototype = \"prototype\";\r\nexport var strShimHasOwnProperty = \"hasOwnProperty\";\r\nexport var strDefault = \"default\";\r\nexport var ObjClass = Object;\r\nexport var ObjProto = ObjClass[strShimPrototype];\r\nexport var ObjAssign = ObjClass[\"assign\"];\r\nexport var ObjCreate = ObjClass[\"create\"];\r\nexport var ObjDefineProperty = ObjClass[\"defineProperty\"];\r\nexport var ObjHasOwnProperty = ObjProto[strShimHasOwnProperty];\r\n//# sourceMappingURL=Constants.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjCreate, strShimFunction, strShimObject, strShimPrototype, strShimUndefined } from \"./Constants\";\r\nvar _cachedGlobal = null;\r\n/**\r\n * Returns the current global scope object, for a normal web page this will be the current\r\n * window, for a Web Worker this will be current worker global scope via \"self\". The internal\r\n * implementation returns the first available instance object in the following order\r\n * - globalThis (New standard)\r\n * - self (Will return the current window instance for supported browsers)\r\n * - window (fallback for older browser implementations)\r\n * - global (NodeJS standard)\r\n * - <null> (When all else fails)\r\n * While the return type is a Window for the normal case, not all environments will support all\r\n * of the properties or functions.\r\n */\r\nexport function getGlobal(useCached) {\r\n    if (useCached === void 0) { useCached = true; }\r\n    var result = useCached === false ? null : _cachedGlobal;\r\n    if (!result) {\r\n        if (typeof globalThis !== strShimUndefined) {\r\n            result = globalThis;\r\n        }\r\n        if (!result && typeof self !== strShimUndefined) {\r\n            result = self;\r\n        }\r\n        if (!result && typeof window !== strShimUndefined) {\r\n            result = window;\r\n        }\r\n        if (!result && typeof global !== strShimUndefined) {\r\n            result = global;\r\n        }\r\n        _cachedGlobal = result;\r\n    }\r\n    return result;\r\n}\r\nexport function throwTypeError(message) {\r\n    throw new TypeError(message);\r\n}\r\n/**\r\n * Creates an object that has the specified prototype, and that optionally contains specified properties. This helper exists to avoid adding a polyfil\r\n * for older browsers that do not define Object.create eg. ES3 only, IE8 just in case any page checks for presence/absence of the prototype implementation.\r\n * Note: For consistency this will not use the Object.create implementation if it exists as this would cause a testing requirement to test with and without the implementations\r\n * @param obj Object to use as a prototype. May be null\r\n */\r\nexport function objCreateFn(obj) {\r\n    var func = ObjCreate;\r\n    // Use build in Object.create\r\n    if (func) {\r\n        // Use Object create method if it exists\r\n        return func(obj);\r\n    }\r\n    if (obj == null) {\r\n        return {};\r\n    }\r\n    var type = typeof obj;\r\n    if (type !== strShimObject && type !== strShimFunction) {\r\n        throwTypeError(\"Object prototype may only be an Object:\" + obj);\r\n    }\r\n    function tmpFunc() { }\r\n    tmpFunc[strShimPrototype] = obj;\r\n    return new tmpFunc();\r\n}\r\n//# sourceMappingURL=Helpers.js.map","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { ObjAssign, ObjClass, ObjCreate, ObjDefineProperty, ObjHasOwnProperty, ObjProto, strDefault, strShimFunction, strShimHasOwnProperty, strShimPrototype } from \"./Constants\";\r\nimport { getGlobal, objCreateFn, throwTypeError } from \"./Helpers\";\r\n// Most of these functions have been directly shamelessly \"lifted\" from the https://github.com/@microsoft/tslib and\r\n// modified to be ES3 compatible and applying several minification and tree-shaking techniques so that Application Insights\r\n// can successfully use TypeScript \"importHelpers\" which imports tslib during compilation but it will use these at runtime\r\n// Which is also why all of the functions have not been included as Application Insights currently doesn't use or require\r\n// them.\r\nexport var SymbolObj = (getGlobal() || {})[\"Symbol\"];\r\nexport var ReflectObj = (getGlobal() || {})[\"Reflect\"];\r\nexport var __hasSymbol = !!SymbolObj;\r\nexport var __hasReflect = !!ReflectObj;\r\nvar strDecorate = \"decorate\";\r\nvar strMetadata = \"metadata\";\r\nvar strGetOwnPropertySymbols = \"getOwnPropertySymbols\";\r\nvar strIterator = \"iterator\";\r\nexport var __objAssignFnImpl = function (t) {\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) {\r\n            if (ObjProto[strShimHasOwnProperty].call(s, p)) {\r\n                t[p] = s[p];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n};\r\nexport var __assignFn = ObjAssign || __objAssignFnImpl;\r\n// tslint:disable-next-line: only-arrow-functions\r\nvar extendStaticsFn = function (d, b) {\r\n    extendStaticsFn = ObjClass[\"setPrototypeOf\"] ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        ({ __proto__: [] } instanceof Array && function (d, b) {\r\n            d.__proto__ = b;\r\n        }) ||\r\n        // tslint:disable-next-line: only-arrow-functions\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b[strShimHasOwnProperty](p)) {\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return extendStaticsFn(d, b);\r\n};\r\nexport function __extendsFn(d, b) {\r\n    if (typeof b !== strShimFunction && b !== null) {\r\n        throwTypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    }\r\n    extendStaticsFn(d, b);\r\n    function __() {\r\n        this.constructor = d;\r\n    }\r\n    // tslint:disable-next-line: ban-comma-operator\r\n    d[strShimPrototype] = b === null ? objCreateFn(b) : (__[strShimPrototype] = b[strShimPrototype], new __());\r\n}\r\nexport function __restFn(s, e) {\r\n    var t = {};\r\n    for (var k in s) {\r\n        if (ObjHasOwnProperty.call(s, k) && e.indexOf(k) < 0) {\r\n            t[k] = s[k];\r\n        }\r\n    }\r\n    if (s != null && typeof ObjClass[strGetOwnPropertySymbols] === strShimFunction) {\r\n        for (var i = 0, p = ObjClass[strGetOwnPropertySymbols](s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && ObjProto[\"propertyIsEnumerable\"].call(s, p[i])) {\r\n                t[p[i]] = s[p[i]];\r\n            }\r\n        }\r\n    }\r\n    return t;\r\n}\r\nexport function __decorateFn(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = ObjClass[\"getOwnPropertyDescriptor\"](target, key) : desc, d;\r\n    if (__hasReflect && typeof ReflectObj[strDecorate] === strShimFunction) {\r\n        r = ReflectObj[strDecorate](decorators, target, key, desc);\r\n    }\r\n    else {\r\n        for (var i = decorators.length - 1; i >= 0; i--) {\r\n            // eslint-disable-next-line no-cond-assign\r\n            if (d = decorators[i]) {\r\n                r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n            }\r\n        }\r\n    }\r\n    // tslint:disable-next-line:ban-comma-operator\r\n    return c > 3 && r && ObjDefineProperty(target, key, r), r;\r\n}\r\nexport function __paramFn(paramIndex, decorator) {\r\n    return function (target, key) {\r\n        decorator(target, key, paramIndex);\r\n    };\r\n}\r\nexport function __metadataFn(metadataKey, metadataValue) {\r\n    if (__hasReflect && ReflectObj[strMetadata] === strShimFunction) {\r\n        return ReflectObj[strMetadata](metadataKey, metadataValue);\r\n    }\r\n}\r\nexport function __exportStarFn(m, o) {\r\n    for (var p in m) {\r\n        if (p !== strDefault && !ObjHasOwnProperty.call(o, p)) {\r\n            __createBindingFn(o, m, p);\r\n        }\r\n    }\r\n}\r\nexport function __createBindingFn(o, m, k, k2) {\r\n    if (k2 === undefined) {\r\n        k2 = k;\r\n    }\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(o, k2, {\r\n            enumerable: true,\r\n            get: function () {\r\n                return m[k];\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        o[k2] = m[k];\r\n    }\r\n}\r\nexport function __valuesFn(o) {\r\n    var s = typeof SymbolObj === strShimFunction && SymbolObj[strIterator], m = s && o[s], i = 0;\r\n    if (m) {\r\n        return m.call(o);\r\n    }\r\n    if (o && typeof o.length === \"number\") {\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) {\r\n                    o = void 0;\r\n                }\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n    throwTypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\nexport function __readFn(o, n) {\r\n    var m = typeof SymbolObj === strShimFunction && o[SymbolObj[strIterator]];\r\n    if (!m) {\r\n        return o;\r\n    }\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\r\n            ar.push(r.value);\r\n        }\r\n    }\r\n    catch (error) {\r\n        e = {\r\n            error: error\r\n        };\r\n    }\r\n    finally {\r\n        try {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (r && !r.done && (m = i[\"return\"])) {\r\n                m.call(i);\r\n            }\r\n        }\r\n        finally {\r\n            if (e) {\r\n                // eslint-disable-next-line no-unsafe-finally\r\n                throw e.error;\r\n            }\r\n        }\r\n    }\r\n    return ar;\r\n}\r\n/** @deprecated */\r\nexport function __spreadArraysFn() {\r\n    var theArgs = arguments;\r\n    // Calculate new total size\r\n    for (var s = 0, i = 0, il = theArgs.length; i < il; i++) {\r\n        s += theArgs[i].length;\r\n    }\r\n    // Create new full array\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) {\r\n        for (var a = theArgs[i], j = 0, jl = a.length; j < jl; j++, k++) {\r\n            r[k] = a[j];\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexport function __spreadArrayFn(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) {\r\n        to[j] = from[i];\r\n    }\r\n    return to;\r\n}\r\nexport function __makeTemplateObjectFn(cooked, raw) {\r\n    if (ObjDefineProperty) {\r\n        ObjDefineProperty(cooked, \"raw\", { value: raw });\r\n    }\r\n    else {\r\n        cooked.raw = raw;\r\n    }\r\n    return cooked;\r\n}\r\nexport function __importStarFn(mod) {\r\n    if (mod && mod.__esModule) {\r\n        return mod;\r\n    }\r\n    var result = {};\r\n    if (mod != null) {\r\n        for (var k in mod) {\r\n            if (k !== strDefault && Object.prototype.hasOwnProperty.call(mod, k)) {\r\n                __createBindingFn(result, mod, k);\r\n            }\r\n        }\r\n    }\r\n    // Set default module\r\n    if (!!ObjCreate) {\r\n        ObjDefineProperty(result, strDefault, { enumerable: true, value: mod });\r\n    }\r\n    else {\r\n        result[strDefault] = mod;\r\n    }\r\n    return result;\r\n}\r\nexport function __importDefaultFn(mod) {\r\n    return (mod && mod.__esModule) ? mod : { strDefault: mod };\r\n}\r\n//# sourceMappingURL=TsLibShims.js.map","/*!\n * Microsoft Dynamic Proto Utility, 1.1.7\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar _a;\r\nvar UNDEFINED = \"undefined\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Constructor = 'constructor';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar Prototype = 'prototype';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strFunction = 'function';\r\n/**\r\n * Used to define the name of the instance function lookup table\r\n * @ignore\r\n */\r\nvar DynInstFuncTable = '_dynInstFuncs';\r\n/**\r\n * Name used to tag the dynamic prototype function\r\n * @ignore\r\n */\r\nvar DynProxyTag = '_isDynProxy';\r\n/**\r\n * Name added to a prototype to define the dynamic prototype \"class\" name used to lookup the function table\r\n * @ignore\r\n */\r\nvar DynClassName = '_dynClass';\r\n/**\r\n * Prefix added to the classname to avoid any name clashes with other instance level properties\r\n * @ignore\r\n */\r\nvar DynClassNamePrefix = '_dynCls$';\r\n/**\r\n * A tag which is used to check if we have already to attempted to set the instance function if one is not present\r\n * @ignore\r\n */\r\nvar DynInstChkTag = '_dynInstChk';\r\n/**\r\n * A tag which is used to check if we are allows to try and set an instance function is one is not present. Using the same\r\n * tag name as the function level but a different const name for readability only.\r\n */\r\nvar DynAllowInstChkTag = DynInstChkTag;\r\n/**\r\n * The global (imported) instances where the global performance options are stored\r\n */\r\nvar DynProtoDefaultOptions = '_dfOpts';\r\n/**\r\n * Value used as the name of a class when it cannot be determined\r\n * @ignore\r\n */\r\nvar UnknownValue = '_unknown_';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar str__Proto = \"__proto__\";\r\n/**\r\n * The polyfill version of __proto__ so that it doesn't cause issues for anyone not expecting it to exist\r\n */\r\nvar DynProtoBaseProto = \"_dyn\" + str__Proto;\r\n/**\r\n * Runtime Global holder for dynamicProto settings\r\n */\r\nvar DynProtoGlobalSettings = \"__dynProto$Gbl\";\r\n/**\r\n * Track the current prototype for IE8 as you can't look back to get the prototype\r\n */\r\nvar DynProtoCurrent = \"_dynInstProto\";\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strUseBaseInst = 'useBaseInst';\r\n/**\r\n * Constant string defined to support minimization\r\n * @ignore\r\n */\r\nvar strSetInstFuncs = 'setInstFuncs';\r\nvar Obj = Object;\r\n/**\r\n * Pre-lookup to check if we are running on a modern browser (i.e. not IE8)\r\n * @ignore\r\n */\r\nvar _objGetPrototypeOf = Obj[\"getPrototypeOf\"];\r\n/**\r\n * Pre-lookup to check for the existence of this function\r\n */\r\nvar _objGetOwnProps = Obj[\"getOwnPropertyNames\"];\r\n/**\r\n * Gets the runtime global reference\r\n * @returns\r\n */\r\nfunction _getGlobal() {\r\n    var result;\r\n    if (typeof globalThis !== UNDEFINED) {\r\n        result = globalThis;\r\n    }\r\n    if (!result && typeof self !== UNDEFINED) {\r\n        result = self;\r\n    }\r\n    if (!result && typeof window !== UNDEFINED) {\r\n        result = window;\r\n    }\r\n    if (!result && typeof global !== UNDEFINED) {\r\n        result = global;\r\n    }\r\n    return result || {};\r\n}\r\n// Since 1.1.7 moving these to the runtime global to work around mixed version and module issues\r\n// See Issue https://github.com/microsoft/DynamicProto-JS/issues/57 for details\r\nvar _gbl = _getGlobal();\r\nvar _gblInst = _gbl[DynProtoGlobalSettings] || (_gbl[DynProtoGlobalSettings] = {\r\n    o: (_a = {},\r\n        _a[strSetInstFuncs] = true,\r\n        _a[strUseBaseInst] = true,\r\n        _a),\r\n    n: 1000 // Start new global index @ 1000 so we \"fix\" some cases when mixed with 1.1.6 or earlier\r\n});\r\n/**\r\n * Helper to check if the object contains a property of the name\r\n * @ignore\r\n */\r\nfunction _hasOwnProperty(obj, prop) {\r\n    return obj && Obj[Prototype].hasOwnProperty.call(obj, prop);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype or Array prototype\r\n * @ignore\r\n */\r\nfunction _isObjectOrArrayPrototype(target) {\r\n    return target && (target === Obj[Prototype] || target === Array[Prototype]);\r\n}\r\n/**\r\n * Helper used to check whether the target is an Object prototype, Array prototype or Function prototype\r\n * @ignore\r\n */\r\nfunction _isObjectArrayOrFunctionPrototype(target) {\r\n    return _isObjectOrArrayPrototype(target) || target === Function[Prototype];\r\n}\r\n/**\r\n * Helper used to get the prototype of the target object as getPrototypeOf is not available in an ES3 environment.\r\n * @ignore\r\n */\r\nfunction _getObjProto(target) {\r\n    var newProto;\r\n    if (target) {\r\n        // This method doesn't exist in older browsers (e.g. IE8)\r\n        if (_objGetPrototypeOf) {\r\n            return _objGetPrototypeOf(target);\r\n        }\r\n        var curProto = target[str__Proto] || target[Prototype] || (target[Constructor] ? target[Constructor][Prototype] : null);\r\n        // Using the pre-calculated value as IE8 doesn't support looking up the prototype of a prototype and thus fails for more than 1 base class\r\n        newProto = target[DynProtoBaseProto] || curProto;\r\n        if (!_hasOwnProperty(target, DynProtoBaseProto)) {\r\n            // As this prototype doesn't have this property then this is from an inherited class so newProto is the base to return so save it\r\n            // so we can look it up value (which for a multiple hierarchy dynamicProto will be the base class)\r\n            delete target[DynProtoCurrent]; // Delete any current value allocated to this instance so we pick up the value from prototype hierarchy\r\n            newProto = target[DynProtoBaseProto] = target[DynProtoCurrent] || target[DynProtoBaseProto];\r\n            target[DynProtoCurrent] = curProto;\r\n        }\r\n    }\r\n    return newProto;\r\n}\r\n/**\r\n * Helper to get the properties of an object, including none enumerable ones as functions on a prototype in ES6\r\n * are not enumerable.\r\n * @param target\r\n */\r\nfunction _forEachProp(target, func) {\r\n    var props = [];\r\n    if (_objGetOwnProps) {\r\n        props = _objGetOwnProps(target);\r\n    }\r\n    else {\r\n        for (var name_1 in target) {\r\n            if (typeof name_1 === \"string\" && _hasOwnProperty(target, name_1)) {\r\n                props.push(name_1);\r\n            }\r\n        }\r\n    }\r\n    if (props && props.length > 0) {\r\n        for (var lp = 0; lp < props.length; lp++) {\r\n            func(props[lp]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function to check whether the provided function name is a potential candidate for dynamic\r\n * callback and prototype generation.\r\n * @param target The target object, may be a prototype or class object\r\n * @param funcName The function name\r\n * @param skipOwn Skips the check for own property\r\n * @ignore\r\n */\r\nfunction _isDynamicCandidate(target, funcName, skipOwn) {\r\n    return (funcName !== Constructor && typeof target[funcName] === strFunction && (skipOwn || _hasOwnProperty(target, funcName)));\r\n}\r\n/**\r\n * Helper to throw a TypeError exception\r\n * @param message the message\r\n * @ignore\r\n */\r\nfunction _throwTypeError(message) {\r\n    throw new TypeError(\"DynamicProto: \" + message);\r\n}\r\n/**\r\n * Returns a collection of the instance functions that are defined directly on the thisTarget object, it does\r\n * not return any inherited functions\r\n * @param thisTarget The object to get the instance functions from\r\n * @ignore\r\n */\r\nfunction _getInstanceFuncs(thisTarget) {\r\n    // Get the base proto\r\n    var instFuncs = {};\r\n    // Save any existing instance functions\r\n    _forEachProp(thisTarget, function (name) {\r\n        // Don't include any dynamic prototype instances - as we only want the real functions\r\n        if (!instFuncs[name] && _isDynamicCandidate(thisTarget, name, false)) {\r\n            // Create an instance callback for passing the base function to the caller\r\n            instFuncs[name] = thisTarget[name];\r\n        }\r\n    });\r\n    return instFuncs;\r\n}\r\n/**\r\n * Returns whether the value is included in the array\r\n * @param values The array of values\r\n * @param value  The value\r\n */\r\nfunction _hasVisited(values, value) {\r\n    for (var lp = values.length - 1; lp >= 0; lp--) {\r\n        if (values[lp] === value) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Returns an object that contains callback functions for all \"base/super\" functions, this is used to \"save\"\r\n * enabling calling super.xxx() functions without requiring that the base \"class\" has defined a prototype references\r\n * @param target The current instance\r\n * @ignore\r\n */\r\nfunction _getBaseFuncs(classProto, thisTarget, instFuncs, useBaseInst) {\r\n    function _instFuncProxy(target, funcHost, funcName) {\r\n        var theFunc = funcHost[funcName];\r\n        if (theFunc[DynProxyTag] && useBaseInst) {\r\n            // grab and reuse the hosted looking function (if available) otherwise the original passed function\r\n            var instFuncTable = target[DynInstFuncTable] || {};\r\n            if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n                theFunc = (instFuncTable[funcHost[DynClassName]] || {})[funcName] || theFunc;\r\n            }\r\n        }\r\n        return function () {\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return theFunc.apply(target, arguments);\r\n        };\r\n    }\r\n    // Start creating a new baseFuncs by creating proxies for the instance functions (as they may get replaced)\r\n    var baseFuncs = {};\r\n    _forEachProp(instFuncs, function (name) {\r\n        // Create an instance callback for passing the base function to the caller\r\n        baseFuncs[name] = _instFuncProxy(thisTarget, instFuncs, name);\r\n    });\r\n    // Get the base prototype functions\r\n    var baseProto = _getObjProto(classProto);\r\n    var visited = [];\r\n    // Don't include base object functions for Object, Array or Function\r\n    while (baseProto && !_isObjectArrayOrFunctionPrototype(baseProto) && !_hasVisited(visited, baseProto)) {\r\n        // look for prototype functions\r\n        _forEachProp(baseProto, function (name) {\r\n            // Don't include any dynamic prototype instances - as we only want the real functions\r\n            // For IE 7/8 the prototype lookup doesn't provide the full chain so we need to bypass the \r\n            // hasOwnProperty check we get all of the methods, main difference is that IE7/8 doesn't return\r\n            // the Object prototype methods while bypassing the check\r\n            if (!baseFuncs[name] && _isDynamicCandidate(baseProto, name, !_objGetPrototypeOf)) {\r\n                // Create an instance callback for passing the base function to the caller\r\n                baseFuncs[name] = _instFuncProxy(thisTarget, baseProto, name);\r\n            }\r\n        });\r\n        // We need to find all possible functions that might be overloaded by walking the entire prototype chain\r\n        // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n        // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n        visited.push(baseProto);\r\n        baseProto = _getObjProto(baseProto);\r\n    }\r\n    return baseFuncs;\r\n}\r\nfunction _getInstFunc(target, funcName, proto, currentDynProtoProxy) {\r\n    var instFunc = null;\r\n    // We need to check whether the class name is defined directly on this prototype otherwise\r\n    // it will walk the proto chain and return any parent proto classname.\r\n    if (target && _hasOwnProperty(proto, DynClassName)) {\r\n        var instFuncTable = target[DynInstFuncTable] || {};\r\n        instFunc = (instFuncTable[proto[DynClassName]] || {})[funcName];\r\n        if (!instFunc) {\r\n            // Avoid stack overflow from recursive calling the same function\r\n            _throwTypeError(\"Missing [\" + funcName + \"] \" + strFunction);\r\n        }\r\n        // We have the instance function, lets check it we can speed up further calls\r\n        // by adding the instance function back directly on the instance (avoiding the dynamic func lookup)\r\n        if (!instFunc[DynInstChkTag] && instFuncTable[DynAllowInstChkTag] !== false) {\r\n            // If the instance already has an instance function we can't replace it\r\n            var canAddInst = !_hasOwnProperty(target, funcName);\r\n            // Get current prototype\r\n            var objProto = _getObjProto(target);\r\n            var visited = [];\r\n            // Lookup the function starting at the top (instance level prototype) and traverse down, if the first matching function\r\n            // if nothing is found or if the first hit is a dynamic proto instance then we can safely add an instance shortcut\r\n            while (canAddInst && objProto && !_isObjectArrayOrFunctionPrototype(objProto) && !_hasVisited(visited, objProto)) {\r\n                var protoFunc = objProto[funcName];\r\n                if (protoFunc) {\r\n                    canAddInst = (protoFunc === currentDynProtoProxy);\r\n                    break;\r\n                }\r\n                // We need to find all possible initial functions to ensure that we don't bypass a valid override function\r\n                visited.push(objProto);\r\n                objProto = _getObjProto(objProto);\r\n            }\r\n            try {\r\n                if (canAddInst) {\r\n                    // This instance doesn't have an instance func and the class hierarchy does have a higher level prototype version\r\n                    // so it's safe to directly assign for any subsequent calls (for better performance)\r\n                    target[funcName] = instFunc;\r\n                }\r\n                // Block further attempts to set the instance function for any\r\n                instFunc[DynInstChkTag] = 1;\r\n            }\r\n            catch (e) {\r\n                // Don't crash if the object is readonly or the runtime doesn't allow changing this\r\n                // And set a flag so we don't try again for any function\r\n                instFuncTable[DynAllowInstChkTag] = false;\r\n            }\r\n        }\r\n    }\r\n    return instFunc;\r\n}\r\nfunction _getProtoFunc(funcName, proto, currentDynProtoProxy) {\r\n    var protoFunc = proto[funcName];\r\n    // Check that the prototype function is not a self reference -- try to avoid stack overflow!\r\n    if (protoFunc === currentDynProtoProxy) {\r\n        // It is so lookup the base prototype\r\n        protoFunc = _getObjProto(proto)[funcName];\r\n    }\r\n    if (typeof protoFunc !== strFunction) {\r\n        _throwTypeError(\"[\" + funcName + \"] is not a \" + strFunction);\r\n    }\r\n    return protoFunc;\r\n}\r\n/**\r\n * Add the required dynamic prototype methods to the the class prototype\r\n * @param proto - The class prototype\r\n * @param className - The instance classname\r\n * @param target - The target instance\r\n * @param baseInstFuncs - The base instance functions\r\n * @param setInstanceFunc - Flag to allow prototype function to reset the instance function if one does not exist\r\n * @ignore\r\n */\r\nfunction _populatePrototype(proto, className, target, baseInstFuncs, setInstanceFunc) {\r\n    function _createDynamicPrototype(proto, funcName) {\r\n        var dynProtoProxy = function () {\r\n            // Use the instance or prototype function\r\n            var instFunc = _getInstFunc(this, funcName, proto, dynProtoProxy) || _getProtoFunc(funcName, proto, dynProtoProxy);\r\n            // eslint-disable-next-line prefer-rest-params\r\n            return instFunc.apply(this, arguments);\r\n        };\r\n        // Tag this function as a proxy to support replacing dynamic proxy elements (primary use case is for unit testing\r\n        // via which can dynamically replace the prototype function reference)\r\n        dynProtoProxy[DynProxyTag] = 1;\r\n        return dynProtoProxy;\r\n    }\r\n    if (!_isObjectOrArrayPrototype(proto)) {\r\n        var instFuncTable = target[DynInstFuncTable] = target[DynInstFuncTable] || {};\r\n        var instFuncs_1 = instFuncTable[className] = (instFuncTable[className] || {}); // fetch and assign if as it may not exist yet\r\n        // Set whether we are allow to lookup instances, if someone has set to false then do not re-enable\r\n        if (instFuncTable[DynAllowInstChkTag] !== false) {\r\n            instFuncTable[DynAllowInstChkTag] = !!setInstanceFunc;\r\n        }\r\n        _forEachProp(target, function (name) {\r\n            // Only add overridden functions\r\n            if (_isDynamicCandidate(target, name, false) && target[name] !== baseInstFuncs[name]) {\r\n                // Save the instance Function to the lookup table and remove it from the instance as it's not a dynamic proto function\r\n                instFuncs_1[name] = target[name];\r\n                delete target[name];\r\n                // Add a dynamic proto if one doesn't exist or if a prototype function exists and it's not a dynamic one\r\n                if (!_hasOwnProperty(proto, name) || (proto[name] && !proto[name][DynProxyTag])) {\r\n                    proto[name] = _createDynamicPrototype(proto, name);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks whether the passed prototype object appears to be correct by walking the prototype hierarchy of the instance\r\n * @param classProto The class prototype instance\r\n * @param thisTarget The current instance that will be checked whether the passed prototype instance is in the hierarchy\r\n * @ignore\r\n */\r\nfunction _checkPrototype(classProto, thisTarget) {\r\n    // This method doesn't existing in older browsers (e.g. IE8)\r\n    if (_objGetPrototypeOf) {\r\n        // As this is primarily a coding time check, don't bother checking if running in IE8 or lower\r\n        var visited = [];\r\n        var thisProto = _getObjProto(thisTarget);\r\n        while (thisProto && !_isObjectArrayOrFunctionPrototype(thisProto) && !_hasVisited(visited, thisProto)) {\r\n            if (thisProto === classProto) {\r\n                return true;\r\n            }\r\n            // This avoids the caller from needing to check whether it's direct base class implements the function or not\r\n            // by walking the entire chain it simplifies the usage and issues from upgrading any of the base classes.\r\n            visited.push(thisProto);\r\n            thisProto = _getObjProto(thisProto);\r\n        }\r\n        return false;\r\n    }\r\n    // If objGetPrototypeOf doesn't exist then just assume everything is ok.\r\n    return true;\r\n}\r\n/**\r\n * Gets the current prototype name using the ES6 name if available otherwise falling back to a use unknown as the name.\r\n * It's not critical for this to return a name, it's used to decorate the generated unique name for easier debugging only.\r\n * @param target\r\n * @param unknownValue\r\n * @ignore\r\n */\r\nfunction _getObjName(target, unknownValue) {\r\n    if (_hasOwnProperty(target, Prototype)) {\r\n        // Look like a prototype\r\n        return target.name || unknownValue || UnknownValue;\r\n    }\r\n    return (((target || {})[Constructor]) || {}).name || unknownValue || UnknownValue;\r\n}\r\n/**\r\n * Helper function when creating dynamic (inline) functions for classes, this helper performs the following tasks :-\r\n * - Saves references to all defined base class functions\r\n * - Calls the delegateFunc with the current target (this) and a base object reference that can be used to call all \"super\" functions.\r\n * - Will populate the class prototype for all overridden functions to support class extension that call the prototype instance.\r\n * Callers should use this helper when declaring all function within the constructor of a class, as mentioned above the delegateFunc is\r\n * passed both the target \"this\" and an object that can be used to call any base (super) functions, using this based object in place of\r\n * super.XXX() (which gets expanded to _super.prototype.XXX()) provides a better minification outcome and also ensures the correct \"this\"\r\n * context is maintained as TypeScript creates incorrect references using super.XXXX() for dynamically defined functions i.e. Functions\r\n * defined in the constructor or some other function (rather than declared as complete typescript functions).\r\n * ### Usage\r\n * ```typescript\r\n * import dynamicProto from \"@microsoft/dynamicproto-js\";\r\n * class ExampleClass extends BaseClass {\r\n *     constructor() {\r\n *         dynamicProto(ExampleClass, this, (_self, base) => {\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.newFunc = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     ...\r\n *                 }\r\n *             }\r\n *             // This will define a function that will be converted to a prototype function\r\n *             _self.myFunction = () => {\r\n *                 // Access any \"this\" instance property\r\n *                 if (_self.someProperty) {\r\n *                     // Call the base version of the function that we are overriding\r\n *                     base.myFunction();\r\n *                 }\r\n *                 ...\r\n *             }\r\n *             _self.initialize = () => {\r\n *                 ...\r\n *             }\r\n *             // Warnings: While the following will work as _self is simply a reference to\r\n *             // this, if anyone overrides myFunction() the overridden will be called first\r\n *             // as the normal JavaScript method resolution will occur and the defined\r\n *             // _self.initialize() function is actually gets removed from the instance and\r\n *             // a proxy prototype version is created to reference the created method.\r\n *             _self.initialize();\r\n *         });\r\n *     }\r\n * }\r\n * ```\r\n * @typeparam DPType This is the generic type of the class, used to keep intellisense valid\r\n * @typeparam DPCls The type that contains the prototype of the current class\r\n * @param theClass - This is the current class instance which contains the prototype for the current class\r\n * @param target - The current \"this\" (target) reference, when the class has been extended this.prototype will not be the 'theClass' value.\r\n * @param delegateFunc - The callback function (closure) that will create the dynamic function\r\n * @param options - Additional options to configure how the dynamic prototype operates\r\n */\r\nfunction dynamicProto(theClass, target, delegateFunc, options) {\r\n    // Make sure that the passed theClass argument looks correct\r\n    if (!_hasOwnProperty(theClass, Prototype)) {\r\n        _throwTypeError(\"theClass is an invalid class definition.\");\r\n    }\r\n    // Quick check to make sure that the passed theClass argument looks correct (this is a common copy/paste error)\r\n    var classProto = theClass[Prototype];\r\n    if (!_checkPrototype(classProto, target)) {\r\n        _throwTypeError(\"[\" + _getObjName(theClass) + \"] not in hierarchy of [\" + _getObjName(target) + \"]\");\r\n    }\r\n    var className = null;\r\n    if (_hasOwnProperty(classProto, DynClassName)) {\r\n        // Only grab the class name if it's defined on this prototype (i.e. don't walk the prototype chain)\r\n        className = classProto[DynClassName];\r\n    }\r\n    else {\r\n        // As not all browser support name on the prototype creating a unique dynamic one if we have not already\r\n        // assigned one, so we can use a simple string as the lookup rather than an object for the dynamic instance\r\n        // function table lookup.\r\n        className = DynClassNamePrefix + _getObjName(theClass, \"_\") + \"$\" + _gblInst.n;\r\n        _gblInst.n++;\r\n        classProto[DynClassName] = className;\r\n    }\r\n    var perfOptions = dynamicProto[DynProtoDefaultOptions];\r\n    var useBaseInst = !!perfOptions[strUseBaseInst];\r\n    if (useBaseInst && options && options[strUseBaseInst] !== undefined) {\r\n        useBaseInst = !!options[strUseBaseInst];\r\n    }\r\n    // Get the current instance functions\r\n    var instFuncs = _getInstanceFuncs(target);\r\n    // Get all of the functions for any base instance (before they are potentially overridden)\r\n    var baseFuncs = _getBaseFuncs(classProto, target, instFuncs, useBaseInst);\r\n    // Execute the delegate passing in both the current target \"this\" and \"base\" function references\r\n    // Note casting the same type as we don't actually have the base class here and this will provide some intellisense support\r\n    delegateFunc(target, baseFuncs);\r\n    // Don't allow setting instance functions for older IE instances\r\n    var setInstanceFunc = !!_objGetPrototypeOf && !!perfOptions[strSetInstFuncs];\r\n    if (setInstanceFunc && options) {\r\n        setInstanceFunc = !!options[strSetInstFuncs];\r\n    }\r\n    // Populate the Prototype for any overridden instance functions\r\n    _populatePrototype(classProto, className, target, instFuncs, setInstanceFunc !== false);\r\n}\r\n/**\r\n * Exposes the default global options to allow global configuration, if the global values are disabled these will override\r\n * any passed values. This is primarily exposed to support unit-testing without the need for individual classes to expose\r\n * their internal usage of dynamic proto.\r\n */\r\ndynamicProto[DynProtoDefaultOptions] = _gblInst.o;\n\nexport { dynamicProto as default };\n//# sourceMappingURL=dynamicproto-js.js.map\n","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n * Real Time profile (default profile). RealTime Latency events are sent every 1 sec and\r\n * Normal Latency events are sent every 2 sec.\r\n */\r\nexport var RT_PROFILE = \"REAL_TIME\";\r\n/**\r\n * Near Real Time profile. RealTime Latency events are sent every 3 sec and\r\n * Normal Latency events are sent every 6 sec.\r\n */\r\nexport var NRT_PROFILE = \"NEAR_REAL_TIME\";\r\n/**\r\n * Best Effort. RealTime Latency events are sent every 9 sec and\r\n * Normal Latency events are sent every 18 sec.\r\n */\r\nexport var BE_PROFILE = \"BEST_EFFORT\";\r\n//# sourceMappingURL=DataModels.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n\r\n// Licensed under the MIT License.\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Note: DON'T Export these const from the package as we are still targeting ES3 this will export a mutable variables that someone could change!!!\r\n// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n// Generally you should only put values that are used more than 2 times and then only if not already exposed as a constant (such as SdkCoreNames)\r\n// as when using \"short\" named values from here they will be will be minified smaller than the SdkCoreNames[eSdkCoreNames.xxxx] value.\r\nexport var STR_EMPTY = \"\";\r\nexport var STR_POST_METHOD = \"POST\";\r\nexport var STR_DISABLED_PROPERTY_NAME = \"Microsoft_ApplicationInsights_BypassAjaxInstrumentation\";\r\nexport var STR_DROPPED = \"drop\";\r\nexport var STR_SENDING = \"send\";\r\nexport var STR_REQUEUE = \"requeue\";\r\nexport var STR_RESPONSE_FAIL = \"rspFail\";\r\nexport var STR_OTHER = \"oth\";\r\nexport var DEFAULT_CACHE_CONTROL = \"no-cache, no-store\";\r\nexport var DEFAULT_CONTENT_TYPE = \"application/x-json-stream\";\r\nexport var STR_CACHE_CONTROL = \"cache-control\";\r\nexport var STR_CONTENT_TYPE_HEADER = \"content-type\";\r\nexport var STR_KILL_TOKENS_HEADER = \"kill-tokens\";\r\nexport var STR_KILL_DURATION_HEADER = \"kill-duration\";\r\nexport var STR_KILL_DURATION_SECONDS_HEADER = \"kill-duration-seconds\";\r\nexport var STR_TIME_DELTA_HEADER = \"time-delta-millis\";\r\nexport var STR_CLIENT_VERSION = \"client-version\";\r\nexport var STR_CLIENT_ID = \"client-id\";\r\nexport var STR_TIME_DELTA_TO_APPLY = \"time-delta-to-apply-millis\";\r\nexport var STR_UPLOAD_TIME = \"upload-time\";\r\nexport var STR_API_KEY = \"apikey\";\r\nexport var STR_MSA_DEVICE_TICKET = \"AuthMsaDeviceTicket\";\r\nexport var STR_AUTH_XTOKEN = \"AuthXToken\";\r\nexport var STR_SDK_VERSION = \"sdk-version\";\r\nexport var STR_NO_RESPONSE_BODY = \"NoResponseBody\";\r\nexport var STR_MSFPC = \"msfpc\";\r\nexport var STR_TRACE = \"trace\";\r\nexport var STR_USER = \"user\";\r\n//# sourceMappingURL=InternalConstants.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* EventBatch.ts\r\n* @author Nev Wylie (newylie)\r\n* @copyright Microsoft 2020\r\n*/\r\nimport { isNullOrUndefined, isValueAssigned } from \"@microsoft/1ds-core-js\";\r\nimport { STR_EMPTY, STR_MSFPC } from \"./InternalConstants\";\r\nfunction _getEventMsfpc(theEvent) {\r\n    var intWeb = ((theEvent.ext || {})[\"intweb\"]);\r\n    if (intWeb && isValueAssigned(intWeb[STR_MSFPC])) {\r\n        return intWeb[STR_MSFPC];\r\n    }\r\n    return null;\r\n}\r\nfunction _getMsfpc(theEvents) {\r\n    var msfpc = null;\r\n    for (var lp = 0; msfpc === null && lp < theEvents.length; lp++) {\r\n        msfpc = _getEventMsfpc(theEvents[lp]);\r\n    }\r\n    return msfpc;\r\n}\r\n/**\r\n* This class defines a \"batch\" events related to a specific iKey, it is used by the PostChannel and HttpManager\r\n* to collect and transfer ownership of events without duplicating them in-memory. This reduces the previous\r\n* array duplication and shared ownership issues that occurred due to race conditions caused by the async nature\r\n* of sending requests.\r\n*/\r\nvar EventBatch = /** @class */ (function () {\r\n    /**\r\n     * Private constructor so that caller is forced to use the static create method.\r\n     * @param iKey - The iKey to associate with the events (not validated)\r\n     * @param addEvents - The optional collection of events to assign to this batch - defaults to an empty array.\r\n     */\r\n    function EventBatch(iKey, addEvents) {\r\n        var events = addEvents ? [].concat(addEvents) : [];\r\n        var _self = this;\r\n        var _msfpc = _getMsfpc(events);\r\n        _self.iKey = function () {\r\n            return iKey;\r\n        };\r\n        _self.Msfpc = function () {\r\n            // return the cached value unless it's undefined -- used to avoid cpu\r\n            return _msfpc || STR_EMPTY;\r\n        };\r\n        _self.count = function () {\r\n            return events.length;\r\n        };\r\n        _self.events = function () {\r\n            return events;\r\n        };\r\n        _self.addEvent = function (theEvent) {\r\n            if (theEvent) {\r\n                events.push(theEvent);\r\n                if (!_msfpc) {\r\n                    // Not found so try and find one\r\n                    _msfpc = _getEventMsfpc(theEvent);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        _self.split = function (fromEvent, numEvents) {\r\n            // Create a new batch with the same iKey\r\n            var theEvents;\r\n            if (fromEvent < events.length) {\r\n                var cnt = events.length - fromEvent;\r\n                if (!isNullOrUndefined(numEvents)) {\r\n                    cnt = numEvents < cnt ? numEvents : cnt;\r\n                }\r\n                theEvents = events.splice(fromEvent, cnt);\r\n                // reset the fetched msfpc value\r\n                _msfpc = _getMsfpc(events);\r\n            }\r\n            return new EventBatch(iKey, theEvents);\r\n        };\r\n    }\r\n    /**\r\n     * Creates a new Event Batch object\r\n     * @param iKey The iKey associated with this batch of events\r\n     */\r\n    EventBatch.create = function (iKey, theEvents) {\r\n        return new EventBatch(iKey, theEvents);\r\n    };\r\n    return EventBatch;\r\n}());\r\nexport { EventBatch };\r\n//# sourceMappingURL=EventBatch.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* ClockSkewManager.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\n/**\r\n* Class to manage clock skew correction.\r\n*/\r\nvar ClockSkewManager = /** @class */ (function () {\r\n    function ClockSkewManager() {\r\n        var _allowRequestSending = true;\r\n        var _shouldAddClockSkewHeaders = true;\r\n        var _isFirstRequest = true;\r\n        var _clockSkewHeaderValue = \"use-collector-delta\";\r\n        var _clockSkewSet = false;\r\n        dynamicProto(ClockSkewManager, this, function (_self) {\r\n            /**\r\n             * Determine if requests can be sent.\r\n             * @returns True if requests can be sent, false otherwise.\r\n             */\r\n            _self.allowRequestSending = function () {\r\n                return _allowRequestSending;\r\n            };\r\n            /**\r\n             * Tells the ClockSkewManager that it should assume that the first request has now been sent,\r\n             * If this method had not yet been called AND the clock Skew had not been set this will set\r\n             * allowRequestSending to false until setClockSet() is called.\r\n             */\r\n            _self.firstRequestSent = function () {\r\n                if (_isFirstRequest) {\r\n                    _isFirstRequest = false;\r\n                    if (!_clockSkewSet) {\r\n                        // Block sending until we get the first clock Skew\r\n                        _allowRequestSending = false;\r\n                    }\r\n                }\r\n            };\r\n            /**\r\n             * Determine if clock skew headers should be added to the request.\r\n             * @returns True if clock skew headers should be added, false otherwise.\r\n             */\r\n            _self.shouldAddClockSkewHeaders = function () {\r\n                return _shouldAddClockSkewHeaders;\r\n            };\r\n            /**\r\n             * Gets the clock skew header value.\r\n             * @returns The clock skew header value.\r\n             */\r\n            _self.getClockSkewHeaderValue = function () {\r\n                return _clockSkewHeaderValue;\r\n            };\r\n            /**\r\n             * Sets the clock skew header value. Once clock skew is set this method\r\n             * is no-op.\r\n             * @param timeDeltaInMillis - Time delta to be saved as the clock skew header value.\r\n             */\r\n            _self.setClockSkew = function (timeDeltaInMillis) {\r\n                if (!_clockSkewSet) {\r\n                    if (timeDeltaInMillis) {\r\n                        _clockSkewHeaderValue = timeDeltaInMillis;\r\n                        _shouldAddClockSkewHeaders = true;\r\n                        _clockSkewSet = true;\r\n                    }\r\n                    else {\r\n                        _shouldAddClockSkewHeaders = false;\r\n                    }\r\n                    // Unblock sending\r\n                    _allowRequestSending = true;\r\n                }\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for ClockSkewManager.prototype.allowRequestSending.\r\n// Removed Stub for ClockSkewManager.prototype.firstRequestSent.\r\n// Removed Stub for ClockSkewManager.prototype.shouldAddClockSkewHeaders.\r\n// Removed Stub for ClockSkewManager.prototype.getClockSkewHeaderValue.\r\n// Removed Stub for ClockSkewManager.prototype.setClockSkew.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    ClockSkewManager.__ieDyn=1;\n\n    return ClockSkewManager;\r\n}());\r\nexport default ClockSkewManager;\r\n//# sourceMappingURL=ClockSkewManager.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* KillSwitch.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrForEach, dateNow, strTrim } from \"@microsoft/1ds-core-js\";\r\nvar SecToMsMultiplier = 1000;\r\n/**\r\n* Class to stop certain tenants sending events.\r\n*/\r\nvar KillSwitch = /** @class */ (function () {\r\n    function KillSwitch() {\r\n        var _killedTokenDictionary = {};\r\n        function _normalizeTenants(values) {\r\n            var result = [];\r\n            if (values) {\r\n                arrForEach(values, function (value) {\r\n                    result.push(strTrim(value));\r\n                });\r\n            }\r\n            return result;\r\n        }\r\n        dynamicProto(KillSwitch, this, function (_self) {\r\n            _self.setKillSwitchTenants = function (killTokens, killDuration) {\r\n                if (killTokens && killDuration) {\r\n                    try {\r\n                        var killedTokens = _normalizeTenants(killTokens.split(\",\"));\r\n                        if (killDuration === \"this-request-only\") {\r\n                            return killedTokens;\r\n                        }\r\n                        var durationMs = parseInt(killDuration, 10) * SecToMsMultiplier;\r\n                        for (var i = 0; i < killedTokens.length; ++i) {\r\n                            _killedTokenDictionary[killedTokens[i]] = dateNow() + durationMs;\r\n                        }\r\n                    }\r\n                    catch (ex) {\r\n                        return [];\r\n                    }\r\n                }\r\n                return [];\r\n            };\r\n            _self.isTenantKilled = function (tenantToken) {\r\n                var killDictionary = _killedTokenDictionary;\r\n                var name = strTrim(tenantToken);\r\n                if (killDictionary[name] !== undefined && killDictionary[name] > dateNow()) {\r\n                    return true;\r\n                }\r\n                delete killDictionary[name];\r\n                return false;\r\n            };\r\n        });\r\n    }\r\n// Removed Stub for KillSwitch.prototype.setKillSwitchTenants.\r\n// Removed Stub for KillSwitch.prototype.isTenantKilled.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    KillSwitch.__ieDyn=1;\n\n    return KillSwitch;\r\n}());\r\nexport default KillSwitch;\r\n//# sourceMappingURL=KillSwitch.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* RetryPolicy.ts\r\n* @author Abhilash Panwar (abpanwar)\r\n* @copyright Microsoft 2018\r\n*/\r\nvar RandomizationLowerThreshold = 0.8;\r\nvar RandomizationUpperThreshold = 1.2;\r\nvar BaseBackoff = 3000;\r\nvar MaxBackoff = 600000;\r\n/**\r\n * Determine if the request should be retried for the given status code.\r\n * The below expression reads that we should only retry for:\r\n *      - HttpStatusCodes that are smaller than 300.\r\n *      - HttpStatusCodes greater or equal to 500 (except for 501-NotImplement\r\n *        and 505-HttpVersionNotSupport).\r\n *      - HttpStatusCode 408-RequestTimeout.\r\n *      - HttpStatusCode 429.\r\n * This is based on Microsoft.WindowsAzure.Storage.RetryPolicies.ExponentialRetry class\r\n * @param httpStatusCode - The status code returned for the request.\r\n * @returns True if request should be retried, false otherwise.\r\n */\r\nexport function retryPolicyShouldRetryForStatus(httpStatusCode) {\r\n    /* tslint:disable:triple-equals */\r\n    // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n    return !((httpStatusCode >= 300 && httpStatusCode < 500 && httpStatusCode != 408 && httpStatusCode != 429)\r\n        || (httpStatusCode == 501)\r\n        || (httpStatusCode == 505));\r\n    /* tslint:enable:triple-equals */\r\n}\r\n/**\r\n * Gets the number of milliseconds to back off before retrying the request. The\r\n * back off duration is exponentially scaled based on the number of retries already\r\n * done for the request.\r\n * @param retriesSoFar - The number of times the request has already been retried.\r\n * @returns The back off duration for the request before it can be retried.\r\n */\r\nexport function retryPolicyGetMillisToBackoffForRetry(retriesSoFar) {\r\n    var waitDuration = 0;\r\n    var minBackoff = BaseBackoff * RandomizationLowerThreshold;\r\n    var maxBackoff = BaseBackoff * RandomizationUpperThreshold;\r\n    var randomBackoff = Math.floor(Math.random() * (maxBackoff - minBackoff)) + minBackoff;\r\n    waitDuration = Math.pow(2, retriesSoFar) * randomBackoff;\r\n    return Math.min(waitDuration, MaxBackoff);\r\n}\r\n//# sourceMappingURL=RetryPolicy.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* Serializer.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\n// @skip-file-minify\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { arrIndexOf, doPerf, getCommonSchemaMetaData, getTenantId, isArray, isValueAssigned, objForEachKey, sanitizeProperty, strStartsWith } from \"@microsoft/1ds-core-js\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { STR_EMPTY } from \"./InternalConstants\";\r\n/**\r\n * Note: This is an optimization for V8-based browsers. When V8 concatenates a string,\r\n * the strings are only joined logically using a \"cons string\" or \"constructed/concatenated\r\n * string\". These containers keep references to one another and can result in very large\r\n * memory usage. For example, if a 2MB string is constructed by concatenating 4 bytes\r\n * together at a time, the memory usage will be ~44MB; so ~22x increase. The strings are\r\n * only joined together when an operation requiring their joining takes place, such as\r\n * substr(). This function is called when adding data to this buffer to ensure these\r\n * types of strings are periodically joined to reduce the memory footprint.\r\n * Setting to every 20 events as the JSON.stringify() may have joined many strings\r\n * and calling this too much causes a minor delay while processing.\r\n */\r\nvar _MAX_STRING_JOINS = 20;\r\nvar RequestSizeLimitBytes = 3984588; // approx 3.8 Mb\r\nvar BeaconRequestSizeLimitBytes = 65000; // approx 64kb (the current Edge, Firefox and Chrome max limit)\r\nvar MaxRecordSize = 2000000; // approx 2 Mb\r\nvar MaxBeaconRecordSize = Math.min(MaxRecordSize, BeaconRequestSizeLimitBytes);\r\nvar metadata = \"metadata\";\r\nvar f = \"f\";\r\nvar rCheckDot = /\\./;\r\n/**\r\n* Class to handle serialization of event and request.\r\n* Currently uses Bond for serialization. Please note that this may be subject to change.\r\n*/\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer(perfManager, valueSanitizer, stringifyObjects, enableCompoundKey) {\r\n        var strData = \"data\";\r\n        var strBaseData = \"baseData\";\r\n        var strExt = \"ext\";\r\n        var _checkForCompoundkey = !!enableCompoundKey;\r\n        var _processSubMetaData = true;\r\n        var _theSanitizer = valueSanitizer;\r\n        var _isReservedCache = {};\r\n        dynamicProto(Serializer, this, function (_self) {\r\n            _self.createPayload = function (retryCnt, isTeardown, isSync, isReducedPayload, sendReason, sendType) {\r\n                return {\r\n                    apiKeys: [],\r\n                    payloadBlob: STR_EMPTY,\r\n                    overflow: null,\r\n                    sizeExceed: [],\r\n                    failedEvts: [],\r\n                    batches: [],\r\n                    numEvents: 0,\r\n                    retryCnt: retryCnt,\r\n                    isTeardown: isTeardown,\r\n                    isSync: isSync,\r\n                    isBeacon: isReducedPayload,\r\n                    sendType: sendType,\r\n                    sendReason: sendReason\r\n                };\r\n            };\r\n            _self.appendPayload = function (payload, theBatch, maxEventsPerBatch) {\r\n                var canAddEvents = payload && theBatch && !payload.overflow;\r\n                if (canAddEvents) {\r\n                    doPerf(perfManager, function () { return \"Serializer:appendPayload\"; }, function () {\r\n                        var theEvents = theBatch.events();\r\n                        var payloadBlob = payload.payloadBlob;\r\n                        var payloadEvents = payload.numEvents;\r\n                        var eventsAdded = false;\r\n                        var sizeExceeded = [];\r\n                        var failedEvts = [];\r\n                        var isBeaconPayload = payload.isBeacon;\r\n                        var requestMaxSize = isBeaconPayload ? BeaconRequestSizeLimitBytes : RequestSizeLimitBytes;\r\n                        var recordMaxSize = isBeaconPayload ? MaxBeaconRecordSize : MaxRecordSize;\r\n                        var lp = 0;\r\n                        var joinCount = 0;\r\n                        while (lp < theEvents.length) {\r\n                            var theEvent = theEvents[lp];\r\n                            if (theEvent) {\r\n                                if (payloadEvents >= maxEventsPerBatch) {\r\n                                    // Maximum events per payload reached, so don't add any more\r\n                                    payload.overflow = theBatch.split(lp);\r\n                                    break;\r\n                                }\r\n                                var eventBlob = _self.getEventBlob(theEvent);\r\n                                if (eventBlob && eventBlob.length <= recordMaxSize) {\r\n                                    // This event will fit into the payload\r\n                                    var blobLength = eventBlob.length;\r\n                                    var currentSize = payloadBlob.length;\r\n                                    if (currentSize + blobLength > requestMaxSize) {\r\n                                        // Request or batch size exceeded, so don't add any more to the payload\r\n                                        payload.overflow = theBatch.split(lp);\r\n                                        break;\r\n                                    }\r\n                                    if (payloadBlob) {\r\n                                        payloadBlob += \"\\n\";\r\n                                    }\r\n                                    payloadBlob += eventBlob;\r\n                                    joinCount++;\r\n                                    // v8 memory optimization only\r\n                                    if (joinCount > _MAX_STRING_JOINS) {\r\n                                        // this substr() should cause the constructed string to join\r\n                                        payloadBlob.substr(0, 1);\r\n                                        joinCount = 0;\r\n                                    }\r\n                                    eventsAdded = true;\r\n                                    payloadEvents++;\r\n                                }\r\n                                else {\r\n                                    if (eventBlob) {\r\n                                        // Single event size exceeded so remove from the batch\r\n                                        sizeExceeded.push(theEvent);\r\n                                    }\r\n                                    else {\r\n                                        failedEvts.push(theEvent);\r\n                                    }\r\n                                    // We also need to remove this event from the existing array, otherwise a notification will be sent\r\n                                    // indicating that it was successfully sent\r\n                                    theEvents.splice(lp, 1);\r\n                                    lp--;\r\n                                }\r\n                            }\r\n                            lp++;\r\n                        }\r\n                        if (sizeExceeded && sizeExceeded.length > 0) {\r\n                            payload.sizeExceed.push(EventBatch.create(theBatch.iKey(), sizeExceeded));\r\n                            // Remove the exceeded events from the batch\r\n                        }\r\n                        if (failedEvts && failedEvts.length > 0) {\r\n                            payload.failedEvts.push(EventBatch.create(theBatch.iKey(), failedEvts));\r\n                            // Remove the failed events from the batch\r\n                        }\r\n                        if (eventsAdded) {\r\n                            payload.batches.push(theBatch);\r\n                            payload.payloadBlob = payloadBlob;\r\n                            payload.numEvents = payloadEvents;\r\n                            var apiKey = theBatch.iKey();\r\n                            if (arrIndexOf(payload.apiKeys, apiKey) === -1) {\r\n                                payload.apiKeys.push(apiKey);\r\n                            }\r\n                        }\r\n                    }, function () { return ({ payload: payload, theBatch: { iKey: theBatch.iKey(), evts: theBatch.events() }, max: maxEventsPerBatch }); });\r\n                }\r\n                return canAddEvents;\r\n            };\r\n            _self.getEventBlob = function (eventData) {\r\n                try {\r\n                    return doPerf(perfManager, function () { return \"Serializer.getEventBlob\"; }, function () {\r\n                        var serializedEvent = {};\r\n                        // Adding as dynamic keys for v8 performance\r\n                        serializedEvent.name = eventData.name;\r\n                        serializedEvent.time = eventData.time;\r\n                        serializedEvent.ver = eventData.ver;\r\n                        serializedEvent.iKey = \"o:\" + getTenantId(eventData.iKey);\r\n                        // Assigning local var so usage in part b/c don't throw if there is no ext\r\n                        var serializedExt = {};\r\n                        // Part A\r\n                        var eventExt = eventData[strExt];\r\n                        if (eventExt) {\r\n                            // Only assign ext if the event had one (There are tests covering this use case)\r\n                            serializedEvent[strExt] = serializedExt;\r\n                            objForEachKey(eventExt, function (key, value) {\r\n                                var data = serializedExt[key] = {};\r\n                                // Don't include a metadata callback as we don't currently set metadata Part A fields\r\n                                _processPathKeys(value, data, \"ext.\" + key, true, null, null, true);\r\n                            });\r\n                        }\r\n                        var serializedData = serializedEvent[strData] = {};\r\n                        serializedData.baseType = eventData.baseType;\r\n                        var serializedBaseData = serializedData[strBaseData] = {};\r\n                        // Part B\r\n                        _processPathKeys(eventData.baseData, serializedBaseData, strBaseData, false, [strBaseData], function (pathKeys, name, value) {\r\n                            _addJSONPropertyMetaData(serializedExt, pathKeys, name, value);\r\n                        }, _processSubMetaData);\r\n                        // Part C\r\n                        _processPathKeys(eventData.data, serializedData, strData, false, [], function (pathKeys, name, value) {\r\n                            _addJSONPropertyMetaData(serializedExt, pathKeys, name, value);\r\n                        }, _processSubMetaData);\r\n                        return JSON.stringify(serializedEvent);\r\n                    }, function () { return ({ item: eventData }); });\r\n                }\r\n                catch (e) {\r\n                    return null;\r\n                }\r\n            };\r\n            function _isReservedField(path, name) {\r\n                var result = _isReservedCache[path];\r\n                if (result === undefined) {\r\n                    if (path.length >= 7) {\r\n                        // Do not allow the changing of fields located in the ext.metadata or ext.web extension\r\n                        result = strStartsWith(path, \"ext.metadata\") || strStartsWith(path, \"ext.web\");\r\n                    }\r\n                    _isReservedCache[path] = result;\r\n                }\r\n                return result;\r\n            }\r\n            function _processPathKeys(srcObj, target, thePath, checkReserved, metadataPathKeys, metadataCallback, processSubKeys) {\r\n                objForEachKey(srcObj, function (key, srcValue) {\r\n                    var prop = null;\r\n                    if (srcValue || isValueAssigned(srcValue)) {\r\n                        var path = thePath;\r\n                        var name_1 = key;\r\n                        var theMetaPathKeys = metadataPathKeys;\r\n                        var destObj = target;\r\n                        // Handle keys with embedded '.', like \"TestObject.testProperty\"\r\n                        if (_checkForCompoundkey && !checkReserved && rCheckDot.test(key)) {\r\n                            var subKeys = key.split(\".\");\r\n                            var keyLen = subKeys.length;\r\n                            if (keyLen > 1) {\r\n                                if (theMetaPathKeys) {\r\n                                    // Create a copy of the meta path keys so we can add the extra ones\r\n                                    theMetaPathKeys = theMetaPathKeys.slice();\r\n                                }\r\n                                for (var lp = 0; lp < keyLen - 1; lp++) {\r\n                                    var subKey = subKeys[lp];\r\n                                    // Add/reuse the sub key object\r\n                                    destObj = destObj[subKey] = destObj[subKey] || {};\r\n                                    path += \".\" + subKey;\r\n                                    if (theMetaPathKeys) {\r\n                                        theMetaPathKeys.push(subKey);\r\n                                    }\r\n                                }\r\n                                name_1 = subKeys[keyLen - 1];\r\n                            }\r\n                        }\r\n                        var isReserved = checkReserved && _isReservedField(path, name_1);\r\n                        if (!isReserved && _theSanitizer && _theSanitizer.handleField(path, name_1)) {\r\n                            prop = _theSanitizer.value(path, name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        else {\r\n                            prop = sanitizeProperty(name_1, srcValue, stringifyObjects);\r\n                        }\r\n                        if (prop) {\r\n                            // Set the value\r\n                            var newValue = prop.value;\r\n                            destObj[name_1] = newValue;\r\n                            if (metadataCallback) {\r\n                                metadataCallback(theMetaPathKeys, name_1, prop);\r\n                            }\r\n                            if (processSubKeys && typeof newValue === \"object\" && !isArray(newValue)) {\r\n                                var newPath = theMetaPathKeys;\r\n                                if (newPath) {\r\n                                    newPath = newPath.slice();\r\n                                    newPath.push(name_1);\r\n                                }\r\n                                // Make sure we process sub objects as well (for value sanitization and metadata)\r\n                                _processPathKeys(srcValue, newValue, path + \".\" + name_1, checkReserved, newPath, metadataCallback, processSubKeys);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for Serializer.prototype.createPayload.\r\n// Removed Stub for Serializer.prototype.appendPayload.\r\n// Removed Stub for Serializer.prototype.getEventBlob.\r\n// Removed Stub for Serializer.prototype.handleField.\r\n// Removed Stub for Serializer.prototype.getSanitizer.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    Serializer.__ieDyn=1;\n\n    return Serializer;\r\n}());\r\nexport { Serializer };\r\n/**\r\n * @ignore\r\n */\r\nfunction _addJSONPropertyMetaData(json, propKeys, name, propertyValue) {\r\n    if (propertyValue && json) {\r\n        var encodedTypeValue = getCommonSchemaMetaData(propertyValue.value, propertyValue.kind, propertyValue.propertyType);\r\n        if (encodedTypeValue > -1) {\r\n            // Add the root metadata\r\n            var metaData = json[metadata];\r\n            if (!metaData) {\r\n                // Sets the root 'f'\r\n                metaData = json[metadata] = { f: {} };\r\n            }\r\n            var metaTarget = metaData[f];\r\n            if (!metaTarget) {\r\n                // This can occur if someone has manually added an ext.metadata object\r\n                // Such as ext.metadata.privLevel and ext.metadata.privTags\r\n                metaTarget = metaData[f] = {};\r\n            }\r\n            // Traverse the metadata path and build each object (contains an 'f' key) -- if required\r\n            if (propKeys) {\r\n                for (var lp = 0; lp < propKeys.length; lp++) {\r\n                    var key = propKeys[lp];\r\n                    if (!metaTarget[key]) {\r\n                        metaTarget[key] = { f: {} };\r\n                    }\r\n                    var newTarget = metaTarget[key][f];\r\n                    if (!newTarget) {\r\n                        // Not expected, but can occur if the metadata context was pre-created as part of the event\r\n                        newTarget = metaTarget[key][f] = {};\r\n                    }\r\n                    metaTarget = newTarget;\r\n                }\r\n            }\r\n            metaTarget = metaTarget[name] = {};\r\n            if (isArray(propertyValue.value)) {\r\n                metaTarget[\"a\"] = {\r\n                    t: encodedTypeValue\r\n                };\r\n            }\r\n            else {\r\n                metaTarget[\"t\"] = encodedTypeValue;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Serializer.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nvar _a;\r\n/**\r\n* HttpManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport EVTClockSkewManager from \"./ClockSkewManager\";\r\nimport EVTKillSwitch from \"./KillSwitch\";\r\nimport { FullVersionString, _throwInternal, _warnToConsole, arrForEach, dateNow, doPerf, dumpObj, extend, getLocation, getNavigator, getTime, hasOwnProperty, isArray, isBeaconsSupported, isFetchSupported, isNullOrUndefined, isNumber, isReactNative, isString, isUndefined, isValueAssigned, isXhrSupported, objForEachKey, objKeys, openXhr, strTrim, strUndefined, useXDomainRequest } from \"@microsoft/1ds-core-js\";\r\nimport { DEFAULT_CACHE_CONTROL, DEFAULT_CONTENT_TYPE, STR_API_KEY, STR_AUTH_XTOKEN, STR_CACHE_CONTROL, STR_CLIENT_ID, STR_CLIENT_VERSION, STR_CONTENT_TYPE_HEADER, STR_DISABLED_PROPERTY_NAME, STR_DROPPED, STR_EMPTY, STR_KILL_DURATION_HEADER, STR_KILL_DURATION_SECONDS_HEADER, STR_KILL_TOKENS_HEADER, STR_MSA_DEVICE_TICKET, STR_MSFPC, STR_NO_RESPONSE_BODY, STR_OTHER, STR_POST_METHOD, STR_REQUEUE, STR_RESPONSE_FAIL, STR_SENDING, STR_TIME_DELTA_HEADER, STR_TIME_DELTA_TO_APPLY, STR_UPLOAD_TIME } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry, retryPolicyShouldRetryForStatus } from \"./RetryPolicy\";\r\nimport { Serializer } from \"./Serializer\";\r\nvar strSendAttempt = \"sendAttempt\";\r\nvar _noResponseQs = \"&\" + STR_NO_RESPONSE_BODY + \"=true\";\r\n/**\r\n * Identifies the default notification reason to the action names\r\n */\r\nvar _eventActionMap = (_a = {},\r\n    _a[1 /* EventBatchNotificationReason.Paused */] = STR_REQUEUE,\r\n    _a[100 /* EventBatchNotificationReason.RequeueEvents */] = STR_REQUEUE,\r\n    _a[200 /* EventBatchNotificationReason.Complete */] = \"sent\",\r\n    _a[8004 /* EventBatchNotificationReason.KillSwitch */] = STR_DROPPED,\r\n    _a[8003 /* EventBatchNotificationReason.SizeLimitExceeded */] = STR_DROPPED,\r\n    _a);\r\nvar _collectorQsHeaders = {};\r\nvar _collectorHeaderToQs = {};\r\nfunction _addCollectorHeaderQsMapping(qsName, headerName, allowQs) {\r\n    _collectorQsHeaders[qsName] = headerName;\r\n    if (allowQs !== false) {\r\n        _collectorHeaderToQs[headerName] = qsName;\r\n    }\r\n}\r\n_addCollectorHeaderQsMapping(STR_MSA_DEVICE_TICKET, STR_MSA_DEVICE_TICKET, false);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_VERSION, STR_CLIENT_VERSION);\r\n_addCollectorHeaderQsMapping(STR_CLIENT_ID, \"Client-Id\");\r\n_addCollectorHeaderQsMapping(STR_API_KEY, STR_API_KEY);\r\n_addCollectorHeaderQsMapping(STR_TIME_DELTA_TO_APPLY, STR_TIME_DELTA_TO_APPLY);\r\n_addCollectorHeaderQsMapping(STR_UPLOAD_TIME, STR_UPLOAD_TIME);\r\n_addCollectorHeaderQsMapping(STR_AUTH_XTOKEN, STR_AUTH_XTOKEN);\r\nfunction _getResponseText(xhr) {\r\n    try {\r\n        return xhr.responseText;\r\n    }\r\n    catch (e) {\r\n        // Best effort, as XHR may throw while XDR wont so just ignore\r\n    }\r\n    return STR_EMPTY;\r\n}\r\nfunction _hasHeader(headers, header) {\r\n    var hasHeader = false;\r\n    if (headers && header) {\r\n        var keys = objKeys(headers);\r\n        if (keys && keys.length > 0) {\r\n            var lowerHeader = header.toLowerCase();\r\n            for (var lp = 0; lp < keys.length; lp++) {\r\n                var value = keys[lp];\r\n                if (value && hasOwnProperty(header, value) &&\r\n                    value.toLowerCase() === lowerHeader) {\r\n                    hasHeader = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasHeader;\r\n}\r\nfunction _addRequestDetails(details, name, value, useHeaders) {\r\n    if (name && value && value.length > 0) {\r\n        if (useHeaders && _collectorQsHeaders[name]) {\r\n            details.hdrs[_collectorQsHeaders[name]] = value;\r\n            details.useHdrs = true;\r\n        }\r\n        else {\r\n            details.url += \"&\" + name + \"=\" + value;\r\n        }\r\n    }\r\n}\r\nfunction _prependTransports(theTransports, newTransports) {\r\n    if (newTransports) {\r\n        if (isNumber(newTransports)) {\r\n            theTransports = [newTransports].concat(theTransports);\r\n        }\r\n        else if (isArray(newTransports)) {\r\n            theTransports = newTransports.concat(theTransports);\r\n        }\r\n    }\r\n    return theTransports;\r\n}\r\n/**\r\n * Class managing the sending of requests.\r\n */\r\nvar HttpManager = /** @class */ (function () {\r\n    /**\r\n     * @constructor\r\n     * @param requestQueue   - The queue that contains the requests to be sent.\r\n     */\r\n    function HttpManager(maxEventsPerBatch, maxConnections, maxRequestRetriesBeforeBackoff, actions, timeoutOverride) {\r\n        this._responseHandlers = [];\r\n        var _urlString = \"?cors=true&\" + STR_CONTENT_TYPE_HEADER.toLowerCase() + \"=\" + DEFAULT_CONTENT_TYPE;\r\n        var _killSwitch = new EVTKillSwitch();\r\n        var _paused = false;\r\n        var _clockSkewManager = new EVTClockSkewManager();\r\n        var _useBeacons = false;\r\n        var _outstandingRequests = 0; // Holds the number of outstanding async requests that have not returned a response yet\r\n        var _postManager;\r\n        var _logger;\r\n        var _sendInterfaces;\r\n        var _core;\r\n        var _customHttpInterface = true;\r\n        var _queryStringParameters = [];\r\n        var _headers = {};\r\n        var _batchQueue = [];\r\n        var _serializer = null;\r\n        var _enableEventTimings = false;\r\n        var _cookieMgr;\r\n        var _isUnloading = false;\r\n        var _useHeaders = false;\r\n        var _xhrTimeout;\r\n        var _disableXhrSync;\r\n        var _disableFetchKeepAlive;\r\n        var _canHaveReducedPayload;\r\n        var _addNoResponse;\r\n        dynamicProto(HttpManager, this, function (_self) {\r\n            var _sendCredentials = true;\r\n            _self.initialize = function (endpointUrl, core, postChannel, httpInterface, channelConfig) {\r\n                var _a;\r\n                if (!channelConfig) {\r\n                    channelConfig = {};\r\n                }\r\n                _urlString = endpointUrl + _urlString;\r\n                _useHeaders = !isUndefined(channelConfig.avoidOptions) ? !channelConfig.avoidOptions : true;\r\n                _core = core;\r\n                _cookieMgr = core.getCookieMgr();\r\n                _enableEventTimings = !_core.config.disableEventTimings;\r\n                var enableCompoundKey = !!_core.config.enableCompoundKey;\r\n                _postManager = postChannel;\r\n                _logger = _postManager.diagLog();\r\n                var valueSanitizer = channelConfig.valueSanitizer;\r\n                var stringifyObjects = channelConfig.stringifyObjects;\r\n                if (!isUndefined(channelConfig.enableCompoundKey)) {\r\n                    enableCompoundKey = !!channelConfig.enableCompoundKey;\r\n                }\r\n                _xhrTimeout = channelConfig.xhrTimeout;\r\n                _disableXhrSync = !!channelConfig.disableXhrSync;\r\n                _disableFetchKeepAlive = !!channelConfig.disableFetchKeepAlive;\r\n                _addNoResponse = channelConfig.addNoResponse !== false;\r\n                _useBeacons = !isReactNative(); // Only use beacons if not running in React Native\r\n                _serializer = new Serializer(_core, valueSanitizer, stringifyObjects, enableCompoundKey);\r\n                if (!isNullOrUndefined(channelConfig.useSendBeacon)) {\r\n                    _useBeacons = !!channelConfig.useSendBeacon;\r\n                }\r\n                var syncHttpInterface = httpInterface;\r\n                var beaconHttpInterface = channelConfig.alwaysUseXhrOverride ? httpInterface : null;\r\n                var fetchSyncHttpInterface = channelConfig.alwaysUseXhrOverride ? httpInterface : null;\r\n                var beaconUnloadTransports = [3 /* TransportType.Beacon */, 2 /* TransportType.Fetch */];\r\n                if (!httpInterface) {\r\n                    _customHttpInterface = false;\r\n                    var location_1 = getLocation();\r\n                    if (location_1 && location_1.protocol && location_1.protocol.toLowerCase() === \"file:\") {\r\n                        // Special case where a local html file fails with a CORS error on Chromium browsers\r\n                        _sendCredentials = false;\r\n                    }\r\n                    var theTransports = [];\r\n                    if (isReactNative()) {\r\n                        // Use Fetch or XDR/XHR\r\n                        theTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */];\r\n                        beaconUnloadTransports = [2 /* TransportType.Fetch */, 1 /* TransportType.Xhr */, 3 /* TransportType.Beacon */];\r\n                    }\r\n                    else {\r\n                        // Use XDR/XHR, Fetch or beacons\r\n                        theTransports = [1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */];\r\n                    }\r\n                    // Prefix any user requested transport(s) values\r\n                    theTransports = _prependTransports(theTransports, channelConfig.transports);\r\n                    httpInterface = _getSenderInterface(theTransports, false);\r\n                    if (!httpInterface) {\r\n                        _warnToConsole(_logger, \"No available transport to send events\");\r\n                    }\r\n                    syncHttpInterface = _getSenderInterface(theTransports, true);\r\n                }\r\n                if (!beaconHttpInterface) {\r\n                    // Allow overriding the usage of sendBeacon\r\n                    beaconUnloadTransports = _prependTransports(beaconUnloadTransports, channelConfig.unloadTransports);\r\n                    beaconHttpInterface = _getSenderInterface(beaconUnloadTransports, true);\r\n                }\r\n                _canHaveReducedPayload = !_customHttpInterface && ((_useBeacons && isBeaconsSupported()) || (!_disableFetchKeepAlive && isFetchSupported(true)));\r\n                _sendInterfaces = (_a = {},\r\n                    _a[0 /* EventSendType.Batched */] = httpInterface,\r\n                    _a[1 /* EventSendType.Synchronous */] = syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */, 2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true),\r\n                    _a[2 /* EventSendType.SendBeacon */] = beaconHttpInterface || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                    _a[3 /* EventSendType.SyncFetch */] = fetchSyncHttpInterface || _getSenderInterface([2 /* TransportType.Fetch */, 3 /* TransportType.Beacon */], true) || syncHttpInterface || _getSenderInterface([1 /* TransportType.Xhr */], true),\r\n                    _a);\r\n            };\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            function _getSenderInterface(transports, syncSupport) {\r\n                var transportType = 0 /* TransportType.NotSet */;\r\n                var sendPostFunc = null;\r\n                var lp = 0;\r\n                while (sendPostFunc == null && lp < transports.length) {\r\n                    transportType = transports[lp];\r\n                    if (transportType === 1 /* TransportType.Xhr */) {\r\n                        if (useXDomainRequest()) {\r\n                            sendPostFunc = _xdrSendPost;\r\n                        }\r\n                        else if (isXhrSupported()) {\r\n                            sendPostFunc = _xhrSendPost;\r\n                        }\r\n                    }\r\n                    else if (transportType === 2 /* TransportType.Fetch */ && isFetchSupported(syncSupport) && (!syncSupport || (syncSupport && !_disableFetchKeepAlive))) {\r\n                        sendPostFunc = _fetchSendPost;\r\n                    }\r\n                    else if (_useBeacons && transportType === 3 /* TransportType.Beacon */ && isBeaconsSupported()) {\r\n                        sendPostFunc = _beaconSendPost;\r\n                    }\r\n                    lp++;\r\n                }\r\n                if (sendPostFunc) {\r\n                    return {\r\n                        _transport: transportType,\r\n                        _isSync: syncSupport,\r\n                        sendPOST: sendPostFunc\r\n                    };\r\n                }\r\n                return null;\r\n            }\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_sendInterfaces[0 /* EventSendType.Batched */], _killSwitch, _serializer, _sendInterfaces];\r\n            };\r\n            function _xdrSendPost(payload, oncomplete, sync) {\r\n                // It doesn't support custom headers, so no action is taken with current requestHeaders\r\n                var xdr = new XDomainRequest();\r\n                xdr.open(STR_POST_METHOD, payload.urlString);\r\n                if (payload.timeout) {\r\n                    xdr.timeout = payload.timeout;\r\n                }\r\n                // can't get the status code in xdr.\r\n                xdr.onload = function () {\r\n                    // we will assume onload means the request succeeded.\r\n                    var response = _getResponseText(xdr);\r\n                    _doOnComplete(oncomplete, 200, {}, response);\r\n                    _handleCollectorResponse(response);\r\n                };\r\n                // we will assume onerror means we need to drop the events.\r\n                xdr.onerror = function () {\r\n                    _doOnComplete(oncomplete, 400, {});\r\n                };\r\n                // we will assume ontimeout means we need to retry the events.\r\n                xdr.ontimeout = function () {\r\n                    _doOnComplete(oncomplete, 500, {});\r\n                };\r\n                // https://cypressnorth.com/web-programming-and-development/internet-explorer-aborting-ajax-requests-fixed/\r\n                // tslint:disable-next-line:no-empty\r\n                xdr.onprogress = function () { };\r\n                if (sync) {\r\n                    xdr.send(payload.data);\r\n                }\r\n                else {\r\n                    timeoutOverride.set(function () {\r\n                        xdr.send(payload.data);\r\n                    }, 0);\r\n                }\r\n            }\r\n            function _fetchSendPost(payload, oncomplete, sync) {\r\n                var _a;\r\n                var theUrl = payload.urlString;\r\n                var ignoreResponse = false;\r\n                var responseHandled = false;\r\n                var requestInit = (_a = {\r\n                        body: payload.data,\r\n                        method: STR_POST_METHOD\r\n                    },\r\n                    _a[STR_DISABLED_PROPERTY_NAME] = true,\r\n                    _a);\r\n                if (sync) {\r\n                    requestInit.keepalive = true;\r\n                    if (payload._sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        // As a sync request (during unload), it is unlikely that we will get a chance to process the response so\r\n                        // just like beacon send assume that the events have been accepted and processed\r\n                        ignoreResponse = true;\r\n                        if (_addNoResponse) {\r\n                            theUrl += _noResponseQs;\r\n                        }\r\n                    }\r\n                }\r\n                if (_sendCredentials) {\r\n                    // Don't send credentials when URL is file://\r\n                    requestInit.credentials = \"include\";\r\n                }\r\n                // Only add headers if there are headers to add, due to issue with some polyfills\r\n                if (payload.headers && objKeys(payload.headers).length > 0) {\r\n                    requestInit.headers = payload.headers;\r\n                }\r\n                fetch(theUrl, requestInit).then(function (response) {\r\n                    var headerMap = {};\r\n                    var responseText = STR_EMPTY;\r\n                    var headers = response.headers;\r\n                    if (headers) {\r\n                        headers[\"forEach\"](function (value, name) {\r\n                            headerMap[name] = value;\r\n                        });\r\n                    }\r\n                    if (response.body) {\r\n                        response.text().then(function (text) {\r\n                            responseText = text;\r\n                        });\r\n                    }\r\n                    if (!responseHandled) {\r\n                        responseHandled = true;\r\n                        _doOnComplete(oncomplete, response.status, headerMap, responseText);\r\n                        _handleCollectorResponse(responseText);\r\n                    }\r\n                })[\"catch\"](function (error) {\r\n                    // In case there is an error in the request. Set the status to 0\r\n                    // so that the events can be retried later.\r\n                    if (!responseHandled) {\r\n                        responseHandled = true;\r\n                        _doOnComplete(oncomplete, 0, {});\r\n                    }\r\n                });\r\n                if (ignoreResponse && !responseHandled) {\r\n                    // Assume success during unload processing\r\n                    responseHandled = true;\r\n                    _doOnComplete(oncomplete, 200, {});\r\n                }\r\n                if (!responseHandled && payload.timeout > 0) {\r\n                    // Simulate timeout\r\n                    timeoutOverride.set(function () {\r\n                        if (!responseHandled) {\r\n                            // Assume a 500 response (which will cause a retry)\r\n                            responseHandled = true;\r\n                            _doOnComplete(oncomplete, 500, {});\r\n                        }\r\n                    }, payload.timeout);\r\n                }\r\n            }\r\n            function _xhrSendPost(payload, oncomplete, sync) {\r\n                var theUrl = payload.urlString;\r\n                function _appendHeader(theHeaders, xhr, name) {\r\n                    if (!theHeaders[name] && xhr && xhr.getResponseHeader) {\r\n                        var value = xhr.getResponseHeader(name);\r\n                        if (value) {\r\n                            theHeaders[name] = strTrim(value);\r\n                        }\r\n                    }\r\n                    return theHeaders;\r\n                }\r\n                function _getAllResponseHeaders(xhr) {\r\n                    var theHeaders = {};\r\n                    if (!xhr.getAllResponseHeaders) {\r\n                        // Firefox 2-63 doesn't have getAllResponseHeaders function but it does have getResponseHeader\r\n                        // Only call these if getAllResponseHeaders doesn't exist, otherwise we can get invalid response errors\r\n                        // as collector is not currently returning the correct header to allow JS to access these headers\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_TIME_DELTA_HEADER);\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_HEADER);\r\n                        theHeaders = _appendHeader(theHeaders, xhr, STR_KILL_DURATION_SECONDS_HEADER);\r\n                    }\r\n                    else {\r\n                        theHeaders = _convertAllHeadersToMap(xhr.getAllResponseHeaders());\r\n                    }\r\n                    return theHeaders;\r\n                }\r\n                function xhrComplete(xhr, responseTxt) {\r\n                    _doOnComplete(oncomplete, xhr.status, _getAllResponseHeaders(xhr), responseTxt);\r\n                }\r\n                if (sync && payload.disableXhrSync) {\r\n                    sync = false;\r\n                }\r\n                var xhrRequest = openXhr(STR_POST_METHOD, theUrl, _sendCredentials, true, sync, payload.timeout);\r\n                // Set custom headers (e.g. gzip) here (after open())\r\n                objForEachKey(payload.headers, function (name, value) {\r\n                    xhrRequest.setRequestHeader(name, value);\r\n                });\r\n                xhrRequest.onload = function () {\r\n                    var response = _getResponseText(xhrRequest);\r\n                    xhrComplete(xhrRequest, response);\r\n                    _handleCollectorResponse(response);\r\n                };\r\n                xhrRequest.onerror = function () {\r\n                    xhrComplete(xhrRequest);\r\n                };\r\n                xhrRequest.ontimeout = function () {\r\n                    xhrComplete(xhrRequest);\r\n                };\r\n                xhrRequest.send(payload.data);\r\n            }\r\n            function _doOnComplete(oncomplete, status, headers, response) {\r\n                try {\r\n                    oncomplete(status, headers, response);\r\n                }\r\n                catch (e) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 518 /* _eExtendedInternalMessageId.SendPostOnCompleteFailure */, dumpObj(e));\r\n                }\r\n            }\r\n            function _beaconSendPost(payload, oncomplete, sync) {\r\n                // Custom headers not supported in sendBeacon payload.headers would be ignored\r\n                var internalPayloadData = payload;\r\n                var status = 200;\r\n                var thePayload = internalPayloadData._thePayload;\r\n                var theUrl = payload.urlString + (_addNoResponse ? _noResponseQs : STR_EMPTY);\r\n                try {\r\n                    var nav_1 = getNavigator();\r\n                    if (!nav_1.sendBeacon(theUrl, payload.data)) {\r\n                        if (thePayload) {\r\n                            // Failed to send entire payload so try and split data and try to send as much events as possible\r\n                            var droppedBatches_1 = [];\r\n                            arrForEach(thePayload.batches, function (theBatch) {\r\n                                if (droppedBatches_1 && theBatch && theBatch.count() > 0) {\r\n                                    var theEvents = theBatch.events();\r\n                                    for (var lp = 0; lp < theEvents.length; lp++) {\r\n                                        if (!nav_1.sendBeacon(theUrl, _serializer.getEventBlob(theEvents[lp]))) {\r\n                                            // Can't send anymore, so split the batch and drop the rest\r\n                                            droppedBatches_1.push(theBatch.split(lp));\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    // Remove all of the events from the existing batch in the payload as the copy includes the original\r\n                                    droppedBatches_1.push(theBatch.split(0));\r\n                                }\r\n                            });\r\n                            _sendBatchesNotification(droppedBatches_1, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload.sendType, true);\r\n                        }\r\n                        else {\r\n                            status = 0;\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    _warnToConsole(_logger, \"Failed to send telemetry using sendBeacon API. Ex:\" + dumpObj(ex));\r\n                    status = 0;\r\n                }\r\n                finally {\r\n                    _doOnComplete(oncomplete, status, {}, STR_EMPTY);\r\n                }\r\n            }\r\n            function _isBeaconPayload(sendType) {\r\n                // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit, so treat both as a beacon send\r\n                return sendType === 2 /* EventSendType.SendBeacon */ || sendType === 3 /* EventSendType.SyncFetch */;\r\n            }\r\n            function _adjustSendType(sendType) {\r\n                if (_isUnloading && _isBeaconPayload(sendType)) {\r\n                    sendType = 2 /* EventSendType.SendBeacon */;\r\n                }\r\n                return sendType;\r\n            }\r\n            _self.addQueryStringParameter = function (name, value) {\r\n                for (var i = 0; i < _queryStringParameters.length; i++) {\r\n                    if (_queryStringParameters[i].name === name) {\r\n                        _queryStringParameters[i].value = value;\r\n                        return;\r\n                    }\r\n                }\r\n                _queryStringParameters.push({ name: name, value: value });\r\n            };\r\n            _self.addHeader = function (name, value) {\r\n                _headers[name] = value;\r\n            };\r\n            _self.canSendRequest = function () {\r\n                return _hasIdleConnection() && _clockSkewManager.allowRequestSending();\r\n            };\r\n            _self.sendQueuedRequests = function (sendType, sendReason) {\r\n                if (isUndefined(sendType)) {\r\n                    sendType = 0 /* EventSendType.Batched */;\r\n                }\r\n                if (_isUnloading) {\r\n                    sendType = _adjustSendType(sendType);\r\n                    sendReason = 2 /* SendRequestReason.Unload */;\r\n                }\r\n                if (_canSendPayload(_batchQueue, sendType, 0)) {\r\n                    _sendBatches(_clearQueue(), 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            _self.isCompletelyIdle = function () {\r\n                return !_paused && _outstandingRequests === 0 && _batchQueue.length === 0;\r\n            };\r\n            _self.setUnloading = function (value) {\r\n                _isUnloading = value;\r\n            };\r\n            _self.addBatch = function (theBatch) {\r\n                if (theBatch && theBatch.count() > 0) {\r\n                    // Try and kill the event faster\r\n                    if (_killSwitch.isTenantKilled(theBatch.iKey())) {\r\n                        return false;\r\n                    }\r\n                    _batchQueue.push(theBatch);\r\n                }\r\n                return true;\r\n            };\r\n            /**\r\n             * Queue all the remaining requests to be sent. The requests will be\r\n             * sent using HTML5 Beacons if they are available.\r\n             */\r\n            _self.teardown = function () {\r\n                if (_batchQueue.length > 0) {\r\n                    _sendBatches(_clearQueue(), 0, true, 2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            };\r\n            /**\r\n             * Pause the sending of requests. No new requests will be sent.\r\n             */\r\n            _self.pause = function () {\r\n                _paused = true;\r\n            };\r\n            /**\r\n             * Resume the sending of requests.\r\n             */\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _self.sendQueuedRequests(0 /* EventSendType.Batched */, 4 /* SendRequestReason.Resumed */);\r\n            };\r\n            /**\r\n             * Sends a request synchronously to the Aria collector. This api is used to send\r\n             * a request containing a single immediate event.\r\n             *\r\n             * @param batch - The request to be sent.\r\n             * @param sendReason   - The token used to send the request.\r\n             */\r\n            _self.sendSynchronousBatch = function (batch, sendType, sendReason) {\r\n                // This will not take into account the max connections restriction. Since this is sync, we can\r\n                // only send one of this request at a time and thus should not worry about multiple connections\r\n                // being used to send synchronous events.\r\n                // Increment active connection since we are still going to use a connection to send the request.\r\n                if (batch && batch.count() > 0) {\r\n                    if (isNullOrUndefined(sendType)) {\r\n                        sendType = 1 /* EventSendType.Synchronous */;\r\n                    }\r\n                    if (_isUnloading) {\r\n                        sendType = _adjustSendType(sendType);\r\n                        sendReason = 2 /* SendRequestReason.Unload */;\r\n                    }\r\n                    // For sync requests we will not wait for the clock skew.\r\n                    _sendBatches([batch], 0, false, sendType, sendReason || 0 /* SendRequestReason.Undefined */);\r\n                }\r\n            };\r\n            function _hasIdleConnection() {\r\n                return !_paused && _outstandingRequests < maxConnections;\r\n            }\r\n            function _clearQueue() {\r\n                var theQueue = _batchQueue;\r\n                _batchQueue = [];\r\n                return theQueue;\r\n            }\r\n            function _canSendPayload(theBatches, sendType, retryCnt) {\r\n                var result = false;\r\n                if (theBatches && theBatches.length > 0 && !_paused && _sendInterfaces[sendType] && _serializer) {\r\n                    // Always attempt to send synchronous events don't wait for idle or clockSkew\r\n                    // and don't block retry requests if clockSkew is not yet set\r\n                    result = (sendType !== 0 /* EventSendType.Batched */) || (_hasIdleConnection() && (retryCnt > 0 || _clockSkewManager.allowRequestSending()));\r\n                }\r\n                return result;\r\n            }\r\n            function _createDebugBatches(theBatches) {\r\n                var values = {};\r\n                if (theBatches) {\r\n                    arrForEach(theBatches, function (theBatch, idx) {\r\n                        values[idx] = {\r\n                            iKey: theBatch.iKey(),\r\n                            evts: theBatch.events()\r\n                        };\r\n                    });\r\n                }\r\n                return values;\r\n            }\r\n            function _sendBatches(theBatches, retryCount, isTeardown, sendType, sendReason) {\r\n                if (!theBatches || theBatches.length === 0) {\r\n                    // Nothing to do\r\n                    return;\r\n                }\r\n                if (_paused) {\r\n                    _sendBatchesNotification(theBatches, 1 /* EventBatchNotificationReason.Paused */, sendType);\r\n                    return;\r\n                }\r\n                // Make sure that if we are unloading the sendType is a supported version\r\n                sendType = _adjustSendType(sendType);\r\n                try {\r\n                    var orgBatches_1 = theBatches;\r\n                    var isSynchronous_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                    doPerf(_core, function () { return \"HttpManager:_sendBatches\"; }, function (perfEvt) {\r\n                        if (perfEvt) {\r\n                            // Perf Monitoring is enabled, so create a \"Quick\" copy of the original batches so we still report\r\n                            // the original values as part of the perfEvent. This is because theBatches uses .shift() to remove each\r\n                            // batch as they are processed - removing from the original array, so by the time the _createDebugBatches()\r\n                            // function is called the passed in value has changed and therefore the reported value for the perfEvent is incorrect\r\n                            theBatches = theBatches.slice(0);\r\n                        }\r\n                        var droppedBatches = [];\r\n                        var thePayload = null;\r\n                        var serializationStart = getTime();\r\n                        var sendInterface = _sendInterfaces[sendType] || (isSynchronous_1 ? _sendInterfaces[1 /* EventSendType.Synchronous */] : _sendInterfaces[0 /* EventSendType.Batched */]);\r\n                        var sendTransport = sendInterface && sendInterface._transport;\r\n                        // Sync Fetch has the same payload limitation as sendBeacon -- 64kb limit\r\n                        var isReducedPayload = _canHaveReducedPayload && (_isUnloading || _isBeaconPayload(sendType) || (sendTransport === 3 /* TransportType.Beacon */ || (sendInterface._isSync && sendTransport === 2 /* TransportType.Fetch */)));\r\n                        while (_canSendPayload(theBatches, sendType, retryCount)) {\r\n                            var theBatch = theBatches.shift();\r\n                            if (theBatch && theBatch.count() > 0) {\r\n                                if (!_killSwitch.isTenantKilled(theBatch.iKey())) {\r\n                                    // Make sure we have a payload object\r\n                                    thePayload = thePayload || _serializer.createPayload(retryCount, isTeardown, isSynchronous_1, isReducedPayload, sendReason, sendType);\r\n                                    // Add the batch to the current payload\r\n                                    if (!_serializer.appendPayload(thePayload, theBatch, maxEventsPerBatch)) {\r\n                                        // Entire batch was not added so send the payload and retry adding this batch\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        theBatches = [theBatch].concat(theBatches);\r\n                                        thePayload = null;\r\n                                    }\r\n                                    else if (thePayload.overflow !== null) {\r\n                                        // Total Payload size was exceeded so send the payload and add the unsent as the next batch to send\r\n                                        theBatches = [thePayload.overflow].concat(theBatches);\r\n                                        thePayload.overflow = null;\r\n                                        _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                                        serializationStart = getTime();\r\n                                        thePayload = null;\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    droppedBatches.push(theBatch);\r\n                                }\r\n                            }\r\n                        }\r\n                        // Make sure to flush any remaining payload\r\n                        if (thePayload) {\r\n                            _doPayloadSend(thePayload, serializationStart, getTime(), sendReason);\r\n                        }\r\n                        if (theBatches.length > 0) {\r\n                            // Add any unsent batches back to the head of the queue\r\n                            _batchQueue = theBatches.concat(_batchQueue);\r\n                        }\r\n                        // Now send notification about any dropped events\r\n                        _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, sendType);\r\n                    }, function () { return ({ batches: _createDebugBatches(orgBatches_1), retryCount: retryCount, isTeardown: isTeardown, isSynchronous: isSynchronous_1, sendReason: sendReason, useSendBeacon: _isBeaconPayload(sendType), sendType: sendType }); }, !isSynchronous_1);\r\n                }\r\n                catch (ex) {\r\n                    _throwInternal(_logger, 2 /* eLoggingSeverity.WARNING */, 48 /* _eInternalMessageId.CannotSerializeObject */, \"Unexpected Exception sending batch: \" + dumpObj(ex));\r\n                }\r\n            }\r\n            function _buildRequestDetails(thePayload, useHeaders) {\r\n                var requestDetails = {\r\n                    url: _urlString,\r\n                    hdrs: {},\r\n                    useHdrs: false // Assume no headers\r\n                };\r\n                if (!useHeaders) {\r\n                    // Attempt to map headers to a query string if possible\r\n                    objForEachKey(_headers, function (name, value) {\r\n                        if (_collectorHeaderToQs[name]) {\r\n                            _addRequestDetails(requestDetails, _collectorHeaderToQs[name], value, false);\r\n                        }\r\n                        else {\r\n                            // No mapping, so just include in the headers anyway (may not get sent if using sendBeacon())\r\n                            requestDetails.hdrs[name] = value;\r\n                            requestDetails.useHdrs = true;\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    // Copy the pre-defined headers into the payload headers\r\n                    requestDetails.hdrs = extend(requestDetails.hdrs, _headers);\r\n                    requestDetails.useHdrs = (objKeys(requestDetails.hdrs).length > 0);\r\n                }\r\n                _addRequestDetails(requestDetails, STR_CLIENT_ID, \"NO_AUTH\", useHeaders);\r\n                _addRequestDetails(requestDetails, STR_CLIENT_VERSION, FullVersionString, useHeaders);\r\n                var apiQsKeys = STR_EMPTY;\r\n                arrForEach(thePayload.apiKeys, function (apiKey) {\r\n                    if (apiQsKeys.length > 0) {\r\n                        apiQsKeys += \",\";\r\n                    }\r\n                    apiQsKeys += apiKey;\r\n                });\r\n                _addRequestDetails(requestDetails, STR_API_KEY, apiQsKeys, useHeaders);\r\n                _addRequestDetails(requestDetails, STR_UPLOAD_TIME, dateNow().toString(), useHeaders);\r\n                var msfpc = _getMsfpc(thePayload);\r\n                if (isValueAssigned(msfpc)) {\r\n                    requestDetails.url += \"&ext.intweb.msfpc=\" + msfpc;\r\n                }\r\n                if (_clockSkewManager.shouldAddClockSkewHeaders()) {\r\n                    _addRequestDetails(requestDetails, STR_TIME_DELTA_TO_APPLY, _clockSkewManager.getClockSkewHeaderValue(), useHeaders);\r\n                }\r\n                if (_core.getWParam) {\r\n                    var wParam = _core.getWParam();\r\n                    if (wParam >= 0) {\r\n                        requestDetails.url += \"&w=\" + wParam;\r\n                    }\r\n                }\r\n                for (var i = 0; i < _queryStringParameters.length; i++) {\r\n                    requestDetails.url += \"&\" + _queryStringParameters[i].name + \"=\" + _queryStringParameters[i].value;\r\n                }\r\n                return requestDetails;\r\n            }\r\n            function _setTimingValue(timings, name, value) {\r\n                timings[name] = timings[name] || {};\r\n                timings[name][_postManager.identifier] = value;\r\n            }\r\n            function _doPayloadSend(thePayload, serializationStart, serializationCompleted, sendReason) {\r\n                if (thePayload && thePayload.payloadBlob && thePayload.payloadBlob.length > 0) {\r\n                    var useSendHook_1 = !!_self.sendHook;\r\n                    var sendInterface_1 = _sendInterfaces[thePayload.sendType];\r\n                    // Send all data using a beacon style transport if closing mode is on or channel was teared down\r\n                    if (!_isBeaconPayload(thePayload.sendType) && thePayload.isBeacon && thePayload.sendReason === 2 /* SendRequestReason.Unload */) {\r\n                        sendInterface_1 = _sendInterfaces[2 /* EventSendType.SendBeacon */] || _sendInterfaces[3 /* EventSendType.SyncFetch */] || sendInterface_1;\r\n                    }\r\n                    var useHeaders_1 = _useHeaders;\r\n                    // Disable header usage if we know we are using sendBeacon as additional headers are not supported\r\n                    if (thePayload.isBeacon || sendInterface_1._transport === 3 /* TransportType.Beacon */) {\r\n                        useHeaders_1 = false;\r\n                    }\r\n                    var requestDetails_1 = _buildRequestDetails(thePayload, useHeaders_1);\r\n                    useHeaders_1 = useHeaders_1 || requestDetails_1.useHdrs;\r\n                    var sendEventStart_1 = getTime();\r\n                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend\"; }, function () {\r\n                        // Increment the send attempt count and add timings after packaging (So it's not serialized in the 1st attempt)\r\n                        for (var batchLp = 0; batchLp < thePayload.batches.length; batchLp++) {\r\n                            var theBatch = thePayload.batches[batchLp];\r\n                            var theEvents = theBatch.events();\r\n                            for (var evtLp = 0; evtLp < theEvents.length; evtLp++) {\r\n                                var telemetryItem = theEvents[evtLp];\r\n                                if (_enableEventTimings) {\r\n                                    var timings = telemetryItem.timings = telemetryItem.timings || {};\r\n                                    _setTimingValue(timings, \"sendEventStart\", sendEventStart_1);\r\n                                    _setTimingValue(timings, \"serializationStart\", serializationStart);\r\n                                    _setTimingValue(timings, \"serializationCompleted\", serializationCompleted);\r\n                                }\r\n                                telemetryItem[strSendAttempt] > 0 ? telemetryItem[strSendAttempt]++ : telemetryItem[strSendAttempt] = 1;\r\n                            }\r\n                        }\r\n                        // Note: always sending this notification in a synchronous manner.\r\n                        _sendBatchesNotification(thePayload.batches, (1000 /* EventBatchNotificationReason.SendingUndefined */ + (sendReason || 0 /* SendRequestReason.Undefined */)), thePayload.sendType, true);\r\n                        // Disabling the use of const because of Issue: \r\n                        // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                        // eslint-disable-next-line prefer-const\r\n                        var orgPayloadData = {\r\n                            data: thePayload.payloadBlob,\r\n                            urlString: requestDetails_1.url,\r\n                            headers: requestDetails_1.hdrs,\r\n                            _thePayload: thePayload,\r\n                            _sendReason: sendReason,\r\n                            timeout: _xhrTimeout,\r\n                            disableXhrSync: _disableXhrSync,\r\n                            disableFetchKeepAlive: _disableFetchKeepAlive\r\n                        };\r\n                        // Only automatically add the following headers if already sending headers and we are not attempting to avoid an options call\r\n                        if (useHeaders_1) {\r\n                            if (!_hasHeader(orgPayloadData.headers, STR_CACHE_CONTROL)) {\r\n                                orgPayloadData.headers[STR_CACHE_CONTROL] = DEFAULT_CACHE_CONTROL;\r\n                            }\r\n                            if (!_hasHeader(orgPayloadData.headers, STR_CONTENT_TYPE_HEADER)) {\r\n                                orgPayloadData.headers[STR_CONTENT_TYPE_HEADER] = DEFAULT_CONTENT_TYPE;\r\n                            }\r\n                        }\r\n                        var sender = null;\r\n                        if (sendInterface_1) {\r\n                            // Send sync requests if the request is immediate or we are tearing down telemetry.\r\n                            sender = function (payload) {\r\n                                // Notify the clock skew manager that we are sending the first request (Potentially blocking all further requests)\r\n                                _clockSkewManager.firstRequestSent();\r\n                                var onComplete = function (status, headers) {\r\n                                    _retryRequestIfNeeded(status, headers, thePayload, sendReason);\r\n                                };\r\n                                var isSync = thePayload.isTeardown || thePayload.isSync;\r\n                                try {\r\n                                    sendInterface_1.sendPOST(payload, onComplete, isSync);\r\n                                    if (_self.sendListener) {\r\n                                        // Send the original payload to the listener\r\n                                        _self.sendListener(orgPayloadData, payload, isSync, thePayload.isBeacon);\r\n                                    }\r\n                                }\r\n                                catch (ex) {\r\n                                    _warnToConsole(_logger, \"Unexpected exception sending payload. Ex:\" + dumpObj(ex));\r\n                                    _doOnComplete(onComplete, 0, {});\r\n                                }\r\n                            };\r\n                        }\r\n                        doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sender\"; }, function () {\r\n                            if (sender) {\r\n                                if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                                    _outstandingRequests++;\r\n                                }\r\n                                // Only call the hook if it's defined and we are not using sendBeacon as additional headers are not supported\r\n                                if (useSendHook_1 && !thePayload.isBeacon && sendInterface_1._transport !== 3 /* TransportType.Beacon */) {\r\n                                    // Create a new IPayloadData that is sent into the hook method, so that the hook method\r\n                                    // can't change the object references to the orgPayloadData (it can still change the content -- mainly the headers)\r\n                                    // Disabling the use of const because of Issue: \r\n                                    // - Task 9227844: [1DS] Some environments and packagers automatically \"freeze\" objects which are defined as const which causes any mutations to throw\r\n                                    // eslint-disable-next-line prefer-const\r\n                                    var hookData_1 = {\r\n                                        data: orgPayloadData.data,\r\n                                        urlString: orgPayloadData.urlString,\r\n                                        headers: extend({}, orgPayloadData.headers),\r\n                                        timeout: orgPayloadData.timeout,\r\n                                        disableXhrSync: orgPayloadData.disableXhrSync,\r\n                                        disableFetchKeepAlive: orgPayloadData.disableFetchKeepAlive\r\n                                    };\r\n                                    var senderCalled_1 = false;\r\n                                    doPerf(_core, function () { return \"HttpManager:_doPayloadSend.sendHook\"; }, function () {\r\n                                        try {\r\n                                            _self.sendHook(hookData_1, function (payload) {\r\n                                                senderCalled_1 = true;\r\n                                                // Add back the internal properties\r\n                                                if (!_customHttpInterface && !payload._thePayload) {\r\n                                                    payload._thePayload = payload._thePayload || orgPayloadData._thePayload;\r\n                                                    payload._sendReason = payload._sendReason || orgPayloadData._sendReason;\r\n                                                }\r\n                                                sender(payload);\r\n                                            }, thePayload.isSync || thePayload.isTeardown);\r\n                                        }\r\n                                        catch (ex) {\r\n                                            if (!senderCalled_1) {\r\n                                                // The hook never called the sender -- assume that it never will\r\n                                                sender(orgPayloadData);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    sender(orgPayloadData);\r\n                                }\r\n                            }\r\n                        });\r\n                    }, function () { return ({ thePayload: thePayload, serializationStart: serializationStart, serializationCompleted: serializationCompleted, sendReason: sendReason }); }, thePayload.isSync);\r\n                }\r\n                if (thePayload.sizeExceed && thePayload.sizeExceed.length > 0) {\r\n                    // Ensure that we send any discard events for oversize events even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.sizeExceed, 8003 /* EventBatchNotificationReason.SizeLimitExceeded */, thePayload.sendType);\r\n                }\r\n                if (thePayload.failedEvts && thePayload.failedEvts.length > 0) {\r\n                    // Ensure that we send any discard events for events that could not be serialized even when there was no payload to send\r\n                    _sendBatchesNotification(thePayload.failedEvts, 8002 /* EventBatchNotificationReason.InvalidEvent */, thePayload.sendType);\r\n                }\r\n            }\r\n            function _addEventCompletedTimings(theEvents, sendEventCompleted) {\r\n                if (_enableEventTimings) {\r\n                    arrForEach(theEvents, function (theEvent) {\r\n                        var timings = theEvent.timings = theEvent.timings || {};\r\n                        _setTimingValue(timings, \"sendEventCompleted\", sendEventCompleted);\r\n                    });\r\n                }\r\n            }\r\n            function _retryRequestIfNeeded(status, headers, thePayload, sendReason) {\r\n                var reason = 9000 /* EventBatchNotificationReason.ResponseFailure */;\r\n                var droppedBatches = null;\r\n                var isRetrying = false;\r\n                var backOffTrans = false;\r\n                try {\r\n                    var shouldRetry = true;\r\n                    if (typeof status !== strUndefined) {\r\n                        if (headers) {\r\n                            _clockSkewManager.setClockSkew(headers[STR_TIME_DELTA_HEADER]);\r\n                            var killDuration = headers[STR_KILL_DURATION_HEADER] || headers[\"kill-duration-seconds\"];\r\n                            arrForEach(_killSwitch.setKillSwitchTenants(headers[STR_KILL_TOKENS_HEADER], killDuration), function (killToken) {\r\n                                arrForEach(thePayload.batches, function (theBatch) {\r\n                                    if (theBatch.iKey() === killToken) {\r\n                                        // Make sure we have initialized the array\r\n                                        droppedBatches = droppedBatches || [];\r\n                                        // Create a copy of the batch with all of the events (and more importantly the action functions)\r\n                                        var removedEvents = theBatch.split(0);\r\n                                        // And then remove the events for the payload batch and reduce the actual number of processed\r\n                                        thePayload.numEvents -= removedEvents.count();\r\n                                        droppedBatches.push(removedEvents);\r\n                                    }\r\n                                });\r\n                            });\r\n                        }\r\n                        // Disabling triple-equals rule to avoid httpOverrides from failing because they are returning a string value\r\n                        // tslint:disable-next-line:triple-equals\r\n                        if (status == 200 || status == 204) {\r\n                            // Response was successfully sent\r\n                            reason = 200 /* EventBatchNotificationReason.Complete */;\r\n                            return;\r\n                        }\r\n                        if (!retryPolicyShouldRetryForStatus(status) || thePayload.numEvents <= 0) {\r\n                            // Only retry for specific response codes and if there is still events after kill switch processing\r\n                            shouldRetry = false;\r\n                        }\r\n                        // Derive the notification response from the HttpStatus Code\r\n                        reason = 9000 /* EventBatchNotificationReason.ResponseFailure */ + (status % 1000);\r\n                    }\r\n                    if (shouldRetry) {\r\n                        // The events should be retried -- so change notification to requeue them\r\n                        reason = 100 /* EventBatchNotificationReason.RequeueEvents */;\r\n                        var retryCount_1 = thePayload.retryCnt;\r\n                        if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                            // attempt to resend the entire batch\r\n                            if (retryCount_1 < maxRequestRetriesBeforeBackoff) {\r\n                                isRetrying = true;\r\n                                _doAction(function () {\r\n                                    // try to resend the same batches\r\n                                    if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                                        // Reduce the outstanding request count (if this was an async request) as we didn't reduce the count\r\n                                        // previously and we are about to reschedule our retry attempt and we want an attempt to send\r\n                                        // to occur, it's also required to ensure that a follow up handleRequestFinished() call occurs\r\n                                        _outstandingRequests--;\r\n                                    }\r\n                                    _sendBatches(thePayload.batches, retryCount_1 + 1, thePayload.isTeardown, _isUnloading ? 2 /* EventSendType.SendBeacon */ : thePayload.sendType, 5 /* SendRequestReason.Retry */);\r\n                                }, _isUnloading, retryPolicyGetMillisToBackoffForRetry(retryCount_1));\r\n                            }\r\n                            else {\r\n                                backOffTrans = true;\r\n                                if (_isUnloading) {\r\n                                    // we are unloading so don't try and requeue the events otherwise let the events get requeued and resent during the backoff sending\r\n                                    // This will also cause the events to be purged based on the priority (if necessary)\r\n                                    reason = 8001 /* EventBatchNotificationReason.NonRetryableStatus */;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                finally {\r\n                    if (!isRetrying) {\r\n                        // Make sure the clockSkewManager doesn't blocking further sending of requests once we have a proper response\r\n                        // This won't override any previously sent clock Skew value\r\n                        _clockSkewManager.setClockSkew();\r\n                        _handleRequestFinished(thePayload, reason, sendReason, backOffTrans);\r\n                    }\r\n                    _sendBatchesNotification(droppedBatches, 8004 /* EventBatchNotificationReason.KillSwitch */, thePayload.sendType);\r\n                }\r\n            }\r\n            function _handleRequestFinished(thePayload, batchReason, sendReason, backOffTrans) {\r\n                try {\r\n                    if (backOffTrans) {\r\n                        // Slow down the transmission requests\r\n                        _postManager._backOffTransmission();\r\n                    }\r\n                    if (batchReason === 200 /* EventBatchNotificationReason.Complete */) {\r\n                        if (!backOffTrans && !thePayload.isSync) {\r\n                            // We have a successful async response, so the lets open the floodgates\r\n                            // The reason for checking isSync is to avoid unblocking if beacon send occurred as it\r\n                            // doesn't wait for a response.\r\n                            _postManager._clearBackOff();\r\n                        }\r\n                        _addCompleteTimings(thePayload.batches);\r\n                    }\r\n                    // Send the notifications synchronously\r\n                    _sendBatchesNotification(thePayload.batches, batchReason, thePayload.sendType, true);\r\n                }\r\n                finally {\r\n                    if (thePayload.sendType === 0 /* EventSendType.Batched */) {\r\n                        // we always need to decrement this value otherwise the httpmanager locks up and won't send any more events\r\n                        _outstandingRequests--;\r\n                        // Don't try to send additional queued events if this is a retry operation as the retried\r\n                        // response will eventually call _handleRequestFinished for the retried event\r\n                        if (sendReason !== 5 /* SendRequestReason.Retry */) {\r\n                            // Try and send any other queued batched events\r\n                            _self.sendQueuedRequests(thePayload.sendType, sendReason);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function _addCompleteTimings(theBatches) {\r\n                if (_enableEventTimings) {\r\n                    var sendEventCompleted_1 = getTime();\r\n                    arrForEach(theBatches, function (theBatch) {\r\n                        if (theBatch && theBatch.count() > 0) {\r\n                            _addEventCompletedTimings(theBatch.events(), sendEventCompleted_1);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            function _doAction(cb, isSync, interval) {\r\n                if (isSync) {\r\n                    cb();\r\n                }\r\n                else {\r\n                    timeoutOverride.set(cb, interval);\r\n                }\r\n            }\r\n            /**\r\n            * Converts the XHR getAllResponseHeaders to a map containing the header key and value.\r\n            */\r\n            // tslint:disable-next-line: align\r\n            function _convertAllHeadersToMap(headersString) {\r\n                var headers = {};\r\n                if (isString(headersString)) {\r\n                    var headersArray = strTrim(headersString).split(/[\\r\\n]+/);\r\n                    arrForEach(headersArray, function (headerEntry) {\r\n                        if (headerEntry) {\r\n                            var idx = headerEntry.indexOf(\": \");\r\n                            if (idx !== -1) {\r\n                                // The new spec has the headers returning all as lowercase -- but not all browsers do this yet\r\n                                var header = strTrim(headerEntry.substring(0, idx)).toLowerCase();\r\n                                var value = strTrim(headerEntry.substring(idx + 1));\r\n                                headers[header] = value;\r\n                            }\r\n                            else {\r\n                                headers[strTrim(headerEntry)] = 1;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return headers;\r\n            }\r\n            function _getMsfpc(thePayload) {\r\n                for (var lp = 0; lp < thePayload.batches.length; lp++) {\r\n                    var msfpc = thePayload.batches[lp].Msfpc();\r\n                    if (msfpc) {\r\n                        return encodeURIComponent(msfpc);\r\n                    }\r\n                }\r\n                return STR_EMPTY;\r\n            }\r\n            function _handleCollectorResponse(responseText) {\r\n                var responseHandlers = _self._responseHandlers;\r\n                try {\r\n                    for (var i = 0; i < responseHandlers.length; i++) {\r\n                        try {\r\n                            responseHandlers[i](responseText);\r\n                        }\r\n                        catch (e) {\r\n                            _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 519 /* _eExtendedInternalMessageId.PostResponseHandler */, \"Response handler failed: \" + e);\r\n                        }\r\n                    }\r\n                    if (responseText) {\r\n                        var response = JSON.parse(responseText);\r\n                        if (isValueAssigned(response.webResult) && isValueAssigned(response.webResult[STR_MSFPC])) {\r\n                            // Set cookie\r\n                            _cookieMgr.set(\"MSFPC\", response.webResult[STR_MSFPC], 365 * 86400);\r\n                        }\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Doing nothing\r\n                }\r\n            }\r\n            function _sendBatchesNotification(theBatches, batchReason, sendType, sendSync) {\r\n                if (theBatches && theBatches.length > 0 && actions) {\r\n                    var theAction_1 = actions[_getNotificationAction(batchReason)];\r\n                    if (theAction_1) {\r\n                        var isSyncRequest_1 = sendType !== 0 /* EventSendType.Batched */;\r\n                        doPerf(_core, function () { return \"HttpManager:_sendBatchesNotification\"; }, function () {\r\n                            _doAction(function () {\r\n                                try {\r\n                                    theAction_1.call(actions, theBatches, batchReason, isSyncRequest_1, sendType);\r\n                                }\r\n                                catch (e) {\r\n                                    _throwInternal(_logger, 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, \"send request notification failed: \" + e);\r\n                                }\r\n                            }, sendSync || isSyncRequest_1, 0);\r\n                        }, function () { return ({ batches: _createDebugBatches(theBatches), reason: batchReason, isSync: isSyncRequest_1, sendSync: sendSync, sendType: sendType }); }, !isSyncRequest_1);\r\n                    }\r\n                }\r\n            }\r\n            function _getNotificationAction(reason) {\r\n                var action = _eventActionMap[reason];\r\n                if (!isValueAssigned(action)) {\r\n                    action = STR_OTHER;\r\n                    if (reason >= 9000 /* EventBatchNotificationReason.ResponseFailure */ && reason <= 9999 /* EventBatchNotificationReason.ResponseFailureMax */) {\r\n                        action = STR_RESPONSE_FAIL;\r\n                    }\r\n                    else if (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */) {\r\n                        action = STR_DROPPED;\r\n                    }\r\n                    else if (reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */) {\r\n                        action = STR_SENDING;\r\n                    }\r\n                }\r\n                return action;\r\n            }\r\n        });\r\n    }\r\n// Removed Stub for HttpManager.prototype.initialize.\r\n// Removed Stub for HttpManager.prototype.addQueryStringParameter.\r\n// Removed Stub for HttpManager.prototype.addHeader.\r\n// Removed Stub for HttpManager.prototype.addBatch.\r\n// Removed Stub for HttpManager.prototype.canSendRequest.\r\n// Removed Stub for HttpManager.prototype.sendQueuedRequests.\r\n// Removed Stub for HttpManager.prototype.isCompletelyIdle.\r\n// Removed Stub for HttpManager.prototype.setUnloading.\r\n// Removed Stub for HttpManager.prototype.teardown.\r\n// Removed Stub for HttpManager.prototype.pause.\r\n// Removed Stub for HttpManager.prototype.resume.\r\n// Removed Stub for HttpManager.prototype.sendSynchronousBatch.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    HttpManager.__ieDyn=1;\n\n    return HttpManager;\r\n}());\r\nexport { HttpManager };\r\n//# sourceMappingURL=HttpManager.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\n/**\r\n* TimeoutOverrideWrapper.ts\r\n* @author  Nev Wylie (newylie)\r\n* @copyright Microsoft 2022\r\n* Simple internal timeout wrapper\r\n*/\r\nexport function defaultSetTimeout(callback, ms) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return setTimeout(callback, ms, args);\r\n}\r\nexport function defaultClearTimeout(timeoutId) {\r\n    clearTimeout(timeoutId);\r\n}\r\nexport function createTimeoutWrapper(argSetTimeout, argClearTimeout) {\r\n    return {\r\n        set: argSetTimeout || defaultSetTimeout,\r\n        clear: argClearTimeout || defaultClearTimeout\r\n    };\r\n}\r\n//# sourceMappingURL=TimeoutOverrideWrapper.js.map","/*\n * 1DS JS SDK POST plugin, 3.2.13\n * Copyright (c) Microsoft and contributors. All rights reserved.\n * (Microsoft Internal Only)\n */\nimport { __extendsFn as __extends } from \"@microsoft/applicationinsights-shims\";\r\n/**\r\n* PostManager.ts\r\n* @author Abhilash Panwar (abpanwar); Hector Hernandez (hectorh); Nev Wylie (newylie)\r\n* @copyright Microsoft 2018-2020\r\n*/\r\nimport dynamicProto from \"@microsoft/dynamicproto-js\";\r\nimport { BaseTelemetryPlugin, EventsDiscardedReason, _throwInternal, addPageHideEventListener, addPageShowEventListener, addPageUnloadEventListener, arrForEach, createUniqueNamespace, doPerf, getWindow, isChromium, isNumber, isValueAssigned, mergeEvtNamespace, objDefineAccessors, objForEachKey, optimizeObject, removePageHideEventListener, removePageShowEventListener, removePageUnloadEventListener, setProcessTelemetryTimings } from \"@microsoft/1ds-core-js\";\r\nimport { BE_PROFILE, NRT_PROFILE, RT_PROFILE } from \"./DataModels\";\r\nimport { EventBatch } from \"./EventBatch\";\r\nimport { HttpManager } from \"./HttpManager\";\r\nimport { STR_MSA_DEVICE_TICKET, STR_TRACE, STR_USER } from \"./InternalConstants\";\r\nimport { retryPolicyGetMillisToBackoffForRetry } from \"./RetryPolicy\";\r\nimport { createTimeoutWrapper } from \"./TimeoutOverrideWrapper\";\r\nvar FlushCheckTimer = 0.250; // This needs to be in seconds, so this is 250ms\r\nvar MaxNumberEventPerBatch = 500;\r\nvar EventsDroppedAtOneTime = 20;\r\nvar MaxSendAttempts = 6;\r\nvar MaxSyncUnloadSendAttempts = 2; // Assuming 2 based on beforeunload and unload\r\nvar MaxBackoffCount = 4;\r\nvar MaxConnections = 2;\r\nvar MaxRequestRetriesBeforeBackoff = 1;\r\nvar strEventsDiscarded = \"eventsDiscarded\";\r\nvar strOverrideInstrumentationKey = \"overrideInstrumentationKey\";\r\nvar strMaxEventRetryAttempts = \"maxEventRetryAttempts\";\r\nvar strMaxUnloadEventRetryAttempts = \"maxUnloadEventRetryAttempts\";\r\nvar strAddUnloadCb = \"addUnloadCb\";\r\n/**\r\n * Class that manages adding events to inbound queues and batching of events\r\n * into requests.\r\n */\r\nvar PostChannel = /** @class */ (function (_super) {\r\n    __extends(PostChannel, _super);\r\n    function PostChannel() {\r\n        var _this = _super.call(this) || this;\r\n        _this.identifier = \"PostChannel\";\r\n        _this.priority = 1011;\r\n        _this.version = '3.2.13';\r\n        var _config;\r\n        var _isTeardownCalled = false;\r\n        var _flushCallbackQueue = [];\r\n        var _flushCallbackTimerId = null;\r\n        var _paused = false;\r\n        var _immediateQueueSize = 0;\r\n        var _immediateQueueSizeLimit = 500;\r\n        var _queueSize = 0;\r\n        var _queueSizeLimit = 10000;\r\n        var _profiles = {};\r\n        var _currentProfile = RT_PROFILE;\r\n        var _scheduledTimerId = null;\r\n        var _immediateTimerId = null;\r\n        var _currentBackoffCount = 0;\r\n        var _timerCount = 0;\r\n        var _xhrOverride;\r\n        var _httpManager;\r\n        var _batchQueues = {};\r\n        var _autoFlushEventsLimit;\r\n        // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n        var _autoFlushBatchLimit;\r\n        var _delayedBatchSendLatency = -1;\r\n        var _delayedBatchReason;\r\n        var _optimizeObject = true;\r\n        var _isPageUnloadTriggered = false;\r\n        var _maxEventSendAttempts = MaxSendAttempts;\r\n        var _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n        var _evtNamespace;\r\n        var _timeoutWrapper;\r\n        dynamicProto(PostChannel, _this, function (_self, _base) {\r\n            _initDefaults();\r\n            // Special internal method to allow the DebugPlugin to hook embedded objects\r\n            _self[\"_getDbgPlgTargets\"] = function () {\r\n                return [_httpManager];\r\n            };\r\n            _self.initialize = function (coreConfig, core, extensions) {\r\n                doPerf(core, function () { return \"PostChannel:initialize\"; }, function () {\r\n                    var extendedCore = core;\r\n                    _base.initialize(coreConfig, core, extensions);\r\n                    try {\r\n                        var hasAddUnloadCb = !!core[strAddUnloadCb];\r\n                        _evtNamespace = mergeEvtNamespace(createUniqueNamespace(_self.identifier), core.evtNamespace && core.evtNamespace());\r\n                        var ctx = _self._getTelCtx();\r\n                        coreConfig.extensionConfig[_self.identifier] = coreConfig.extensionConfig[_self.identifier] || {};\r\n                        _config = ctx.getExtCfg(_self.identifier);\r\n                        _timeoutWrapper = createTimeoutWrapper(_config.setTimeoutOverride, _config.clearTimeoutOverride);\r\n                        // Only try and use the optimizeObject() if this appears to be a chromium based browser and it has not been explicitly disabled\r\n                        _optimizeObject = !_config.disableOptimizeObj && isChromium();\r\n                        _hookWParam(extendedCore);\r\n                        if (_config.eventsLimitInMem > 0) {\r\n                            _queueSizeLimit = _config.eventsLimitInMem;\r\n                        }\r\n                        if (_config.immediateEventLimit > 0) {\r\n                            _immediateQueueSizeLimit = _config.immediateEventLimit;\r\n                        }\r\n                        if (_config.autoFlushEventsLimit > 0) {\r\n                            _autoFlushEventsLimit = _config.autoFlushEventsLimit;\r\n                        }\r\n                        if (isNumber(_config[strMaxEventRetryAttempts])) {\r\n                            _maxEventSendAttempts = _config[strMaxEventRetryAttempts];\r\n                        }\r\n                        if (isNumber(_config[strMaxUnloadEventRetryAttempts])) {\r\n                            _maxUnloadEventSendAttempts = _config[strMaxUnloadEventRetryAttempts];\r\n                        }\r\n                        _setAutoLimits();\r\n                        if (_config.httpXHROverride && _config.httpXHROverride.sendPOST) {\r\n                            _xhrOverride = _config.httpXHROverride;\r\n                        }\r\n                        if (isValueAssigned(coreConfig.anonCookieName)) {\r\n                            _httpManager.addQueryStringParameter(\"anoncknm\", coreConfig.anonCookieName);\r\n                        }\r\n                        _httpManager.sendHook = _config.payloadPreprocessor;\r\n                        _httpManager.sendListener = _config.payloadListener;\r\n                        // Override endpointUrl if provided in Post config\r\n                        var endpointUrl = _config.overrideEndpointUrl ? _config.overrideEndpointUrl : coreConfig.endpointUrl;\r\n                        _self._notificationManager = core.getNotifyMgr();\r\n                        _httpManager.initialize(endpointUrl, _self.core, _self, _xhrOverride, _config);\r\n                        var excludePageUnloadEvents = coreConfig.disablePageUnloadEvents || [];\r\n                        // When running in Web browsers try to send all telemetry if page is unloaded\r\n                        addPageUnloadEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                        addPageHideEventListener(_handleUnloadEvents, excludePageUnloadEvents, _evtNamespace);\r\n                        addPageShowEventListener(_handleShowEvents, coreConfig.disablePageShowEvents, _evtNamespace);\r\n                    }\r\n                    catch (e) {\r\n                        // resetting the initialized state because of failure\r\n                        _self.setInitialized(false);\r\n                        throw e;\r\n                    }\r\n                }, function () { return ({ coreConfig: coreConfig, core: core, extensions: extensions }); });\r\n            };\r\n            _self.processTelemetry = function (ev, itemCtx) {\r\n                setProcessTelemetryTimings(ev, _self.identifier);\r\n                itemCtx = _self._getTelCtx(itemCtx);\r\n                // Get the channel instance from the current request/instance\r\n                var channelConfig = itemCtx.getExtCfg(_self.identifier);\r\n                // DisableTelemetry was defined in the config provided during initialization\r\n                var disableTelemetry = !!_config.disableTelemetry;\r\n                if (channelConfig) {\r\n                    // DisableTelemetry is defined in the config for this request/instance\r\n                    disableTelemetry = disableTelemetry || !!channelConfig.disableTelemetry;\r\n                }\r\n                var event = ev;\r\n                if (!disableTelemetry && !_isTeardownCalled) {\r\n                    // Override iKey if provided in Post config if provided for during initialization\r\n                    if (_config[strOverrideInstrumentationKey]) {\r\n                        event.iKey = _config[strOverrideInstrumentationKey];\r\n                    }\r\n                    // Override iKey if provided in Post config if provided for this instance\r\n                    if (channelConfig && channelConfig[strOverrideInstrumentationKey]) {\r\n                        event.iKey = channelConfig[strOverrideInstrumentationKey];\r\n                    }\r\n                    _addEventToQueues(event, true);\r\n                    if (_isPageUnloadTriggered) {\r\n                        // Unload event has been received so we need to try and flush new events\r\n                        _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                    }\r\n                    else {\r\n                        _scheduleTimer();\r\n                    }\r\n                }\r\n                _self.processNext(event, itemCtx);\r\n            };\r\n            _self._doTeardown = function (unloadCtx, unloadState) {\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                _isTeardownCalled = true;\r\n                _httpManager.teardown();\r\n                removePageUnloadEventListener(null, _evtNamespace);\r\n                removePageHideEventListener(null, _evtNamespace);\r\n                removePageShowEventListener(null, _evtNamespace);\r\n                // Just register to remove all events associated with this namespace\r\n                _initDefaults();\r\n            };\r\n            function _hookWParam(extendedCore) {\r\n                var existingGetWParamMethod = extendedCore.getWParam;\r\n                extendedCore.getWParam = function () {\r\n                    var wparam = 0;\r\n                    if (_config.ignoreMc1Ms0CookieProcessing) {\r\n                        wparam = wparam | 2;\r\n                    }\r\n                    return wparam | existingGetWParamMethod();\r\n                };\r\n            }\r\n            // Moving event handlers out from the initialize closure so that any local variables can be garbage collected\r\n            function _handleUnloadEvents(evt) {\r\n                var theEvt = evt || getWindow().event; // IE 8 does not pass the event\r\n                if (theEvt.type !== \"beforeunload\") {\r\n                    // Only set the unload trigger if not beforeunload event as beforeunload can be cancelled while the other events can't\r\n                    _isPageUnloadTriggered = true;\r\n                    _httpManager.setUnloading(_isPageUnloadTriggered);\r\n                }\r\n                _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n            }\r\n            function _handleShowEvents(evt) {\r\n                // Handle the page becoming visible again\r\n                _isPageUnloadTriggered = false;\r\n                _httpManager.setUnloading(_isPageUnloadTriggered);\r\n            }\r\n            function _addEventToQueues(event, append) {\r\n                // If send attempt field is undefined we should set it to 0.\r\n                if (!event.sendAttempt) {\r\n                    event.sendAttempt = 0;\r\n                }\r\n                // Add default latency\r\n                if (!event.latency) {\r\n                    event.latency = 1 /* EventLatencyValue.Normal */;\r\n                }\r\n                // Remove extra AI properties if present\r\n                if (event.ext && event.ext[STR_TRACE]) {\r\n                    delete (event.ext[STR_TRACE]);\r\n                }\r\n                if (event.ext && event.ext[STR_USER] && event.ext[STR_USER][\"id\"]) {\r\n                    delete (event.ext[STR_USER][\"id\"]);\r\n                }\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    setProcessTelemetryTimings;\r\n                    event.ext = optimizeObject(event.ext);\r\n                    if (event.baseData) {\r\n                        event.baseData = optimizeObject(event.baseData);\r\n                    }\r\n                    if (event.data) {\r\n                        event.data = optimizeObject(event.data);\r\n                    }\r\n                }\r\n                if (event.sync) {\r\n                    // If the transmission is backed off then do not send synchronous events.\r\n                    // We will convert these events to Real time latency instead.\r\n                    if (_currentBackoffCount || _paused) {\r\n                        event.latency = 3 /* EventLatencyValue.RealTime */;\r\n                        event.sync = false;\r\n                    }\r\n                    else {\r\n                        // Log the event synchronously\r\n                        if (_httpManager) {\r\n                            // v8 performance optimization for iterating over the keys\r\n                            if (_optimizeObject) {\r\n                                event = optimizeObject(event);\r\n                            }\r\n                            _httpManager.sendSynchronousBatch(EventBatch.create(event.iKey, [event]), event.sync === true ? 1 /* EventSendType.Synchronous */ : event.sync, 3 /* SendRequestReason.SyncEvent */);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var evtLatency = event.latency;\r\n                var queueSize = _queueSize;\r\n                var queueLimit = _queueSizeLimit;\r\n                if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                    queueSize = _immediateQueueSize;\r\n                    queueLimit = _immediateQueueSizeLimit;\r\n                }\r\n                var eventDropped = false;\r\n                // Only add the event if the queue isn't full or it's a direct event (which don't add to the queue sizes)\r\n                if (queueSize < queueLimit) {\r\n                    eventDropped = !_addEventToProperQueue(event, append);\r\n                }\r\n                else {\r\n                    var dropLatency = 1 /* EventLatencyValue.Normal */;\r\n                    var dropNumber = EventsDroppedAtOneTime;\r\n                    if (evtLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                        // Only drop other immediate events as they are not technically sharing the general queue\r\n                        dropLatency = 4 /* EventLatencyValue.Immediate */;\r\n                        dropNumber = 1;\r\n                    }\r\n                    // Drop old event from lower or equal latency\r\n                    eventDropped = true;\r\n                    if (_dropEventWithLatencyOrLess(event.iKey, event.latency, dropLatency, dropNumber)) {\r\n                        eventDropped = !_addEventToProperQueue(event, append);\r\n                    }\r\n                }\r\n                if (eventDropped) {\r\n                    // Can't drop events from current queues because the all the slots are taken by queues that are being flushed.\r\n                    _notifyEvents(strEventsDiscarded, [event], EventsDiscardedReason.QueueFull);\r\n                }\r\n            }\r\n            _self.setEventQueueLimits = function (eventLimit, autoFlushLimit) {\r\n                _queueSizeLimit = eventLimit > 0 ? eventLimit : 10000;\r\n                _autoFlushEventsLimit = autoFlushLimit > 0 ? autoFlushLimit : 0;\r\n                _setAutoLimits();\r\n                // We only do this check here as during normal event addition if the queue is > then events start getting dropped\r\n                var doFlush = _queueSize > eventLimit;\r\n                if (!doFlush && _autoFlushBatchLimit > 0) {\r\n                    // Check the auto flush max batch size\r\n                    for (var latency = 1 /* EventLatencyValue.Normal */; !doFlush && latency <= 3 /* EventLatencyValue.RealTime */; latency++) {\r\n                        var batchQueue = _batchQueues[latency];\r\n                        if (batchQueue && batchQueue.batches) {\r\n                            arrForEach(batchQueue.batches, function (theBatch) {\r\n                                if (theBatch && theBatch.count() >= _autoFlushBatchLimit) {\r\n                                    // If any 1 batch is > than the limit then trigger an auto flush\r\n                                    doFlush = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                _performAutoFlush(true, doFlush);\r\n            };\r\n            _self.pause = function () {\r\n                _clearScheduledTimer();\r\n                _paused = true;\r\n                _httpManager.pause();\r\n            };\r\n            _self.resume = function () {\r\n                _paused = false;\r\n                _httpManager.resume();\r\n                _scheduleTimer();\r\n            };\r\n            _self.addResponseHandler = function (responseHandler) {\r\n                _httpManager._responseHandlers.push(responseHandler);\r\n            };\r\n            _self._loadTransmitProfiles = function (profiles) {\r\n                _resetTransmitProfiles();\r\n                objForEachKey(profiles, function (profileName, profileValue) {\r\n                    var profLen = profileValue.length;\r\n                    if (profLen >= 2) {\r\n                        var directValue = (profLen > 2 ? profileValue[2] : 0);\r\n                        profileValue.splice(0, profLen - 2);\r\n                        // Make sure if a higher latency is set to not send then don't send lower latency\r\n                        if (profileValue[1] < 0) {\r\n                            profileValue[0] = -1;\r\n                        }\r\n                        // Make sure each latency is multiple of the latency higher then it. If not a multiple\r\n                        // we round up so that it becomes a multiple.\r\n                        if (profileValue[1] > 0 && profileValue[0] > 0) {\r\n                            var timerMultiplier = profileValue[0] / profileValue[1];\r\n                            profileValue[0] = Math.ceil(timerMultiplier) * profileValue[1];\r\n                        }\r\n                        // Add back the direct profile timeout\r\n                        if (directValue >= 0 && profileValue[1] >= 0 && directValue > profileValue[1]) {\r\n                            // Make sure if it's not disabled (< 0) then make sure it's not larger than RealTime\r\n                            directValue = profileValue[1];\r\n                        }\r\n                        profileValue.push(directValue);\r\n                        _profiles[profileName] = profileValue;\r\n                    }\r\n                });\r\n            };\r\n            _self.flush = function (async, callback, sendReason) {\r\n                if (async === void 0) { async = true; }\r\n                if (!_paused) {\r\n                    sendReason = sendReason || 1 /* SendRequestReason.ManualFlush */;\r\n                    if (async) {\r\n                        if (_flushCallbackTimerId == null) {\r\n                            // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                            _clearScheduledTimer();\r\n                            // Move all queued events to the HttpManager so that we don't discard new events (Auto flush scenario)\r\n                            _queueBatches(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                            _flushCallbackTimerId = _createTimer(function () {\r\n                                _flushCallbackTimerId = null;\r\n                                _flushImpl(callback, sendReason);\r\n                            }, 0);\r\n                        }\r\n                        else {\r\n                            // Even if null (no callback) this will ensure after the flushImpl finishes waiting\r\n                            // for a completely idle connection it will attempt to re-flush any queued events on the next cycle\r\n                            _flushCallbackQueue.push(callback);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Clear the normal schedule timer as we are going to try and flush ASAP\r\n                        var cleared = _clearScheduledTimer();\r\n                        // Now cause all queued events to be sent synchronously\r\n                        _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 1 /* EventSendType.Synchronous */, sendReason);\r\n                        if (callback !== null && callback !== undefined) {\r\n                            callback();\r\n                        }\r\n                        if (cleared) {\r\n                            // restart the normal event timer if it was cleared\r\n                            _scheduleTimer();\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            _self.setMsaAuthTicket = function (ticket) {\r\n                _httpManager.addHeader(STR_MSA_DEVICE_TICKET, ticket);\r\n            };\r\n            _self.hasEvents = _hasEvents;\r\n            _self._setTransmitProfile = function (profileName) {\r\n                if (_currentProfile !== profileName && _profiles[profileName] !== undefined) {\r\n                    _clearScheduledTimer();\r\n                    _currentProfile = profileName;\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            /**\r\n             * Batch and send events currently in the queue for the given latency.\r\n             * @param latency - Latency for which to send events.\r\n             */\r\n            function _sendEventsForLatencyAndAbove(latency, sendType, sendReason) {\r\n                var queued = _queueBatches(latency, sendType, sendReason);\r\n                // Always trigger the request as while the post channel may not have queued additional events, the httpManager may already have waiting events\r\n                _httpManager.sendQueuedRequests(sendType, sendReason);\r\n                return queued;\r\n            }\r\n            function _hasEvents() {\r\n                return _queueSize > 0;\r\n            }\r\n            /**\r\n             * Try to schedule the timer after which events will be sent. If there are\r\n             * no events to be sent, or there is already a timer scheduled, or the\r\n             * http manager doesn't have any idle connections this method is no-op.\r\n             */\r\n            function _scheduleTimer() {\r\n                // If we had previously attempted to send requests, but the http manager didn't have any idle connections then the requests where delayed\r\n                // so try and requeue then again now\r\n                if (_delayedBatchSendLatency >= 0 && _queueBatches(_delayedBatchSendLatency, 0 /* EventSendType.Batched */, _delayedBatchReason)) {\r\n                    _httpManager.sendQueuedRequests(0 /* EventSendType.Batched */, _delayedBatchReason);\r\n                }\r\n                if (_immediateQueueSize > 0 && !_immediateTimerId && !_paused) {\r\n                    // During initialization _profiles enforce that the direct [2] is less than real time [1] timer value\r\n                    // If the immediateTimeout is disabled the immediate events will be sent with Real Time events\r\n                    var immediateTimeOut = _profiles[_currentProfile][2];\r\n                    if (immediateTimeOut >= 0) {\r\n                        _immediateTimerId = _createTimer(function () {\r\n                            _immediateTimerId = null;\r\n                            // Only try to send direct events\r\n                            _sendEventsForLatencyAndAbove(4 /* EventLatencyValue.Immediate */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            _scheduleTimer();\r\n                        }, immediateTimeOut);\r\n                    }\r\n                }\r\n                // During initialization the _profiles enforce that the normal [0] is a multiple of the real time [1] timer value\r\n                var timeOut = _profiles[_currentProfile][1];\r\n                if (!_scheduledTimerId && !_flushCallbackTimerId && timeOut >= 0 && !_paused) {\r\n                    if (_hasEvents()) {\r\n                        _scheduledTimerId = _createTimer(function () {\r\n                            _scheduledTimerId = null;\r\n                            _sendEventsForLatencyAndAbove(_timerCount === 0 ? 3 /* EventLatencyValue.RealTime */ : 1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, 1 /* SendRequestReason.NormalSchedule */);\r\n                            // Increment the count for next cycle\r\n                            _timerCount++;\r\n                            _timerCount %= 2;\r\n                            _scheduleTimer();\r\n                        }, timeOut);\r\n                    }\r\n                    else {\r\n                        _timerCount = 0;\r\n                    }\r\n                }\r\n            }\r\n            _self._backOffTransmission = function () {\r\n                if (_currentBackoffCount < MaxBackoffCount) {\r\n                    _currentBackoffCount++;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            _self._clearBackOff = function () {\r\n                if (_currentBackoffCount) {\r\n                    _currentBackoffCount = 0;\r\n                    _clearScheduledTimer();\r\n                    _scheduleTimer();\r\n                }\r\n            };\r\n            function _initDefaults() {\r\n                _config = null;\r\n                _isTeardownCalled = false;\r\n                _flushCallbackQueue = [];\r\n                _flushCallbackTimerId = null;\r\n                _paused = false;\r\n                _immediateQueueSize = 0;\r\n                _immediateQueueSizeLimit = 500;\r\n                _queueSize = 0;\r\n                _queueSizeLimit = 10000;\r\n                _profiles = {};\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduledTimerId = null;\r\n                _immediateTimerId = null;\r\n                _currentBackoffCount = 0;\r\n                _timerCount = 0;\r\n                _xhrOverride = null;\r\n                _batchQueues = {};\r\n                _autoFlushEventsLimit = undefined;\r\n                // either MaxBatchSize * (1+ Max Connections) or _queueLimit / 6 (where 3 latency Queues [normal, realtime, cost deferred] * 2 [allow half full -- allow for retry])\r\n                _autoFlushBatchLimit = 0;\r\n                _delayedBatchSendLatency = -1;\r\n                _delayedBatchReason = null;\r\n                _optimizeObject = true;\r\n                _isPageUnloadTriggered = false;\r\n                _maxEventSendAttempts = MaxSendAttempts;\r\n                _maxUnloadEventSendAttempts = MaxSyncUnloadSendAttempts;\r\n                _evtNamespace = null;\r\n                _timeoutWrapper = createTimeoutWrapper();\r\n                _httpManager = new HttpManager(MaxNumberEventPerBatch, MaxConnections, MaxRequestRetriesBeforeBackoff, {\r\n                    requeue: _requeueEvents,\r\n                    send: _sendingEvent,\r\n                    sent: _eventsSentEvent,\r\n                    drop: _eventsDropped,\r\n                    rspFail: _eventsResponseFail,\r\n                    oth: _otherEvent\r\n                }, _timeoutWrapper);\r\n                _initializeProfiles();\r\n                _clearQueues();\r\n                _setAutoLimits();\r\n            }\r\n            function _createTimer(theTimerFunc, timeOut) {\r\n                // If the transmission is backed off make the timer at least 1 sec to allow for back off.\r\n                if (timeOut === 0 && _currentBackoffCount) {\r\n                    timeOut = 1;\r\n                }\r\n                var timerMultiplier = 1000;\r\n                if (_currentBackoffCount) {\r\n                    timerMultiplier = retryPolicyGetMillisToBackoffForRetry(_currentBackoffCount - 1);\r\n                }\r\n                return _timeoutWrapper.set(theTimerFunc, timeOut * timerMultiplier);\r\n            }\r\n            function _clearScheduledTimer() {\r\n                if (_scheduledTimerId !== null) {\r\n                    _timeoutWrapper.clear(_scheduledTimerId);\r\n                    _scheduledTimerId = null;\r\n                    _timerCount = 0;\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            // Try to send all queued events using beacons if available\r\n            function _releaseAllQueues(sendType, sendReason) {\r\n                _clearScheduledTimer();\r\n                // Cancel all flush callbacks\r\n                if (_flushCallbackTimerId) {\r\n                    _timeoutWrapper.clear(_flushCallbackTimerId);\r\n                    _flushCallbackTimerId = null;\r\n                }\r\n                if (!_paused) {\r\n                    // Queue all the remaining requests to be sent. The requests will be sent using HTML5 Beacons if they are available.\r\n                    _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, sendType, sendReason);\r\n                }\r\n            }\r\n            /**\r\n             * Add empty queues for all latencies in the inbound queues map. This is called\r\n             * when Transmission Manager is being flushed. This ensures that new events added\r\n             * after flush are stored separately till we flush the current events.\r\n             */\r\n            function _clearQueues() {\r\n                _batchQueues[4 /* EventLatencyValue.Immediate */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[3 /* EventLatencyValue.RealTime */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[2 /* EventLatencyValue.CostDeferred */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n                _batchQueues[1 /* EventLatencyValue.Normal */] = {\r\n                    batches: [],\r\n                    iKeyMap: {}\r\n                };\r\n            }\r\n            function _getEventBatch(iKey, latency, create) {\r\n                var batchQueue = _batchQueues[latency];\r\n                if (!batchQueue) {\r\n                    latency = 1 /* EventLatencyValue.Normal */;\r\n                    batchQueue = _batchQueues[latency];\r\n                }\r\n                var eventBatch = batchQueue.iKeyMap[iKey];\r\n                if (!eventBatch && create) {\r\n                    eventBatch = EventBatch.create(iKey);\r\n                    batchQueue.batches.push(eventBatch);\r\n                    batchQueue.iKeyMap[iKey] = eventBatch;\r\n                }\r\n                return eventBatch;\r\n            }\r\n            function _performAutoFlush(isAsync, doFlush) {\r\n                // Only perform the auto flush check if the httpManager has an idle connection and we are not in a backoff situation\r\n                if (_httpManager.canSendRequest() && !_currentBackoffCount) {\r\n                    if (_autoFlushEventsLimit > 0 && _queueSize > _autoFlushEventsLimit) {\r\n                        // Force flushing\r\n                        doFlush = true;\r\n                    }\r\n                    if (doFlush && _flushCallbackTimerId == null) {\r\n                        // Auto flush the queue\r\n                        _self.flush(isAsync, null, 20 /* SendRequestReason.MaxQueuedEvents */);\r\n                    }\r\n                }\r\n            }\r\n            function _addEventToProperQueue(event, append) {\r\n                // v8 performance optimization for iterating over the keys\r\n                if (_optimizeObject) {\r\n                    event = optimizeObject(event);\r\n                }\r\n                var latency = event.latency;\r\n                var eventBatch = _getEventBatch(event.iKey, latency, true);\r\n                if (eventBatch.addEvent(event)) {\r\n                    if (latency !== 4 /* EventLatencyValue.Immediate */) {\r\n                        _queueSize++;\r\n                        // Check for auto flushing based on total events in the queue, but not for requeued or retry events\r\n                        if (append && event.sendAttempt === 0) {\r\n                            // Force the flushing of the batch if the batch (specific iKey / latency combination) reaches it's auto flush limit\r\n                            _performAutoFlush(!event.sync, _autoFlushBatchLimit > 0 && eventBatch.count() >= _autoFlushBatchLimit);\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Direct events don't need auto flushing as they are scheduled (by default) for immediate delivery\r\n                        _immediateQueueSize++;\r\n                    }\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            function _dropEventWithLatencyOrLess(iKey, latency, currentLatency, dropNumber) {\r\n                while (currentLatency <= latency) {\r\n                    var eventBatch = _getEventBatch(iKey, latency, true);\r\n                    if (eventBatch && eventBatch.count() > 0) {\r\n                        // Dropped oldest events from lowest possible latency\r\n                        var droppedEvents = eventBatch.split(0, dropNumber);\r\n                        var droppedCount = droppedEvents.count();\r\n                        if (droppedCount > 0) {\r\n                            if (currentLatency === 4 /* EventLatencyValue.Immediate */) {\r\n                                _immediateQueueSize -= droppedCount;\r\n                            }\r\n                            else {\r\n                                _queueSize -= droppedCount;\r\n                            }\r\n                            _notifyBatchEvents(strEventsDiscarded, [droppedEvents], EventsDiscardedReason.QueueFull);\r\n                            return true;\r\n                        }\r\n                    }\r\n                    currentLatency++;\r\n                }\r\n                // Unable to drop any events -- lets just make sure the queue counts are correct to avoid exhaustion\r\n                _resetQueueCounts();\r\n                return false;\r\n            }\r\n            /**\r\n             * Internal helper to reset the queue counts, used as a backstop to avoid future queue exhaustion errors\r\n             * that might occur because of counting issues.\r\n             */\r\n            function _resetQueueCounts() {\r\n                var immediateQueue = 0;\r\n                var normalQueue = 0;\r\n                var _loop_1 = function (latency) {\r\n                    var batchQueue = _batchQueues[latency];\r\n                    if (batchQueue && batchQueue.batches) {\r\n                        arrForEach(batchQueue.batches, function (theBatch) {\r\n                            if (latency === 4 /* EventLatencyValue.Immediate */) {\r\n                                immediateQueue += theBatch.count();\r\n                            }\r\n                            else {\r\n                                normalQueue += theBatch.count();\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n                for (var latency = 1 /* EventLatencyValue.Normal */; latency <= 4 /* EventLatencyValue.Immediate */; latency++) {\r\n                    _loop_1(latency);\r\n                }\r\n                _queueSize = normalQueue;\r\n                _immediateQueueSize = immediateQueue;\r\n            }\r\n            function _queueBatches(latency, sendType, sendReason) {\r\n                var eventsQueued = false;\r\n                var isAsync = sendType === 0 /* EventSendType.Batched */;\r\n                // Only queue batches (to the HttpManager) if this is a sync request or the httpManager has an idle connection\r\n                // Thus keeping the events within the PostChannel until the HttpManager has a connection available\r\n                // This is so we can drop \"old\" events if the queue is getting full because we can't successfully send events\r\n                if (!isAsync || _httpManager.canSendRequest()) {\r\n                    doPerf(_self.core, function () { return \"PostChannel._queueBatches\"; }, function () {\r\n                        var droppedEvents = [];\r\n                        var latencyToProcess = 4 /* EventLatencyValue.Immediate */;\r\n                        while (latencyToProcess >= latency) {\r\n                            var batchQueue = _batchQueues[latencyToProcess];\r\n                            if (batchQueue && batchQueue.batches && batchQueue.batches.length > 0) {\r\n                                arrForEach(batchQueue.batches, function (theBatch) {\r\n                                    // Add the batch to the http manager to send the requests\r\n                                    if (!_httpManager.addBatch(theBatch)) {\r\n                                        // The events from this iKey are being dropped (killed)\r\n                                        droppedEvents = droppedEvents.concat(theBatch.events());\r\n                                    }\r\n                                    else {\r\n                                        eventsQueued = eventsQueued || (theBatch && theBatch.count() > 0);\r\n                                    }\r\n                                    if (latencyToProcess === 4 /* EventLatencyValue.Immediate */) {\r\n                                        _immediateQueueSize -= theBatch.count();\r\n                                    }\r\n                                    else {\r\n                                        _queueSize -= theBatch.count();\r\n                                    }\r\n                                });\r\n                                // Remove all batches from this Queue\r\n                                batchQueue.batches = [];\r\n                                batchQueue.iKeyMap = {};\r\n                            }\r\n                            latencyToProcess--;\r\n                        }\r\n                        if (droppedEvents.length > 0) {\r\n                            _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.KillSwitch);\r\n                        }\r\n                        if (eventsQueued && _delayedBatchSendLatency >= latency) {\r\n                            // We have queued events at the same level as the delayed values so clear the setting\r\n                            _delayedBatchSendLatency = -1;\r\n                            _delayedBatchReason = 0 /* SendRequestReason.Undefined */;\r\n                        }\r\n                    }, function () { return ({ latency: latency, sendType: sendType, sendReason: sendReason }); }, !isAsync);\r\n                }\r\n                else {\r\n                    // remember the min latency so that we can re-trigger later\r\n                    _delayedBatchSendLatency = _delayedBatchSendLatency >= 0 ? Math.min(_delayedBatchSendLatency, latency) : latency;\r\n                    _delayedBatchReason = Math.max(_delayedBatchReason, sendReason);\r\n                }\r\n                return eventsQueued;\r\n            }\r\n            /**\r\n             * This is the callback method is called as part of the manual flushing process.\r\n             * @param callback\r\n             * @param sendReason\r\n             */\r\n            function _flushImpl(callback, sendReason) {\r\n                // Add any additional queued events and cause all queued events to be sent asynchronously\r\n                _sendEventsForLatencyAndAbove(1 /* EventLatencyValue.Normal */, 0 /* EventSendType.Batched */, sendReason);\r\n                // All events (should) have been queue -- lets just make sure the queue counts are correct to avoid queue exhaustion (previous bug #9685112)\r\n                _resetQueueCounts();\r\n                _waitForIdleManager(function () {\r\n                    // Only called AFTER the httpManager does not have any outstanding requests\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                    if (_flushCallbackQueue.length > 0) {\r\n                        _flushCallbackTimerId = _createTimer(function () {\r\n                            _flushCallbackTimerId = null;\r\n                            _flushImpl(_flushCallbackQueue.shift(), sendReason);\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        // No more flush requests\r\n                        _flushCallbackTimerId = null;\r\n                        // Restart the normal timer schedule\r\n                        _scheduleTimer();\r\n                    }\r\n                });\r\n            }\r\n            function _waitForIdleManager(callback) {\r\n                if (_httpManager.isCompletelyIdle()) {\r\n                    callback();\r\n                }\r\n                else {\r\n                    _flushCallbackTimerId = _createTimer(function () {\r\n                        _flushCallbackTimerId = null;\r\n                        _waitForIdleManager(callback);\r\n                    }, FlushCheckTimer);\r\n                }\r\n            }\r\n            /**\r\n             * Resets the transmit profiles to the default profiles of Real Time, Near Real Time\r\n             * and Best Effort. This removes all the custom profiles that were loaded.\r\n             */\r\n            function _resetTransmitProfiles() {\r\n                _clearScheduledTimer();\r\n                _initializeProfiles();\r\n                _currentProfile = RT_PROFILE;\r\n                _scheduleTimer();\r\n            }\r\n            function _initializeProfiles() {\r\n                _profiles = {};\r\n                _profiles[RT_PROFILE] = [2, 1, 0];\r\n                _profiles[NRT_PROFILE] = [6, 3, 0];\r\n                _profiles[BE_PROFILE] = [18, 9, 0];\r\n            }\r\n            /**\r\n             * The notification handler for requeue events\r\n             * @ignore\r\n             */\r\n            function _requeueEvents(batches, reason) {\r\n                var droppedEvents = [];\r\n                var maxSendAttempts = _maxEventSendAttempts;\r\n                if (_isPageUnloadTriggered) {\r\n                    // If a page unlaod has been triggered reduce the number of times we try to \"retry\"\r\n                    maxSendAttempts = _maxUnloadEventSendAttempts;\r\n                }\r\n                arrForEach(batches, function (theBatch) {\r\n                    if (theBatch && theBatch.count() > 0) {\r\n                        arrForEach(theBatch.events(), function (theEvent) {\r\n                            if (theEvent) {\r\n                                // Check if the request being added back is for a sync event in which case mark it no longer a sync event\r\n                                if (theEvent.sync) {\r\n                                    theEvent.latency = 4 /* EventLatencyValue.Immediate */;\r\n                                    theEvent.sync = false;\r\n                                }\r\n                                if (theEvent.sendAttempt < maxSendAttempts) {\r\n                                    // Reset the event timings\r\n                                    setProcessTelemetryTimings(theEvent, _self.identifier);\r\n                                    _addEventToQueues(theEvent, false);\r\n                                }\r\n                                else {\r\n                                    droppedEvents.push(theEvent);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                if (droppedEvents.length > 0) {\r\n                    _notifyEvents(strEventsDiscarded, droppedEvents, EventsDiscardedReason.NonRetryableStatus);\r\n                }\r\n                if (_isPageUnloadTriggered) {\r\n                    // Unload event has been received so we need to try and flush new events\r\n                    _releaseAllQueues(2 /* EventSendType.SendBeacon */, 2 /* SendRequestReason.Unload */);\r\n                }\r\n            }\r\n            function _callNotification(evtName, theArgs) {\r\n                var manager = (_self._notificationManager || {});\r\n                var notifyFunc = manager[evtName];\r\n                if (notifyFunc) {\r\n                    try {\r\n                        notifyFunc.apply(manager, theArgs);\r\n                    }\r\n                    catch (e) {\r\n                        _throwInternal(_self.diagLog(), 1 /* eLoggingSeverity.CRITICAL */, 74 /* _eInternalMessageId.NotificationException */, evtName + \" notification failed: \" + e);\r\n                    }\r\n                }\r\n            }\r\n            function _notifyEvents(evtName, theEvents) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (theEvents && theEvents.length > 0) {\r\n                    _callNotification(evtName, [theEvents].concat(extraArgs));\r\n                }\r\n            }\r\n            function _notifyBatchEvents(evtName, batches) {\r\n                var extraArgs = [];\r\n                for (var _i = 2; _i < arguments.length; _i++) {\r\n                    extraArgs[_i - 2] = arguments[_i];\r\n                }\r\n                if (batches && batches.length > 0) {\r\n                    arrForEach(batches, function (theBatch) {\r\n                        if (theBatch && theBatch.count() > 0) {\r\n                            _callNotification(evtName, [theBatch.events()].concat(extraArgs));\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            /**\r\n             * The notification handler for when batches are about to be sent\r\n             * @ignore\r\n             */\r\n            function _sendingEvent(batches, reason, isSyncRequest) {\r\n                if (batches && batches.length > 0) {\r\n                    _callNotification(\"eventsSendRequest\", [(reason >= 1000 /* EventBatchNotificationReason.SendingUndefined */ && reason <= 1999 /* EventBatchNotificationReason.SendingEventMax */ ?\r\n                            reason - 1000 /* EventBatchNotificationReason.SendingUndefined */ :\r\n                            0 /* SendRequestReason.Undefined */), isSyncRequest !== true]);\r\n                }\r\n            }\r\n            /**\r\n             * This event represents that a batch of events have been successfully sent and a response received\r\n             * @param batches The notification handler for when the batches have been successfully sent\r\n             * @param reason For this event the reason will always be EventBatchNotificationReason.Complete\r\n             */\r\n            function _eventsSentEvent(batches, reason) {\r\n                _notifyBatchEvents(\"eventsSent\", batches, reason);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _eventsDropped(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, (reason >= 8000 /* EventBatchNotificationReason.EventsDropped */ && reason <= 8999 /* EventBatchNotificationReason.EventsDroppedMax */ ?\r\n                    reason - 8000 /* EventBatchNotificationReason.EventsDropped */ :\r\n                    EventsDiscardedReason.Unknown));\r\n            }\r\n            function _eventsResponseFail(batches) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.NonRetryableStatus);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _otherEvent(batches, reason) {\r\n                _notifyBatchEvents(strEventsDiscarded, batches, EventsDiscardedReason.Unknown);\r\n                // Try and schedule the processing timer if we have events\r\n                _scheduleTimer();\r\n            }\r\n            function _setAutoLimits() {\r\n                if (!_config || !_config.disableAutoBatchFlushLimit) {\r\n                    _autoFlushBatchLimit = Math.max(MaxNumberEventPerBatch * (MaxConnections + 1), _queueSizeLimit / 6);\r\n                }\r\n                else {\r\n                    _autoFlushBatchLimit = 0;\r\n                }\r\n            }\r\n            // Provided for backward compatibility they are not \"expected\" to be in current use but they are public\r\n            objDefineAccessors(_self, \"_setTimeoutOverride\", function () { return _timeoutWrapper.set; }, function (value) {\r\n                // Recreate the timeout wrapper\r\n                _timeoutWrapper = createTimeoutWrapper(value, _timeoutWrapper.clear);\r\n            });\r\n            objDefineAccessors(_self, \"_clearTimeoutOverride\", function () { return _timeoutWrapper.clear; }, function (value) {\r\n                // Recreate the timeout wrapper\r\n                _timeoutWrapper = createTimeoutWrapper(_timeoutWrapper.set, value);\r\n            });\r\n        });\r\n        return _this;\r\n    }\r\n// Removed Stub for PostChannel.prototype.initialize.\r\n// Removed Stub for PostChannel.prototype.processTelemetry.\r\n// Removed Stub for PostChannel.prototype.setEventQueueLimits.\r\n// Removed Stub for PostChannel.prototype.pause.\r\n// Removed Stub for PostChannel.prototype.resume.\r\n// Removed Stub for PostChannel.prototype.addResponseHandler.\r\n// Removed Stub for PostChannel.prototype.flush.\r\n// Removed Stub for PostChannel.prototype.setMsaAuthTicket.\r\n// Removed Stub for PostChannel.prototype.hasEvents.\r\n// Removed Stub for PostChannel.prototype._loadTransmitProfiles.\r\n// Removed Stub for PostChannel.prototype._setTransmitProfile.\r\n// Removed Stub for PostChannel.prototype._backOffTransmission.\r\n// Removed Stub for PostChannel.prototype._clearBackOff.\r\n    // This is a workaround for an IE8 bug when using dynamicProto() with classes that don't have any\n    // non-dynamic functions or static properties/functions when using uglify-js to minify the resulting code.\n    // this will be removed when ES3 support is dropped.\n    PostChannel.__ieDyn=1;\n\n    return PostChannel;\r\n}(BaseTelemetryPlugin));\r\nexport default PostChannel;\r\n//# sourceMappingURL=PostChannel.js.map","/*!\n * Application Insights JavaScript SDK - Web Snippet, 1.0.1\n * Copyright (c) Microsoft and contributors. All rights reserved.\n */\nvar webSnippet = \"!function(T,l,y){var S=T.location,k=\\\"script\\\",D=\\\"instrumentationKey\\\",C=\\\"ingestionendpoint\\\",I=\\\"disableExceptionTracking\\\",E=\\\"ai.device.\\\",b=\\\"toLowerCase\\\",w=\\\"crossOrigin\\\",N=\\\"POST\\\",e=\\\"appInsightsSDK\\\",t=y.name||\\\"appInsights\\\";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:\\\"5\\\",version:2,config:d};function v(e,t){var n={},a=\\\"Browser\\\";return n[E+\\\"id\\\"]=a[b](),n[E+\\\"type\\\"]=a,n[\\\"ai.operation.name\\\"]=S&&S.pathname||\\\"_unknown_\\\",n[\\\"ai.internal.sdkVersion\\\"]=\\\"javascript:snippet_\\\"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=\\\"\\\"+e;return 1===t.length&&(t=\\\"0\\\"+t),t}return e.getUTCFullYear()+\\\"-\\\"+t(1+e.getUTCMonth())+\\\"-\\\"+t(e.getUTCDate())+\\\"T\\\"+t(e.getUTCHours())+\\\":\\\"+t(e.getUTCMinutes())+\\\":\\\"+t(e.getUTCSeconds())+\\\".\\\"+((e.getUTCMilliseconds()/1e3).toFixed(3)+\\\"\\\").slice(2,5)+\\\"Z\\\"}(),iKey:e,name:\\\"Microsoft.ApplicationInsights.\\\"+e.replace(/-/g,\\\"\\\")+\\\".\\\"+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(\\\";\\\"),a=0;a<n.length;a++){var i=n[a].split(\\\"=\\\");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]=\\\"https://\\\"+(o?o+\\\".\\\":\\\"\\\")+\\\"dc.\\\"+(r||\\\"services.visualstudio.com\\\")}return e}(),c=s[D]||d[D]||\\\"\\\",u=s[C],p=u?u+\\\"/v2/track\\\":d.endpointUrl,(l=[]).push((n=\\\"SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)\\\",a=t,i=p,(o=(r=v(c,\\\"Exception\\\")).data).baseType=\\\"ExceptionData\\\",o.baseData.exceptions=[{typeName:\\\"SDKLoadFailed\\\",message:n.replace(/\\\\./g,\\\"-\\\"),hasFullStack:!1,stack:n+\\\"\\\\nSnippet failed to load [\\\"+a+\\\"] -- Telemetry is disabled\\\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\\\nHost: \\\"+(S&&S.pathname||\\\"_unknown_\\\")+\\\"\\\\nEndpoint: \\\"+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,\\\"Message\\\"),r=i.data;r.baseType=\\\"MessageData\\\";var o=r.baseData;return o.message=\\'AI (Internal): 99 message:\\\"\\'+(\\\"SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) (\\\"+n+\\\")\\\").replace(/\\\\\\\"/g,\\\"\\\")+\\'\\\"\\',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:\\\"cors\\\"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader(\\\"Content-type\\\",\\\"application/json\\\"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&\\\"\\\"!==e||\\\"undefined\\\"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){\\\"loaded\\\"!==n.readyState&&\\\"complete\\\"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName(\\\"head\\\")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n=\\\"track\\\",r=\\\"TrackPage\\\",o=\\\"TrackEvent\\\";t([n+\\\"Event\\\",n+\\\"PageView\\\",n+\\\"Exception\\\",n+\\\"Trace\\\",n+\\\"DependencyData\\\",n+\\\"Metric\\\",n+\\\"PageViewPerformance\\\",\\\"start\\\"+r,\\\"stop\\\"+r,\\\"start\\\"+o,\\\"stop\\\"+o,\\\"addTelemetryInitializer\\\",\\\"setAuthenticatedUserContext\\\",\\\"clearAuthenticatedUserContext\\\",\\\"flush\\\"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c=\\\"onerror\\\";t([\\\"_\\\"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m[\\\"_\\\"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\\r\\nsrc: \\\"https://js.monitor.azure.com/scripts/b/ai.2.min.js\\\", // The SDK URL Source\\r\\n// name: \\\"appInsights\\\", // Global SDK Instance name defaults to \\\"appInsights\\\" when not supplied\\r\\n// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\\r\\n// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\\r\\n// crossOrigin: \\\"anonymous\\\", // When supplied this will add the provided value as the cross origin attribute on the script tag\\r\\n// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won\\'t get called)\\r\\ncfg: { // Application Insights Configuration\\r\\n    instrumentationKey: \\\"INSTRUMENTATION_KEY\\\"\\r\\n}});\";\n\nexport { webSnippet };\n","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { ROOT_CONTEXT } from './context';\nvar NoopContextManager = /** @class */ (function () {\n    function NoopContextManager() {\n    }\n    NoopContextManager.prototype.active = function () {\n        return ROOT_CONTEXT;\n    };\n    NoopContextManager.prototype.with = function (_context, fn, thisArg) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        return fn.call.apply(fn, __spreadArray([thisArg], __read(args), false));\n    };\n    NoopContextManager.prototype.bind = function (_context, target) {\n        return target;\n    };\n    NoopContextManager.prototype.enable = function () {\n        return this;\n    };\n    NoopContextManager.prototype.disable = function () {\n        return this;\n    };\n    return NoopContextManager;\n}());\nexport { NoopContextManager };\n//# sourceMappingURL=NoopContextManager.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { NoopContextManager } from '../context/NoopContextManager';\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'context';\nvar NOOP_CONTEXT_MANAGER = new NoopContextManager();\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Context API\n */\nvar ContextAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function ContextAPI() {\n    }\n    /** Get the singleton instance of the Context API */\n    ContextAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new ContextAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current context manager.\n     *\n     * @returns true if the context manager was successfully registered, else false\n     */\n    ContextAPI.prototype.setGlobalContextManager = function (contextManager) {\n        return registerGlobal(API_NAME, contextManager, DiagAPI.instance());\n    };\n    /**\n     * Get the currently active context\n     */\n    ContextAPI.prototype.active = function () {\n        return this._getContextManager().active();\n    };\n    /**\n     * Execute a function with an active context\n     *\n     * @param context context to be active during function execution\n     * @param fn function to execute in a context\n     * @param thisArg optional receiver to be used for calling fn\n     * @param args optional arguments forwarded to fn\n     */\n    ContextAPI.prototype.with = function (context, fn, thisArg) {\n        var _a;\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        return (_a = this._getContextManager()).with.apply(_a, __spreadArray([context, fn, thisArg], __read(args), false));\n    };\n    /**\n     * Bind a context to a target function or event emitter\n     *\n     * @param context context to bind to the event emitter or function. Defaults to the currently active context\n     * @param target function or event emitter to bind\n     */\n    ContextAPI.prototype.bind = function (context, target) {\n        return this._getContextManager().bind(context, target);\n    };\n    ContextAPI.prototype._getContextManager = function () {\n        return getGlobal(API_NAME) || NOOP_CONTEXT_MANAGER;\n    };\n    /** Disable and remove the global context manager */\n    ContextAPI.prototype.disable = function () {\n        this._getContextManager().disable();\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n    };\n    return ContextAPI;\n}());\nexport { ContextAPI };\n//# sourceMappingURL=context.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { getGlobal } from '../internal/global-utils';\n/**\n * Component Logger which is meant to be used as part of any component which\n * will add automatically additional namespace in front of the log message.\n * It will then forward all message to global diag logger\n * @example\n * const cLogger = diag.createComponentLogger({ namespace: '@opentelemetry/instrumentation-http' });\n * cLogger.debug('test');\n * // @opentelemetry/instrumentation-http test\n */\nvar DiagComponentLogger = /** @class */ (function () {\n    function DiagComponentLogger(props) {\n        this._namespace = props.namespace || 'DiagComponentLogger';\n    }\n    DiagComponentLogger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('debug', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('error', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('info', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('warn', this._namespace, args);\n    };\n    DiagComponentLogger.prototype.verbose = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return logProxy('verbose', this._namespace, args);\n    };\n    return DiagComponentLogger;\n}());\nexport { DiagComponentLogger };\nfunction logProxy(funcName, namespace, args) {\n    var logger = getGlobal('diag');\n    // shortcut if logger not set\n    if (!logger) {\n        return;\n    }\n    args.unshift(namespace);\n    return logger[funcName].apply(logger, __spreadArray([], __read(args), false));\n}\n//# sourceMappingURL=ComponentLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { DiagComponentLogger } from '../diag/ComponentLogger';\nimport { createLogLevelDiagLogger } from '../diag/internal/logLevelLogger';\nimport { DiagLogLevel, } from '../diag/types';\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nvar API_NAME = 'diag';\n/**\n * Singleton object which represents the entry point to the OpenTelemetry internal\n * diagnostic API\n */\nvar DiagAPI = /** @class */ (function () {\n    /**\n     * Private internal constructor\n     * @private\n     */\n    function DiagAPI() {\n        function _logProxy(funcName) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var logger = getGlobal('diag');\n                // shortcut if logger not set\n                if (!logger)\n                    return;\n                return logger[funcName].apply(logger, __spreadArray([], __read(args), false));\n            };\n        }\n        // Using self local variable for minification purposes as 'this' cannot be minified\n        var self = this;\n        // DiagAPI specific functions\n        var setLogger = function (logger, optionsOrLogLevel) {\n            var _a, _b, _c;\n            if (optionsOrLogLevel === void 0) { optionsOrLogLevel = { logLevel: DiagLogLevel.INFO }; }\n            if (logger === self) {\n                // There isn't much we can do here.\n                // Logging to the console might break the user application.\n                // Try to log to self. If a logger was previously registered it will receive the log.\n                var err = new Error('Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation');\n                self.error((_a = err.stack) !== null && _a !== void 0 ? _a : err.message);\n                return false;\n            }\n            if (typeof optionsOrLogLevel === 'number') {\n                optionsOrLogLevel = {\n                    logLevel: optionsOrLogLevel,\n                };\n            }\n            var oldLogger = getGlobal('diag');\n            var newLogger = createLogLevelDiagLogger((_b = optionsOrLogLevel.logLevel) !== null && _b !== void 0 ? _b : DiagLogLevel.INFO, logger);\n            // There already is an logger registered. We'll let it know before overwriting it.\n            if (oldLogger && !optionsOrLogLevel.suppressOverrideMessage) {\n                var stack = (_c = new Error().stack) !== null && _c !== void 0 ? _c : '<failed to generate stacktrace>';\n                oldLogger.warn(\"Current logger will be overwritten from \" + stack);\n                newLogger.warn(\"Current logger will overwrite one already registered from \" + stack);\n            }\n            return registerGlobal('diag', newLogger, self, true);\n        };\n        self.setLogger = setLogger;\n        self.disable = function () {\n            unregisterGlobal(API_NAME, self);\n        };\n        self.createComponentLogger = function (options) {\n            return new DiagComponentLogger(options);\n        };\n        self.verbose = _logProxy('verbose');\n        self.debug = _logProxy('debug');\n        self.info = _logProxy('info');\n        self.warn = _logProxy('warn');\n        self.error = _logProxy('error');\n    }\n    /** Get the singleton instance of the DiagAPI API */\n    DiagAPI.instance = function () {\n        if (!this._instance) {\n            this._instance = new DiagAPI();\n        }\n        return this._instance;\n    };\n    return DiagAPI;\n}());\nexport { DiagAPI };\n//# sourceMappingURL=diag.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagLogLevel } from '../types';\nexport function createLogLevelDiagLogger(maxLevel, logger) {\n    if (maxLevel < DiagLogLevel.NONE) {\n        maxLevel = DiagLogLevel.NONE;\n    }\n    else if (maxLevel > DiagLogLevel.ALL) {\n        maxLevel = DiagLogLevel.ALL;\n    }\n    // In case the logger is null or undefined\n    logger = logger || {};\n    function _filterFunc(funcName, theLevel) {\n        var theFunc = logger[funcName];\n        if (typeof theFunc === 'function' && maxLevel >= theLevel) {\n            return theFunc.bind(logger);\n        }\n        return function () { };\n    }\n    return {\n        error: _filterFunc('error', DiagLogLevel.ERROR),\n        warn: _filterFunc('warn', DiagLogLevel.WARN),\n        info: _filterFunc('info', DiagLogLevel.INFO),\n        debug: _filterFunc('debug', DiagLogLevel.DEBUG),\n        verbose: _filterFunc('verbose', DiagLogLevel.VERBOSE),\n    };\n}\n//# sourceMappingURL=logLevelLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar BaggageImpl = /** @class */ (function () {\n    function BaggageImpl(entries) {\n        this._entries = entries ? new Map(entries) : new Map();\n    }\n    BaggageImpl.prototype.getEntry = function (key) {\n        var entry = this._entries.get(key);\n        if (!entry) {\n            return undefined;\n        }\n        return Object.assign({}, entry);\n    };\n    BaggageImpl.prototype.getAllEntries = function () {\n        return Array.from(this._entries.entries()).map(function (_a) {\n            var _b = __read(_a, 2), k = _b[0], v = _b[1];\n            return [k, v];\n        });\n    };\n    BaggageImpl.prototype.setEntry = function (key, entry) {\n        var newBaggage = new BaggageImpl(this._entries);\n        newBaggage._entries.set(key, entry);\n        return newBaggage;\n    };\n    BaggageImpl.prototype.removeEntry = function (key) {\n        var newBaggage = new BaggageImpl(this._entries);\n        newBaggage._entries.delete(key);\n        return newBaggage;\n    };\n    BaggageImpl.prototype.removeEntries = function () {\n        var e_1, _a;\n        var keys = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            keys[_i] = arguments[_i];\n        }\n        var newBaggage = new BaggageImpl(this._entries);\n        try {\n            for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                var key = keys_1_1.value;\n                newBaggage._entries.delete(key);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return newBaggage;\n    };\n    BaggageImpl.prototype.clear = function () {\n        return new BaggageImpl();\n    };\n    return BaggageImpl;\n}());\nexport { BaggageImpl };\n//# sourceMappingURL=baggage-impl.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Symbol used to make BaggageEntryMetadata an opaque type\n */\nexport var baggageEntryMetadataSymbol = Symbol('BaggageEntryMetadata');\n//# sourceMappingURL=symbol.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagAPI } from '../api/diag';\nimport { BaggageImpl } from './internal/baggage-impl';\nimport { baggageEntryMetadataSymbol } from './internal/symbol';\nvar diag = DiagAPI.instance();\n/**\n * Create a new Baggage with optional entries\n *\n * @param entries An array of baggage entries the new baggage should contain\n */\nexport function createBaggage(entries) {\n    if (entries === void 0) { entries = {}; }\n    return new BaggageImpl(new Map(Object.entries(entries)));\n}\n/**\n * Create a serializable BaggageEntryMetadata object from a string.\n *\n * @param str string metadata. Format is currently not defined by the spec and has no special meaning.\n *\n */\nexport function baggageEntryMetadataFromString(str) {\n    if (typeof str !== 'string') {\n        diag.error(\"Cannot create baggage metadata from unknown type: \" + typeof str);\n        str = '';\n    }\n    return {\n        __TYPE__: baggageEntryMetadataSymbol,\n        toString: function () {\n            return str;\n        },\n    };\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { ContextAPI } from './api/context';\n/** Entrypoint for context API */\nexport var context = ContextAPI.getInstance();\n//# sourceMappingURL=context-api.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Get a key to uniquely identify a context value */\nexport function createContextKey(description) {\n    // The specification states that for the same input, multiple calls should\n    // return different keys. Due to the nature of the JS dependency management\n    // system, this creates problems where multiple versions of some package\n    // could hold different keys for the same property.\n    //\n    // Therefore, we use Symbol.for which returns the same key for the same input.\n    return Symbol.for(description);\n}\nvar BaseContext = /** @class */ (function () {\n    /**\n     * Construct a new context which inherits values from an optional parent context.\n     *\n     * @param parentContext a context from which to inherit values\n     */\n    function BaseContext(parentContext) {\n        // for minification\n        var self = this;\n        self._currentContext = parentContext ? new Map(parentContext) : new Map();\n        self.getValue = function (key) { return self._currentContext.get(key); };\n        self.setValue = function (key, value) {\n            var context = new BaseContext(self._currentContext);\n            context._currentContext.set(key, value);\n            return context;\n        };\n        self.deleteValue = function (key) {\n            var context = new BaseContext(self._currentContext);\n            context._currentContext.delete(key);\n            return context;\n        };\n    }\n    return BaseContext;\n}());\n/** The root context is used as the default parent context when there is no active context */\nexport var ROOT_CONTEXT = new BaseContext();\n//# sourceMappingURL=context.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { DiagAPI } from './api/diag';\n/**\n * Entrypoint for Diag API.\n * Defines Diagnostic handler used for internal diagnostic logging operations.\n * The default provides a Noop DiagLogger implementation which may be changed via the\n * diag.setLogger(logger: DiagLogger) function.\n */\nexport var diag = DiagAPI.instance();\n//# sourceMappingURL=diag-api.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Defines the available internal logging levels for the diagnostic logger, the numeric values\n * of the levels are defined to match the original values from the initial LogLevel to avoid\n * compatibility/migration issues for any implementation that assume the numeric ordering.\n */\nexport var DiagLogLevel;\n(function (DiagLogLevel) {\n    /** Diagnostic Logging level setting to disable all logging (except and forced logs) */\n    DiagLogLevel[DiagLogLevel[\"NONE\"] = 0] = \"NONE\";\n    /** Identifies an error scenario */\n    DiagLogLevel[DiagLogLevel[\"ERROR\"] = 30] = \"ERROR\";\n    /** Identifies a warning scenario */\n    DiagLogLevel[DiagLogLevel[\"WARN\"] = 50] = \"WARN\";\n    /** General informational log message */\n    DiagLogLevel[DiagLogLevel[\"INFO\"] = 60] = \"INFO\";\n    /** General debug log message */\n    DiagLogLevel[DiagLogLevel[\"DEBUG\"] = 70] = \"DEBUG\";\n    /**\n     * Detailed trace level logging should only be used for development, should only be set\n     * in a development environment.\n     */\n    DiagLogLevel[DiagLogLevel[\"VERBOSE\"] = 80] = \"VERBOSE\";\n    /** Used to set the logging level to include all logging */\n    DiagLogLevel[DiagLogLevel[\"ALL\"] = 9999] = \"ALL\";\n})(DiagLogLevel || (DiagLogLevel = {}));\n//# sourceMappingURL=types.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * NoopMeter is a noop implementation of the {@link Meter} interface. It reuses\n * constant NoopMetrics for all of its methods.\n */\nvar NoopMeter = /** @class */ (function () {\n    function NoopMeter() {\n    }\n    /**\n     * @see {@link Meter.createHistogram}\n     */\n    NoopMeter.prototype.createHistogram = function (_name, _options) {\n        return NOOP_HISTOGRAM_METRIC;\n    };\n    /**\n     * @see {@link Meter.createCounter}\n     */\n    NoopMeter.prototype.createCounter = function (_name, _options) {\n        return NOOP_COUNTER_METRIC;\n    };\n    /**\n     * @see {@link Meter.createUpDownCounter}\n     */\n    NoopMeter.prototype.createUpDownCounter = function (_name, _options) {\n        return NOOP_UP_DOWN_COUNTER_METRIC;\n    };\n    /**\n     * @see {@link Meter.createObservableGauge}\n     */\n    NoopMeter.prototype.createObservableGauge = function (_name, _options) {\n        return NOOP_OBSERVABLE_GAUGE_METRIC;\n    };\n    /**\n     * @see {@link Meter.createObservableCounter}\n     */\n    NoopMeter.prototype.createObservableCounter = function (_name, _options) {\n        return NOOP_OBSERVABLE_COUNTER_METRIC;\n    };\n    /**\n     * @see {@link Meter.createObservableUpDownCounter}\n     */\n    NoopMeter.prototype.createObservableUpDownCounter = function (_name, _options) {\n        return NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC;\n    };\n    /**\n     * @see {@link Meter.addBatchObservableCallback}\n     */\n    NoopMeter.prototype.addBatchObservableCallback = function (_callback, _observables) { };\n    /**\n     * @see {@link Meter.removeBatchObservableCallback}\n     */\n    NoopMeter.prototype.removeBatchObservableCallback = function (_callback) { };\n    return NoopMeter;\n}());\nexport { NoopMeter };\nvar NoopMetric = /** @class */ (function () {\n    function NoopMetric() {\n    }\n    return NoopMetric;\n}());\nexport { NoopMetric };\nvar NoopCounterMetric = /** @class */ (function (_super) {\n    __extends(NoopCounterMetric, _super);\n    function NoopCounterMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NoopCounterMetric.prototype.add = function (_value, _attributes) { };\n    return NoopCounterMetric;\n}(NoopMetric));\nexport { NoopCounterMetric };\nvar NoopUpDownCounterMetric = /** @class */ (function (_super) {\n    __extends(NoopUpDownCounterMetric, _super);\n    function NoopUpDownCounterMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NoopUpDownCounterMetric.prototype.add = function (_value, _attributes) { };\n    return NoopUpDownCounterMetric;\n}(NoopMetric));\nexport { NoopUpDownCounterMetric };\nvar NoopHistogramMetric = /** @class */ (function (_super) {\n    __extends(NoopHistogramMetric, _super);\n    function NoopHistogramMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NoopHistogramMetric.prototype.record = function (_value, _attributes) { };\n    return NoopHistogramMetric;\n}(NoopMetric));\nexport { NoopHistogramMetric };\nvar NoopObservableMetric = /** @class */ (function () {\n    function NoopObservableMetric() {\n    }\n    NoopObservableMetric.prototype.addCallback = function (_callback) { };\n    NoopObservableMetric.prototype.removeCallback = function (_callback) { };\n    return NoopObservableMetric;\n}());\nexport { NoopObservableMetric };\nvar NoopObservableCounterMetric = /** @class */ (function (_super) {\n    __extends(NoopObservableCounterMetric, _super);\n    function NoopObservableCounterMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return NoopObservableCounterMetric;\n}(NoopObservableMetric));\nexport { NoopObservableCounterMetric };\nvar NoopObservableGaugeMetric = /** @class */ (function (_super) {\n    __extends(NoopObservableGaugeMetric, _super);\n    function NoopObservableGaugeMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return NoopObservableGaugeMetric;\n}(NoopObservableMetric));\nexport { NoopObservableGaugeMetric };\nvar NoopObservableUpDownCounterMetric = /** @class */ (function (_super) {\n    __extends(NoopObservableUpDownCounterMetric, _super);\n    function NoopObservableUpDownCounterMetric() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return NoopObservableUpDownCounterMetric;\n}(NoopObservableMetric));\nexport { NoopObservableUpDownCounterMetric };\nexport var NOOP_METER = new NoopMeter();\n// Synchronous instruments\nexport var NOOP_COUNTER_METRIC = new NoopCounterMetric();\nexport var NOOP_HISTOGRAM_METRIC = new NoopHistogramMetric();\nexport var NOOP_UP_DOWN_COUNTER_METRIC = new NoopUpDownCounterMetric();\n// Asynchronous instruments\nexport var NOOP_OBSERVABLE_COUNTER_METRIC = new NoopObservableCounterMetric();\nexport var NOOP_OBSERVABLE_GAUGE_METRIC = new NoopObservableGaugeMetric();\nexport var NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC = new NoopObservableUpDownCounterMetric();\n/**\n * Create a no-op Meter\n */\nexport function createNoopMeter() {\n    return NOOP_METER;\n}\n//# sourceMappingURL=NoopMeter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** The Type of value. It describes how the data is reported. */\nexport var ValueType;\n(function (ValueType) {\n    ValueType[ValueType[\"INT\"] = 0] = \"INT\";\n    ValueType[ValueType[\"DOUBLE\"] = 1] = \"DOUBLE\";\n})(ValueType || (ValueType = {}));\n//# sourceMappingURL=Metric.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar consoleMap = [\n    { n: 'error', c: 'error' },\n    { n: 'warn', c: 'warn' },\n    { n: 'info', c: 'info' },\n    { n: 'debug', c: 'debug' },\n    { n: 'verbose', c: 'trace' },\n];\n/**\n * A simple Immutable Console based diagnostic logger which will output any messages to the Console.\n * If you want to limit the amount of logging to a specific level or lower use the\n * {@link createLogLevelDiagLogger}\n */\nvar DiagConsoleLogger = /** @class */ (function () {\n    function DiagConsoleLogger() {\n        function _consoleFunc(funcName) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                if (console) {\n                    // Some environments only expose the console when the F12 developer console is open\n                    // eslint-disable-next-line no-console\n                    var theFunc = console[funcName];\n                    if (typeof theFunc !== 'function') {\n                        // Not all environments support all functions\n                        // eslint-disable-next-line no-console\n                        theFunc = console.log;\n                    }\n                    // One last final check\n                    if (typeof theFunc === 'function') {\n                        return theFunc.apply(console, args);\n                    }\n                }\n            };\n        }\n        for (var i = 0; i < consoleMap.length; i++) {\n            this[consoleMap[i].n] = _consoleFunc(consoleMap[i].c);\n        }\n    }\n    return DiagConsoleLogger;\n}());\nexport { DiagConsoleLogger };\n//# sourceMappingURL=consoleLogger.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VALID_KEY_CHAR_RANGE = '[_0-9a-z-*/]';\nvar VALID_KEY = \"[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,255}\";\nvar VALID_VENDOR_KEY = \"[a-z0-9]\" + VALID_KEY_CHAR_RANGE + \"{0,240}@[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,13}\";\nvar VALID_KEY_REGEX = new RegExp(\"^(?:\" + VALID_KEY + \"|\" + VALID_VENDOR_KEY + \")$\");\nvar VALID_VALUE_BASE_REGEX = /^[ -~]{0,255}[!-~]$/;\nvar INVALID_VALUE_COMMA_EQUAL_REGEX = /,|=/;\n/**\n * Key is opaque string up to 256 characters printable. It MUST begin with a\n * lowercase letter, and can only contain lowercase letters a-z, digits 0-9,\n * underscores _, dashes -, asterisks *, and forward slashes /.\n * For multi-tenant vendor scenarios, an at sign (@) can be used to prefix the\n * vendor name. Vendors SHOULD set the tenant ID at the beginning of the key.\n * see https://www.w3.org/TR/trace-context/#key\n */\nexport function validateKey(key) {\n    return VALID_KEY_REGEX.test(key);\n}\n/**\n * Value is opaque string up to 256 characters printable ASCII RFC0020\n * characters (i.e., the range 0x20 to 0x7E) except comma , and =.\n */\nexport function validateValue(value) {\n    return (VALID_VALUE_BASE_REGEX.test(value) &&\n        !INVALID_VALUE_COMMA_EQUAL_REGEX.test(value));\n}\n//# sourceMappingURL=tracestate-validators.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { validateKey, validateValue } from './tracestate-validators';\nvar MAX_TRACE_STATE_ITEMS = 32;\nvar MAX_TRACE_STATE_LEN = 512;\nvar LIST_MEMBERS_SEPARATOR = ',';\nvar LIST_MEMBER_KEY_VALUE_SPLITTER = '=';\n/**\n * TraceState must be a class and not a simple object type because of the spec\n * requirement (https://www.w3.org/TR/trace-context/#tracestate-field).\n *\n * Here is the list of allowed mutations:\n * - New key-value pair should be added into the beginning of the list\n * - The value of any key can be updated. Modified keys MUST be moved to the\n * beginning of the list.\n */\nvar TraceStateImpl = /** @class */ (function () {\n    function TraceStateImpl(rawTraceState) {\n        this._internalState = new Map();\n        if (rawTraceState)\n            this._parse(rawTraceState);\n    }\n    TraceStateImpl.prototype.set = function (key, value) {\n        // TODO: Benchmark the different approaches(map vs list) and\n        // use the faster one.\n        var traceState = this._clone();\n        if (traceState._internalState.has(key)) {\n            traceState._internalState.delete(key);\n        }\n        traceState._internalState.set(key, value);\n        return traceState;\n    };\n    TraceStateImpl.prototype.unset = function (key) {\n        var traceState = this._clone();\n        traceState._internalState.delete(key);\n        return traceState;\n    };\n    TraceStateImpl.prototype.get = function (key) {\n        return this._internalState.get(key);\n    };\n    TraceStateImpl.prototype.serialize = function () {\n        var _this = this;\n        return this._keys()\n            .reduce(function (agg, key) {\n            agg.push(key + LIST_MEMBER_KEY_VALUE_SPLITTER + _this.get(key));\n            return agg;\n        }, [])\n            .join(LIST_MEMBERS_SEPARATOR);\n    };\n    TraceStateImpl.prototype._parse = function (rawTraceState) {\n        if (rawTraceState.length > MAX_TRACE_STATE_LEN)\n            return;\n        this._internalState = rawTraceState\n            .split(LIST_MEMBERS_SEPARATOR)\n            .reverse() // Store in reverse so new keys (.set(...)) will be placed at the beginning\n            .reduce(function (agg, part) {\n            var listMember = part.trim(); // Optional Whitespace (OWS) handling\n            var i = listMember.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);\n            if (i !== -1) {\n                var key = listMember.slice(0, i);\n                var value = listMember.slice(i + 1, part.length);\n                if (validateKey(key) && validateValue(value)) {\n                    agg.set(key, value);\n                }\n                else {\n                    // TODO: Consider to add warning log\n                }\n            }\n            return agg;\n        }, new Map());\n        // Because of the reverse() requirement, trunc must be done after map is created\n        if (this._internalState.size > MAX_TRACE_STATE_ITEMS) {\n            this._internalState = new Map(Array.from(this._internalState.entries())\n                .reverse() // Use reverse same as original tracestate parse chain\n                .slice(0, MAX_TRACE_STATE_ITEMS));\n        }\n    };\n    TraceStateImpl.prototype._keys = function () {\n        return Array.from(this._internalState.keys()).reverse();\n    };\n    TraceStateImpl.prototype._clone = function () {\n        var traceState = new TraceStateImpl();\n        traceState._internalState = new Map(this._internalState);\n        return traceState;\n    };\n    return TraceStateImpl;\n}());\nexport { TraceStateImpl };\n//# sourceMappingURL=tracestate-impl.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TraceStateImpl } from './tracestate-impl';\nexport function createTraceState(rawTraceState) {\n    return new TraceStateImpl(rawTraceState);\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NOOP_METER } from './NoopMeter';\n/**\n * An implementation of the {@link MeterProvider} which returns an impotent Meter\n * for all calls to `getMeter`\n */\nvar NoopMeterProvider = /** @class */ (function () {\n    function NoopMeterProvider() {\n    }\n    NoopMeterProvider.prototype.getMeter = function (_name, _version, _options) {\n        return NOOP_METER;\n    };\n    return NoopMeterProvider;\n}());\nexport { NoopMeterProvider };\nexport var NOOP_METER_PROVIDER = new NoopMeterProvider();\n//# sourceMappingURL=NoopMeterProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NOOP_METER_PROVIDER } from '../metrics/NoopMeterProvider';\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'metrics';\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Metrics API\n */\nvar MetricsAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function MetricsAPI() {\n    }\n    /** Get the singleton instance of the Metrics API */\n    MetricsAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new MetricsAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current global meter provider.\n     * Returns true if the meter provider was successfully registered, else false.\n     */\n    MetricsAPI.prototype.setGlobalMeterProvider = function (provider) {\n        return registerGlobal(API_NAME, provider, DiagAPI.instance());\n    };\n    /**\n     * Returns the global meter provider.\n     */\n    MetricsAPI.prototype.getMeterProvider = function () {\n        return getGlobal(API_NAME) || NOOP_METER_PROVIDER;\n    };\n    /**\n     * Returns a meter from the global meter provider.\n     */\n    MetricsAPI.prototype.getMeter = function (name, version, options) {\n        return this.getMeterProvider().getMeter(name, version, options);\n    };\n    /** Remove the global meter provider */\n    MetricsAPI.prototype.disable = function () {\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n    };\n    return MetricsAPI;\n}());\nexport { MetricsAPI };\n//# sourceMappingURL=metrics.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { MetricsAPI } from './api/metrics';\n/** Entrypoint for metrics API */\nexport var metrics = MetricsAPI.getInstance();\n//# sourceMappingURL=metrics-api.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport { baggageEntryMetadataFromString } from './baggage/utils';\n// Context APIs\nexport { createContextKey, ROOT_CONTEXT } from './context/context';\n// Diag APIs\nexport { DiagConsoleLogger } from './diag/consoleLogger';\nexport { DiagLogLevel, } from './diag/types';\n// Metrics APIs\nexport { createNoopMeter } from './metrics/NoopMeter';\nexport { ValueType, } from './metrics/Metric';\n// Propagation APIs\nexport { defaultTextMapGetter, defaultTextMapSetter, } from './propagation/TextMapPropagator';\nexport { ProxyTracer } from './trace/ProxyTracer';\nexport { ProxyTracerProvider } from './trace/ProxyTracerProvider';\nexport { SamplingDecision } from './trace/SamplingResult';\nexport { SpanKind } from './trace/span_kind';\nexport { SpanStatusCode } from './trace/status';\nexport { TraceFlags } from './trace/trace_flags';\nexport { createTraceState } from './trace/internal/utils';\nexport { isSpanContextValid, isValidTraceId, isValidSpanId, } from './trace/spancontext-utils';\nexport { INVALID_SPANID, INVALID_TRACEID, INVALID_SPAN_CONTEXT, } from './trace/invalid-span-constants';\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { context } from './context-api';\nimport { diag } from './diag-api';\nimport { metrics } from './metrics-api';\nimport { propagation } from './propagation-api';\nimport { trace } from './trace-api';\n// Named export.\nexport { context, diag, metrics, propagation, trace };\n// Default export.\nexport default {\n    context: context,\n    diag: diag,\n    metrics: metrics,\n    propagation: propagation,\n    trace: trace,\n};\n//# sourceMappingURL=index.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins\nexport var _globalThis = typeof globalThis === 'object' ? globalThis : global;\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// this is autogenerated file, see scripts/version-update.js\nexport var VERSION = '1.4.1';\n//# sourceMappingURL=version.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { VERSION } from '../version';\nvar re = /^(\\d+)\\.(\\d+)\\.(\\d+)(-(.+))?$/;\n/**\n * Create a function to test an API version to see if it is compatible with the provided ownVersion.\n *\n * The returned function has the following semantics:\n * - Exact match is always compatible\n * - Major versions must match exactly\n *    - 1.x package cannot use global 2.x package\n *    - 2.x package cannot use global 1.x package\n * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API\n *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects\n *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3\n * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor\n * - Patch and build tag differences are not considered at this time\n *\n * @param ownVersion version which should be checked against\n */\nexport function _makeCompatibilityCheck(ownVersion) {\n    var acceptedVersions = new Set([ownVersion]);\n    var rejectedVersions = new Set();\n    var myVersionMatch = ownVersion.match(re);\n    if (!myVersionMatch) {\n        // we cannot guarantee compatibility so we always return noop\n        return function () { return false; };\n    }\n    var ownVersionParsed = {\n        major: +myVersionMatch[1],\n        minor: +myVersionMatch[2],\n        patch: +myVersionMatch[3],\n        prerelease: myVersionMatch[4],\n    };\n    // if ownVersion has a prerelease tag, versions must match exactly\n    if (ownVersionParsed.prerelease != null) {\n        return function isExactmatch(globalVersion) {\n            return globalVersion === ownVersion;\n        };\n    }\n    function _reject(v) {\n        rejectedVersions.add(v);\n        return false;\n    }\n    function _accept(v) {\n        acceptedVersions.add(v);\n        return true;\n    }\n    return function isCompatible(globalVersion) {\n        if (acceptedVersions.has(globalVersion)) {\n            return true;\n        }\n        if (rejectedVersions.has(globalVersion)) {\n            return false;\n        }\n        var globalVersionMatch = globalVersion.match(re);\n        if (!globalVersionMatch) {\n            // cannot parse other version\n            // we cannot guarantee compatibility so we always noop\n            return _reject(globalVersion);\n        }\n        var globalVersionParsed = {\n            major: +globalVersionMatch[1],\n            minor: +globalVersionMatch[2],\n            patch: +globalVersionMatch[3],\n            prerelease: globalVersionMatch[4],\n        };\n        // if globalVersion has a prerelease tag, versions must match exactly\n        if (globalVersionParsed.prerelease != null) {\n            return _reject(globalVersion);\n        }\n        // major versions must match\n        if (ownVersionParsed.major !== globalVersionParsed.major) {\n            return _reject(globalVersion);\n        }\n        if (ownVersionParsed.major === 0) {\n            if (ownVersionParsed.minor === globalVersionParsed.minor &&\n                ownVersionParsed.patch <= globalVersionParsed.patch) {\n                return _accept(globalVersion);\n            }\n            return _reject(globalVersion);\n        }\n        if (ownVersionParsed.minor <= globalVersionParsed.minor) {\n            return _accept(globalVersion);\n        }\n        return _reject(globalVersion);\n    };\n}\n/**\n * Test an API version to see if it is compatible with this API.\n *\n * - Exact match is always compatible\n * - Major versions must match exactly\n *    - 1.x package cannot use global 2.x package\n *    - 2.x package cannot use global 1.x package\n * - The minor version of the API module requesting access to the global API must be less than or equal to the minor version of this API\n *    - 1.3 package may use 1.4 global because the later global contains all functions 1.3 expects\n *    - 1.4 package may NOT use 1.3 global because it may try to call functions which don't exist on 1.3\n * - If the major version is 0, the minor version is treated as the major and the patch is treated as the minor\n * - Patch and build tag differences are not considered at this time\n *\n * @param version version of the API requesting an instance of the global API\n */\nexport var isCompatible = _makeCompatibilityCheck(VERSION);\n//# sourceMappingURL=semver.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { _globalThis } from '../platform';\nimport { VERSION } from '../version';\nimport { isCompatible } from './semver';\nvar major = VERSION.split('.')[0];\nvar GLOBAL_OPENTELEMETRY_API_KEY = Symbol.for(\"opentelemetry.js.api.\" + major);\nvar _global = _globalThis;\nexport function registerGlobal(type, instance, diag, allowOverride) {\n    var _a;\n    if (allowOverride === void 0) { allowOverride = false; }\n    var api = (_global[GLOBAL_OPENTELEMETRY_API_KEY] = (_a = _global[GLOBAL_OPENTELEMETRY_API_KEY]) !== null && _a !== void 0 ? _a : {\n        version: VERSION,\n    });\n    if (!allowOverride && api[type]) {\n        // already registered an API of this type\n        var err = new Error(\"@opentelemetry/api: Attempted duplicate registration of API: \" + type);\n        diag.error(err.stack || err.message);\n        return false;\n    }\n    if (api.version !== VERSION) {\n        // All registered APIs must be of the same version exactly\n        var err = new Error(\"@opentelemetry/api: Registration of version v\" + api.version + \" for \" + type + \" does not match previously registered API v\" + VERSION);\n        diag.error(err.stack || err.message);\n        return false;\n    }\n    api[type] = instance;\n    diag.debug(\"@opentelemetry/api: Registered a global for \" + type + \" v\" + VERSION + \".\");\n    return true;\n}\nexport function getGlobal(type) {\n    var _a, _b;\n    var globalVersion = (_a = _global[GLOBAL_OPENTELEMETRY_API_KEY]) === null || _a === void 0 ? void 0 : _a.version;\n    if (!globalVersion || !isCompatible(globalVersion)) {\n        return;\n    }\n    return (_b = _global[GLOBAL_OPENTELEMETRY_API_KEY]) === null || _b === void 0 ? void 0 : _b[type];\n}\nexport function unregisterGlobal(type, diag) {\n    diag.debug(\"@opentelemetry/api: Unregistering a global for \" + type + \" v\" + VERSION + \".\");\n    var api = _global[GLOBAL_OPENTELEMETRY_API_KEY];\n    if (api) {\n        delete api[type];\n    }\n}\n//# sourceMappingURL=global-utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * No-op implementations of {@link TextMapPropagator}.\n */\nvar NoopTextMapPropagator = /** @class */ (function () {\n    function NoopTextMapPropagator() {\n    }\n    /** Noop inject function does nothing */\n    NoopTextMapPropagator.prototype.inject = function (_context, _carrier) { };\n    /** Noop extract function does nothing and returns the input context */\n    NoopTextMapPropagator.prototype.extract = function (context, _carrier) {\n        return context;\n    };\n    NoopTextMapPropagator.prototype.fields = function () {\n        return [];\n    };\n    return NoopTextMapPropagator;\n}());\nexport { NoopTextMapPropagator };\n//# sourceMappingURL=NoopTextMapPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ContextAPI } from '../api/context';\nimport { createContextKey } from '../context/context';\n/**\n * Baggage key\n */\nvar BAGGAGE_KEY = createContextKey('OpenTelemetry Baggage Key');\n/**\n * Retrieve the current baggage from the given context\n *\n * @param {Context} Context that manage all context values\n * @returns {Baggage} Extracted baggage from the context\n */\nexport function getBaggage(context) {\n    return context.getValue(BAGGAGE_KEY) || undefined;\n}\n/**\n * Retrieve the current baggage from the active/current context\n *\n * @returns {Baggage} Extracted baggage from the context\n */\nexport function getActiveBaggage() {\n    return getBaggage(ContextAPI.getInstance().active());\n}\n/**\n * Store a baggage in the given context\n *\n * @param {Context} Context that manage all context values\n * @param {Baggage} baggage that will be set in the actual context\n */\nexport function setBaggage(context, baggage) {\n    return context.setValue(BAGGAGE_KEY, baggage);\n}\n/**\n * Delete the baggage stored in the given context\n *\n * @param {Context} Context that manage all context values\n */\nexport function deleteBaggage(context) {\n    return context.deleteValue(BAGGAGE_KEY);\n}\n//# sourceMappingURL=context-helpers.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { NoopTextMapPropagator } from '../propagation/NoopTextMapPropagator';\nimport { defaultTextMapGetter, defaultTextMapSetter, } from '../propagation/TextMapPropagator';\nimport { getBaggage, getActiveBaggage, setBaggage, deleteBaggage, } from '../baggage/context-helpers';\nimport { createBaggage } from '../baggage/utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'propagation';\nvar NOOP_TEXT_MAP_PROPAGATOR = new NoopTextMapPropagator();\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Propagation API\n */\nvar PropagationAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function PropagationAPI() {\n        this.createBaggage = createBaggage;\n        this.getBaggage = getBaggage;\n        this.getActiveBaggage = getActiveBaggage;\n        this.setBaggage = setBaggage;\n        this.deleteBaggage = deleteBaggage;\n    }\n    /** Get the singleton instance of the Propagator API */\n    PropagationAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new PropagationAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current propagator.\n     *\n     * @returns true if the propagator was successfully registered, else false\n     */\n    PropagationAPI.prototype.setGlobalPropagator = function (propagator) {\n        return registerGlobal(API_NAME, propagator, DiagAPI.instance());\n    };\n    /**\n     * Inject context into a carrier to be propagated inter-process\n     *\n     * @param context Context carrying tracing data to inject\n     * @param carrier carrier to inject context into\n     * @param setter Function used to set values on the carrier\n     */\n    PropagationAPI.prototype.inject = function (context, carrier, setter) {\n        if (setter === void 0) { setter = defaultTextMapSetter; }\n        return this._getGlobalPropagator().inject(context, carrier, setter);\n    };\n    /**\n     * Extract context from a carrier\n     *\n     * @param context Context which the newly created context will inherit from\n     * @param carrier Carrier to extract context from\n     * @param getter Function used to extract keys from a carrier\n     */\n    PropagationAPI.prototype.extract = function (context, carrier, getter) {\n        if (getter === void 0) { getter = defaultTextMapGetter; }\n        return this._getGlobalPropagator().extract(context, carrier, getter);\n    };\n    /**\n     * Return a list of all fields which may be used by the propagator.\n     */\n    PropagationAPI.prototype.fields = function () {\n        return this._getGlobalPropagator().fields();\n    };\n    /** Remove the global propagator */\n    PropagationAPI.prototype.disable = function () {\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n    };\n    PropagationAPI.prototype._getGlobalPropagator = function () {\n        return getGlobal(API_NAME) || NOOP_TEXT_MAP_PROPAGATOR;\n    };\n    return PropagationAPI;\n}());\nexport { PropagationAPI };\n//# sourceMappingURL=propagation.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { PropagationAPI } from './api/propagation';\n/** Entrypoint for propagation API */\nexport var propagation = PropagationAPI.getInstance();\n//# sourceMappingURL=propagation-api.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var defaultTextMapGetter = {\n    get: function (carrier, key) {\n        if (carrier == null) {\n            return undefined;\n        }\n        return carrier[key];\n    },\n    keys: function (carrier) {\n        if (carrier == null) {\n            return [];\n        }\n        return Object.keys(carrier);\n    },\n};\nexport var defaultTextMapSetter = {\n    set: function (carrier, key, value) {\n        if (carrier == null) {\n            return;\n        }\n        carrier[key] = value;\n    },\n};\n//# sourceMappingURL=TextMapPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getGlobal, registerGlobal, unregisterGlobal, } from '../internal/global-utils';\nimport { ProxyTracerProvider } from '../trace/ProxyTracerProvider';\nimport { isSpanContextValid, wrapSpanContext, } from '../trace/spancontext-utils';\nimport { deleteSpan, getActiveSpan, getSpan, getSpanContext, setSpan, setSpanContext, } from '../trace/context-utils';\nimport { DiagAPI } from './diag';\nvar API_NAME = 'trace';\n/**\n * Singleton object which represents the entry point to the OpenTelemetry Tracing API\n */\nvar TraceAPI = /** @class */ (function () {\n    /** Empty private constructor prevents end users from constructing a new instance of the API */\n    function TraceAPI() {\n        this._proxyTracerProvider = new ProxyTracerProvider();\n        this.wrapSpanContext = wrapSpanContext;\n        this.isSpanContextValid = isSpanContextValid;\n        this.deleteSpan = deleteSpan;\n        this.getSpan = getSpan;\n        this.getActiveSpan = getActiveSpan;\n        this.getSpanContext = getSpanContext;\n        this.setSpan = setSpan;\n        this.setSpanContext = setSpanContext;\n    }\n    /** Get the singleton instance of the Trace API */\n    TraceAPI.getInstance = function () {\n        if (!this._instance) {\n            this._instance = new TraceAPI();\n        }\n        return this._instance;\n    };\n    /**\n     * Set the current global tracer.\n     *\n     * @returns true if the tracer provider was successfully registered, else false\n     */\n    TraceAPI.prototype.setGlobalTracerProvider = function (provider) {\n        var success = registerGlobal(API_NAME, this._proxyTracerProvider, DiagAPI.instance());\n        if (success) {\n            this._proxyTracerProvider.setDelegate(provider);\n        }\n        return success;\n    };\n    /**\n     * Returns the global tracer provider.\n     */\n    TraceAPI.prototype.getTracerProvider = function () {\n        return getGlobal(API_NAME) || this._proxyTracerProvider;\n    };\n    /**\n     * Returns a tracer from the global tracer provider.\n     */\n    TraceAPI.prototype.getTracer = function (name, version) {\n        return this.getTracerProvider().getTracer(name, version);\n    };\n    /** Remove the global tracer provider */\n    TraceAPI.prototype.disable = function () {\n        unregisterGlobal(API_NAME, DiagAPI.instance());\n        this._proxyTracerProvider = new ProxyTracerProvider();\n    };\n    return TraceAPI;\n}());\nexport { TraceAPI };\n//# sourceMappingURL=trace.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Split module-level variable definition into separate files to allow\n// tree-shaking on each api instance.\nimport { TraceAPI } from './api/trace';\n/** Entrypoint for trace API */\nexport var trace = TraceAPI.getInstance();\n//# sourceMappingURL=trace-api.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { INVALID_SPAN_CONTEXT } from './invalid-span-constants';\n/**\n * The NonRecordingSpan is the default {@link Span} that is used when no Span\n * implementation is available. All operations are no-op including context\n * propagation.\n */\nvar NonRecordingSpan = /** @class */ (function () {\n    function NonRecordingSpan(_spanContext) {\n        if (_spanContext === void 0) { _spanContext = INVALID_SPAN_CONTEXT; }\n        this._spanContext = _spanContext;\n    }\n    // Returns a SpanContext.\n    NonRecordingSpan.prototype.spanContext = function () {\n        return this._spanContext;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setAttribute = function (_key, _value) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setAttributes = function (_attributes) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.addEvent = function (_name, _attributes) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.setStatus = function (_status) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.updateName = function (_name) {\n        return this;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.end = function (_endTime) { };\n    // isRecording always returns false for NonRecordingSpan.\n    NonRecordingSpan.prototype.isRecording = function () {\n        return false;\n    };\n    // By default does nothing\n    NonRecordingSpan.prototype.recordException = function (_exception, _time) { };\n    return NonRecordingSpan;\n}());\nexport { NonRecordingSpan };\n//# sourceMappingURL=NonRecordingSpan.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ContextAPI } from '../api/context';\nimport { getSpanContext, setSpan } from '../trace/context-utils';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nimport { isSpanContextValid } from './spancontext-utils';\nvar contextApi = ContextAPI.getInstance();\n/**\n * No-op implementations of {@link Tracer}.\n */\nvar NoopTracer = /** @class */ (function () {\n    function NoopTracer() {\n    }\n    // startSpan starts a noop span.\n    NoopTracer.prototype.startSpan = function (name, options, context) {\n        if (context === void 0) { context = contextApi.active(); }\n        var root = Boolean(options === null || options === void 0 ? void 0 : options.root);\n        if (root) {\n            return new NonRecordingSpan();\n        }\n        var parentFromContext = context && getSpanContext(context);\n        if (isSpanContext(parentFromContext) &&\n            isSpanContextValid(parentFromContext)) {\n            return new NonRecordingSpan(parentFromContext);\n        }\n        else {\n            return new NonRecordingSpan();\n        }\n    };\n    NoopTracer.prototype.startActiveSpan = function (name, arg2, arg3, arg4) {\n        var opts;\n        var ctx;\n        var fn;\n        if (arguments.length < 2) {\n            return;\n        }\n        else if (arguments.length === 2) {\n            fn = arg2;\n        }\n        else if (arguments.length === 3) {\n            opts = arg2;\n            fn = arg3;\n        }\n        else {\n            opts = arg2;\n            ctx = arg3;\n            fn = arg4;\n        }\n        var parentContext = ctx !== null && ctx !== void 0 ? ctx : contextApi.active();\n        var span = this.startSpan(name, opts, parentContext);\n        var contextWithSpanSet = setSpan(parentContext, span);\n        return contextApi.with(contextWithSpanSet, fn, undefined, span);\n    };\n    return NoopTracer;\n}());\nexport { NoopTracer };\nfunction isSpanContext(spanContext) {\n    return (typeof spanContext === 'object' &&\n        typeof spanContext['spanId'] === 'string' &&\n        typeof spanContext['traceId'] === 'string' &&\n        typeof spanContext['traceFlags'] === 'number');\n}\n//# sourceMappingURL=NoopTracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NoopTracer } from './NoopTracer';\nvar NOOP_TRACER = new NoopTracer();\n/**\n * Proxy tracer provided by the proxy tracer provider\n */\nvar ProxyTracer = /** @class */ (function () {\n    function ProxyTracer(_provider, name, version, options) {\n        this._provider = _provider;\n        this.name = name;\n        this.version = version;\n        this.options = options;\n    }\n    ProxyTracer.prototype.startSpan = function (name, options, context) {\n        return this._getTracer().startSpan(name, options, context);\n    };\n    ProxyTracer.prototype.startActiveSpan = function (_name, _options, _context, _fn) {\n        var tracer = this._getTracer();\n        return Reflect.apply(tracer.startActiveSpan, tracer, arguments);\n    };\n    /**\n     * Try to get a tracer from the proxy tracer provider.\n     * If the proxy tracer provider has no delegate, return a noop tracer.\n     */\n    ProxyTracer.prototype._getTracer = function () {\n        if (this._delegate) {\n            return this._delegate;\n        }\n        var tracer = this._provider.getDelegateTracer(this.name, this.version, this.options);\n        if (!tracer) {\n            return NOOP_TRACER;\n        }\n        this._delegate = tracer;\n        return this._delegate;\n    };\n    return ProxyTracer;\n}());\nexport { ProxyTracer };\n//# sourceMappingURL=ProxyTracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ProxyTracer } from './ProxyTracer';\nimport { NoopTracerProvider } from './NoopTracerProvider';\nvar NOOP_TRACER_PROVIDER = new NoopTracerProvider();\n/**\n * Tracer provider which provides {@link ProxyTracer}s.\n *\n * Before a delegate is set, tracers provided are NoOp.\n *   When a delegate is set, traces are provided from the delegate.\n *   When a delegate is set after tracers have already been provided,\n *   all tracers already provided will use the provided delegate implementation.\n */\nvar ProxyTracerProvider = /** @class */ (function () {\n    function ProxyTracerProvider() {\n    }\n    /**\n     * Get a {@link ProxyTracer}\n     */\n    ProxyTracerProvider.prototype.getTracer = function (name, version, options) {\n        var _a;\n        return ((_a = this.getDelegateTracer(name, version, options)) !== null && _a !== void 0 ? _a : new ProxyTracer(this, name, version, options));\n    };\n    ProxyTracerProvider.prototype.getDelegate = function () {\n        var _a;\n        return (_a = this._delegate) !== null && _a !== void 0 ? _a : NOOP_TRACER_PROVIDER;\n    };\n    /**\n     * Set the delegate tracer provider\n     */\n    ProxyTracerProvider.prototype.setDelegate = function (delegate) {\n        this._delegate = delegate;\n    };\n    ProxyTracerProvider.prototype.getDelegateTracer = function (name, version, options) {\n        var _a;\n        return (_a = this._delegate) === null || _a === void 0 ? void 0 : _a.getTracer(name, version, options);\n    };\n    return ProxyTracerProvider;\n}());\nexport { ProxyTracerProvider };\n//# sourceMappingURL=ProxyTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { NoopTracer } from './NoopTracer';\n/**\n * An implementation of the {@link TracerProvider} which returns an impotent\n * Tracer for all calls to `getTracer`.\n *\n * All operations are no-op.\n */\nvar NoopTracerProvider = /** @class */ (function () {\n    function NoopTracerProvider() {\n    }\n    NoopTracerProvider.prototype.getTracer = function (_name, _version, _options) {\n        return new NoopTracer();\n    };\n    return NoopTracerProvider;\n}());\nexport { NoopTracerProvider };\n//# sourceMappingURL=NoopTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @deprecated use the one declared in @opentelemetry/sdk-trace-base instead.\n * A sampling decision that determines how a {@link Span} will be recorded\n * and collected.\n */\nexport var SamplingDecision;\n(function (SamplingDecision) {\n    /**\n     * `Span.isRecording() === false`, span will not be recorded and all events\n     * and attributes will be dropped.\n     */\n    SamplingDecision[SamplingDecision[\"NOT_RECORD\"] = 0] = \"NOT_RECORD\";\n    /**\n     * `Span.isRecording() === true`, but `Sampled` flag in {@link TraceFlags}\n     * MUST NOT be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD\"] = 1] = \"RECORD\";\n    /**\n     * `Span.isRecording() === true` AND `Sampled` flag in {@link TraceFlags}\n     * MUST be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD_AND_SAMPLED\"] = 2] = \"RECORD_AND_SAMPLED\";\n})(SamplingDecision || (SamplingDecision = {}));\n//# sourceMappingURL=SamplingResult.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '../context/context';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nimport { ContextAPI } from '../api/context';\n/**\n * span key\n */\nvar SPAN_KEY = createContextKey('OpenTelemetry Context Key SPAN');\n/**\n * Return the span if one exists\n *\n * @param context context to get span from\n */\nexport function getSpan(context) {\n    return context.getValue(SPAN_KEY) || undefined;\n}\n/**\n * Gets the span from the current context, if one exists.\n */\nexport function getActiveSpan() {\n    return getSpan(ContextAPI.getInstance().active());\n}\n/**\n * Set the span on a context\n *\n * @param context context to use as parent\n * @param span span to set active\n */\nexport function setSpan(context, span) {\n    return context.setValue(SPAN_KEY, span);\n}\n/**\n * Remove current span stored in the context\n *\n * @param context context to delete span from\n */\nexport function deleteSpan(context) {\n    return context.deleteValue(SPAN_KEY);\n}\n/**\n * Wrap span context in a NoopSpan and set as span in a new\n * context\n *\n * @param context context to set active span on\n * @param spanContext span context to be wrapped\n */\nexport function setSpanContext(context, spanContext) {\n    return setSpan(context, new NonRecordingSpan(spanContext));\n}\n/**\n * Get the span context of the span if it exists.\n *\n * @param context context to get values from\n */\nexport function getSpanContext(context) {\n    var _a;\n    return (_a = getSpan(context)) === null || _a === void 0 ? void 0 : _a.spanContext();\n}\n//# sourceMappingURL=context-utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TraceFlags } from './trace_flags';\nexport var INVALID_SPANID = '0000000000000000';\nexport var INVALID_TRACEID = '00000000000000000000000000000000';\nexport var INVALID_SPAN_CONTEXT = {\n    traceId: INVALID_TRACEID,\n    spanId: INVALID_SPANID,\n    traceFlags: TraceFlags.NONE,\n};\n//# sourceMappingURL=invalid-span-constants.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var SpanKind;\n(function (SpanKind) {\n    /** Default value. Indicates that the span is used internally. */\n    SpanKind[SpanKind[\"INTERNAL\"] = 0] = \"INTERNAL\";\n    /**\n     * Indicates that the span covers server-side handling of an RPC or other\n     * remote request.\n     */\n    SpanKind[SpanKind[\"SERVER\"] = 1] = \"SERVER\";\n    /**\n     * Indicates that the span covers the client-side wrapper around an RPC or\n     * other remote request.\n     */\n    SpanKind[SpanKind[\"CLIENT\"] = 2] = \"CLIENT\";\n    /**\n     * Indicates that the span describes producer sending a message to a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"PRODUCER\"] = 3] = \"PRODUCER\";\n    /**\n     * Indicates that the span describes consumer receiving a message from a\n     * broker. Unlike client and server, there is no direct critical path latency\n     * relationship between producer and consumer spans.\n     */\n    SpanKind[SpanKind[\"CONSUMER\"] = 4] = \"CONSUMER\";\n})(SpanKind || (SpanKind = {}));\n//# sourceMappingURL=span_kind.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { INVALID_SPANID, INVALID_TRACEID } from './invalid-span-constants';\nimport { NonRecordingSpan } from './NonRecordingSpan';\nvar VALID_TRACEID_REGEX = /^([0-9a-f]{32})$/i;\nvar VALID_SPANID_REGEX = /^[0-9a-f]{16}$/i;\nexport function isValidTraceId(traceId) {\n    return VALID_TRACEID_REGEX.test(traceId) && traceId !== INVALID_TRACEID;\n}\nexport function isValidSpanId(spanId) {\n    return VALID_SPANID_REGEX.test(spanId) && spanId !== INVALID_SPANID;\n}\n/**\n * Returns true if this {@link SpanContext} is valid.\n * @return true if this {@link SpanContext} is valid.\n */\nexport function isSpanContextValid(spanContext) {\n    return (isValidTraceId(spanContext.traceId) && isValidSpanId(spanContext.spanId));\n}\n/**\n * Wrap the given {@link SpanContext} in a new non-recording {@link Span}\n *\n * @param spanContext span context to be wrapped\n * @returns a new non-recording {@link Span} with the provided context\n */\nexport function wrapSpanContext(spanContext) {\n    return new NonRecordingSpan(spanContext);\n}\n//# sourceMappingURL=spancontext-utils.js.map","/**\n * An enumeration of status codes.\n */\nexport var SpanStatusCode;\n(function (SpanStatusCode) {\n    /**\n     * The default status.\n     */\n    SpanStatusCode[SpanStatusCode[\"UNSET\"] = 0] = \"UNSET\";\n    /**\n     * The operation has been validated by an Application developer or\n     * Operator to have completed successfully.\n     */\n    SpanStatusCode[SpanStatusCode[\"OK\"] = 1] = \"OK\";\n    /**\n     * The operation contains an error.\n     */\n    SpanStatusCode[SpanStatusCode[\"ERROR\"] = 2] = \"ERROR\";\n})(SpanStatusCode || (SpanStatusCode = {}));\n//# sourceMappingURL=status.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var TraceFlags;\n(function (TraceFlags) {\n    /** Represents no flag set. */\n    TraceFlags[TraceFlags[\"NONE\"] = 0] = \"NONE\";\n    /** Bit to represent whether trace is sampled in trace flags. */\n    TraceFlags[TraceFlags[\"SAMPLED\"] = 1] = \"SAMPLED\";\n})(TraceFlags || (TraceFlags = {}));\n//# sourceMappingURL=trace_flags.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var ExportResultCode;\n(function (ExportResultCode) {\n    ExportResultCode[ExportResultCode[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    ExportResultCode[ExportResultCode[\"FAILED\"] = 1] = \"FAILED\";\n})(ExportResultCode || (ExportResultCode = {}));\n//# sourceMappingURL=ExportResult.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var BAGGAGE_KEY_PAIR_SEPARATOR = '=';\nexport var BAGGAGE_PROPERTIES_SEPARATOR = ';';\nexport var BAGGAGE_ITEMS_SEPARATOR = ',';\n// Name of the http header used to propagate the baggage\nexport var BAGGAGE_HEADER = 'baggage';\n// Maximum number of name-value pairs allowed by w3c spec\nexport var BAGGAGE_MAX_NAME_VALUE_PAIRS = 180;\n// Maximum number of bytes per a single name-value pair allowed by w3c spec\nexport var BAGGAGE_MAX_PER_NAME_VALUE_PAIRS = 4096;\n// Maximum total length of all name-value pairs allowed by w3c spec\nexport var BAGGAGE_MAX_TOTAL_LENGTH = 8192;\n//# sourceMappingURL=constants.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { propagation, } from '@opentelemetry/api';\nimport { isTracingSuppressed } from '../../trace/suppress-tracing';\nimport { BAGGAGE_HEADER, BAGGAGE_ITEMS_SEPARATOR, BAGGAGE_MAX_NAME_VALUE_PAIRS, BAGGAGE_MAX_PER_NAME_VALUE_PAIRS, } from '../constants';\nimport { getKeyPairs, parsePairKeyValue, serializeKeyPairs } from '../utils';\n/**\n * Propagates {@link Baggage} through Context format propagation.\n *\n * Based on the Baggage specification:\n * https://w3c.github.io/baggage/\n */\nvar W3CBaggagePropagator = /** @class */ (function () {\n    function W3CBaggagePropagator() {\n    }\n    W3CBaggagePropagator.prototype.inject = function (context, carrier, setter) {\n        var baggage = propagation.getBaggage(context);\n        if (!baggage || isTracingSuppressed(context))\n            return;\n        var keyPairs = getKeyPairs(baggage)\n            .filter(function (pair) {\n            return pair.length <= BAGGAGE_MAX_PER_NAME_VALUE_PAIRS;\n        })\n            .slice(0, BAGGAGE_MAX_NAME_VALUE_PAIRS);\n        var headerValue = serializeKeyPairs(keyPairs);\n        if (headerValue.length > 0) {\n            setter.set(carrier, BAGGAGE_HEADER, headerValue);\n        }\n    };\n    W3CBaggagePropagator.prototype.extract = function (context, carrier, getter) {\n        var headerValue = getter.get(carrier, BAGGAGE_HEADER);\n        var baggageString = Array.isArray(headerValue)\n            ? headerValue.join(BAGGAGE_ITEMS_SEPARATOR)\n            : headerValue;\n        if (!baggageString)\n            return context;\n        var baggage = {};\n        if (baggageString.length === 0) {\n            return context;\n        }\n        var pairs = baggageString.split(BAGGAGE_ITEMS_SEPARATOR);\n        pairs.forEach(function (entry) {\n            var keyPair = parsePairKeyValue(entry);\n            if (keyPair) {\n                var baggageEntry = { value: keyPair.value };\n                if (keyPair.metadata) {\n                    baggageEntry.metadata = keyPair.metadata;\n                }\n                baggage[keyPair.key] = baggageEntry;\n            }\n        });\n        if (Object.entries(baggage).length === 0) {\n            return context;\n        }\n        return propagation.setBaggage(context, propagation.createBaggage(baggage));\n    };\n    W3CBaggagePropagator.prototype.fields = function () {\n        return [BAGGAGE_HEADER];\n    };\n    return W3CBaggagePropagator;\n}());\nexport { W3CBaggagePropagator };\n//# sourceMappingURL=W3CBaggagePropagator.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { baggageEntryMetadataFromString, } from '@opentelemetry/api';\nimport { BAGGAGE_ITEMS_SEPARATOR, BAGGAGE_PROPERTIES_SEPARATOR, BAGGAGE_KEY_PAIR_SEPARATOR, BAGGAGE_MAX_TOTAL_LENGTH, } from './constants';\nexport function serializeKeyPairs(keyPairs) {\n    return keyPairs.reduce(function (hValue, current) {\n        var value = \"\" + hValue + (hValue !== '' ? BAGGAGE_ITEMS_SEPARATOR : '') + current;\n        return value.length > BAGGAGE_MAX_TOTAL_LENGTH ? hValue : value;\n    }, '');\n}\nexport function getKeyPairs(baggage) {\n    return baggage.getAllEntries().map(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        var entry = encodeURIComponent(key) + \"=\" + encodeURIComponent(value.value);\n        // include opaque metadata if provided\n        // NOTE: we intentionally don't URI-encode the metadata - that responsibility falls on the metadata implementation\n        if (value.metadata !== undefined) {\n            entry += BAGGAGE_PROPERTIES_SEPARATOR + value.metadata.toString();\n        }\n        return entry;\n    });\n}\nexport function parsePairKeyValue(entry) {\n    var valueProps = entry.split(BAGGAGE_PROPERTIES_SEPARATOR);\n    if (valueProps.length <= 0)\n        return;\n    var keyPairPart = valueProps.shift();\n    if (!keyPairPart)\n        return;\n    var separatorIndex = keyPairPart.indexOf(BAGGAGE_KEY_PAIR_SEPARATOR);\n    if (separatorIndex <= 0)\n        return;\n    var key = decodeURIComponent(keyPairPart.substring(0, separatorIndex).trim());\n    var value = decodeURIComponent(keyPairPart.substring(separatorIndex + 1).trim());\n    var metadata;\n    if (valueProps.length > 0) {\n        metadata = baggageEntryMetadataFromString(valueProps.join(BAGGAGE_PROPERTIES_SEPARATOR));\n    }\n    return { key: key, value: value, metadata: metadata };\n}\n/**\n * Parse a string serialized in the baggage HTTP Format (without metadata):\n * https://github.com/w3c/baggage/blob/master/baggage/HTTP_HEADER_FORMAT.md\n */\nexport function parseKeyPairsIntoRecord(value) {\n    if (typeof value !== 'string' || value.length === 0)\n        return {};\n    return value\n        .split(BAGGAGE_ITEMS_SEPARATOR)\n        .map(function (entry) {\n        return parsePairKeyValue(entry);\n    })\n        .filter(function (keyPair) { return keyPair !== undefined && keyPair.value.length > 0; })\n        .reduce(function (headers, keyPair) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        headers[keyPair.key] = keyPair.value;\n        return headers;\n    }, {});\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { diag } from '@opentelemetry/api';\nexport function sanitizeAttributes(attributes) {\n    var e_1, _a;\n    var out = {};\n    if (typeof attributes !== 'object' || attributes == null) {\n        return out;\n    }\n    try {\n        for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), key = _d[0], val = _d[1];\n            if (!isAttributeKey(key)) {\n                diag.warn(\"Invalid attribute key: \" + key);\n                continue;\n            }\n            if (!isAttributeValue(val)) {\n                diag.warn(\"Invalid attribute value set for key: \" + key);\n                continue;\n            }\n            if (Array.isArray(val)) {\n                out[key] = val.slice();\n            }\n            else {\n                out[key] = val;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return out;\n}\nexport function isAttributeKey(key) {\n    return typeof key === 'string' && key.length > 0;\n}\nexport function isAttributeValue(val) {\n    if (val == null) {\n        return true;\n    }\n    if (Array.isArray(val)) {\n        return isHomogeneousAttributeValueArray(val);\n    }\n    return isValidPrimitiveAttributeValue(val);\n}\nfunction isHomogeneousAttributeValueArray(arr) {\n    var e_2, _a;\n    var type;\n    try {\n        for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n            var element = arr_1_1.value;\n            // null/undefined elements are allowed\n            if (element == null)\n                continue;\n            if (!type) {\n                if (isValidPrimitiveAttributeValue(element)) {\n                    type = typeof element;\n                    continue;\n                }\n                // encountered an invalid primitive\n                return false;\n            }\n            if (typeof element === type) {\n                continue;\n            }\n            return false;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return true;\n}\nfunction isValidPrimitiveAttributeValue(val) {\n    switch (typeof val) {\n        case 'number':\n        case 'boolean':\n        case 'string':\n            return true;\n    }\n    return false;\n}\n//# sourceMappingURL=attributes.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { loggingErrorHandler } from './logging-error-handler';\n/** The global error handler delegate */\nvar delegateHandler = loggingErrorHandler();\n/**\n * Set the global error handler\n * @param {ErrorHandler} handler\n */\nexport function setGlobalErrorHandler(handler) {\n    delegateHandler = handler;\n}\n/**\n * Return the global error handler\n * @param {Exception} ex\n */\nexport function globalErrorHandler(ex) {\n    try {\n        delegateHandler(ex);\n    }\n    catch (_a) { } // eslint-disable-line no-empty\n}\n//# sourceMappingURL=global-error-handler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { diag } from '@opentelemetry/api';\n/**\n * Returns a function that logs an error using the provided logger, or a\n * console logger if one was not provided.\n */\nexport function loggingErrorHandler() {\n    return function (ex) {\n        diag.error(stringifyException(ex));\n    };\n}\n/**\n * Converts an exception into a string representation\n * @param {Exception} ex\n */\nfunction stringifyException(ex) {\n    if (typeof ex === 'string') {\n        return ex;\n    }\n    else {\n        return JSON.stringify(flattenException(ex));\n    }\n}\n/**\n * Flattens an exception into key-value pairs by traversing the prototype chain\n * and coercing values to strings. Duplicate properties will not be overwritten;\n * the first insert wins.\n */\nfunction flattenException(ex) {\n    var result = {};\n    var current = ex;\n    while (current !== null) {\n        Object.getOwnPropertyNames(current).forEach(function (propertyName) {\n            if (result[propertyName])\n                return;\n            var value = current[propertyName];\n            if (value) {\n                result[propertyName] = String(value);\n            }\n        });\n        current = Object.getPrototypeOf(current);\n    }\n    return result;\n}\n//# sourceMappingURL=logging-error-handler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { otperformance as performance } from '../platform';\nvar NANOSECOND_DIGITS = 9;\nvar NANOSECOND_DIGITS_IN_MILLIS = 6;\nvar MILLISECONDS_TO_NANOSECONDS = Math.pow(10, NANOSECOND_DIGITS_IN_MILLIS);\nvar SECOND_TO_NANOSECONDS = Math.pow(10, NANOSECOND_DIGITS);\n/**\n * Converts a number of milliseconds from epoch to HrTime([seconds, remainder in nanoseconds]).\n * @param epochMillis\n */\nexport function millisToHrTime(epochMillis) {\n    var epochSeconds = epochMillis / 1000;\n    // Decimals only.\n    var seconds = Math.trunc(epochSeconds);\n    // Round sub-nanosecond accuracy to nanosecond.\n    var nanos = Math.round((epochMillis % 1000) * MILLISECONDS_TO_NANOSECONDS);\n    return [seconds, nanos];\n}\nexport function getTimeOrigin() {\n    var timeOrigin = performance.timeOrigin;\n    if (typeof timeOrigin !== 'number') {\n        var perf = performance;\n        timeOrigin = perf.timing && perf.timing.fetchStart;\n    }\n    return timeOrigin;\n}\n/**\n * Returns an hrtime calculated via performance component.\n * @param performanceNow\n */\nexport function hrTime(performanceNow) {\n    var timeOrigin = millisToHrTime(getTimeOrigin());\n    var now = millisToHrTime(typeof performanceNow === 'number' ? performanceNow : performance.now());\n    return addHrTimes(timeOrigin, now);\n}\n/**\n *\n * Converts a TimeInput to an HrTime, defaults to _hrtime().\n * @param time\n */\nexport function timeInputToHrTime(time) {\n    // process.hrtime\n    if (isTimeInputHrTime(time)) {\n        return time;\n    }\n    else if (typeof time === 'number') {\n        // Must be a performance.now() if it's smaller than process start time.\n        if (time < getTimeOrigin()) {\n            return hrTime(time);\n        }\n        else {\n            // epoch milliseconds or performance.timeOrigin\n            return millisToHrTime(time);\n        }\n    }\n    else if (time instanceof Date) {\n        return millisToHrTime(time.getTime());\n    }\n    else {\n        throw TypeError('Invalid input type');\n    }\n}\n/**\n * Returns a duration of two hrTime.\n * @param startTime\n * @param endTime\n */\nexport function hrTimeDuration(startTime, endTime) {\n    var seconds = endTime[0] - startTime[0];\n    var nanos = endTime[1] - startTime[1];\n    // overflow\n    if (nanos < 0) {\n        seconds -= 1;\n        // negate\n        nanos += SECOND_TO_NANOSECONDS;\n    }\n    return [seconds, nanos];\n}\n/**\n * Convert hrTime to timestamp, for example \"2019-05-14T17:00:00.000123456Z\"\n * @param time\n */\nexport function hrTimeToTimeStamp(time) {\n    var precision = NANOSECOND_DIGITS;\n    var tmp = \"\" + '0'.repeat(precision) + time[1] + \"Z\";\n    var nanoString = tmp.substr(tmp.length - precision - 1);\n    var date = new Date(time[0] * 1000).toISOString();\n    return date.replace('000Z', nanoString);\n}\n/**\n * Convert hrTime to nanoseconds.\n * @param time\n */\nexport function hrTimeToNanoseconds(time) {\n    return time[0] * SECOND_TO_NANOSECONDS + time[1];\n}\n/**\n * Convert hrTime to milliseconds.\n * @param time\n */\nexport function hrTimeToMilliseconds(time) {\n    return time[0] * 1e3 + time[1] / 1e6;\n}\n/**\n * Convert hrTime to microseconds.\n * @param time\n */\nexport function hrTimeToMicroseconds(time) {\n    return time[0] * 1e6 + time[1] / 1e3;\n}\n/**\n * check if time is HrTime\n * @param value\n */\nexport function isTimeInputHrTime(value) {\n    return (Array.isArray(value) &&\n        value.length === 2 &&\n        typeof value[0] === 'number' &&\n        typeof value[1] === 'number');\n}\n/**\n * check if input value is a correct types.TimeInput\n * @param value\n */\nexport function isTimeInput(value) {\n    return (isTimeInputHrTime(value) ||\n        typeof value === 'number' ||\n        value instanceof Date);\n}\n/**\n * Given 2 HrTime formatted times, return their sum as an HrTime.\n */\nexport function addHrTimes(time1, time2) {\n    var out = [time1[0] + time2[0], time1[1] + time2[1]];\n    // Nanoseconds\n    if (out[1] >= SECOND_TO_NANOSECONDS) {\n        out[1] -= SECOND_TO_NANOSECONDS;\n        out[0] += 1;\n    }\n    return out;\n}\n//# sourceMappingURL=time.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A utility for returning wall times anchored to a given point in time. Wall time measurements will\n * not be taken from the system, but instead are computed by adding a monotonic clock time\n * to the anchor point.\n *\n * This is needed because the system time can change and result in unexpected situations like\n * spans ending before they are started. Creating an anchored clock for each local root span\n * ensures that span timings and durations are accurate while preventing span times from drifting\n * too far from the system clock.\n *\n * Only creating an anchored clock once per local trace ensures span times are correct relative\n * to each other. For example, a child span will never have a start time before its parent even\n * if the system clock is corrected during the local trace.\n *\n * Heavily inspired by the OTel Java anchored clock\n * https://github.com/open-telemetry/opentelemetry-java/blob/main/sdk/trace/src/main/java/io/opentelemetry/sdk/trace/AnchoredClock.java\n */\nvar AnchoredClock = /** @class */ (function () {\n    /**\n     * Create a new AnchoredClock anchored to the current time returned by systemClock.\n     *\n     * @param systemClock should be a clock that returns the number of milliseconds since January 1 1970 such as Date\n     * @param monotonicClock should be a clock that counts milliseconds monotonically such as window.performance or perf_hooks.performance\n     */\n    function AnchoredClock(systemClock, monotonicClock) {\n        this._monotonicClock = monotonicClock;\n        this._epochMillis = systemClock.now();\n        this._performanceMillis = monotonicClock.now();\n    }\n    /**\n     * Returns the current time by adding the number of milliseconds since the\n     * AnchoredClock was created to the creation epoch time\n     */\n    AnchoredClock.prototype.now = function () {\n        var delta = this._monotonicClock.now() - this._performanceMillis;\n        return this._epochMillis + delta;\n    };\n    return AnchoredClock;\n}());\nexport { AnchoredClock };\n//# sourceMappingURL=anchored-clock.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins\nexport var _globalThis = typeof globalThis === 'object' ? globalThis : global;\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction intValue(charCode) {\n    // 0-9\n    if (charCode >= 48 && charCode <= 57) {\n        return charCode - 48;\n    }\n    // a-f\n    if (charCode >= 97 && charCode <= 102) {\n        return charCode - 87;\n    }\n    // A-F\n    return charCode - 55;\n}\nvar buf8 = Buffer.alloc(8);\nvar buf16 = Buffer.alloc(16);\nexport function hexToBase64(hexStr) {\n    var buf;\n    if (hexStr.length === 16) {\n        buf = buf8;\n    }\n    else if (hexStr.length === 32) {\n        buf = buf16;\n    }\n    else {\n        buf = Buffer.alloc(hexStr.length / 2);\n    }\n    var offset = 0;\n    for (var i = 0; i < hexStr.length; i += 2) {\n        var hi = intValue(hexStr.charCodeAt(i));\n        var lo = intValue(hexStr.charCodeAt(i + 1));\n        buf.writeUInt8((hi << 4) | lo, offset++);\n    }\n    return buf.toString('base64');\n}\n//# sourceMappingURL=hex-to-base64.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SPAN_ID_BYTES = 8;\nvar TRACE_ID_BYTES = 16;\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n */\nvar RandomIdGenerator = /** @class */ (function () {\n    function RandomIdGenerator() {\n        /**\n         * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex\n         * characters corresponding to 128 bits.\n         */\n        this.generateTraceId = getIdGenerator(TRACE_ID_BYTES);\n        /**\n         * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex\n         * characters corresponding to 64 bits.\n         */\n        this.generateSpanId = getIdGenerator(SPAN_ID_BYTES);\n    }\n    return RandomIdGenerator;\n}());\nexport { RandomIdGenerator };\nvar SHARED_BUFFER = Buffer.allocUnsafe(TRACE_ID_BYTES);\nfunction getIdGenerator(bytes) {\n    return function generateId() {\n        for (var i = 0; i < bytes / 4; i++) {\n            // unsigned right shift drops decimal part of the number\n            // it is required because if a number between 2**32 and 2**32 - 1 is generated, an out of range error is thrown by writeUInt32BE\n            SHARED_BUFFER.writeUInt32BE((Math.random() * Math.pow(2, 32)) >>> 0, i * 4);\n        }\n        // If buffer is all 0, set the last byte to 1 to guarantee a valid w3c id is generated\n        for (var i = 0; i < bytes; i++) {\n            if (SHARED_BUFFER[i] > 0) {\n                break;\n            }\n            else if (i === bytes - 1) {\n                SHARED_BUFFER[bytes - 1] = 1;\n            }\n        }\n        return SHARED_BUFFER.toString('hex', 0, bytes);\n    };\n}\n//# sourceMappingURL=RandomIdGenerator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '@opentelemetry/api';\nvar RPC_METADATA_KEY = createContextKey('OpenTelemetry SDK Context Key RPC_METADATA');\nexport var RPCType;\n(function (RPCType) {\n    RPCType[\"HTTP\"] = \"http\";\n})(RPCType || (RPCType = {}));\nexport function setRPCMetadata(context, meta) {\n    return context.setValue(RPC_METADATA_KEY, meta);\n}\nexport function deleteRPCMetadata(context) {\n    return context.deleteValue(RPC_METADATA_KEY);\n}\nexport function getRPCMetadata(context) {\n    return context.getValue(RPC_METADATA_KEY);\n}\n//# sourceMappingURL=rpc-metadata.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * Error that is thrown on timeouts.\n */\nvar TimeoutError = /** @class */ (function (_super) {\n    __extends(TimeoutError, _super);\n    function TimeoutError(message) {\n        var _this = _super.call(this, message) || this;\n        // manually adjust prototype to retain `instanceof` functionality when targeting ES5, see:\n        // https://github.com/Microsoft/TypeScript-wiki/blob/main/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        Object.setPrototypeOf(_this, TimeoutError.prototype);\n        return _this;\n    }\n    return TimeoutError;\n}(Error));\nexport { TimeoutError };\n/**\n * Adds a timeout to a promise and rejects if the specified timeout has elapsed. Also rejects if the specified promise\n * rejects, and resolves if the specified promise resolves.\n *\n * <p> NOTE: this operation will continue even after it throws a {@link TimeoutError}.\n *\n * @param promise promise to use with timeout.\n * @param timeout the timeout in milliseconds until the returned promise is rejected.\n */\nexport function callWithTimeout(promise, timeout) {\n    var timeoutHandle;\n    var timeoutPromise = new Promise(function timeoutFunction(_resolve, reject) {\n        timeoutHandle = setTimeout(function timeoutHandler() {\n            reject(new TimeoutError('Operation timed out.'));\n        }, timeout);\n    });\n    return Promise.race([promise, timeoutPromise]).then(function (result) {\n        clearTimeout(timeoutHandle);\n        return result;\n    }, function (reason) {\n        clearTimeout(timeoutHandle);\n        throw reason;\n    });\n}\n//# sourceMappingURL=timeout.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples no traces.\n */\nvar AlwaysOffSampler = /** @class */ (function () {\n    function AlwaysOffSampler() {\n    }\n    AlwaysOffSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.NOT_RECORD,\n        };\n    };\n    AlwaysOffSampler.prototype.toString = function () {\n        return 'AlwaysOffSampler';\n    };\n    return AlwaysOffSampler;\n}());\nexport { AlwaysOffSampler };\n//# sourceMappingURL=AlwaysOffSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples all traces.\n */\nvar AlwaysOnSampler = /** @class */ (function () {\n    function AlwaysOnSampler() {\n    }\n    AlwaysOnSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.RECORD_AND_SAMPLED,\n        };\n    };\n    AlwaysOnSampler.prototype.toString = function () {\n        return 'AlwaysOnSampler';\n    };\n    return AlwaysOnSampler;\n}());\nexport { AlwaysOnSampler };\n//# sourceMappingURL=AlwaysOnSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, TraceFlags, trace, } from '@opentelemetry/api';\nimport { globalErrorHandler } from '../../common/global-error-handler';\nimport { AlwaysOffSampler } from './AlwaysOffSampler';\nimport { AlwaysOnSampler } from './AlwaysOnSampler';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * A composite sampler that either respects the parent span's sampling decision\n * or delegates to `delegateSampler` for root spans.\n */\nvar ParentBasedSampler = /** @class */ (function () {\n    function ParentBasedSampler(config) {\n        var _a, _b, _c, _d;\n        this._root = config.root;\n        if (!this._root) {\n            globalErrorHandler(new Error('ParentBasedSampler must have a root sampler configured'));\n            this._root = new AlwaysOnSampler();\n        }\n        this._remoteParentSampled =\n            (_a = config.remoteParentSampled) !== null && _a !== void 0 ? _a : new AlwaysOnSampler();\n        this._remoteParentNotSampled =\n            (_b = config.remoteParentNotSampled) !== null && _b !== void 0 ? _b : new AlwaysOffSampler();\n        this._localParentSampled =\n            (_c = config.localParentSampled) !== null && _c !== void 0 ? _c : new AlwaysOnSampler();\n        this._localParentNotSampled =\n            (_d = config.localParentNotSampled) !== null && _d !== void 0 ? _d : new AlwaysOffSampler();\n    }\n    ParentBasedSampler.prototype.shouldSample = function (context, traceId, spanName, spanKind, attributes, links) {\n        var parentContext = trace.getSpanContext(context);\n        if (!parentContext || !isSpanContextValid(parentContext)) {\n            return this._root.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.isRemote) {\n            if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n                return this._remoteParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n            }\n            return this._remoteParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n            return this._localParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        return this._localParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n    };\n    ParentBasedSampler.prototype.toString = function () {\n        return \"ParentBased{root=\" + this._root.toString() + \", remoteParentSampled=\" + this._remoteParentSampled.toString() + \", remoteParentNotSampled=\" + this._remoteParentNotSampled.toString() + \", localParentSampled=\" + this._localParentSampled.toString() + \", localParentNotSampled=\" + this._localParentNotSampled.toString() + \"}\";\n    };\n    return ParentBasedSampler;\n}());\nexport { ParentBasedSampler };\n//# sourceMappingURL=ParentBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision, isValidTraceId, } from '@opentelemetry/api';\n/**\n * @deprecated Use the one defined in @opentelemetry/sdk-trace-base instead.\n * Sampler that samples a given fraction of traces based of trace id deterministically.\n */\nvar TraceIdRatioBasedSampler = /** @class */ (function () {\n    function TraceIdRatioBasedSampler(_ratio) {\n        if (_ratio === void 0) { _ratio = 0; }\n        this._ratio = _ratio;\n        this._ratio = this._normalize(_ratio);\n        this._upperBound = Math.floor(this._ratio * 0xffffffff);\n    }\n    TraceIdRatioBasedSampler.prototype.shouldSample = function (context, traceId) {\n        return {\n            decision: isValidTraceId(traceId) && this._accumulate(traceId) < this._upperBound\n                ? SamplingDecision.RECORD_AND_SAMPLED\n                : SamplingDecision.NOT_RECORD,\n        };\n    };\n    TraceIdRatioBasedSampler.prototype.toString = function () {\n        return \"TraceIdRatioBased{\" + this._ratio + \"}\";\n    };\n    TraceIdRatioBasedSampler.prototype._normalize = function (ratio) {\n        if (typeof ratio !== 'number' || isNaN(ratio))\n            return 0;\n        return ratio >= 1 ? 1 : ratio <= 0 ? 0 : ratio;\n    };\n    TraceIdRatioBasedSampler.prototype._accumulate = function (traceId) {\n        var accumulation = 0;\n        for (var i = 0; i < traceId.length / 8; i++) {\n            var pos = i * 8;\n            var part = parseInt(traceId.slice(pos, pos + 8), 16);\n            accumulation = (accumulation ^ part) >>> 0;\n        }\n        return accumulation;\n    };\n    return TraceIdRatioBasedSampler;\n}());\nexport { TraceIdRatioBasedSampler };\n//# sourceMappingURL=TraceIdRatioBasedSampler.js.map","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function urlMatches(url, urlToMatch) {\n    if (typeof urlToMatch === 'string') {\n        return url === urlToMatch;\n    }\n    else {\n        return !!url.match(urlToMatch);\n    }\n}\n/**\n * Check if {@param url} should be ignored when comparing against {@param ignoredUrls}\n * @param url\n * @param ignoredUrls\n */\nexport function isUrlIgnored(url, ignoredUrls) {\n    var e_1, _a;\n    if (!ignoredUrls) {\n        return false;\n    }\n    try {\n        for (var ignoredUrls_1 = __values(ignoredUrls), ignoredUrls_1_1 = ignoredUrls_1.next(); !ignoredUrls_1_1.done; ignoredUrls_1_1 = ignoredUrls_1.next()) {\n            var ignoreUrl = ignoredUrls_1_1.value;\n            if (urlMatches(url, ignoreUrl)) {\n                return true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ignoredUrls_1_1 && !ignoredUrls_1_1.done && (_a = ignoredUrls_1.return)) _a.call(ignoredUrls_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return false;\n}\n//# sourceMappingURL=url.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Checks if certain function has been already wrapped\n * @param func\n */\nexport function isWrapped(func) {\n    return (typeof func === 'function' &&\n        typeof func.__original === 'function' &&\n        typeof func.__unwrap === 'function' &&\n        func.__wrapped === true);\n}\n//# sourceMappingURL=wrap.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport * from './baggage/propagation/W3CBaggagePropagator';\nexport * from './common/anchored-clock';\nexport * from './common/attributes';\nexport * from './common/global-error-handler';\nexport * from './common/logging-error-handler';\nexport * from './common/time';\nexport * from './common/types';\nexport * from './ExportResult';\nexport * from './version';\nimport * as baggageUtils_1 from './baggage/utils';\nexport { baggageUtils_1 as baggageUtils };\nexport * from './platform';\nexport * from './propagation/composite';\nexport * from './trace/W3CTraceContextPropagator';\nexport * from './trace/IdGenerator';\nexport * from './trace/rpc-metadata';\nexport * from './trace/sampler/AlwaysOffSampler';\nexport * from './trace/sampler/AlwaysOnSampler';\nexport * from './trace/sampler/ParentBasedSampler';\nexport * from './trace/sampler/TraceIdRatioBasedSampler';\nexport * from './trace/suppress-tracing';\nexport * from './trace/TraceState';\nexport * from './utils/environment';\nexport * from './utils/merge';\nexport * from './utils/sampling';\nexport * from './utils/timeout';\nexport * from './utils/url';\nexport * from './utils/wrap';\nexport * from './utils/callback';\nexport * from './version';\nimport { _export } from './internal/exporter';\nexport var internal = {\n    _export: _export,\n};\n//# sourceMappingURL=index.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context } from '@opentelemetry/api';\nimport { suppressTracing } from '../trace/suppress-tracing';\n/**\n * @internal\n * Shared functionality used by Exporters while exporting data, including suppresion of Traces.\n */\nexport function _export(exporter, arg) {\n    return new Promise(function (resolve) {\n        // prevent downstream exporter calls from generating spans\n        context.with(suppressTracing(context.active()), function () {\n            exporter.export(arg, function (result) {\n                resolve(result);\n            });\n        });\n    });\n}\n//# sourceMappingURL=exporter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as os from 'os';\nimport { DEFAULT_ENVIRONMENT, parseEnvironment, } from '../../utils/environment';\n/**\n * Gets the environment variables\n */\nexport function getEnv() {\n    var processEnv = parseEnvironment(process.env);\n    return Object.assign({\n        HOSTNAME: os.hostname(),\n    }, DEFAULT_ENVIRONMENT, processEnv);\n}\n//# sourceMappingURL=environment.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { performance } from 'perf_hooks';\nexport var otperformance = performance;\n//# sourceMappingURL=performance.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"perf_hooks\");","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { VERSION } from '../../version';\nimport { TelemetrySdkLanguageValues, SemanticResourceAttributes, } from '@opentelemetry/semantic-conventions';\n/** Constants describing the SDK in use */\nexport var SDK_INFO = (_a = {},\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_NAME] = 'opentelemetry',\n    _a[SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = 'node',\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = TelemetrySdkLanguageValues.NODEJS,\n    _a[SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = VERSION,\n    _a);\n//# sourceMappingURL=sdk-info.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function unrefTimer(timer) {\n    timer.unref();\n}\n//# sourceMappingURL=timer-util.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { diag, } from '@opentelemetry/api';\n/** Combines multiple propagators into a single propagator. */\nvar CompositePropagator = /** @class */ (function () {\n    /**\n     * Construct a composite propagator from a list of propagators.\n     *\n     * @param [config] Configuration object for composite propagator\n     */\n    function CompositePropagator(config) {\n        if (config === void 0) { config = {}; }\n        var _a;\n        this._propagators = (_a = config.propagators) !== null && _a !== void 0 ? _a : [];\n        this._fields = Array.from(new Set(this._propagators\n            // older propagators may not have fields function, null check to be sure\n            .map(function (p) { return (typeof p.fields === 'function' ? p.fields() : []); })\n            .reduce(function (x, y) { return x.concat(y); }, [])));\n    }\n    /**\n     * Run each of the configured propagators with the given context and carrier.\n     * Propagators are run in the order they are configured, so if multiple\n     * propagators write the same carrier key, the propagator later in the list\n     * will \"win\".\n     *\n     * @param context Context to inject\n     * @param carrier Carrier into which context will be injected\n     */\n    CompositePropagator.prototype.inject = function (context, carrier, setter) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this._propagators), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var propagator = _c.value;\n                try {\n                    propagator.inject(context, carrier, setter);\n                }\n                catch (err) {\n                    diag.warn(\"Failed to inject with \" + propagator.constructor.name + \". Err: \" + err.message);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * Run each of the configured propagators with the given context and carrier.\n     * Propagators are run in the order they are configured, so if multiple\n     * propagators write the same context key, the propagator later in the list\n     * will \"win\".\n     *\n     * @param context Context to add values to\n     * @param carrier Carrier from which to extract context\n     */\n    CompositePropagator.prototype.extract = function (context, carrier, getter) {\n        return this._propagators.reduce(function (ctx, propagator) {\n            try {\n                return propagator.extract(ctx, carrier, getter);\n            }\n            catch (err) {\n                diag.warn(\"Failed to inject with \" + propagator.constructor.name + \". Err: \" + err.message);\n            }\n            return ctx;\n        }, context);\n    };\n    CompositePropagator.prototype.fields = function () {\n        // return a new array so our fields cannot be modified\n        return this._fields.slice();\n    };\n    return CompositePropagator;\n}());\nexport { CompositePropagator };\n//# sourceMappingURL=composite.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VALID_KEY_CHAR_RANGE = '[_0-9a-z-*/]';\nvar VALID_KEY = \"[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,255}\";\nvar VALID_VENDOR_KEY = \"[a-z0-9]\" + VALID_KEY_CHAR_RANGE + \"{0,240}@[a-z]\" + VALID_KEY_CHAR_RANGE + \"{0,13}\";\nvar VALID_KEY_REGEX = new RegExp(\"^(?:\" + VALID_KEY + \"|\" + VALID_VENDOR_KEY + \")$\");\nvar VALID_VALUE_BASE_REGEX = /^[ -~]{0,255}[!-~]$/;\nvar INVALID_VALUE_COMMA_EQUAL_REGEX = /,|=/;\n/**\n * Key is opaque string up to 256 characters printable. It MUST begin with a\n * lowercase letter, and can only contain lowercase letters a-z, digits 0-9,\n * underscores _, dashes -, asterisks *, and forward slashes /.\n * For multi-tenant vendor scenarios, an at sign (@) can be used to prefix the\n * vendor name. Vendors SHOULD set the tenant ID at the beginning of the key.\n * see https://www.w3.org/TR/trace-context/#key\n */\nexport function validateKey(key) {\n    return VALID_KEY_REGEX.test(key);\n}\n/**\n * Value is opaque string up to 256 characters printable ASCII RFC0020\n * characters (i.e., the range 0x20 to 0x7E) except comma , and =.\n */\nexport function validateValue(value) {\n    return (VALID_VALUE_BASE_REGEX.test(value) &&\n        !INVALID_VALUE_COMMA_EQUAL_REGEX.test(value));\n}\n//# sourceMappingURL=validators.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { validateKey, validateValue } from '../internal/validators';\nvar MAX_TRACE_STATE_ITEMS = 32;\nvar MAX_TRACE_STATE_LEN = 512;\nvar LIST_MEMBERS_SEPARATOR = ',';\nvar LIST_MEMBER_KEY_VALUE_SPLITTER = '=';\n/**\n * TraceState must be a class and not a simple object type because of the spec\n * requirement (https://www.w3.org/TR/trace-context/#tracestate-field).\n *\n * Here is the list of allowed mutations:\n * - New key-value pair should be added into the beginning of the list\n * - The value of any key can be updated. Modified keys MUST be moved to the\n * beginning of the list.\n */\nvar TraceState = /** @class */ (function () {\n    function TraceState(rawTraceState) {\n        this._internalState = new Map();\n        if (rawTraceState)\n            this._parse(rawTraceState);\n    }\n    TraceState.prototype.set = function (key, value) {\n        // TODO: Benchmark the different approaches(map vs list) and\n        // use the faster one.\n        var traceState = this._clone();\n        if (traceState._internalState.has(key)) {\n            traceState._internalState.delete(key);\n        }\n        traceState._internalState.set(key, value);\n        return traceState;\n    };\n    TraceState.prototype.unset = function (key) {\n        var traceState = this._clone();\n        traceState._internalState.delete(key);\n        return traceState;\n    };\n    TraceState.prototype.get = function (key) {\n        return this._internalState.get(key);\n    };\n    TraceState.prototype.serialize = function () {\n        var _this = this;\n        return this._keys()\n            .reduce(function (agg, key) {\n            agg.push(key + LIST_MEMBER_KEY_VALUE_SPLITTER + _this.get(key));\n            return agg;\n        }, [])\n            .join(LIST_MEMBERS_SEPARATOR);\n    };\n    TraceState.prototype._parse = function (rawTraceState) {\n        if (rawTraceState.length > MAX_TRACE_STATE_LEN)\n            return;\n        this._internalState = rawTraceState\n            .split(LIST_MEMBERS_SEPARATOR)\n            .reverse() // Store in reverse so new keys (.set(...)) will be placed at the beginning\n            .reduce(function (agg, part) {\n            var listMember = part.trim(); // Optional Whitespace (OWS) handling\n            var i = listMember.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);\n            if (i !== -1) {\n                var key = listMember.slice(0, i);\n                var value = listMember.slice(i + 1, part.length);\n                if (validateKey(key) && validateValue(value)) {\n                    agg.set(key, value);\n                }\n                else {\n                    // TODO: Consider to add warning log\n                }\n            }\n            return agg;\n        }, new Map());\n        // Because of the reverse() requirement, trunc must be done after map is created\n        if (this._internalState.size > MAX_TRACE_STATE_ITEMS) {\n            this._internalState = new Map(Array.from(this._internalState.entries())\n                .reverse() // Use reverse same as original tracestate parse chain\n                .slice(0, MAX_TRACE_STATE_ITEMS));\n        }\n    };\n    TraceState.prototype._keys = function () {\n        return Array.from(this._internalState.keys()).reverse();\n    };\n    TraceState.prototype._clone = function () {\n        var traceState = new TraceState();\n        traceState._internalState = new Map(this._internalState);\n        return traceState;\n    };\n    return TraceState;\n}());\nexport { TraceState };\n//# sourceMappingURL=TraceState.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, trace, TraceFlags, } from '@opentelemetry/api';\nimport { isTracingSuppressed } from './suppress-tracing';\nimport { TraceState } from './TraceState';\nexport var TRACE_PARENT_HEADER = 'traceparent';\nexport var TRACE_STATE_HEADER = 'tracestate';\nvar VERSION = '00';\nvar VERSION_PART = '(?!ff)[\\\\da-f]{2}';\nvar TRACE_ID_PART = '(?![0]{32})[\\\\da-f]{32}';\nvar PARENT_ID_PART = '(?![0]{16})[\\\\da-f]{16}';\nvar FLAGS_PART = '[\\\\da-f]{2}';\nvar TRACE_PARENT_REGEX = new RegExp(\"^\\\\s?(\" + VERSION_PART + \")-(\" + TRACE_ID_PART + \")-(\" + PARENT_ID_PART + \")-(\" + FLAGS_PART + \")(-.*)?\\\\s?$\");\n/**\n * Parses information from the [traceparent] span tag and converts it into {@link SpanContext}\n * @param traceParent - A meta property that comes from server.\n *     It should be dynamically generated server side to have the server's request trace Id,\n *     a parent span Id that was set on the server's request span,\n *     and the trace flags to indicate the server's sampling decision\n *     (01 = sampled, 00 = not sampled).\n *     for example: '{version}-{traceId}-{spanId}-{sampleDecision}'\n *     For more information see {@link https://www.w3.org/TR/trace-context/}\n */\nexport function parseTraceParent(traceParent) {\n    var match = TRACE_PARENT_REGEX.exec(traceParent);\n    if (!match)\n        return null;\n    // According to the specification the implementation should be compatible\n    // with future versions. If there are more parts, we only reject it if it's using version 00\n    // See https://www.w3.org/TR/trace-context/#versioning-of-traceparent\n    if (match[1] === '00' && match[5])\n        return null;\n    return {\n        traceId: match[2],\n        spanId: match[3],\n        traceFlags: parseInt(match[4], 16),\n    };\n}\n/**\n * Propagates {@link SpanContext} through Trace Context format propagation.\n *\n * Based on the Trace Context specification:\n * https://www.w3.org/TR/trace-context/\n */\nvar W3CTraceContextPropagator = /** @class */ (function () {\n    function W3CTraceContextPropagator() {\n    }\n    W3CTraceContextPropagator.prototype.inject = function (context, carrier, setter) {\n        var spanContext = trace.getSpanContext(context);\n        if (!spanContext ||\n            isTracingSuppressed(context) ||\n            !isSpanContextValid(spanContext))\n            return;\n        var traceParent = VERSION + \"-\" + spanContext.traceId + \"-\" + spanContext.spanId + \"-0\" + Number(spanContext.traceFlags || TraceFlags.NONE).toString(16);\n        setter.set(carrier, TRACE_PARENT_HEADER, traceParent);\n        if (spanContext.traceState) {\n            setter.set(carrier, TRACE_STATE_HEADER, spanContext.traceState.serialize());\n        }\n    };\n    W3CTraceContextPropagator.prototype.extract = function (context, carrier, getter) {\n        var traceParentHeader = getter.get(carrier, TRACE_PARENT_HEADER);\n        if (!traceParentHeader)\n            return context;\n        var traceParent = Array.isArray(traceParentHeader)\n            ? traceParentHeader[0]\n            : traceParentHeader;\n        if (typeof traceParent !== 'string')\n            return context;\n        var spanContext = parseTraceParent(traceParent);\n        if (!spanContext)\n            return context;\n        spanContext.isRemote = true;\n        var traceStateHeader = getter.get(carrier, TRACE_STATE_HEADER);\n        if (traceStateHeader) {\n            // If more than one `tracestate` header is found, we merge them into a\n            // single header.\n            var state = Array.isArray(traceStateHeader)\n                ? traceStateHeader.join(',')\n                : traceStateHeader;\n            spanContext.traceState = new TraceState(typeof state === 'string' ? state : undefined);\n        }\n        return trace.setSpanContext(context, spanContext);\n    };\n    W3CTraceContextPropagator.prototype.fields = function () {\n        return [TRACE_PARENT_HEADER, TRACE_STATE_HEADER];\n    };\n    return W3CTraceContextPropagator;\n}());\nexport { W3CTraceContextPropagator };\n//# sourceMappingURL=W3CTraceContextPropagator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { createContextKey } from '@opentelemetry/api';\nvar SUPPRESS_TRACING_KEY = createContextKey('OpenTelemetry SDK Context Key SUPPRESS_TRACING');\nexport function suppressTracing(context) {\n    return context.setValue(SUPPRESS_TRACING_KEY, true);\n}\nexport function unsuppressTracing(context) {\n    return context.deleteValue(SUPPRESS_TRACING_KEY);\n}\nexport function isTracingSuppressed(context) {\n    return context.getValue(SUPPRESS_TRACING_KEY) === true;\n}\n//# sourceMappingURL=suppress-tracing.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this._promise = new Promise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n    Object.defineProperty(Deferred.prototype, \"promise\", {\n        get: function () {\n            return this._promise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Deferred.prototype.resolve = function (val) {\n        this._resolve(val);\n    };\n    Deferred.prototype.reject = function (err) {\n        this._reject(err);\n    };\n    return Deferred;\n}());\nexport { Deferred };\n//# sourceMappingURL=promise.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Deferred } from './promise';\n/**\n * Bind the callback and only invoke the callback once regardless how many times `BindOnceFuture.call` is invoked.\n */\nvar BindOnceFuture = /** @class */ (function () {\n    function BindOnceFuture(_callback, _that) {\n        this._callback = _callback;\n        this._that = _that;\n        this._isCalled = false;\n        this._deferred = new Deferred();\n    }\n    Object.defineProperty(BindOnceFuture.prototype, \"isCalled\", {\n        get: function () {\n            return this._isCalled;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindOnceFuture.prototype, \"promise\", {\n        get: function () {\n            return this._deferred.promise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BindOnceFuture.prototype.call = function () {\n        var _a;\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._isCalled) {\n            this._isCalled = true;\n            try {\n                Promise.resolve((_a = this._callback).call.apply(_a, __spreadArray([this._that], __read(args), false))).then(function (val) { return _this._deferred.resolve(val); }, function (err) { return _this._deferred.reject(err); });\n            }\n            catch (err) {\n                this._deferred.reject(err);\n            }\n        }\n        return this._deferred.promise;\n    };\n    return BindOnceFuture;\n}());\nexport { BindOnceFuture };\n//# sourceMappingURL=callback.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Updates to this file should also be replicated to @opentelemetry/api too.\n/**\n * - globalThis (New standard)\n * - self (Will return the current window instance for supported browsers)\n * - window (fallback for older browser implementations)\n * - global (NodeJS implementation)\n * - <object> (When all else fails)\n */\n/** only globals that common to node and browsers are allowed */\n// eslint-disable-next-line node/no-unsupported-features/es-builtins, no-undef\nexport var _globalThis = typeof globalThis === 'object'\n    ? globalThis\n    : typeof self === 'object'\n        ? self\n        : typeof window === 'object'\n            ? window\n            : typeof global === 'object'\n                ? global\n                : {};\n//# sourceMappingURL=globalThis.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DiagLogLevel } from '@opentelemetry/api';\nimport { TracesSamplerValues } from './sampling';\nimport { _globalThis } from '../platform/browser/globalThis';\nvar DEFAULT_LIST_SEPARATOR = ',';\n/**\n * Environment interface to define all names\n */\nvar ENVIRONMENT_BOOLEAN_KEYS = ['OTEL_SDK_DISABLED'];\nfunction isEnvVarABoolean(key) {\n    return (ENVIRONMENT_BOOLEAN_KEYS.indexOf(key) > -1);\n}\nvar ENVIRONMENT_NUMBERS_KEYS = [\n    'OTEL_BSP_EXPORT_TIMEOUT',\n    'OTEL_BSP_MAX_EXPORT_BATCH_SIZE',\n    'OTEL_BSP_MAX_QUEUE_SIZE',\n    'OTEL_BSP_SCHEDULE_DELAY',\n    'OTEL_BLRP_EXPORT_TIMEOUT',\n    'OTEL_BLRP_MAX_EXPORT_BATCH_SIZE',\n    'OTEL_BLRP_MAX_QUEUE_SIZE',\n    'OTEL_BLRP_SCHEDULE_DELAY',\n    'OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT',\n    'OTEL_ATTRIBUTE_COUNT_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT',\n    'OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT',\n    'OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT',\n    'OTEL_SPAN_EVENT_COUNT_LIMIT',\n    'OTEL_SPAN_LINK_COUNT_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT',\n    'OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT',\n    'OTEL_EXPORTER_OTLP_TIMEOUT',\n    'OTEL_EXPORTER_OTLP_TRACES_TIMEOUT',\n    'OTEL_EXPORTER_OTLP_METRICS_TIMEOUT',\n    'OTEL_EXPORTER_OTLP_LOGS_TIMEOUT',\n    'OTEL_EXPORTER_JAEGER_AGENT_PORT',\n];\nfunction isEnvVarANumber(key) {\n    return (ENVIRONMENT_NUMBERS_KEYS.indexOf(key) > -1);\n}\nvar ENVIRONMENT_LISTS_KEYS = [\n    'OTEL_NO_PATCH_MODULES',\n    'OTEL_PROPAGATORS',\n];\nfunction isEnvVarAList(key) {\n    return ENVIRONMENT_LISTS_KEYS.indexOf(key) > -1;\n}\nexport var DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT = Infinity;\nexport var DEFAULT_ATTRIBUTE_COUNT_LIMIT = 128;\nexport var DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT = 128;\nexport var DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT = 128;\n/**\n * Default environment variables\n */\nexport var DEFAULT_ENVIRONMENT = {\n    OTEL_SDK_DISABLED: false,\n    CONTAINER_NAME: '',\n    ECS_CONTAINER_METADATA_URI_V4: '',\n    ECS_CONTAINER_METADATA_URI: '',\n    HOSTNAME: '',\n    KUBERNETES_SERVICE_HOST: '',\n    NAMESPACE: '',\n    OTEL_BSP_EXPORT_TIMEOUT: 30000,\n    OTEL_BSP_MAX_EXPORT_BATCH_SIZE: 512,\n    OTEL_BSP_MAX_QUEUE_SIZE: 2048,\n    OTEL_BSP_SCHEDULE_DELAY: 5000,\n    OTEL_BLRP_EXPORT_TIMEOUT: 30000,\n    OTEL_BLRP_MAX_EXPORT_BATCH_SIZE: 512,\n    OTEL_BLRP_MAX_QUEUE_SIZE: 2048,\n    OTEL_BLRP_SCHEDULE_DELAY: 5000,\n    OTEL_EXPORTER_JAEGER_AGENT_HOST: '',\n    OTEL_EXPORTER_JAEGER_AGENT_PORT: 6832,\n    OTEL_EXPORTER_JAEGER_ENDPOINT: '',\n    OTEL_EXPORTER_JAEGER_PASSWORD: '',\n    OTEL_EXPORTER_JAEGER_USER: '',\n    OTEL_EXPORTER_OTLP_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_TRACES_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_METRICS_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_LOGS_ENDPOINT: '',\n    OTEL_EXPORTER_OTLP_HEADERS: '',\n    OTEL_EXPORTER_OTLP_TRACES_HEADERS: '',\n    OTEL_EXPORTER_OTLP_METRICS_HEADERS: '',\n    OTEL_EXPORTER_OTLP_LOGS_HEADERS: '',\n    OTEL_EXPORTER_OTLP_TIMEOUT: 10000,\n    OTEL_EXPORTER_OTLP_TRACES_TIMEOUT: 10000,\n    OTEL_EXPORTER_OTLP_METRICS_TIMEOUT: 10000,\n    OTEL_EXPORTER_OTLP_LOGS_TIMEOUT: 10000,\n    OTEL_EXPORTER_ZIPKIN_ENDPOINT: 'http://localhost:9411/api/v2/spans',\n    OTEL_LOG_LEVEL: DiagLogLevel.INFO,\n    OTEL_NO_PATCH_MODULES: [],\n    OTEL_PROPAGATORS: ['tracecontext', 'baggage'],\n    OTEL_RESOURCE_ATTRIBUTES: '',\n    OTEL_SERVICE_NAME: '',\n    OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT: DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n    OTEL_ATTRIBUTE_COUNT_LIMIT: DEFAULT_ATTRIBUTE_COUNT_LIMIT,\n    OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT: DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n    OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT: DEFAULT_ATTRIBUTE_COUNT_LIMIT,\n    OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT: DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n    OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT: DEFAULT_ATTRIBUTE_COUNT_LIMIT,\n    OTEL_SPAN_EVENT_COUNT_LIMIT: 128,\n    OTEL_SPAN_LINK_COUNT_LIMIT: 128,\n    OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT: DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,\n    OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT: DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,\n    OTEL_TRACES_EXPORTER: '',\n    OTEL_TRACES_SAMPLER: TracesSamplerValues.ParentBasedAlwaysOn,\n    OTEL_TRACES_SAMPLER_ARG: '',\n    OTEL_LOGS_EXPORTER: '',\n    OTEL_EXPORTER_OTLP_INSECURE: '',\n    OTEL_EXPORTER_OTLP_TRACES_INSECURE: '',\n    OTEL_EXPORTER_OTLP_METRICS_INSECURE: '',\n    OTEL_EXPORTER_OTLP_LOGS_INSECURE: '',\n    OTEL_EXPORTER_OTLP_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_TRACES_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_METRICS_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_LOGS_COMPRESSION: '',\n    OTEL_EXPORTER_OTLP_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY: '',\n    OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE: '',\n    OTEL_EXPORTER_OTLP_PROTOCOL: 'http/protobuf',\n    OTEL_EXPORTER_OTLP_TRACES_PROTOCOL: 'http/protobuf',\n    OTEL_EXPORTER_OTLP_METRICS_PROTOCOL: 'http/protobuf',\n    OTEL_EXPORTER_OTLP_LOGS_PROTOCOL: 'http/protobuf',\n    OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE: 'cumulative',\n};\n/**\n * @param key\n * @param environment\n * @param values\n */\nfunction parseBoolean(key, environment, values) {\n    if (typeof values[key] === 'undefined') {\n        return;\n    }\n    var value = String(values[key]);\n    // support case-insensitive \"true\"\n    environment[key] = value.toLowerCase() === 'true';\n}\n/**\n * Parses a variable as number with number validation\n * @param name\n * @param environment\n * @param values\n * @param min\n * @param max\n */\nfunction parseNumber(name, environment, values, min, max) {\n    if (min === void 0) { min = -Infinity; }\n    if (max === void 0) { max = Infinity; }\n    if (typeof values[name] !== 'undefined') {\n        var value = Number(values[name]);\n        if (!isNaN(value)) {\n            if (value < min) {\n                environment[name] = min;\n            }\n            else if (value > max) {\n                environment[name] = max;\n            }\n            else {\n                environment[name] = value;\n            }\n        }\n    }\n}\n/**\n * Parses list-like strings from input into output.\n * @param name\n * @param environment\n * @param values\n * @param separator\n */\nfunction parseStringList(name, output, input, separator) {\n    if (separator === void 0) { separator = DEFAULT_LIST_SEPARATOR; }\n    var givenValue = input[name];\n    if (typeof givenValue === 'string') {\n        output[name] = givenValue.split(separator).map(function (v) { return v.trim(); });\n    }\n}\n// The support string -> DiagLogLevel mappings\nvar logLevelMap = {\n    ALL: DiagLogLevel.ALL,\n    VERBOSE: DiagLogLevel.VERBOSE,\n    DEBUG: DiagLogLevel.DEBUG,\n    INFO: DiagLogLevel.INFO,\n    WARN: DiagLogLevel.WARN,\n    ERROR: DiagLogLevel.ERROR,\n    NONE: DiagLogLevel.NONE,\n};\n/**\n * Environmentally sets log level if valid log level string is provided\n * @param key\n * @param environment\n * @param values\n */\nfunction setLogLevelFromEnv(key, environment, values) {\n    var value = values[key];\n    if (typeof value === 'string') {\n        var theLevel = logLevelMap[value.toUpperCase()];\n        if (theLevel != null) {\n            environment[key] = theLevel;\n        }\n    }\n}\n/**\n * Parses environment values\n * @param values\n */\nexport function parseEnvironment(values) {\n    var environment = {};\n    for (var env in DEFAULT_ENVIRONMENT) {\n        var key = env;\n        switch (key) {\n            case 'OTEL_LOG_LEVEL':\n                setLogLevelFromEnv(key, environment, values);\n                break;\n            default:\n                if (isEnvVarABoolean(key)) {\n                    parseBoolean(key, environment, values);\n                }\n                else if (isEnvVarANumber(key)) {\n                    parseNumber(key, environment, values);\n                }\n                else if (isEnvVarAList(key)) {\n                    parseStringList(key, environment, values);\n                }\n                else {\n                    var value = values[key];\n                    if (typeof value !== 'undefined' && value !== null) {\n                        environment[key] = String(value);\n                    }\n                }\n        }\n    }\n    return environment;\n}\n/**\n * Get environment in node or browser without\n * populating default values.\n */\nexport function getEnvWithoutDefaults() {\n    return typeof process !== 'undefined' && process && process.env\n        ? parseEnvironment(process.env)\n        : parseEnvironment(_globalThis);\n}\n//# sourceMappingURL=environment.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * based on lodash in order to support esm builds without esModuleInterop.\n * lodash is using MIT License.\n **/\nvar objectTag = '[object Object]';\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\nvar funcProto = Function.prototype;\nvar funcToString = funcProto.toString;\nvar objectCtorString = funcToString.call(Object);\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\nvar nativeObjectToString = objectProto.toString;\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n    return function (arg) {\n        return func(transform(arg));\n    };\n}\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nexport function isPlainObject(value) {\n    if (!isObjectLike(value) || baseGetTag(value) !== objectTag) {\n        return false;\n    }\n    var proto = getPrototype(value);\n    if (proto === null) {\n        return true;\n    }\n    var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n    return (typeof Ctor == 'function' &&\n        Ctor instanceof Ctor &&\n        funcToString.call(Ctor) === objectCtorString);\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n    return value != null && typeof value == 'object';\n}\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n    if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n    }\n    return symToStringTag && symToStringTag in Object(value)\n        ? getRawTag(value)\n        : objectToString(value);\n}\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n    var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n    var unmasked = false;\n    try {\n        value[symToStringTag] = undefined;\n        unmasked = true;\n    }\n    catch (e) {\n        // silence\n    }\n    var result = nativeObjectToString.call(value);\n    if (unmasked) {\n        if (isOwn) {\n            value[symToStringTag] = tag;\n        }\n        else {\n            delete value[symToStringTag];\n        }\n    }\n    return result;\n}\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n    return nativeObjectToString.call(value);\n}\n//# sourceMappingURL=lodash.merge.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isPlainObject } from './lodash.merge';\nvar MAX_LEVEL = 20;\n/**\n * Merges objects together\n * @param args - objects / values to be merged\n */\nexport function merge() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var result = args.shift();\n    var objects = new WeakMap();\n    while (args.length > 0) {\n        result = mergeTwoObjects(result, args.shift(), 0, objects);\n    }\n    return result;\n}\nfunction takeValue(value) {\n    if (isArray(value)) {\n        return value.slice();\n    }\n    return value;\n}\n/**\n * Merges two objects\n * @param one - first object\n * @param two - second object\n * @param level - current deep level\n * @param objects - objects holder that has been already referenced - to prevent\n * cyclic dependency\n */\nfunction mergeTwoObjects(one, two, level, objects) {\n    if (level === void 0) { level = 0; }\n    var result;\n    if (level > MAX_LEVEL) {\n        return undefined;\n    }\n    level++;\n    if (isPrimitive(one) || isPrimitive(two) || isFunction(two)) {\n        result = takeValue(two);\n    }\n    else if (isArray(one)) {\n        result = one.slice();\n        if (isArray(two)) {\n            for (var i = 0, j = two.length; i < j; i++) {\n                result.push(takeValue(two[i]));\n            }\n        }\n        else if (isObject(two)) {\n            var keys = Object.keys(two);\n            for (var i = 0, j = keys.length; i < j; i++) {\n                var key = keys[i];\n                result[key] = takeValue(two[key]);\n            }\n        }\n    }\n    else if (isObject(one)) {\n        if (isObject(two)) {\n            if (!shouldMerge(one, two)) {\n                return two;\n            }\n            result = Object.assign({}, one);\n            var keys = Object.keys(two);\n            for (var i = 0, j = keys.length; i < j; i++) {\n                var key = keys[i];\n                var twoValue = two[key];\n                if (isPrimitive(twoValue)) {\n                    if (typeof twoValue === 'undefined') {\n                        delete result[key];\n                    }\n                    else {\n                        // result[key] = takeValue(twoValue);\n                        result[key] = twoValue;\n                    }\n                }\n                else {\n                    var obj1 = result[key];\n                    var obj2 = twoValue;\n                    if (wasObjectReferenced(one, key, objects) ||\n                        wasObjectReferenced(two, key, objects)) {\n                        delete result[key];\n                    }\n                    else {\n                        if (isObject(obj1) && isObject(obj2)) {\n                            var arr1 = objects.get(obj1) || [];\n                            var arr2 = objects.get(obj2) || [];\n                            arr1.push({ obj: one, key: key });\n                            arr2.push({ obj: two, key: key });\n                            objects.set(obj1, arr1);\n                            objects.set(obj2, arr2);\n                        }\n                        result[key] = mergeTwoObjects(result[key], twoValue, level, objects);\n                    }\n                }\n            }\n        }\n        else {\n            result = two;\n        }\n    }\n    return result;\n}\n/**\n * Function to check if object has been already reference\n * @param obj\n * @param key\n * @param objects\n */\nfunction wasObjectReferenced(obj, key, objects) {\n    var arr = objects.get(obj[key]) || [];\n    for (var i = 0, j = arr.length; i < j; i++) {\n        var info = arr[i];\n        if (info.key === key && info.obj === obj) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nfunction isObject(value) {\n    return (!isPrimitive(value) &&\n        !isArray(value) &&\n        !isFunction(value) &&\n        typeof value === 'object');\n}\nfunction isPrimitive(value) {\n    return (typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'boolean' ||\n        typeof value === 'undefined' ||\n        value instanceof Date ||\n        value instanceof RegExp ||\n        value === null);\n}\nfunction shouldMerge(one, two) {\n    if (!isPlainObject(one) || !isPlainObject(two)) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=merge.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport var TracesSamplerValues;\n(function (TracesSamplerValues) {\n    TracesSamplerValues[\"AlwaysOff\"] = \"always_off\";\n    TracesSamplerValues[\"AlwaysOn\"] = \"always_on\";\n    TracesSamplerValues[\"ParentBasedAlwaysOff\"] = \"parentbased_always_off\";\n    TracesSamplerValues[\"ParentBasedAlwaysOn\"] = \"parentbased_always_on\";\n    TracesSamplerValues[\"ParentBasedTraceIdRatio\"] = \"parentbased_traceidratio\";\n    TracesSamplerValues[\"TraceIdRatio\"] = \"traceidratio\";\n})(TracesSamplerValues || (TracesSamplerValues = {}));\n//# sourceMappingURL=sampling.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// this is autogenerated file, see scripts/version-update.js\nexport var VERSION = '1.15.2';\n//# sourceMappingURL=version.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A sampling decision that determines how a {@link Span} will be recorded\n * and collected.\n */\nexport var SamplingDecision;\n(function (SamplingDecision) {\n    /**\n     * `Span.isRecording() === false`, span will not be recorded and all events\n     * and attributes will be dropped.\n     */\n    SamplingDecision[SamplingDecision[\"NOT_RECORD\"] = 0] = \"NOT_RECORD\";\n    /**\n     * `Span.isRecording() === true`, but `Sampled` flag in {@link TraceFlags}\n     * MUST NOT be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD\"] = 1] = \"RECORD\";\n    /**\n     * `Span.isRecording() === true` AND `Sampled` flag in {@link TraceFlags}\n     * MUST be set.\n     */\n    SamplingDecision[SamplingDecision[\"RECORD_AND_SAMPLED\"] = 2] = \"RECORD_AND_SAMPLED\";\n})(SamplingDecision || (SamplingDecision = {}));\n//# sourceMappingURL=Sampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { diag, SpanStatusCode, } from '@opentelemetry/api';\nimport { addHrTimes, millisToHrTime, getTimeOrigin, hrTime, hrTimeDuration, isAttributeValue, isTimeInput, isTimeInputHrTime, otperformance, sanitizeAttributes, } from '@opentelemetry/core';\nimport { SemanticAttributes } from '@opentelemetry/semantic-conventions';\nimport { ExceptionEventName } from './enums';\n/**\n * This class represents a span.\n */\nvar Span = /** @class */ (function () {\n    /**\n     * Constructs a new Span instance.\n     *\n     * @deprecated calling Span constructor directly is not supported. Please use tracer.startSpan.\n     * */\n    function Span(parentTracer, context, spanName, spanContext, kind, parentSpanId, links, startTime, _deprecatedClock // keeping this argument even though it is unused to ensure backwards compatibility\n    ) {\n        if (links === void 0) { links = []; }\n        this.attributes = {};\n        this.links = [];\n        this.events = [];\n        this._droppedAttributesCount = 0;\n        this._droppedEventsCount = 0;\n        this._droppedLinksCount = 0;\n        this.status = {\n            code: SpanStatusCode.UNSET,\n        };\n        this.endTime = [0, 0];\n        this._ended = false;\n        this._duration = [-1, -1];\n        this.name = spanName;\n        this._spanContext = spanContext;\n        this.parentSpanId = parentSpanId;\n        this.kind = kind;\n        this.links = links;\n        var now = Date.now();\n        this._performanceStartTime = otperformance.now();\n        this._performanceOffset =\n            now - (this._performanceStartTime + getTimeOrigin());\n        this._startTimeProvided = startTime != null;\n        this.startTime = this._getTime(startTime !== null && startTime !== void 0 ? startTime : now);\n        this.resource = parentTracer.resource;\n        this.instrumentationLibrary = parentTracer.instrumentationLibrary;\n        this._spanLimits = parentTracer.getSpanLimits();\n        this._spanProcessor = parentTracer.getActiveSpanProcessor();\n        this._spanProcessor.onStart(this, context);\n        this._attributeValueLengthLimit =\n            this._spanLimits.attributeValueLengthLimit || 0;\n    }\n    Span.prototype.spanContext = function () {\n        return this._spanContext;\n    };\n    Span.prototype.setAttribute = function (key, value) {\n        if (value == null || this._isSpanEnded())\n            return this;\n        if (key.length === 0) {\n            diag.warn(\"Invalid attribute key: \" + key);\n            return this;\n        }\n        if (!isAttributeValue(value)) {\n            diag.warn(\"Invalid attribute value set for key: \" + key);\n            return this;\n        }\n        if (Object.keys(this.attributes).length >=\n            this._spanLimits.attributeCountLimit &&\n            !Object.prototype.hasOwnProperty.call(this.attributes, key)) {\n            this._droppedAttributesCount++;\n            return this;\n        }\n        this.attributes[key] = this._truncateToSize(value);\n        return this;\n    };\n    Span.prototype.setAttributes = function (attributes) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(Object.entries(attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), k = _d[0], v = _d[1];\n                this.setAttribute(k, v);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return this;\n    };\n    /**\n     *\n     * @param name Span Name\n     * @param [attributesOrStartTime] Span attributes or start time\n     *     if type is {@type TimeInput} and 3rd param is undefined\n     * @param [timeStamp] Specified time stamp for the event\n     */\n    Span.prototype.addEvent = function (name, attributesOrStartTime, timeStamp) {\n        if (this._isSpanEnded())\n            return this;\n        if (this._spanLimits.eventCountLimit === 0) {\n            diag.warn('No events allowed.');\n            this._droppedEventsCount++;\n            return this;\n        }\n        if (this.events.length >= this._spanLimits.eventCountLimit) {\n            diag.warn('Dropping extra events.');\n            this.events.shift();\n            this._droppedEventsCount++;\n        }\n        if (isTimeInput(attributesOrStartTime)) {\n            if (!isTimeInput(timeStamp)) {\n                timeStamp = attributesOrStartTime;\n            }\n            attributesOrStartTime = undefined;\n        }\n        var attributes = sanitizeAttributes(attributesOrStartTime);\n        this.events.push({\n            name: name,\n            attributes: attributes,\n            time: this._getTime(timeStamp),\n            droppedAttributesCount: 0,\n        });\n        return this;\n    };\n    Span.prototype.setStatus = function (status) {\n        if (this._isSpanEnded())\n            return this;\n        this.status = status;\n        return this;\n    };\n    Span.prototype.updateName = function (name) {\n        if (this._isSpanEnded())\n            return this;\n        this.name = name;\n        return this;\n    };\n    Span.prototype.end = function (endTime) {\n        if (this._isSpanEnded()) {\n            diag.error(this.name + \" \" + this._spanContext.traceId + \"-\" + this._spanContext.spanId + \" - You can only call end() on a span once.\");\n            return;\n        }\n        this._ended = true;\n        this.endTime = this._getTime(endTime);\n        this._duration = hrTimeDuration(this.startTime, this.endTime);\n        if (this._duration[0] < 0) {\n            diag.warn('Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.', this.startTime, this.endTime);\n            this.endTime = this.startTime.slice();\n            this._duration = [0, 0];\n        }\n        this._spanProcessor.onEnd(this);\n    };\n    Span.prototype._getTime = function (inp) {\n        if (typeof inp === 'number' && inp < otperformance.now()) {\n            // must be a performance timestamp\n            // apply correction and convert to hrtime\n            return hrTime(inp + this._performanceOffset);\n        }\n        if (typeof inp === 'number') {\n            return millisToHrTime(inp);\n        }\n        if (inp instanceof Date) {\n            return millisToHrTime(inp.getTime());\n        }\n        if (isTimeInputHrTime(inp)) {\n            return inp;\n        }\n        if (this._startTimeProvided) {\n            // if user provided a time for the start manually\n            // we can't use duration to calculate event/end times\n            return millisToHrTime(Date.now());\n        }\n        var msDuration = otperformance.now() - this._performanceStartTime;\n        return addHrTimes(this.startTime, millisToHrTime(msDuration));\n    };\n    Span.prototype.isRecording = function () {\n        return this._ended === false;\n    };\n    Span.prototype.recordException = function (exception, time) {\n        var attributes = {};\n        if (typeof exception === 'string') {\n            attributes[SemanticAttributes.EXCEPTION_MESSAGE] = exception;\n        }\n        else if (exception) {\n            if (exception.code) {\n                attributes[SemanticAttributes.EXCEPTION_TYPE] =\n                    exception.code.toString();\n            }\n            else if (exception.name) {\n                attributes[SemanticAttributes.EXCEPTION_TYPE] = exception.name;\n            }\n            if (exception.message) {\n                attributes[SemanticAttributes.EXCEPTION_MESSAGE] = exception.message;\n            }\n            if (exception.stack) {\n                attributes[SemanticAttributes.EXCEPTION_STACKTRACE] = exception.stack;\n            }\n        }\n        // these are minimum requirements from spec\n        if (attributes[SemanticAttributes.EXCEPTION_TYPE] ||\n            attributes[SemanticAttributes.EXCEPTION_MESSAGE]) {\n            this.addEvent(ExceptionEventName, attributes, time);\n        }\n        else {\n            diag.warn(\"Failed to record an exception \" + exception);\n        }\n    };\n    Object.defineProperty(Span.prototype, \"duration\", {\n        get: function () {\n            return this._duration;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Span.prototype, \"ended\", {\n        get: function () {\n            return this._ended;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Span.prototype, \"droppedAttributesCount\", {\n        get: function () {\n            return this._droppedAttributesCount;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Span.prototype, \"droppedEventsCount\", {\n        get: function () {\n            return this._droppedEventsCount;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Span.prototype, \"droppedLinksCount\", {\n        get: function () {\n            return this._droppedLinksCount;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Span.prototype._isSpanEnded = function () {\n        if (this._ended) {\n            diag.warn(\"Can not execute the operation on ended Span {traceId: \" + this._spanContext.traceId + \", spanId: \" + this._spanContext.spanId + \"}\");\n        }\n        return this._ended;\n    };\n    // Utility function to truncate given value within size\n    // for value type of string, will truncate to given limit\n    // for type of non-string, will return same value\n    Span.prototype._truncateToLimitUtil = function (value, limit) {\n        if (value.length <= limit) {\n            return value;\n        }\n        return value.substr(0, limit);\n    };\n    /**\n     * If the given attribute value is of type string and has more characters than given {@code attributeValueLengthLimit} then\n     * return string with trucated to {@code attributeValueLengthLimit} characters\n     *\n     * If the given attribute value is array of strings then\n     * return new array of strings with each element truncated to {@code attributeValueLengthLimit} characters\n     *\n     * Otherwise return same Attribute {@code value}\n     *\n     * @param value Attribute value\n     * @returns truncated attribute value if required, otherwise same value\n     */\n    Span.prototype._truncateToSize = function (value) {\n        var _this = this;\n        var limit = this._attributeValueLengthLimit;\n        // Check limit\n        if (limit <= 0) {\n            // Negative values are invalid, so do not truncate\n            diag.warn(\"Attribute value limit must be positive, got \" + limit);\n            return value;\n        }\n        // String\n        if (typeof value === 'string') {\n            return this._truncateToLimitUtil(value, limit);\n        }\n        // Array of strings\n        if (Array.isArray(value)) {\n            return value.map(function (val) {\n                return typeof val === 'string' ? _this._truncateToLimitUtil(val, limit) : val;\n            });\n        }\n        // Other types, no need to apply value length limit\n        return value;\n    };\n    return Span;\n}());\nexport { Span };\n//# sourceMappingURL=Span.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Event name definitions\nexport var ExceptionEventName = 'exception';\n//# sourceMappingURL=enums.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples no traces. */\nvar AlwaysOffSampler = /** @class */ (function () {\n    function AlwaysOffSampler() {\n    }\n    AlwaysOffSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.NOT_RECORD,\n        };\n    };\n    AlwaysOffSampler.prototype.toString = function () {\n        return 'AlwaysOffSampler';\n    };\n    return AlwaysOffSampler;\n}());\nexport { AlwaysOffSampler };\n//# sourceMappingURL=AlwaysOffSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples all traces. */\nvar AlwaysOnSampler = /** @class */ (function () {\n    function AlwaysOnSampler() {\n    }\n    AlwaysOnSampler.prototype.shouldSample = function () {\n        return {\n            decision: SamplingDecision.RECORD_AND_SAMPLED,\n        };\n    };\n    AlwaysOnSampler.prototype.toString = function () {\n        return 'AlwaysOnSampler';\n    };\n    return AlwaysOnSampler;\n}());\nexport { AlwaysOnSampler };\n//# sourceMappingURL=AlwaysOnSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isSpanContextValid, TraceFlags, trace, } from '@opentelemetry/api';\nimport { globalErrorHandler } from '@opentelemetry/core';\nimport { AlwaysOffSampler } from './AlwaysOffSampler';\nimport { AlwaysOnSampler } from './AlwaysOnSampler';\n/**\n * A composite sampler that either respects the parent span's sampling decision\n * or delegates to `delegateSampler` for root spans.\n */\nvar ParentBasedSampler = /** @class */ (function () {\n    function ParentBasedSampler(config) {\n        var _a, _b, _c, _d;\n        this._root = config.root;\n        if (!this._root) {\n            globalErrorHandler(new Error('ParentBasedSampler must have a root sampler configured'));\n            this._root = new AlwaysOnSampler();\n        }\n        this._remoteParentSampled =\n            (_a = config.remoteParentSampled) !== null && _a !== void 0 ? _a : new AlwaysOnSampler();\n        this._remoteParentNotSampled =\n            (_b = config.remoteParentNotSampled) !== null && _b !== void 0 ? _b : new AlwaysOffSampler();\n        this._localParentSampled =\n            (_c = config.localParentSampled) !== null && _c !== void 0 ? _c : new AlwaysOnSampler();\n        this._localParentNotSampled =\n            (_d = config.localParentNotSampled) !== null && _d !== void 0 ? _d : new AlwaysOffSampler();\n    }\n    ParentBasedSampler.prototype.shouldSample = function (context, traceId, spanName, spanKind, attributes, links) {\n        var parentContext = trace.getSpanContext(context);\n        if (!parentContext || !isSpanContextValid(parentContext)) {\n            return this._root.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.isRemote) {\n            if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n                return this._remoteParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n            }\n            return this._remoteParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        if (parentContext.traceFlags & TraceFlags.SAMPLED) {\n            return this._localParentSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n        }\n        return this._localParentNotSampled.shouldSample(context, traceId, spanName, spanKind, attributes, links);\n    };\n    ParentBasedSampler.prototype.toString = function () {\n        return \"ParentBased{root=\" + this._root.toString() + \", remoteParentSampled=\" + this._remoteParentSampled.toString() + \", remoteParentNotSampled=\" + this._remoteParentNotSampled.toString() + \", localParentSampled=\" + this._localParentSampled.toString() + \", localParentNotSampled=\" + this._localParentNotSampled.toString() + \"}\";\n    };\n    return ParentBasedSampler;\n}());\nexport { ParentBasedSampler };\n//# sourceMappingURL=ParentBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isValidTraceId } from '@opentelemetry/api';\nimport { SamplingDecision } from '../Sampler';\n/** Sampler that samples a given fraction of traces based of trace id deterministically. */\nvar TraceIdRatioBasedSampler = /** @class */ (function () {\n    function TraceIdRatioBasedSampler(_ratio) {\n        if (_ratio === void 0) { _ratio = 0; }\n        this._ratio = _ratio;\n        this._ratio = this._normalize(_ratio);\n        this._upperBound = Math.floor(this._ratio * 0xffffffff);\n    }\n    TraceIdRatioBasedSampler.prototype.shouldSample = function (context, traceId) {\n        return {\n            decision: isValidTraceId(traceId) && this._accumulate(traceId) < this._upperBound\n                ? SamplingDecision.RECORD_AND_SAMPLED\n                : SamplingDecision.NOT_RECORD,\n        };\n    };\n    TraceIdRatioBasedSampler.prototype.toString = function () {\n        return \"TraceIdRatioBased{\" + this._ratio + \"}\";\n    };\n    TraceIdRatioBasedSampler.prototype._normalize = function (ratio) {\n        if (typeof ratio !== 'number' || isNaN(ratio))\n            return 0;\n        return ratio >= 1 ? 1 : ratio <= 0 ? 0 : ratio;\n    };\n    TraceIdRatioBasedSampler.prototype._accumulate = function (traceId) {\n        var accumulation = 0;\n        for (var i = 0; i < traceId.length / 8; i++) {\n            var pos = i * 8;\n            var part = parseInt(traceId.slice(pos, pos + 8), 16);\n            accumulation = (accumulation ^ part) >>> 0;\n        }\n        return accumulation;\n    };\n    return TraceIdRatioBasedSampler;\n}());\nexport { TraceIdRatioBasedSampler };\n//# sourceMappingURL=TraceIdRatioBasedSampler.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { diag } from '@opentelemetry/api';\nimport { getEnv, TracesSamplerValues } from '@opentelemetry/core';\nimport { AlwaysOffSampler } from './sampler/AlwaysOffSampler';\nimport { AlwaysOnSampler } from './sampler/AlwaysOnSampler';\nimport { ParentBasedSampler } from './sampler/ParentBasedSampler';\nimport { TraceIdRatioBasedSampler } from './sampler/TraceIdRatioBasedSampler';\nvar env = getEnv();\nvar FALLBACK_OTEL_TRACES_SAMPLER = TracesSamplerValues.AlwaysOn;\nvar DEFAULT_RATIO = 1;\n/**\n * Load default configuration. For fields with primitive values, any user-provided\n * value will override the corresponding default value. For fields with\n * non-primitive values (like `spanLimits`), the user-provided value will be\n * used to extend the default value.\n */\n// object needs to be wrapped in this function and called when needed otherwise\n// envs are parsed before tests are ran - causes tests using these envs to fail\nexport function loadDefaultConfig() {\n    return {\n        sampler: buildSamplerFromEnv(env),\n        forceFlushTimeoutMillis: 30000,\n        generalLimits: {\n            attributeValueLengthLimit: getEnv().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n            attributeCountLimit: getEnv().OTEL_ATTRIBUTE_COUNT_LIMIT,\n        },\n        spanLimits: {\n            attributeValueLengthLimit: getEnv().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,\n            attributeCountLimit: getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,\n            linkCountLimit: getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,\n            eventCountLimit: getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT,\n            attributePerEventCountLimit: getEnv().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,\n            attributePerLinkCountLimit: getEnv().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,\n        },\n    };\n}\n/**\n * Based on environment, builds a sampler, complies with specification.\n * @param environment optional, by default uses getEnv(), but allows passing a value to reuse parsed environment\n */\nexport function buildSamplerFromEnv(environment) {\n    if (environment === void 0) { environment = getEnv(); }\n    switch (environment.OTEL_TRACES_SAMPLER) {\n        case TracesSamplerValues.AlwaysOn:\n            return new AlwaysOnSampler();\n        case TracesSamplerValues.AlwaysOff:\n            return new AlwaysOffSampler();\n        case TracesSamplerValues.ParentBasedAlwaysOn:\n            return new ParentBasedSampler({\n                root: new AlwaysOnSampler(),\n            });\n        case TracesSamplerValues.ParentBasedAlwaysOff:\n            return new ParentBasedSampler({\n                root: new AlwaysOffSampler(),\n            });\n        case TracesSamplerValues.TraceIdRatio:\n            return new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv(environment));\n        case TracesSamplerValues.ParentBasedTraceIdRatio:\n            return new ParentBasedSampler({\n                root: new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv(environment)),\n            });\n        default:\n            diag.error(\"OTEL_TRACES_SAMPLER value \\\"\" + environment.OTEL_TRACES_SAMPLER + \" invalid, defaulting to \" + FALLBACK_OTEL_TRACES_SAMPLER + \"\\\".\");\n            return new AlwaysOnSampler();\n    }\n}\nfunction getSamplerProbabilityFromEnv(environment) {\n    if (environment.OTEL_TRACES_SAMPLER_ARG === undefined ||\n        environment.OTEL_TRACES_SAMPLER_ARG === '') {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG is blank, defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    var probability = Number(environment.OTEL_TRACES_SAMPLER_ARG);\n    if (isNaN(probability)) {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG=\" + environment.OTEL_TRACES_SAMPLER_ARG + \" was given, but it is invalid, defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    if (probability < 0 || probability > 1) {\n        diag.error(\"OTEL_TRACES_SAMPLER_ARG=\" + environment.OTEL_TRACES_SAMPLER_ARG + \" was given, but it is out of range ([0..1]), defaulting to \" + DEFAULT_RATIO + \".\");\n        return DEFAULT_RATIO;\n    }\n    return probability;\n}\n//# sourceMappingURL=config.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar SPAN_ID_BYTES = 8;\nvar TRACE_ID_BYTES = 16;\nvar RandomIdGenerator = /** @class */ (function () {\n    function RandomIdGenerator() {\n        /**\n         * Returns a random 16-byte trace ID formatted/encoded as a 32 lowercase hex\n         * characters corresponding to 128 bits.\n         */\n        this.generateTraceId = getIdGenerator(TRACE_ID_BYTES);\n        /**\n         * Returns a random 8-byte span ID formatted/encoded as a 16 lowercase hex\n         * characters corresponding to 64 bits.\n         */\n        this.generateSpanId = getIdGenerator(SPAN_ID_BYTES);\n    }\n    return RandomIdGenerator;\n}());\nexport { RandomIdGenerator };\nvar SHARED_BUFFER = Buffer.allocUnsafe(TRACE_ID_BYTES);\nfunction getIdGenerator(bytes) {\n    return function generateId() {\n        for (var i = 0; i < bytes / 4; i++) {\n            // unsigned right shift drops decimal part of the number\n            // it is required because if a number between 2**32 and 2**32 - 1 is generated, an out of range error is thrown by writeUInt32BE\n            SHARED_BUFFER.writeUInt32BE((Math.random() * Math.pow(2, 32)) >>> 0, i * 4);\n        }\n        // If buffer is all 0, set the last byte to 1 to guarantee a valid w3c id is generated\n        for (var i = 0; i < bytes; i++) {\n            if (SHARED_BUFFER[i] > 0) {\n                break;\n            }\n            else if (i === bytes - 1) {\n                SHARED_BUFFER[bytes - 1] = 1;\n            }\n        }\n        return SHARED_BUFFER.toString('hex', 0, bytes);\n    };\n}\n//# sourceMappingURL=RandomIdGenerator.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as api from '@opentelemetry/api';\nimport { sanitizeAttributes, isTracingSuppressed, } from '@opentelemetry/core';\nimport { Span } from './Span';\nimport { mergeConfig } from './utility';\nimport { RandomIdGenerator } from './platform';\n/**\n * This class represents a basic tracer.\n */\nvar Tracer = /** @class */ (function () {\n    /**\n     * Constructs a new Tracer instance.\n     */\n    function Tracer(instrumentationLibrary, config, _tracerProvider) {\n        this._tracerProvider = _tracerProvider;\n        var localConfig = mergeConfig(config);\n        this._sampler = localConfig.sampler;\n        this._generalLimits = localConfig.generalLimits;\n        this._spanLimits = localConfig.spanLimits;\n        this._idGenerator = config.idGenerator || new RandomIdGenerator();\n        this.resource = _tracerProvider.resource;\n        this.instrumentationLibrary = instrumentationLibrary;\n    }\n    /**\n     * Starts a new Span or returns the default NoopSpan based on the sampling\n     * decision.\n     */\n    Tracer.prototype.startSpan = function (name, options, context) {\n        var _a, _b, _c;\n        if (options === void 0) { options = {}; }\n        if (context === void 0) { context = api.context.active(); }\n        // remove span from context in case a root span is requested via options\n        if (options.root) {\n            context = api.trace.deleteSpan(context);\n        }\n        var parentSpan = api.trace.getSpan(context);\n        if (isTracingSuppressed(context)) {\n            api.diag.debug('Instrumentation suppressed, returning Noop Span');\n            var nonRecordingSpan = api.trace.wrapSpanContext(api.INVALID_SPAN_CONTEXT);\n            return nonRecordingSpan;\n        }\n        var parentSpanContext = parentSpan === null || parentSpan === void 0 ? void 0 : parentSpan.spanContext();\n        var spanId = this._idGenerator.generateSpanId();\n        var traceId;\n        var traceState;\n        var parentSpanId;\n        if (!parentSpanContext ||\n            !api.trace.isSpanContextValid(parentSpanContext)) {\n            // New root span.\n            traceId = this._idGenerator.generateTraceId();\n        }\n        else {\n            // New child span.\n            traceId = parentSpanContext.traceId;\n            traceState = parentSpanContext.traceState;\n            parentSpanId = parentSpanContext.spanId;\n        }\n        var spanKind = (_a = options.kind) !== null && _a !== void 0 ? _a : api.SpanKind.INTERNAL;\n        var links = ((_b = options.links) !== null && _b !== void 0 ? _b : []).map(function (link) {\n            return {\n                context: link.context,\n                attributes: sanitizeAttributes(link.attributes),\n            };\n        });\n        var attributes = sanitizeAttributes(options.attributes);\n        // make sampling decision\n        var samplingResult = this._sampler.shouldSample(context, traceId, name, spanKind, attributes, links);\n        traceState = (_c = samplingResult.traceState) !== null && _c !== void 0 ? _c : traceState;\n        var traceFlags = samplingResult.decision === api.SamplingDecision.RECORD_AND_SAMPLED\n            ? api.TraceFlags.SAMPLED\n            : api.TraceFlags.NONE;\n        var spanContext = { traceId: traceId, spanId: spanId, traceFlags: traceFlags, traceState: traceState };\n        if (samplingResult.decision === api.SamplingDecision.NOT_RECORD) {\n            api.diag.debug('Recording is off, propagating context in a non-recording span');\n            var nonRecordingSpan = api.trace.wrapSpanContext(spanContext);\n            return nonRecordingSpan;\n        }\n        var span = new Span(this, context, name, spanContext, spanKind, parentSpanId, links, options.startTime);\n        // Set initial span attributes. The attributes object may have been mutated\n        // by the sampler, so we sanitize the merged attributes before setting them.\n        var initAttributes = sanitizeAttributes(Object.assign(attributes, samplingResult.attributes));\n        span.setAttributes(initAttributes);\n        return span;\n    };\n    Tracer.prototype.startActiveSpan = function (name, arg2, arg3, arg4) {\n        var opts;\n        var ctx;\n        var fn;\n        if (arguments.length < 2) {\n            return;\n        }\n        else if (arguments.length === 2) {\n            fn = arg2;\n        }\n        else if (arguments.length === 3) {\n            opts = arg2;\n            fn = arg3;\n        }\n        else {\n            opts = arg2;\n            ctx = arg3;\n            fn = arg4;\n        }\n        var parentContext = ctx !== null && ctx !== void 0 ? ctx : api.context.active();\n        var span = this.startSpan(name, opts, parentContext);\n        var contextWithSpanSet = api.trace.setSpan(parentContext, span);\n        return api.context.with(contextWithSpanSet, fn, undefined, span);\n    };\n    /** Returns the active {@link GeneralLimits}. */\n    Tracer.prototype.getGeneralLimits = function () {\n        return this._generalLimits;\n    };\n    /** Returns the active {@link SpanLimits}. */\n    Tracer.prototype.getSpanLimits = function () {\n        return this._spanLimits;\n    };\n    Tracer.prototype.getActiveSpanProcessor = function () {\n        return this._tracerProvider.getActiveSpanProcessor();\n    };\n    return Tracer;\n}());\nexport { Tracer };\n//# sourceMappingURL=Tracer.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BatchSpanProcessorBase } from '../../../export/BatchSpanProcessorBase';\nvar BatchSpanProcessor = /** @class */ (function (_super) {\n    __extends(BatchSpanProcessor, _super);\n    function BatchSpanProcessor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BatchSpanProcessor.prototype.onShutdown = function () { };\n    return BatchSpanProcessor;\n}(BatchSpanProcessorBase));\nexport { BatchSpanProcessor };\n//# sourceMappingURL=BatchSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, diag, propagation, trace, } from '@opentelemetry/api';\nimport { CompositePropagator, W3CBaggagePropagator, W3CTraceContextPropagator, getEnv, merge, } from '@opentelemetry/core';\nimport { Resource } from '@opentelemetry/resources';\nimport { Tracer } from '.';\nimport { loadDefaultConfig } from './config';\nimport { MultiSpanProcessor } from './MultiSpanProcessor';\nimport { NoopSpanProcessor } from './export/NoopSpanProcessor';\nimport { BatchSpanProcessor } from './platform';\nimport { reconfigureLimits } from './utility';\nexport var ForceFlushState;\n(function (ForceFlushState) {\n    ForceFlushState[ForceFlushState[\"resolved\"] = 0] = \"resolved\";\n    ForceFlushState[ForceFlushState[\"timeout\"] = 1] = \"timeout\";\n    ForceFlushState[ForceFlushState[\"error\"] = 2] = \"error\";\n    ForceFlushState[ForceFlushState[\"unresolved\"] = 3] = \"unresolved\";\n})(ForceFlushState || (ForceFlushState = {}));\n/**\n * This class represents a basic tracer provider which platform libraries can extend\n */\nvar BasicTracerProvider = /** @class */ (function () {\n    function BasicTracerProvider(config) {\n        if (config === void 0) { config = {}; }\n        var _a;\n        this._registeredSpanProcessors = [];\n        this._tracers = new Map();\n        var mergedConfig = merge({}, loadDefaultConfig(), reconfigureLimits(config));\n        this.resource = (_a = mergedConfig.resource) !== null && _a !== void 0 ? _a : Resource.empty();\n        this.resource = Resource.default().merge(this.resource);\n        this._config = Object.assign({}, mergedConfig, {\n            resource: this.resource,\n        });\n        var defaultExporter = this._buildExporterFromEnv();\n        if (defaultExporter !== undefined) {\n            var batchProcessor = new BatchSpanProcessor(defaultExporter);\n            this.activeSpanProcessor = batchProcessor;\n        }\n        else {\n            this.activeSpanProcessor = new NoopSpanProcessor();\n        }\n    }\n    BasicTracerProvider.prototype.getTracer = function (name, version, options) {\n        var key = name + \"@\" + (version || '') + \":\" + ((options === null || options === void 0 ? void 0 : options.schemaUrl) || '');\n        if (!this._tracers.has(key)) {\n            this._tracers.set(key, new Tracer({ name: name, version: version, schemaUrl: options === null || options === void 0 ? void 0 : options.schemaUrl }, this._config, this));\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return this._tracers.get(key);\n    };\n    /**\n     * Adds a new {@link SpanProcessor} to this tracer.\n     * @param spanProcessor the new SpanProcessor to be added.\n     */\n    BasicTracerProvider.prototype.addSpanProcessor = function (spanProcessor) {\n        if (this._registeredSpanProcessors.length === 0) {\n            // since we might have enabled by default a batchProcessor, we disable it\n            // before adding the new one\n            this.activeSpanProcessor\n                .shutdown()\n                .catch(function (err) {\n                return diag.error('Error while trying to shutdown current span processor', err);\n            });\n        }\n        this._registeredSpanProcessors.push(spanProcessor);\n        this.activeSpanProcessor = new MultiSpanProcessor(this._registeredSpanProcessors);\n    };\n    BasicTracerProvider.prototype.getActiveSpanProcessor = function () {\n        return this.activeSpanProcessor;\n    };\n    /**\n     * Register this TracerProvider for use with the OpenTelemetry API.\n     * Undefined values may be replaced with defaults, and\n     * null values will be skipped.\n     *\n     * @param config Configuration object for SDK registration\n     */\n    BasicTracerProvider.prototype.register = function (config) {\n        if (config === void 0) { config = {}; }\n        trace.setGlobalTracerProvider(this);\n        if (config.propagator === undefined) {\n            config.propagator = this._buildPropagatorFromEnv();\n        }\n        if (config.contextManager) {\n            context.setGlobalContextManager(config.contextManager);\n        }\n        if (config.propagator) {\n            propagation.setGlobalPropagator(config.propagator);\n        }\n    };\n    BasicTracerProvider.prototype.forceFlush = function () {\n        var timeout = this._config.forceFlushTimeoutMillis;\n        var promises = this._registeredSpanProcessors.map(function (spanProcessor) {\n            return new Promise(function (resolve) {\n                var state;\n                var timeoutInterval = setTimeout(function () {\n                    resolve(new Error(\"Span processor did not completed within timeout period of \" + timeout + \" ms\"));\n                    state = ForceFlushState.timeout;\n                }, timeout);\n                spanProcessor\n                    .forceFlush()\n                    .then(function () {\n                    clearTimeout(timeoutInterval);\n                    if (state !== ForceFlushState.timeout) {\n                        state = ForceFlushState.resolved;\n                        resolve(state);\n                    }\n                })\n                    .catch(function (error) {\n                    clearTimeout(timeoutInterval);\n                    state = ForceFlushState.error;\n                    resolve(error);\n                });\n            });\n        });\n        return new Promise(function (resolve, reject) {\n            Promise.all(promises)\n                .then(function (results) {\n                var errors = results.filter(function (result) { return result !== ForceFlushState.resolved; });\n                if (errors.length > 0) {\n                    reject(errors);\n                }\n                else {\n                    resolve();\n                }\n            })\n                .catch(function (error) { return reject([error]); });\n        });\n    };\n    BasicTracerProvider.prototype.shutdown = function () {\n        return this.activeSpanProcessor.shutdown();\n    };\n    /**\n     * TS cannot yet infer the type of this.constructor:\n     * https://github.com/Microsoft/TypeScript/issues/3841#issuecomment-337560146\n     * There is no need to override either of the getters in your child class.\n     * The type of the registered component maps should be the same across all\n     * classes in the inheritance tree.\n     */\n    BasicTracerProvider.prototype._getPropagator = function (name) {\n        var _a;\n        return (_a = this.constructor._registeredPropagators.get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._getSpanExporter = function (name) {\n        var _a;\n        return (_a = this.constructor._registeredExporters.get(name)) === null || _a === void 0 ? void 0 : _a();\n    };\n    BasicTracerProvider.prototype._buildPropagatorFromEnv = function () {\n        var _this = this;\n        // per spec, propagators from env must be deduplicated\n        var uniquePropagatorNames = Array.from(new Set(getEnv().OTEL_PROPAGATORS));\n        var propagators = uniquePropagatorNames.map(function (name) {\n            var propagator = _this._getPropagator(name);\n            if (!propagator) {\n                diag.warn(\"Propagator \\\"\" + name + \"\\\" requested through environment variable is unavailable.\");\n            }\n            return propagator;\n        });\n        var validPropagators = propagators.reduce(function (list, item) {\n            if (item) {\n                list.push(item);\n            }\n            return list;\n        }, []);\n        if (validPropagators.length === 0) {\n            return;\n        }\n        else if (uniquePropagatorNames.length === 1) {\n            return validPropagators[0];\n        }\n        else {\n            return new CompositePropagator({\n                propagators: validPropagators,\n            });\n        }\n    };\n    BasicTracerProvider.prototype._buildExporterFromEnv = function () {\n        var exporterName = getEnv().OTEL_TRACES_EXPORTER;\n        if (exporterName === 'none' || exporterName === '')\n            return;\n        var exporter = this._getSpanExporter(exporterName);\n        if (!exporter) {\n            diag.error(\"Exporter \\\"\" + exporterName + \"\\\" requested through environment variable is unavailable.\");\n        }\n        return exporter;\n    };\n    BasicTracerProvider._registeredPropagators = new Map([\n        ['tracecontext', function () { return new W3CTraceContextPropagator(); }],\n        ['baggage', function () { return new W3CBaggagePropagator(); }],\n    ]);\n    BasicTracerProvider._registeredExporters = new Map();\n    return BasicTracerProvider;\n}());\nexport { BasicTracerProvider };\n//# sourceMappingURL=BasicTracerProvider.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { buildSamplerFromEnv, loadDefaultConfig } from './config';\nimport { DEFAULT_ATTRIBUTE_COUNT_LIMIT, DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT, getEnvWithoutDefaults, } from '@opentelemetry/core';\n/**\n * Function to merge Default configuration (as specified in './config') with\n * user provided configurations.\n */\nexport function mergeConfig(userConfig) {\n    var perInstanceDefaults = {\n        sampler: buildSamplerFromEnv(),\n    };\n    var DEFAULT_CONFIG = loadDefaultConfig();\n    var target = Object.assign({}, DEFAULT_CONFIG, perInstanceDefaults, userConfig);\n    target.generalLimits = Object.assign({}, DEFAULT_CONFIG.generalLimits, userConfig.generalLimits || {});\n    target.spanLimits = Object.assign({}, DEFAULT_CONFIG.spanLimits, userConfig.spanLimits || {});\n    return target;\n}\n/**\n * When general limits are provided and model specific limits are not,\n * configures the model specific limits by using the values from the general ones.\n * @param userConfig User provided tracer configuration\n */\nexport function reconfigureLimits(userConfig) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    var spanLimits = Object.assign({}, userConfig.spanLimits);\n    var parsedEnvConfig = getEnvWithoutDefaults();\n    /**\n     * Reassign span attribute count limit to use first non null value defined by user or use default value\n     */\n    spanLimits.attributeCountLimit =\n        (_f = (_e = (_d = (_b = (_a = userConfig.spanLimits) === null || _a === void 0 ? void 0 : _a.attributeCountLimit) !== null && _b !== void 0 ? _b : (_c = userConfig.generalLimits) === null || _c === void 0 ? void 0 : _c.attributeCountLimit) !== null && _d !== void 0 ? _d : parsedEnvConfig.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT) !== null && _e !== void 0 ? _e : parsedEnvConfig.OTEL_ATTRIBUTE_COUNT_LIMIT) !== null && _f !== void 0 ? _f : DEFAULT_ATTRIBUTE_COUNT_LIMIT;\n    /**\n     * Reassign span attribute value length limit to use first non null value defined by user or use default value\n     */\n    spanLimits.attributeValueLengthLimit =\n        (_m = (_l = (_k = (_h = (_g = userConfig.spanLimits) === null || _g === void 0 ? void 0 : _g.attributeValueLengthLimit) !== null && _h !== void 0 ? _h : (_j = userConfig.generalLimits) === null || _j === void 0 ? void 0 : _j.attributeValueLengthLimit) !== null && _k !== void 0 ? _k : parsedEnvConfig.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && _l !== void 0 ? _l : parsedEnvConfig.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT) !== null && _m !== void 0 ? _m : DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT;\n    return Object.assign({}, userConfig, { spanLimits: spanLimits });\n}\n//# sourceMappingURL=utility.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { diag } from '@opentelemetry/api';\nimport { SemanticResourceAttributes } from '@opentelemetry/semantic-conventions';\nimport { SDK_INFO } from '@opentelemetry/core';\nimport { defaultServiceName } from './platform';\n/**\n * A Resource describes the entity for which a signals (metrics or trace) are\n * collected.\n */\nvar Resource = /** @class */ (function () {\n    function Resource(\n    /**\n     * A dictionary of attributes with string keys and values that provide\n     * information about the entity as numbers, strings or booleans\n     * TODO: Consider to add check/validation on attributes.\n     */\n    attributes, asyncAttributesPromise) {\n        var _this = this;\n        var _a;\n        this._attributes = attributes;\n        this.asyncAttributesPending = asyncAttributesPromise != null;\n        this._syncAttributes = (_a = this._attributes) !== null && _a !== void 0 ? _a : {};\n        this._asyncAttributesPromise = asyncAttributesPromise === null || asyncAttributesPromise === void 0 ? void 0 : asyncAttributesPromise.then(function (asyncAttributes) {\n            _this._attributes = Object.assign({}, _this._attributes, asyncAttributes);\n            _this.asyncAttributesPending = false;\n            return asyncAttributes;\n        }, function (err) {\n            diag.debug(\"a resource's async attributes promise rejected: %s\", err);\n            _this.asyncAttributesPending = false;\n            return {};\n        });\n    }\n    /**\n     * Returns an empty Resource\n     */\n    Resource.empty = function () {\n        return Resource.EMPTY;\n    };\n    /**\n     * Returns a Resource that identifies the SDK in use.\n     */\n    Resource.default = function () {\n        var _a;\n        return new Resource((_a = {},\n            _a[SemanticResourceAttributes.SERVICE_NAME] = defaultServiceName(),\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_NAME] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_NAME],\n            _a[SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = SDK_INFO[SemanticResourceAttributes.TELEMETRY_SDK_VERSION],\n            _a));\n    };\n    Object.defineProperty(Resource.prototype, \"attributes\", {\n        get: function () {\n            var _a;\n            if (this.asyncAttributesPending) {\n                diag.error('Accessing resource attributes before async attributes settled');\n            }\n            return (_a = this._attributes) !== null && _a !== void 0 ? _a : {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Returns a promise that will never be rejected. Resolves when all async attributes have finished being added to\n     * this Resource's attributes. This is useful in exporters to block until resource detection\n     * has finished.\n     */\n    Resource.prototype.waitForAsyncAttributes = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.asyncAttributesPending) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this._asyncAttributesPromise];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Returns a new, merged {@link Resource} by merging the current Resource\n     * with the other Resource. In case of a collision, other Resource takes\n     * precedence.\n     *\n     * @param other the Resource that will be merged with this.\n     * @returns the newly merged Resource.\n     */\n    Resource.prototype.merge = function (other) {\n        var _this = this;\n        var _a;\n        if (!other)\n            return this;\n        // SpanAttributes from other resource overwrite attributes from this resource.\n        var mergedSyncAttributes = __assign(__assign({}, this._syncAttributes), ((_a = other._syncAttributes) !== null && _a !== void 0 ? _a : other.attributes));\n        if (!this._asyncAttributesPromise &&\n            !other._asyncAttributesPromise) {\n            return new Resource(mergedSyncAttributes);\n        }\n        var mergedAttributesPromise = Promise.all([\n            this._asyncAttributesPromise,\n            other._asyncAttributesPromise,\n        ]).then(function (_a) {\n            var _b;\n            var _c = __read(_a, 2), thisAsyncAttributes = _c[0], otherAsyncAttributes = _c[1];\n            return __assign(__assign(__assign(__assign({}, _this._syncAttributes), thisAsyncAttributes), ((_b = other._syncAttributes) !== null && _b !== void 0 ? _b : other.attributes)), otherAsyncAttributes);\n        });\n        return new Resource(mergedSyncAttributes, mergedAttributesPromise);\n    };\n    Resource.EMPTY = new Resource({});\n    return Resource;\n}());\nexport { Resource };\n//# sourceMappingURL=Resource.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function defaultServiceName() {\n    return \"unknown_service:\" + process.argv0;\n}\n//# sourceMappingURL=default-service-name.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { globalErrorHandler } from '@opentelemetry/core';\n/**\n * Implementation of the {@link SpanProcessor} that simply forwards all\n * received events to a list of {@link SpanProcessor}s.\n */\nvar MultiSpanProcessor = /** @class */ (function () {\n    function MultiSpanProcessor(_spanProcessors) {\n        this._spanProcessors = _spanProcessors;\n    }\n    MultiSpanProcessor.prototype.forceFlush = function () {\n        var e_1, _a;\n        var promises = [];\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                promises.push(spanProcessor.forceFlush());\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return new Promise(function (resolve) {\n            Promise.all(promises)\n                .then(function () {\n                resolve();\n            })\n                .catch(function (error) {\n                globalErrorHandler(error || new Error('MultiSpanProcessor: forceFlush failed'));\n                resolve();\n            });\n        });\n    };\n    MultiSpanProcessor.prototype.onStart = function (span, context) {\n        var e_2, _a;\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                spanProcessor.onStart(span, context);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    MultiSpanProcessor.prototype.onEnd = function (span) {\n        var e_3, _a;\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                spanProcessor.onEnd(span);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    MultiSpanProcessor.prototype.shutdown = function () {\n        var e_4, _a;\n        var promises = [];\n        try {\n            for (var _b = __values(this._spanProcessors), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var spanProcessor = _c.value;\n                promises.push(spanProcessor.shutdown());\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return new Promise(function (resolve, reject) {\n            Promise.all(promises).then(function () {\n                resolve();\n            }, reject);\n        });\n    };\n    return MultiSpanProcessor;\n}());\nexport { MultiSpanProcessor };\n//# sourceMappingURL=MultiSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** No-op implementation of SpanProcessor */\nvar NoopSpanProcessor = /** @class */ (function () {\n    function NoopSpanProcessor() {\n    }\n    NoopSpanProcessor.prototype.onStart = function (_span, _context) { };\n    NoopSpanProcessor.prototype.onEnd = function (_span) { };\n    NoopSpanProcessor.prototype.shutdown = function () {\n        return Promise.resolve();\n    };\n    NoopSpanProcessor.prototype.forceFlush = function () {\n        return Promise.resolve();\n    };\n    return NoopSpanProcessor;\n}());\nexport { NoopSpanProcessor };\n//# sourceMappingURL=NoopSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { context, diag, TraceFlags } from '@opentelemetry/api';\nimport { BindOnceFuture, ExportResultCode, getEnv, globalErrorHandler, suppressTracing, unrefTimer, } from '@opentelemetry/core';\n/**\n * Implementation of the {@link SpanProcessor} that batches spans exported by\n * the SDK then pushes them to the exporter pipeline.\n */\nvar BatchSpanProcessorBase = /** @class */ (function () {\n    function BatchSpanProcessorBase(_exporter, config) {\n        this._exporter = _exporter;\n        this._finishedSpans = [];\n        this._droppedSpansCount = 0;\n        var env = getEnv();\n        this._maxExportBatchSize =\n            typeof (config === null || config === void 0 ? void 0 : config.maxExportBatchSize) === 'number'\n                ? config.maxExportBatchSize\n                : env.OTEL_BSP_MAX_EXPORT_BATCH_SIZE;\n        this._maxQueueSize =\n            typeof (config === null || config === void 0 ? void 0 : config.maxQueueSize) === 'number'\n                ? config.maxQueueSize\n                : env.OTEL_BSP_MAX_QUEUE_SIZE;\n        this._scheduledDelayMillis =\n            typeof (config === null || config === void 0 ? void 0 : config.scheduledDelayMillis) === 'number'\n                ? config.scheduledDelayMillis\n                : env.OTEL_BSP_SCHEDULE_DELAY;\n        this._exportTimeoutMillis =\n            typeof (config === null || config === void 0 ? void 0 : config.exportTimeoutMillis) === 'number'\n                ? config.exportTimeoutMillis\n                : env.OTEL_BSP_EXPORT_TIMEOUT;\n        this._shutdownOnce = new BindOnceFuture(this._shutdown, this);\n        if (this._maxExportBatchSize > this._maxQueueSize) {\n            diag.warn('BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize');\n            this._maxExportBatchSize = this._maxQueueSize;\n        }\n    }\n    BatchSpanProcessorBase.prototype.forceFlush = function () {\n        if (this._shutdownOnce.isCalled) {\n            return this._shutdownOnce.promise;\n        }\n        return this._flushAll();\n    };\n    // does nothing.\n    BatchSpanProcessorBase.prototype.onStart = function (_span, _parentContext) { };\n    BatchSpanProcessorBase.prototype.onEnd = function (span) {\n        if (this._shutdownOnce.isCalled) {\n            return;\n        }\n        if ((span.spanContext().traceFlags & TraceFlags.SAMPLED) === 0) {\n            return;\n        }\n        this._addToBuffer(span);\n    };\n    BatchSpanProcessorBase.prototype.shutdown = function () {\n        return this._shutdownOnce.call();\n    };\n    BatchSpanProcessorBase.prototype._shutdown = function () {\n        var _this = this;\n        return Promise.resolve()\n            .then(function () {\n            return _this.onShutdown();\n        })\n            .then(function () {\n            return _this._flushAll();\n        })\n            .then(function () {\n            return _this._exporter.shutdown();\n        });\n    };\n    /** Add a span in the buffer. */\n    BatchSpanProcessorBase.prototype._addToBuffer = function (span) {\n        if (this._finishedSpans.length >= this._maxQueueSize) {\n            // limit reached, drop span\n            if (this._droppedSpansCount === 0) {\n                diag.debug('maxQueueSize reached, dropping spans');\n            }\n            this._droppedSpansCount++;\n            return;\n        }\n        if (this._droppedSpansCount > 0) {\n            // some spans were dropped, log once with count of spans dropped\n            diag.warn(\"Dropped \" + this._droppedSpansCount + \" spans because maxQueueSize reached\");\n            this._droppedSpansCount = 0;\n        }\n        this._finishedSpans.push(span);\n        this._maybeStartTimer();\n    };\n    /**\n     * Send all spans to the exporter respecting the batch size limit\n     * This function is used only on forceFlush or shutdown,\n     * for all other cases _flush should be used\n     * */\n    BatchSpanProcessorBase.prototype._flushAll = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var promises = [];\n            // calculate number of batches\n            var count = Math.ceil(_this._finishedSpans.length / _this._maxExportBatchSize);\n            for (var i = 0, j = count; i < j; i++) {\n                promises.push(_this._flushOneBatch());\n            }\n            Promise.all(promises)\n                .then(function () {\n                resolve();\n            })\n                .catch(reject);\n        });\n    };\n    BatchSpanProcessorBase.prototype._flushOneBatch = function () {\n        var _this = this;\n        this._clearTimer();\n        if (this._finishedSpans.length === 0) {\n            return Promise.resolve();\n        }\n        return new Promise(function (resolve, reject) {\n            var timer = setTimeout(function () {\n                // don't wait anymore for export, this way the next batch can start\n                reject(new Error('Timeout'));\n            }, _this._exportTimeoutMillis);\n            // prevent downstream exporter calls from generating spans\n            context.with(suppressTracing(context.active()), function () {\n                // Reset the finished spans buffer here because the next invocations of the _flush method\n                // could pass the same finished spans to the exporter if the buffer is cleared\n                // outside the execution of this callback.\n                var spans = _this._finishedSpans.splice(0, _this._maxExportBatchSize);\n                var doExport = function () {\n                    return _this._exporter.export(spans, function (result) {\n                        var _a;\n                        clearTimeout(timer);\n                        if (result.code === ExportResultCode.SUCCESS) {\n                            resolve();\n                        }\n                        else {\n                            reject((_a = result.error) !== null && _a !== void 0 ? _a : new Error('BatchSpanProcessor: span export failed'));\n                        }\n                    });\n                };\n                var pendingResources = spans\n                    .map(function (span) { return span.resource; })\n                    .filter(function (resource) { return resource.asyncAttributesPending; });\n                // Avoid scheduling a promise to make the behavior more predictable and easier to test\n                if (pendingResources.length === 0) {\n                    doExport();\n                }\n                else {\n                    Promise.all(pendingResources.map(function (resource) { var _a; return (_a = resource.waitForAsyncAttributes) === null || _a === void 0 ? void 0 : _a.call(resource); })).then(doExport, function (err) {\n                        globalErrorHandler(err);\n                        reject(err);\n                    });\n                }\n            });\n        });\n    };\n    BatchSpanProcessorBase.prototype._maybeStartTimer = function () {\n        var _this = this;\n        if (this._timer !== undefined)\n            return;\n        this._timer = setTimeout(function () {\n            _this._flushOneBatch()\n                .then(function () {\n                if (_this._finishedSpans.length > 0) {\n                    _this._clearTimer();\n                    _this._maybeStartTimer();\n                }\n            })\n                .catch(function (e) {\n                globalErrorHandler(e);\n            });\n        }, this._scheduledDelayMillis);\n        unrefTimer(this._timer);\n    };\n    BatchSpanProcessorBase.prototype._clearTimer = function () {\n        if (this._timer !== undefined) {\n            clearTimeout(this._timer);\n            this._timer = undefined;\n        }\n    };\n    return BatchSpanProcessorBase;\n}());\nexport { BatchSpanProcessorBase };\n//# sourceMappingURL=BatchSpanProcessorBase.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { ExportResultCode, hrTimeToMicroseconds, } from '@opentelemetry/core';\n/**\n * This is implementation of {@link SpanExporter} that prints spans to the\n * console. This class can be used for diagnostic purposes.\n */\n/* eslint-disable no-console */\nvar ConsoleSpanExporter = /** @class */ (function () {\n    function ConsoleSpanExporter() {\n    }\n    /**\n     * Export spans.\n     * @param spans\n     * @param resultCallback\n     */\n    ConsoleSpanExporter.prototype.export = function (spans, resultCallback) {\n        return this._sendSpans(spans, resultCallback);\n    };\n    /**\n     * Shutdown the exporter.\n     */\n    ConsoleSpanExporter.prototype.shutdown = function () {\n        this._sendSpans([]);\n        return this.forceFlush();\n    };\n    /**\n     * Exports any pending spans in exporter\n     */\n    ConsoleSpanExporter.prototype.forceFlush = function () {\n        return Promise.resolve();\n    };\n    /**\n     * converts span info into more readable format\n     * @param span\n     */\n    ConsoleSpanExporter.prototype._exportInfo = function (span) {\n        var _a;\n        return {\n            traceId: span.spanContext().traceId,\n            parentId: span.parentSpanId,\n            traceState: (_a = span.spanContext().traceState) === null || _a === void 0 ? void 0 : _a.serialize(),\n            name: span.name,\n            id: span.spanContext().spanId,\n            kind: span.kind,\n            timestamp: hrTimeToMicroseconds(span.startTime),\n            duration: hrTimeToMicroseconds(span.duration),\n            attributes: span.attributes,\n            status: span.status,\n            events: span.events,\n            links: span.links,\n        };\n    };\n    /**\n     * Showing spans in console\n     * @param spans\n     * @param done\n     */\n    ConsoleSpanExporter.prototype._sendSpans = function (spans, done) {\n        var e_1, _a;\n        try {\n            for (var spans_1 = __values(spans), spans_1_1 = spans_1.next(); !spans_1_1.done; spans_1_1 = spans_1.next()) {\n                var span = spans_1_1.value;\n                console.dir(this._exportInfo(span), { depth: 3 });\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (spans_1_1 && !spans_1_1.done && (_a = spans_1.return)) _a.call(spans_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (done) {\n            return done({ code: ExportResultCode.SUCCESS });\n        }\n    };\n    return ConsoleSpanExporter;\n}());\nexport { ConsoleSpanExporter };\n//# sourceMappingURL=ConsoleSpanExporter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { ExportResultCode } from '@opentelemetry/core';\n/**\n * This class can be used for testing purposes. It stores the exported spans\n * in a list in memory that can be retrieved using the `getFinishedSpans()`\n * method.\n */\nvar InMemorySpanExporter = /** @class */ (function () {\n    function InMemorySpanExporter() {\n        this._finishedSpans = [];\n        /**\n         * Indicates if the exporter has been \"shutdown.\"\n         * When false, exported spans will not be stored in-memory.\n         */\n        this._stopped = false;\n    }\n    InMemorySpanExporter.prototype.export = function (spans, resultCallback) {\n        var _a;\n        if (this._stopped)\n            return resultCallback({\n                code: ExportResultCode.FAILED,\n                error: new Error('Exporter has been stopped'),\n            });\n        (_a = this._finishedSpans).push.apply(_a, __spreadArray([], __read(spans), false));\n        setTimeout(function () { return resultCallback({ code: ExportResultCode.SUCCESS }); }, 0);\n    };\n    InMemorySpanExporter.prototype.shutdown = function () {\n        this._stopped = true;\n        this._finishedSpans = [];\n        return this.forceFlush();\n    };\n    /**\n     * Exports any pending spans in the exporter\n     */\n    InMemorySpanExporter.prototype.forceFlush = function () {\n        return Promise.resolve();\n    };\n    InMemorySpanExporter.prototype.reset = function () {\n        this._finishedSpans = [];\n    };\n    InMemorySpanExporter.prototype.getFinishedSpans = function () {\n        return this._finishedSpans;\n    };\n    return InMemorySpanExporter;\n}());\nexport { InMemorySpanExporter };\n//# sourceMappingURL=InMemorySpanExporter.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { TraceFlags } from '@opentelemetry/api';\nimport { internal, ExportResultCode, globalErrorHandler, BindOnceFuture, } from '@opentelemetry/core';\n/**\n * An implementation of the {@link SpanProcessor} that converts the {@link Span}\n * to {@link ReadableSpan} and passes it to the configured exporter.\n *\n * Only spans that are sampled are converted.\n */\nvar SimpleSpanProcessor = /** @class */ (function () {\n    function SimpleSpanProcessor(_exporter) {\n        this._exporter = _exporter;\n        this._shutdownOnce = new BindOnceFuture(this._shutdown, this);\n        this._unresolvedExports = new Set();\n    }\n    SimpleSpanProcessor.prototype.forceFlush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: \n                    // await unresolved resources before resolving\n                    return [4 /*yield*/, Promise.all(Array.from(this._unresolvedExports))];\n                    case 1:\n                        // await unresolved resources before resolving\n                        _a.sent();\n                        if (!this._exporter.forceFlush) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this._exporter.forceFlush()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SimpleSpanProcessor.prototype.onStart = function (_span, _parentContext) { };\n    SimpleSpanProcessor.prototype.onEnd = function (span) {\n        var _this = this;\n        var _a, _b;\n        if (this._shutdownOnce.isCalled) {\n            return;\n        }\n        if ((span.spanContext().traceFlags & TraceFlags.SAMPLED) === 0) {\n            return;\n        }\n        var doExport = function () {\n            return internal\n                ._export(_this._exporter, [span])\n                .then(function (result) {\n                var _a;\n                if (result.code !== ExportResultCode.SUCCESS) {\n                    globalErrorHandler((_a = result.error) !== null && _a !== void 0 ? _a : new Error(\"SimpleSpanProcessor: span export failed (status \" + result + \")\"));\n                }\n            })\n                .catch(function (error) {\n                globalErrorHandler(error);\n            });\n        };\n        // Avoid scheduling a promise to make the behavior more predictable and easier to test\n        if (span.resource.asyncAttributesPending) {\n            var exportPromise_1 = (_b = (_a = span.resource).waitForAsyncAttributes) === null || _b === void 0 ? void 0 : _b.call(_a).then(function () {\n                if (exportPromise_1 != null) {\n                    _this._unresolvedExports.delete(exportPromise_1);\n                }\n                return doExport();\n            }, function (err) { return globalErrorHandler(err); });\n            // store the unresolved exports\n            if (exportPromise_1 != null) {\n                this._unresolvedExports.add(exportPromise_1);\n            }\n        }\n        else {\n            void doExport();\n        }\n    };\n    SimpleSpanProcessor.prototype.shutdown = function () {\n        return this._shutdownOnce.call();\n    };\n    SimpleSpanProcessor.prototype._shutdown = function () {\n        return this._exporter.shutdown();\n    };\n    return SimpleSpanProcessor;\n}());\nexport { SimpleSpanProcessor };\n//# sourceMappingURL=SimpleSpanProcessor.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// DO NOT EDIT, this is an Auto-generated file from scripts/semconv/templates//templates/SemanticAttributes.ts.j2\nexport var SemanticResourceAttributes = {\n    /**\n     * Name of the cloud provider.\n     */\n    CLOUD_PROVIDER: 'cloud.provider',\n    /**\n     * The cloud account ID the resource is assigned to.\n     */\n    CLOUD_ACCOUNT_ID: 'cloud.account.id',\n    /**\n     * The geographical region the resource is running. Refer to your provider&#39;s docs to see the available regions, for example [Alibaba Cloud regions](https://www.alibabacloud.com/help/doc-detail/40654.htm), [AWS regions](https://aws.amazon.com/about-aws/global-infrastructure/regions_az/), [Azure regions](https://azure.microsoft.com/en-us/global-infrastructure/geographies/), or [Google Cloud regions](https://cloud.google.com/about/locations).\n     */\n    CLOUD_REGION: 'cloud.region',\n    /**\n     * Cloud regions often have multiple, isolated locations known as zones to increase availability. Availability zone represents the zone where the resource is running.\n     *\n     * Note: Availability zones are called &#34;zones&#34; on Alibaba Cloud and Google Cloud.\n     */\n    CLOUD_AVAILABILITY_ZONE: 'cloud.availability_zone',\n    /**\n     * The cloud platform in use.\n     *\n     * Note: The prefix of the service SHOULD match the one specified in `cloud.provider`.\n     */\n    CLOUD_PLATFORM: 'cloud.platform',\n    /**\n     * The Amazon Resource Name (ARN) of an [ECS container instance](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_instances.html).\n     */\n    AWS_ECS_CONTAINER_ARN: 'aws.ecs.container.arn',\n    /**\n     * The ARN of an [ECS cluster](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/clusters.html).\n     */\n    AWS_ECS_CLUSTER_ARN: 'aws.ecs.cluster.arn',\n    /**\n     * The [launch type](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html) for an ECS task.\n     */\n    AWS_ECS_LAUNCHTYPE: 'aws.ecs.launchtype',\n    /**\n     * The ARN of an [ECS task definition](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definitions.html).\n     */\n    AWS_ECS_TASK_ARN: 'aws.ecs.task.arn',\n    /**\n     * The task definition family this task definition is a member of.\n     */\n    AWS_ECS_TASK_FAMILY: 'aws.ecs.task.family',\n    /**\n     * The revision for this task definition.\n     */\n    AWS_ECS_TASK_REVISION: 'aws.ecs.task.revision',\n    /**\n     * The ARN of an EKS cluster.\n     */\n    AWS_EKS_CLUSTER_ARN: 'aws.eks.cluster.arn',\n    /**\n     * The name(s) of the AWS log group(s) an application is writing to.\n     *\n     * Note: Multiple log groups must be supported for cases like multi-container applications, where a single application has sidecar containers, and each write to their own log group.\n     */\n    AWS_LOG_GROUP_NAMES: 'aws.log.group.names',\n    /**\n     * The Amazon Resource Name(s) (ARN) of the AWS log group(s).\n     *\n     * Note: See the [log group ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format).\n     */\n    AWS_LOG_GROUP_ARNS: 'aws.log.group.arns',\n    /**\n     * The name(s) of the AWS log stream(s) an application is writing to.\n     */\n    AWS_LOG_STREAM_NAMES: 'aws.log.stream.names',\n    /**\n     * The ARN(s) of the AWS log stream(s).\n     *\n     * Note: See the [log stream ARN format documentation](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/iam-access-control-overview-cwl.html#CWL_ARN_Format). One log group can contain several log streams, so these ARNs necessarily identify both a log group and a log stream.\n     */\n    AWS_LOG_STREAM_ARNS: 'aws.log.stream.arns',\n    /**\n     * Container name.\n     */\n    CONTAINER_NAME: 'container.name',\n    /**\n     * Container ID. Usually a UUID, as for example used to [identify Docker containers](https://docs.docker.com/engine/reference/run/#container-identification). The UUID might be abbreviated.\n     */\n    CONTAINER_ID: 'container.id',\n    /**\n     * The container runtime managing this container.\n     */\n    CONTAINER_RUNTIME: 'container.runtime',\n    /**\n     * Name of the image the container was built on.\n     */\n    CONTAINER_IMAGE_NAME: 'container.image.name',\n    /**\n     * Container image tag.\n     */\n    CONTAINER_IMAGE_TAG: 'container.image.tag',\n    /**\n     * Name of the [deployment environment](https://en.wikipedia.org/wiki/Deployment_environment) (aka deployment tier).\n     */\n    DEPLOYMENT_ENVIRONMENT: 'deployment.environment',\n    /**\n     * A unique identifier representing the device.\n     *\n     * Note: The device identifier MUST only be defined using the values outlined below. This value is not an advertising identifier and MUST NOT be used as such. On iOS (Swift or Objective-C), this value MUST be equal to the [vendor identifier](https://developer.apple.com/documentation/uikit/uidevice/1620059-identifierforvendor). On Android (Java or Kotlin), this value MUST be equal to the Firebase Installation ID or a globally unique UUID which is persisted across sessions in your application. More information can be found [here](https://developer.android.com/training/articles/user-data-ids) on best practices and exact implementation details. Caution should be taken when storing personal data or anything which can identify a user. GDPR and data protection laws may apply, ensure you do your own due diligence.\n     */\n    DEVICE_ID: 'device.id',\n    /**\n     * The model identifier for the device.\n     *\n     * Note: It&#39;s recommended this value represents a machine readable version of the model identifier rather than the market or consumer-friendly name of the device.\n     */\n    DEVICE_MODEL_IDENTIFIER: 'device.model.identifier',\n    /**\n     * The marketing name for the device model.\n     *\n     * Note: It&#39;s recommended this value represents a human readable version of the device model rather than a machine readable alternative.\n     */\n    DEVICE_MODEL_NAME: 'device.model.name',\n    /**\n     * The name of the single function that this runtime instance executes.\n     *\n     * Note: This is the name of the function as configured/deployed on the FaaS platform and is usually different from the name of the callback function (which may be stored in the [`code.namespace`/`code.function`](../../trace/semantic_conventions/span-general.md#source-code-attributes) span attributes).\n     */\n    FAAS_NAME: 'faas.name',\n    /**\n    * The unique ID of the single function that this runtime instance executes.\n    *\n    * Note: Depending on the cloud provider, use:\n  \n  * **AWS Lambda:** The function [ARN](https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html).\n  Take care not to use the &#34;invoked ARN&#34; directly but replace any\n  [alias suffix](https://docs.aws.amazon.com/lambda/latest/dg/configuration-aliases.html) with the resolved function version, as the same runtime instance may be invokable with multiple\n  different aliases.\n  * **GCP:** The [URI of the resource](https://cloud.google.com/iam/docs/full-resource-names)\n  * **Azure:** The [Fully Qualified Resource ID](https://docs.microsoft.com/en-us/rest/api/resources/resources/get-by-id).\n  \n  On some providers, it may not be possible to determine the full ID at startup,\n  which is why this field cannot be made required. For example, on AWS the account ID\n  part of the ARN is not available without calling another AWS API\n  which may be deemed too slow for a short-running lambda function.\n  As an alternative, consider setting `faas.id` as a span attribute instead.\n    */\n    FAAS_ID: 'faas.id',\n    /**\n    * The immutable version of the function being executed.\n    *\n    * Note: Depending on the cloud provider and platform, use:\n  \n  * **AWS Lambda:** The [function version](https://docs.aws.amazon.com/lambda/latest/dg/configuration-versions.html)\n    (an integer represented as a decimal string).\n  * **Google Cloud Run:** The [revision](https://cloud.google.com/run/docs/managing/revisions)\n    (i.e., the function name plus the revision suffix).\n  * **Google Cloud Functions:** The value of the\n    [`K_REVISION` environment variable](https://cloud.google.com/functions/docs/env-var#runtime_environment_variables_set_automatically).\n  * **Azure Functions:** Not applicable. Do not set this attribute.\n    */\n    FAAS_VERSION: 'faas.version',\n    /**\n     * The execution environment ID as a string, that will be potentially reused for other invocations to the same function/function version.\n     *\n     * Note: * **AWS Lambda:** Use the (full) log stream name.\n     */\n    FAAS_INSTANCE: 'faas.instance',\n    /**\n     * The amount of memory available to the serverless function in MiB.\n     *\n     * Note: It&#39;s recommended to set this attribute since e.g. too little memory can easily stop a Java AWS Lambda function from working correctly. On AWS Lambda, the environment variable `AWS_LAMBDA_FUNCTION_MEMORY_SIZE` provides this information.\n     */\n    FAAS_MAX_MEMORY: 'faas.max_memory',\n    /**\n     * Unique host ID. For Cloud, this must be the instance_id assigned by the cloud provider.\n     */\n    HOST_ID: 'host.id',\n    /**\n     * Name of the host. On Unix systems, it may contain what the hostname command returns, or the fully qualified hostname, or another name specified by the user.\n     */\n    HOST_NAME: 'host.name',\n    /**\n     * Type of host. For Cloud, this must be the machine type.\n     */\n    HOST_TYPE: 'host.type',\n    /**\n     * The CPU architecture the host system is running on.\n     */\n    HOST_ARCH: 'host.arch',\n    /**\n     * Name of the VM image or OS install the host was instantiated from.\n     */\n    HOST_IMAGE_NAME: 'host.image.name',\n    /**\n     * VM image ID. For Cloud, this value is from the provider.\n     */\n    HOST_IMAGE_ID: 'host.image.id',\n    /**\n     * The version string of the VM image as defined in [Version SpanAttributes](README.md#version-attributes).\n     */\n    HOST_IMAGE_VERSION: 'host.image.version',\n    /**\n     * The name of the cluster.\n     */\n    K8S_CLUSTER_NAME: 'k8s.cluster.name',\n    /**\n     * The name of the Node.\n     */\n    K8S_NODE_NAME: 'k8s.node.name',\n    /**\n     * The UID of the Node.\n     */\n    K8S_NODE_UID: 'k8s.node.uid',\n    /**\n     * The name of the namespace that the pod is running in.\n     */\n    K8S_NAMESPACE_NAME: 'k8s.namespace.name',\n    /**\n     * The UID of the Pod.\n     */\n    K8S_POD_UID: 'k8s.pod.uid',\n    /**\n     * The name of the Pod.\n     */\n    K8S_POD_NAME: 'k8s.pod.name',\n    /**\n     * The name of the Container in a Pod template.\n     */\n    K8S_CONTAINER_NAME: 'k8s.container.name',\n    /**\n     * The UID of the ReplicaSet.\n     */\n    K8S_REPLICASET_UID: 'k8s.replicaset.uid',\n    /**\n     * The name of the ReplicaSet.\n     */\n    K8S_REPLICASET_NAME: 'k8s.replicaset.name',\n    /**\n     * The UID of the Deployment.\n     */\n    K8S_DEPLOYMENT_UID: 'k8s.deployment.uid',\n    /**\n     * The name of the Deployment.\n     */\n    K8S_DEPLOYMENT_NAME: 'k8s.deployment.name',\n    /**\n     * The UID of the StatefulSet.\n     */\n    K8S_STATEFULSET_UID: 'k8s.statefulset.uid',\n    /**\n     * The name of the StatefulSet.\n     */\n    K8S_STATEFULSET_NAME: 'k8s.statefulset.name',\n    /**\n     * The UID of the DaemonSet.\n     */\n    K8S_DAEMONSET_UID: 'k8s.daemonset.uid',\n    /**\n     * The name of the DaemonSet.\n     */\n    K8S_DAEMONSET_NAME: 'k8s.daemonset.name',\n    /**\n     * The UID of the Job.\n     */\n    K8S_JOB_UID: 'k8s.job.uid',\n    /**\n     * The name of the Job.\n     */\n    K8S_JOB_NAME: 'k8s.job.name',\n    /**\n     * The UID of the CronJob.\n     */\n    K8S_CRONJOB_UID: 'k8s.cronjob.uid',\n    /**\n     * The name of the CronJob.\n     */\n    K8S_CRONJOB_NAME: 'k8s.cronjob.name',\n    /**\n     * The operating system type.\n     */\n    OS_TYPE: 'os.type',\n    /**\n     * Human readable (not intended to be parsed) OS version information, like e.g. reported by `ver` or `lsb_release -a` commands.\n     */\n    OS_DESCRIPTION: 'os.description',\n    /**\n     * Human readable operating system name.\n     */\n    OS_NAME: 'os.name',\n    /**\n     * The version string of the operating system as defined in [Version SpanAttributes](../../resource/semantic_conventions/README.md#version-attributes).\n     */\n    OS_VERSION: 'os.version',\n    /**\n     * Process identifier (PID).\n     */\n    PROCESS_PID: 'process.pid',\n    /**\n     * The name of the process executable. On Linux based systems, can be set to the `Name` in `proc/[pid]/status`. On Windows, can be set to the base name of `GetProcessImageFileNameW`.\n     */\n    PROCESS_EXECUTABLE_NAME: 'process.executable.name',\n    /**\n     * The full path to the process executable. On Linux based systems, can be set to the target of `proc/[pid]/exe`. On Windows, can be set to the result of `GetProcessImageFileNameW`.\n     */\n    PROCESS_EXECUTABLE_PATH: 'process.executable.path',\n    /**\n     * The command used to launch the process (i.e. the command name). On Linux based systems, can be set to the zeroth string in `proc/[pid]/cmdline`. On Windows, can be set to the first parameter extracted from `GetCommandLineW`.\n     */\n    PROCESS_COMMAND: 'process.command',\n    /**\n     * The full command used to launch the process as a single string representing the full command. On Windows, can be set to the result of `GetCommandLineW`. Do not set this if you have to assemble it just for monitoring; use `process.command_args` instead.\n     */\n    PROCESS_COMMAND_LINE: 'process.command_line',\n    /**\n     * All the command arguments (including the command/executable itself) as received by the process. On Linux-based systems (and some other Unixoid systems supporting procfs), can be set according to the list of null-delimited strings extracted from `proc/[pid]/cmdline`. For libc-based executables, this would be the full argv vector passed to `main`.\n     */\n    PROCESS_COMMAND_ARGS: 'process.command_args',\n    /**\n     * The username of the user that owns the process.\n     */\n    PROCESS_OWNER: 'process.owner',\n    /**\n     * The name of the runtime of this process. For compiled native binaries, this SHOULD be the name of the compiler.\n     */\n    PROCESS_RUNTIME_NAME: 'process.runtime.name',\n    /**\n     * The version of the runtime of this process, as returned by the runtime without modification.\n     */\n    PROCESS_RUNTIME_VERSION: 'process.runtime.version',\n    /**\n     * An additional description about the runtime of the process, for example a specific vendor customization of the runtime environment.\n     */\n    PROCESS_RUNTIME_DESCRIPTION: 'process.runtime.description',\n    /**\n     * Logical name of the service.\n     *\n     * Note: MUST be the same for all instances of horizontally scaled services. If the value was not specified, SDKs MUST fallback to `unknown_service:` concatenated with [`process.executable.name`](process.md#process), e.g. `unknown_service:bash`. If `process.executable.name` is not available, the value MUST be set to `unknown_service`.\n     */\n    SERVICE_NAME: 'service.name',\n    /**\n     * A namespace for `service.name`.\n     *\n     * Note: A string value having a meaning that helps to distinguish a group of services, for example the team name that owns a group of services. `service.name` is expected to be unique within the same namespace. If `service.namespace` is not specified in the Resource then `service.name` is expected to be unique for all services that have no explicit namespace defined (so the empty/unspecified namespace is simply one more valid namespace). Zero-length namespace string is assumed equal to unspecified namespace.\n     */\n    SERVICE_NAMESPACE: 'service.namespace',\n    /**\n     * The string ID of the service instance.\n     *\n     * Note: MUST be unique for each instance of the same `service.namespace,service.name` pair (in other words `service.namespace,service.name,service.instance.id` triplet MUST be globally unique). The ID helps to distinguish instances of the same service that exist at the same time (e.g. instances of a horizontally scaled service). It is preferable for the ID to be persistent and stay the same for the lifetime of the service instance, however it is acceptable that the ID is ephemeral and changes during important lifetime events for the service (e.g. service restarts). If the service has no inherent unique ID that can be used as the value of this attribute it is recommended to generate a random Version 1 or Version 4 RFC 4122 UUID (services aiming for reproducible UUIDs may also use Version 5, see RFC 4122 for more recommendations).\n     */\n    SERVICE_INSTANCE_ID: 'service.instance.id',\n    /**\n     * The version string of the service API or implementation.\n     */\n    SERVICE_VERSION: 'service.version',\n    /**\n     * The name of the telemetry SDK as defined above.\n     */\n    TELEMETRY_SDK_NAME: 'telemetry.sdk.name',\n    /**\n     * The language of the telemetry SDK.\n     */\n    TELEMETRY_SDK_LANGUAGE: 'telemetry.sdk.language',\n    /**\n     * The version string of the telemetry SDK.\n     */\n    TELEMETRY_SDK_VERSION: 'telemetry.sdk.version',\n    /**\n     * The version string of the auto instrumentation agent, if used.\n     */\n    TELEMETRY_AUTO_VERSION: 'telemetry.auto.version',\n    /**\n     * The name of the web engine.\n     */\n    WEBENGINE_NAME: 'webengine.name',\n    /**\n     * The version of the web engine.\n     */\n    WEBENGINE_VERSION: 'webengine.version',\n    /**\n     * Additional description of the web engine (e.g. detailed version and edition information).\n     */\n    WEBENGINE_DESCRIPTION: 'webengine.description',\n};\nexport var CloudProviderValues = {\n    /** Alibaba Cloud. */\n    ALIBABA_CLOUD: 'alibaba_cloud',\n    /** Amazon Web Services. */\n    AWS: 'aws',\n    /** Microsoft Azure. */\n    AZURE: 'azure',\n    /** Google Cloud Platform. */\n    GCP: 'gcp',\n};\nexport var CloudPlatformValues = {\n    /** Alibaba Cloud Elastic Compute Service. */\n    ALIBABA_CLOUD_ECS: 'alibaba_cloud_ecs',\n    /** Alibaba Cloud Function Compute. */\n    ALIBABA_CLOUD_FC: 'alibaba_cloud_fc',\n    /** AWS Elastic Compute Cloud. */\n    AWS_EC2: 'aws_ec2',\n    /** AWS Elastic Container Service. */\n    AWS_ECS: 'aws_ecs',\n    /** AWS Elastic Kubernetes Service. */\n    AWS_EKS: 'aws_eks',\n    /** AWS Lambda. */\n    AWS_LAMBDA: 'aws_lambda',\n    /** AWS Elastic Beanstalk. */\n    AWS_ELASTIC_BEANSTALK: 'aws_elastic_beanstalk',\n    /** Azure Virtual Machines. */\n    AZURE_VM: 'azure_vm',\n    /** Azure Container Instances. */\n    AZURE_CONTAINER_INSTANCES: 'azure_container_instances',\n    /** Azure Kubernetes Service. */\n    AZURE_AKS: 'azure_aks',\n    /** Azure Functions. */\n    AZURE_FUNCTIONS: 'azure_functions',\n    /** Azure App Service. */\n    AZURE_APP_SERVICE: 'azure_app_service',\n    /** Google Cloud Compute Engine (GCE). */\n    GCP_COMPUTE_ENGINE: 'gcp_compute_engine',\n    /** Google Cloud Run. */\n    GCP_CLOUD_RUN: 'gcp_cloud_run',\n    /** Google Cloud Kubernetes Engine (GKE). */\n    GCP_KUBERNETES_ENGINE: 'gcp_kubernetes_engine',\n    /** Google Cloud Functions (GCF). */\n    GCP_CLOUD_FUNCTIONS: 'gcp_cloud_functions',\n    /** Google Cloud App Engine (GAE). */\n    GCP_APP_ENGINE: 'gcp_app_engine',\n};\nexport var AwsEcsLaunchtypeValues = {\n    /** ec2. */\n    EC2: 'ec2',\n    /** fargate. */\n    FARGATE: 'fargate',\n};\nexport var HostArchValues = {\n    /** AMD64. */\n    AMD64: 'amd64',\n    /** ARM32. */\n    ARM32: 'arm32',\n    /** ARM64. */\n    ARM64: 'arm64',\n    /** Itanium. */\n    IA64: 'ia64',\n    /** 32-bit PowerPC. */\n    PPC32: 'ppc32',\n    /** 64-bit PowerPC. */\n    PPC64: 'ppc64',\n    /** 32-bit x86. */\n    X86: 'x86',\n};\nexport var OsTypeValues = {\n    /** Microsoft Windows. */\n    WINDOWS: 'windows',\n    /** Linux. */\n    LINUX: 'linux',\n    /** Apple Darwin. */\n    DARWIN: 'darwin',\n    /** FreeBSD. */\n    FREEBSD: 'freebsd',\n    /** NetBSD. */\n    NETBSD: 'netbsd',\n    /** OpenBSD. */\n    OPENBSD: 'openbsd',\n    /** DragonFly BSD. */\n    DRAGONFLYBSD: 'dragonflybsd',\n    /** HP-UX (Hewlett Packard Unix). */\n    HPUX: 'hpux',\n    /** AIX (Advanced Interactive eXecutive). */\n    AIX: 'aix',\n    /** Oracle Solaris. */\n    SOLARIS: 'solaris',\n    /** IBM z/OS. */\n    Z_OS: 'z_os',\n};\nexport var TelemetrySdkLanguageValues = {\n    /** cpp. */\n    CPP: 'cpp',\n    /** dotnet. */\n    DOTNET: 'dotnet',\n    /** erlang. */\n    ERLANG: 'erlang',\n    /** go. */\n    GO: 'go',\n    /** java. */\n    JAVA: 'java',\n    /** nodejs. */\n    NODEJS: 'nodejs',\n    /** php. */\n    PHP: 'php',\n    /** python. */\n    PYTHON: 'python',\n    /** ruby. */\n    RUBY: 'ruby',\n    /** webjs. */\n    WEBJS: 'webjs',\n};\n//# sourceMappingURL=SemanticResourceAttributes.js.map","/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// DO NOT EDIT, this is an Auto-generated file from scripts/semconv/templates//templates/SemanticAttributes.ts.j2\nexport var SemanticAttributes = {\n    /**\n     * The full invoked ARN as provided on the `Context` passed to the function (`Lambda-Runtime-Invoked-Function-Arn` header on the `/runtime/invocation/next` applicable).\n     *\n     * Note: This may be different from `faas.id` if an alias is involved.\n     */\n    AWS_LAMBDA_INVOKED_ARN: 'aws.lambda.invoked_arn',\n    /**\n     * An identifier for the database management system (DBMS) product being used. See below for a list of well-known identifiers.\n     */\n    DB_SYSTEM: 'db.system',\n    /**\n     * The connection string used to connect to the database. It is recommended to remove embedded credentials.\n     */\n    DB_CONNECTION_STRING: 'db.connection_string',\n    /**\n     * Username for accessing the database.\n     */\n    DB_USER: 'db.user',\n    /**\n     * The fully-qualified class name of the [Java Database Connectivity (JDBC)](https://docs.oracle.com/javase/8/docs/technotes/guides/jdbc/) driver used to connect.\n     */\n    DB_JDBC_DRIVER_CLASSNAME: 'db.jdbc.driver_classname',\n    /**\n     * If no [tech-specific attribute](#call-level-attributes-for-specific-technologies) is defined, this attribute is used to report the name of the database being accessed. For commands that switch the database, this should be set to the target database (even if the command fails).\n     *\n     * Note: In some SQL databases, the database name to be used is called &#34;schema name&#34;.\n     */\n    DB_NAME: 'db.name',\n    /**\n     * The database statement being executed.\n     *\n     * Note: The value may be sanitized to exclude sensitive information.\n     */\n    DB_STATEMENT: 'db.statement',\n    /**\n     * The name of the operation being executed, e.g. the [MongoDB command name](https://docs.mongodb.com/manual/reference/command/#database-operations) such as `findAndModify`, or the SQL keyword.\n     *\n     * Note: When setting this to an SQL keyword, it is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if the operation name is provided by the library being instrumented. If the SQL statement has an ambiguous operation, or performs more than one operation, this value may be omitted.\n     */\n    DB_OPERATION: 'db.operation',\n    /**\n     * The Microsoft SQL Server [instance name](https://docs.microsoft.com/en-us/sql/connect/jdbc/building-the-connection-url?view=sql-server-ver15) connecting to. This name is used to determine the port of a named instance.\n     *\n     * Note: If setting a `db.mssql.instance_name`, `net.peer.port` is no longer required (but still recommended if non-standard).\n     */\n    DB_MSSQL_INSTANCE_NAME: 'db.mssql.instance_name',\n    /**\n     * The name of the keyspace being accessed. To be used instead of the generic `db.name` attribute.\n     */\n    DB_CASSANDRA_KEYSPACE: 'db.cassandra.keyspace',\n    /**\n     * The fetch size used for paging, i.e. how many rows will be returned at once.\n     */\n    DB_CASSANDRA_PAGE_SIZE: 'db.cassandra.page_size',\n    /**\n     * The consistency level of the query. Based on consistency values from [CQL](https://docs.datastax.com/en/cassandra-oss/3.0/cassandra/dml/dmlConfigConsistency.html).\n     */\n    DB_CASSANDRA_CONSISTENCY_LEVEL: 'db.cassandra.consistency_level',\n    /**\n     * The name of the primary table that the operation is acting upon, including the schema name (if applicable).\n     *\n     * Note: This mirrors the db.sql.table attribute but references cassandra rather than sql. It is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if it is provided by the library being instrumented. If the operation is acting upon an anonymous table, or more than one table, this value MUST NOT be set.\n     */\n    DB_CASSANDRA_TABLE: 'db.cassandra.table',\n    /**\n     * Whether or not the query is idempotent.\n     */\n    DB_CASSANDRA_IDEMPOTENCE: 'db.cassandra.idempotence',\n    /**\n     * The number of times a query was speculatively executed. Not set or `0` if the query was not executed speculatively.\n     */\n    DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT: 'db.cassandra.speculative_execution_count',\n    /**\n     * The ID of the coordinating node for a query.\n     */\n    DB_CASSANDRA_COORDINATOR_ID: 'db.cassandra.coordinator.id',\n    /**\n     * The data center of the coordinating node for a query.\n     */\n    DB_CASSANDRA_COORDINATOR_DC: 'db.cassandra.coordinator.dc',\n    /**\n     * The [HBase namespace](https://hbase.apache.org/book.html#_namespace) being accessed. To be used instead of the generic `db.name` attribute.\n     */\n    DB_HBASE_NAMESPACE: 'db.hbase.namespace',\n    /**\n     * The index of the database being accessed as used in the [`SELECT` command](https://redis.io/commands/select), provided as an integer. To be used instead of the generic `db.name` attribute.\n     */\n    DB_REDIS_DATABASE_INDEX: 'db.redis.database_index',\n    /**\n     * The collection being accessed within the database stated in `db.name`.\n     */\n    DB_MONGODB_COLLECTION: 'db.mongodb.collection',\n    /**\n     * The name of the primary table that the operation is acting upon, including the schema name (if applicable).\n     *\n     * Note: It is not recommended to attempt any client-side parsing of `db.statement` just to get this property, but it should be set if it is provided by the library being instrumented. If the operation is acting upon an anonymous table, or more than one table, this value MUST NOT be set.\n     */\n    DB_SQL_TABLE: 'db.sql.table',\n    /**\n     * The type of the exception (its fully-qualified class name, if applicable). The dynamic type of the exception should be preferred over the static type in languages that support it.\n     */\n    EXCEPTION_TYPE: 'exception.type',\n    /**\n     * The exception message.\n     */\n    EXCEPTION_MESSAGE: 'exception.message',\n    /**\n     * A stacktrace as a string in the natural representation for the language runtime. The representation is to be determined and documented by each language SIG.\n     */\n    EXCEPTION_STACKTRACE: 'exception.stacktrace',\n    /**\n    * SHOULD be set to true if the exception event is recorded at a point where it is known that the exception is escaping the scope of the span.\n    *\n    * Note: An exception is considered to have escaped (or left) the scope of a span,\n  if that span is ended while the exception is still logically &#34;in flight&#34;.\n  This may be actually &#34;in flight&#34; in some languages (e.g. if the exception\n  is passed to a Context manager&#39;s `__exit__` method in Python) but will\n  usually be caught at the point of recording the exception in most languages.\n  \n  It is usually not possible to determine at the point where an exception is thrown\n  whether it will escape the scope of a span.\n  However, it is trivial to know that an exception\n  will escape, if one checks for an active exception just before ending the span,\n  as done in the [example above](#exception-end-example).\n  \n  It follows that an exception may still escape the scope of the span\n  even if the `exception.escaped` attribute was not set or set to false,\n  since the event might have been recorded at a time where it was not\n  clear whether the exception will escape.\n    */\n    EXCEPTION_ESCAPED: 'exception.escaped',\n    /**\n     * Type of the trigger on which the function is executed.\n     */\n    FAAS_TRIGGER: 'faas.trigger',\n    /**\n     * The execution ID of the current function execution.\n     */\n    FAAS_EXECUTION: 'faas.execution',\n    /**\n     * The name of the source on which the triggering operation was performed. For example, in Cloud Storage or S3 corresponds to the bucket name, and in Cosmos DB to the database name.\n     */\n    FAAS_DOCUMENT_COLLECTION: 'faas.document.collection',\n    /**\n     * Describes the type of the operation that was performed on the data.\n     */\n    FAAS_DOCUMENT_OPERATION: 'faas.document.operation',\n    /**\n     * A string containing the time when the data was accessed in the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format expressed in [UTC](https://www.w3.org/TR/NOTE-datetime).\n     */\n    FAAS_DOCUMENT_TIME: 'faas.document.time',\n    /**\n     * The document name/table subjected to the operation. For example, in Cloud Storage or S3 is the name of the file, and in Cosmos DB the table name.\n     */\n    FAAS_DOCUMENT_NAME: 'faas.document.name',\n    /**\n     * A string containing the function invocation time in the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format expressed in [UTC](https://www.w3.org/TR/NOTE-datetime).\n     */\n    FAAS_TIME: 'faas.time',\n    /**\n     * A string containing the schedule period as [Cron Expression](https://docs.oracle.com/cd/E12058_01/doc/doc.1014/e12030/cron_expressions.htm).\n     */\n    FAAS_CRON: 'faas.cron',\n    /**\n     * A boolean that is true if the serverless function is executed for the first time (aka cold-start).\n     */\n    FAAS_COLDSTART: 'faas.coldstart',\n    /**\n     * The name of the invoked function.\n     *\n     * Note: SHOULD be equal to the `faas.name` resource attribute of the invoked function.\n     */\n    FAAS_INVOKED_NAME: 'faas.invoked_name',\n    /**\n     * The cloud provider of the invoked function.\n     *\n     * Note: SHOULD be equal to the `cloud.provider` resource attribute of the invoked function.\n     */\n    FAAS_INVOKED_PROVIDER: 'faas.invoked_provider',\n    /**\n     * The cloud region of the invoked function.\n     *\n     * Note: SHOULD be equal to the `cloud.region` resource attribute of the invoked function.\n     */\n    FAAS_INVOKED_REGION: 'faas.invoked_region',\n    /**\n     * Transport protocol used. See note below.\n     */\n    NET_TRANSPORT: 'net.transport',\n    /**\n     * Remote address of the peer (dotted decimal for IPv4 or [RFC5952](https://tools.ietf.org/html/rfc5952) for IPv6).\n     */\n    NET_PEER_IP: 'net.peer.ip',\n    /**\n     * Remote port number.\n     */\n    NET_PEER_PORT: 'net.peer.port',\n    /**\n     * Remote hostname or similar, see note below.\n     */\n    NET_PEER_NAME: 'net.peer.name',\n    /**\n     * Like `net.peer.ip` but for the host IP. Useful in case of a multi-IP host.\n     */\n    NET_HOST_IP: 'net.host.ip',\n    /**\n     * Like `net.peer.port` but for the host port.\n     */\n    NET_HOST_PORT: 'net.host.port',\n    /**\n     * Local hostname or similar, see note below.\n     */\n    NET_HOST_NAME: 'net.host.name',\n    /**\n     * The internet connection type currently being used by the host.\n     */\n    NET_HOST_CONNECTION_TYPE: 'net.host.connection.type',\n    /**\n     * This describes more details regarding the connection.type. It may be the type of cell technology connection, but it could be used for describing details about a wifi connection.\n     */\n    NET_HOST_CONNECTION_SUBTYPE: 'net.host.connection.subtype',\n    /**\n     * The name of the mobile carrier.\n     */\n    NET_HOST_CARRIER_NAME: 'net.host.carrier.name',\n    /**\n     * The mobile carrier country code.\n     */\n    NET_HOST_CARRIER_MCC: 'net.host.carrier.mcc',\n    /**\n     * The mobile carrier network code.\n     */\n    NET_HOST_CARRIER_MNC: 'net.host.carrier.mnc',\n    /**\n     * The ISO 3166-1 alpha-2 2-character country code associated with the mobile carrier network.\n     */\n    NET_HOST_CARRIER_ICC: 'net.host.carrier.icc',\n    /**\n     * The [`service.name`](../../resource/semantic_conventions/README.md#service) of the remote service. SHOULD be equal to the actual `service.name` resource attribute of the remote service if any.\n     */\n    PEER_SERVICE: 'peer.service',\n    /**\n     * Username or client_id extracted from the access token or [Authorization](https://tools.ietf.org/html/rfc7235#section-4.2) header in the inbound request from outside the system.\n     */\n    ENDUSER_ID: 'enduser.id',\n    /**\n     * Actual/assumed role the client is making the request under extracted from token or application security context.\n     */\n    ENDUSER_ROLE: 'enduser.role',\n    /**\n     * Scopes or granted authorities the client currently possesses extracted from token or application security context. The value would come from the scope associated with an [OAuth 2.0 Access Token](https://tools.ietf.org/html/rfc6749#section-3.3) or an attribute value in a [SAML 2.0 Assertion](http://docs.oasis-open.org/security/saml/Post2.0/sstc-saml-tech-overview-2.0.html).\n     */\n    ENDUSER_SCOPE: 'enduser.scope',\n    /**\n     * Current &#34;managed&#34; thread ID (as opposed to OS thread ID).\n     */\n    THREAD_ID: 'thread.id',\n    /**\n     * Current thread name.\n     */\n    THREAD_NAME: 'thread.name',\n    /**\n     * The method or function name, or equivalent (usually rightmost part of the code unit&#39;s name).\n     */\n    CODE_FUNCTION: 'code.function',\n    /**\n     * The &#34;namespace&#34; within which `code.function` is defined. Usually the qualified class or module name, such that `code.namespace` + some separator + `code.function` form a unique identifier for the code unit.\n     */\n    CODE_NAMESPACE: 'code.namespace',\n    /**\n     * The source code file name that identifies the code unit as uniquely as possible (preferably an absolute file path).\n     */\n    CODE_FILEPATH: 'code.filepath',\n    /**\n     * The line number in `code.filepath` best representing the operation. It SHOULD point within the code unit named in `code.function`.\n     */\n    CODE_LINENO: 'code.lineno',\n    /**\n     * HTTP request method.\n     */\n    HTTP_METHOD: 'http.method',\n    /**\n     * Full HTTP request URL in the form `scheme://host[:port]/path?query[#fragment]`. Usually the fragment is not transmitted over HTTP, but if it is known, it should be included nevertheless.\n     *\n     * Note: `http.url` MUST NOT contain credentials passed via URL in form of `https://username:password@www.example.com/`. In such case the attribute&#39;s value should be `https://www.example.com/`.\n     */\n    HTTP_URL: 'http.url',\n    /**\n     * The full request target as passed in a HTTP request line or equivalent.\n     */\n    HTTP_TARGET: 'http.target',\n    /**\n     * The value of the [HTTP host header](https://tools.ietf.org/html/rfc7230#section-5.4). An empty Host header should also be reported, see note.\n     *\n     * Note: When the header is present but empty the attribute SHOULD be set to the empty string. Note that this is a valid situation that is expected in certain cases, according the aforementioned [section of RFC 7230](https://tools.ietf.org/html/rfc7230#section-5.4). When the header is not set the attribute MUST NOT be set.\n     */\n    HTTP_HOST: 'http.host',\n    /**\n     * The URI scheme identifying the used protocol.\n     */\n    HTTP_SCHEME: 'http.scheme',\n    /**\n     * [HTTP response status code](https://tools.ietf.org/html/rfc7231#section-6).\n     */\n    HTTP_STATUS_CODE: 'http.status_code',\n    /**\n     * Kind of HTTP protocol used.\n     *\n     * Note: If `net.transport` is not specified, it can be assumed to be `IP.TCP` except if `http.flavor` is `QUIC`, in which case `IP.UDP` is assumed.\n     */\n    HTTP_FLAVOR: 'http.flavor',\n    /**\n     * Value of the [HTTP User-Agent](https://tools.ietf.org/html/rfc7231#section-5.5.3) header sent by the client.\n     */\n    HTTP_USER_AGENT: 'http.user_agent',\n    /**\n     * The size of the request payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the [Content-Length](https://tools.ietf.org/html/rfc7230#section-3.3.2) header. For requests using transport encoding, this should be the compressed size.\n     */\n    HTTP_REQUEST_CONTENT_LENGTH: 'http.request_content_length',\n    /**\n     * The size of the uncompressed request payload body after transport decoding. Not set if transport encoding not used.\n     */\n    HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED: 'http.request_content_length_uncompressed',\n    /**\n     * The size of the response payload body in bytes. This is the number of bytes transferred excluding headers and is often, but not always, present as the [Content-Length](https://tools.ietf.org/html/rfc7230#section-3.3.2) header. For requests using transport encoding, this should be the compressed size.\n     */\n    HTTP_RESPONSE_CONTENT_LENGTH: 'http.response_content_length',\n    /**\n     * The size of the uncompressed response payload body after transport decoding. Not set if transport encoding not used.\n     */\n    HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED: 'http.response_content_length_uncompressed',\n    /**\n     * The primary server name of the matched virtual host. This should be obtained via configuration. If no such configuration can be obtained, this attribute MUST NOT be set ( `net.host.name` should be used instead).\n     *\n     * Note: `http.url` is usually not readily available on the server side but would have to be assembled in a cumbersome and sometimes lossy process from other information (see e.g. open-telemetry/opentelemetry-python/pull/148). It is thus preferred to supply the raw data that is available.\n     */\n    HTTP_SERVER_NAME: 'http.server_name',\n    /**\n     * The matched route (path template).\n     */\n    HTTP_ROUTE: 'http.route',\n    /**\n    * The IP address of the original client behind all proxies, if known (e.g. from [X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)).\n    *\n    * Note: This is not necessarily the same as `net.peer.ip`, which would\n  identify the network-level peer, which may be a proxy.\n  \n  This attribute should be set when a source of information different\n  from the one used for `net.peer.ip`, is available even if that other\n  source just confirms the same value as `net.peer.ip`.\n  Rationale: For `net.peer.ip`, one typically does not know if it\n  comes from a proxy, reverse proxy, or the actual client. Setting\n  `http.client_ip` when it&#39;s the same as `net.peer.ip` means that\n  one is at least somewhat confident that the address is not that of\n  the closest proxy.\n    */\n    HTTP_CLIENT_IP: 'http.client_ip',\n    /**\n     * The keys in the `RequestItems` object field.\n     */\n    AWS_DYNAMODB_TABLE_NAMES: 'aws.dynamodb.table_names',\n    /**\n     * The JSON-serialized value of each item in the `ConsumedCapacity` response field.\n     */\n    AWS_DYNAMODB_CONSUMED_CAPACITY: 'aws.dynamodb.consumed_capacity',\n    /**\n     * The JSON-serialized value of the `ItemCollectionMetrics` response field.\n     */\n    AWS_DYNAMODB_ITEM_COLLECTION_METRICS: 'aws.dynamodb.item_collection_metrics',\n    /**\n     * The value of the `ProvisionedThroughput.ReadCapacityUnits` request parameter.\n     */\n    AWS_DYNAMODB_PROVISIONED_READ_CAPACITY: 'aws.dynamodb.provisioned_read_capacity',\n    /**\n     * The value of the `ProvisionedThroughput.WriteCapacityUnits` request parameter.\n     */\n    AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY: 'aws.dynamodb.provisioned_write_capacity',\n    /**\n     * The value of the `ConsistentRead` request parameter.\n     */\n    AWS_DYNAMODB_CONSISTENT_READ: 'aws.dynamodb.consistent_read',\n    /**\n     * The value of the `ProjectionExpression` request parameter.\n     */\n    AWS_DYNAMODB_PROJECTION: 'aws.dynamodb.projection',\n    /**\n     * The value of the `Limit` request parameter.\n     */\n    AWS_DYNAMODB_LIMIT: 'aws.dynamodb.limit',\n    /**\n     * The value of the `AttributesToGet` request parameter.\n     */\n    AWS_DYNAMODB_ATTRIBUTES_TO_GET: 'aws.dynamodb.attributes_to_get',\n    /**\n     * The value of the `IndexName` request parameter.\n     */\n    AWS_DYNAMODB_INDEX_NAME: 'aws.dynamodb.index_name',\n    /**\n     * The value of the `Select` request parameter.\n     */\n    AWS_DYNAMODB_SELECT: 'aws.dynamodb.select',\n    /**\n     * The JSON-serialized value of each item of the `GlobalSecondaryIndexes` request field.\n     */\n    AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES: 'aws.dynamodb.global_secondary_indexes',\n    /**\n     * The JSON-serialized value of each item of the `LocalSecondaryIndexes` request field.\n     */\n    AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES: 'aws.dynamodb.local_secondary_indexes',\n    /**\n     * The value of the `ExclusiveStartTableName` request parameter.\n     */\n    AWS_DYNAMODB_EXCLUSIVE_START_TABLE: 'aws.dynamodb.exclusive_start_table',\n    /**\n     * The the number of items in the `TableNames` response parameter.\n     */\n    AWS_DYNAMODB_TABLE_COUNT: 'aws.dynamodb.table_count',\n    /**\n     * The value of the `ScanIndexForward` request parameter.\n     */\n    AWS_DYNAMODB_SCAN_FORWARD: 'aws.dynamodb.scan_forward',\n    /**\n     * The value of the `Segment` request parameter.\n     */\n    AWS_DYNAMODB_SEGMENT: 'aws.dynamodb.segment',\n    /**\n     * The value of the `TotalSegments` request parameter.\n     */\n    AWS_DYNAMODB_TOTAL_SEGMENTS: 'aws.dynamodb.total_segments',\n    /**\n     * The value of the `Count` response parameter.\n     */\n    AWS_DYNAMODB_COUNT: 'aws.dynamodb.count',\n    /**\n     * The value of the `ScannedCount` response parameter.\n     */\n    AWS_DYNAMODB_SCANNED_COUNT: 'aws.dynamodb.scanned_count',\n    /**\n     * The JSON-serialized value of each item in the `AttributeDefinitions` request field.\n     */\n    AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS: 'aws.dynamodb.attribute_definitions',\n    /**\n     * The JSON-serialized value of each item in the the `GlobalSecondaryIndexUpdates` request field.\n     */\n    AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES: 'aws.dynamodb.global_secondary_index_updates',\n    /**\n     * A string identifying the messaging system.\n     */\n    MESSAGING_SYSTEM: 'messaging.system',\n    /**\n     * The message destination name. This might be equal to the span name but is required nevertheless.\n     */\n    MESSAGING_DESTINATION: 'messaging.destination',\n    /**\n     * The kind of message destination.\n     */\n    MESSAGING_DESTINATION_KIND: 'messaging.destination_kind',\n    /**\n     * A boolean that is true if the message destination is temporary.\n     */\n    MESSAGING_TEMP_DESTINATION: 'messaging.temp_destination',\n    /**\n     * The name of the transport protocol.\n     */\n    MESSAGING_PROTOCOL: 'messaging.protocol',\n    /**\n     * The version of the transport protocol.\n     */\n    MESSAGING_PROTOCOL_VERSION: 'messaging.protocol_version',\n    /**\n     * Connection string.\n     */\n    MESSAGING_URL: 'messaging.url',\n    /**\n     * A value used by the messaging system as an identifier for the message, represented as a string.\n     */\n    MESSAGING_MESSAGE_ID: 'messaging.message_id',\n    /**\n     * The [conversation ID](#conversations) identifying the conversation to which the message belongs, represented as a string. Sometimes called &#34;Correlation ID&#34;.\n     */\n    MESSAGING_CONVERSATION_ID: 'messaging.conversation_id',\n    /**\n     * The (uncompressed) size of the message payload in bytes. Also use this attribute if it is unknown whether the compressed or uncompressed payload size is reported.\n     */\n    MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES: 'messaging.message_payload_size_bytes',\n    /**\n     * The compressed size of the message payload in bytes.\n     */\n    MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES: 'messaging.message_payload_compressed_size_bytes',\n    /**\n     * A string identifying the kind of message consumption as defined in the [Operation names](#operation-names) section above. If the operation is &#34;send&#34;, this attribute MUST NOT be set, since the operation can be inferred from the span kind in that case.\n     */\n    MESSAGING_OPERATION: 'messaging.operation',\n    /**\n     * The identifier for the consumer receiving a message. For Kafka, set it to `{messaging.kafka.consumer_group} - {messaging.kafka.client_id}`, if both are present, or only `messaging.kafka.consumer_group`. For brokers, such as RabbitMQ and Artemis, set it to the `client_id` of the client consuming the message.\n     */\n    MESSAGING_CONSUMER_ID: 'messaging.consumer_id',\n    /**\n     * RabbitMQ message routing key.\n     */\n    MESSAGING_RABBITMQ_ROUTING_KEY: 'messaging.rabbitmq.routing_key',\n    /**\n     * Message keys in Kafka are used for grouping alike messages to ensure they&#39;re processed on the same partition. They differ from `messaging.message_id` in that they&#39;re not unique. If the key is `null`, the attribute MUST NOT be set.\n     *\n     * Note: If the key type is not string, it&#39;s string representation has to be supplied for the attribute. If the key has no unambiguous, canonical string form, don&#39;t include its value.\n     */\n    MESSAGING_KAFKA_MESSAGE_KEY: 'messaging.kafka.message_key',\n    /**\n     * Name of the Kafka Consumer Group that is handling the message. Only applies to consumers, not producers.\n     */\n    MESSAGING_KAFKA_CONSUMER_GROUP: 'messaging.kafka.consumer_group',\n    /**\n     * Client Id for the Consumer or Producer that is handling the message.\n     */\n    MESSAGING_KAFKA_CLIENT_ID: 'messaging.kafka.client_id',\n    /**\n     * Partition the message is sent to.\n     */\n    MESSAGING_KAFKA_PARTITION: 'messaging.kafka.partition',\n    /**\n     * A boolean that is true if the message is a tombstone.\n     */\n    MESSAGING_KAFKA_TOMBSTONE: 'messaging.kafka.tombstone',\n    /**\n     * A string identifying the remoting system.\n     */\n    RPC_SYSTEM: 'rpc.system',\n    /**\n     * The full (logical) name of the service being called, including its package name, if applicable.\n     *\n     * Note: This is the logical name of the service from the RPC interface perspective, which can be different from the name of any implementing class. The `code.namespace` attribute may be used to store the latter (despite the attribute name, it may include a class name; e.g., class with method actually executing the call on the server side, RPC client stub class on the client side).\n     */\n    RPC_SERVICE: 'rpc.service',\n    /**\n     * The name of the (logical) method being called, must be equal to the $method part in the span name.\n     *\n     * Note: This is the logical name of the method from the RPC interface perspective, which can be different from the name of any implementing method/function. The `code.function` attribute may be used to store the latter (e.g., method actually executing the call on the server side, RPC client stub method on the client side).\n     */\n    RPC_METHOD: 'rpc.method',\n    /**\n     * The [numeric status code](https://github.com/grpc/grpc/blob/v1.33.2/doc/statuscodes.md) of the gRPC request.\n     */\n    RPC_GRPC_STATUS_CODE: 'rpc.grpc.status_code',\n    /**\n     * Protocol version as in `jsonrpc` property of request/response. Since JSON-RPC 1.0 does not specify this, the value can be omitted.\n     */\n    RPC_JSONRPC_VERSION: 'rpc.jsonrpc.version',\n    /**\n     * `id` property of request or response. Since protocol allows id to be int, string, `null` or missing (for notifications), value is expected to be cast to string for simplicity. Use empty string in case of `null` value. Omit entirely if this is a notification.\n     */\n    RPC_JSONRPC_REQUEST_ID: 'rpc.jsonrpc.request_id',\n    /**\n     * `error.code` property of response if it is an error response.\n     */\n    RPC_JSONRPC_ERROR_CODE: 'rpc.jsonrpc.error_code',\n    /**\n     * `error.message` property of response if it is an error response.\n     */\n    RPC_JSONRPC_ERROR_MESSAGE: 'rpc.jsonrpc.error_message',\n    /**\n     * Whether this is a received or sent message.\n     */\n    MESSAGE_TYPE: 'message.type',\n    /**\n     * MUST be calculated as two different counters starting from `1` one for sent messages and one for received message.\n     *\n     * Note: This way we guarantee that the values will be consistent between different implementations.\n     */\n    MESSAGE_ID: 'message.id',\n    /**\n     * Compressed size of the message in bytes.\n     */\n    MESSAGE_COMPRESSED_SIZE: 'message.compressed_size',\n    /**\n     * Uncompressed size of the message in bytes.\n     */\n    MESSAGE_UNCOMPRESSED_SIZE: 'message.uncompressed_size',\n};\nexport var DbSystemValues = {\n    /** Some other SQL database. Fallback only. See notes. */\n    OTHER_SQL: 'other_sql',\n    /** Microsoft SQL Server. */\n    MSSQL: 'mssql',\n    /** MySQL. */\n    MYSQL: 'mysql',\n    /** Oracle Database. */\n    ORACLE: 'oracle',\n    /** IBM Db2. */\n    DB2: 'db2',\n    /** PostgreSQL. */\n    POSTGRESQL: 'postgresql',\n    /** Amazon Redshift. */\n    REDSHIFT: 'redshift',\n    /** Apache Hive. */\n    HIVE: 'hive',\n    /** Cloudscape. */\n    CLOUDSCAPE: 'cloudscape',\n    /** HyperSQL DataBase. */\n    HSQLDB: 'hsqldb',\n    /** Progress Database. */\n    PROGRESS: 'progress',\n    /** SAP MaxDB. */\n    MAXDB: 'maxdb',\n    /** SAP HANA. */\n    HANADB: 'hanadb',\n    /** Ingres. */\n    INGRES: 'ingres',\n    /** FirstSQL. */\n    FIRSTSQL: 'firstsql',\n    /** EnterpriseDB. */\n    EDB: 'edb',\n    /** InterSystems Caché. */\n    CACHE: 'cache',\n    /** Adabas (Adaptable Database System). */\n    ADABAS: 'adabas',\n    /** Firebird. */\n    FIREBIRD: 'firebird',\n    /** Apache Derby. */\n    DERBY: 'derby',\n    /** FileMaker. */\n    FILEMAKER: 'filemaker',\n    /** Informix. */\n    INFORMIX: 'informix',\n    /** InstantDB. */\n    INSTANTDB: 'instantdb',\n    /** InterBase. */\n    INTERBASE: 'interbase',\n    /** MariaDB. */\n    MARIADB: 'mariadb',\n    /** Netezza. */\n    NETEZZA: 'netezza',\n    /** Pervasive PSQL. */\n    PERVASIVE: 'pervasive',\n    /** PointBase. */\n    POINTBASE: 'pointbase',\n    /** SQLite. */\n    SQLITE: 'sqlite',\n    /** Sybase. */\n    SYBASE: 'sybase',\n    /** Teradata. */\n    TERADATA: 'teradata',\n    /** Vertica. */\n    VERTICA: 'vertica',\n    /** H2. */\n    H2: 'h2',\n    /** ColdFusion IMQ. */\n    COLDFUSION: 'coldfusion',\n    /** Apache Cassandra. */\n    CASSANDRA: 'cassandra',\n    /** Apache HBase. */\n    HBASE: 'hbase',\n    /** MongoDB. */\n    MONGODB: 'mongodb',\n    /** Redis. */\n    REDIS: 'redis',\n    /** Couchbase. */\n    COUCHBASE: 'couchbase',\n    /** CouchDB. */\n    COUCHDB: 'couchdb',\n    /** Microsoft Azure Cosmos DB. */\n    COSMOSDB: 'cosmosdb',\n    /** Amazon DynamoDB. */\n    DYNAMODB: 'dynamodb',\n    /** Neo4j. */\n    NEO4J: 'neo4j',\n    /** Apache Geode. */\n    GEODE: 'geode',\n    /** Elasticsearch. */\n    ELASTICSEARCH: 'elasticsearch',\n    /** Memcached. */\n    MEMCACHED: 'memcached',\n    /** CockroachDB. */\n    COCKROACHDB: 'cockroachdb',\n};\nexport var DbCassandraConsistencyLevelValues = {\n    /** all. */\n    ALL: 'all',\n    /** each_quorum. */\n    EACH_QUORUM: 'each_quorum',\n    /** quorum. */\n    QUORUM: 'quorum',\n    /** local_quorum. */\n    LOCAL_QUORUM: 'local_quorum',\n    /** one. */\n    ONE: 'one',\n    /** two. */\n    TWO: 'two',\n    /** three. */\n    THREE: 'three',\n    /** local_one. */\n    LOCAL_ONE: 'local_one',\n    /** any. */\n    ANY: 'any',\n    /** serial. */\n    SERIAL: 'serial',\n    /** local_serial. */\n    LOCAL_SERIAL: 'local_serial',\n};\nexport var FaasTriggerValues = {\n    /** A response to some data source operation such as a database or filesystem read/write. */\n    DATASOURCE: 'datasource',\n    /** To provide an answer to an inbound HTTP request. */\n    HTTP: 'http',\n    /** A function is set to be executed when messages are sent to a messaging system. */\n    PUBSUB: 'pubsub',\n    /** A function is scheduled to be executed regularly. */\n    TIMER: 'timer',\n    /** If none of the others apply. */\n    OTHER: 'other',\n};\nexport var FaasDocumentOperationValues = {\n    /** When a new object is created. */\n    INSERT: 'insert',\n    /** When an object is modified. */\n    EDIT: 'edit',\n    /** When an object is deleted. */\n    DELETE: 'delete',\n};\nexport var FaasInvokedProviderValues = {\n    /** Alibaba Cloud. */\n    ALIBABA_CLOUD: 'alibaba_cloud',\n    /** Amazon Web Services. */\n    AWS: 'aws',\n    /** Microsoft Azure. */\n    AZURE: 'azure',\n    /** Google Cloud Platform. */\n    GCP: 'gcp',\n};\nexport var NetTransportValues = {\n    /** ip_tcp. */\n    IP_TCP: 'ip_tcp',\n    /** ip_udp. */\n    IP_UDP: 'ip_udp',\n    /** Another IP-based protocol. */\n    IP: 'ip',\n    /** Unix Domain socket. See below. */\n    UNIX: 'unix',\n    /** Named or anonymous pipe. See note below. */\n    PIPE: 'pipe',\n    /** In-process communication. */\n    INPROC: 'inproc',\n    /** Something else (non IP-based). */\n    OTHER: 'other',\n};\nexport var NetHostConnectionTypeValues = {\n    /** wifi. */\n    WIFI: 'wifi',\n    /** wired. */\n    WIRED: 'wired',\n    /** cell. */\n    CELL: 'cell',\n    /** unavailable. */\n    UNAVAILABLE: 'unavailable',\n    /** unknown. */\n    UNKNOWN: 'unknown',\n};\nexport var NetHostConnectionSubtypeValues = {\n    /** GPRS. */\n    GPRS: 'gprs',\n    /** EDGE. */\n    EDGE: 'edge',\n    /** UMTS. */\n    UMTS: 'umts',\n    /** CDMA. */\n    CDMA: 'cdma',\n    /** EVDO Rel. 0. */\n    EVDO_0: 'evdo_0',\n    /** EVDO Rev. A. */\n    EVDO_A: 'evdo_a',\n    /** CDMA2000 1XRTT. */\n    CDMA2000_1XRTT: 'cdma2000_1xrtt',\n    /** HSDPA. */\n    HSDPA: 'hsdpa',\n    /** HSUPA. */\n    HSUPA: 'hsupa',\n    /** HSPA. */\n    HSPA: 'hspa',\n    /** IDEN. */\n    IDEN: 'iden',\n    /** EVDO Rev. B. */\n    EVDO_B: 'evdo_b',\n    /** LTE. */\n    LTE: 'lte',\n    /** EHRPD. */\n    EHRPD: 'ehrpd',\n    /** HSPAP. */\n    HSPAP: 'hspap',\n    /** GSM. */\n    GSM: 'gsm',\n    /** TD-SCDMA. */\n    TD_SCDMA: 'td_scdma',\n    /** IWLAN. */\n    IWLAN: 'iwlan',\n    /** 5G NR (New Radio). */\n    NR: 'nr',\n    /** 5G NRNSA (New Radio Non-Standalone). */\n    NRNSA: 'nrnsa',\n    /** LTE CA. */\n    LTE_CA: 'lte_ca',\n};\nexport var HttpFlavorValues = {\n    /** HTTP 1.0. */\n    HTTP_1_0: '1.0',\n    /** HTTP 1.1. */\n    HTTP_1_1: '1.1',\n    /** HTTP 2. */\n    HTTP_2_0: '2.0',\n    /** SPDY protocol. */\n    SPDY: 'SPDY',\n    /** QUIC protocol. */\n    QUIC: 'QUIC',\n};\nexport var MessagingDestinationKindValues = {\n    /** A message sent to a queue. */\n    QUEUE: 'queue',\n    /** A message sent to a topic. */\n    TOPIC: 'topic',\n};\nexport var MessagingOperationValues = {\n    /** receive. */\n    RECEIVE: 'receive',\n    /** process. */\n    PROCESS: 'process',\n};\nexport var RpcGrpcStatusCodeValues = {\n    /** OK. */\n    OK: 0,\n    /** CANCELLED. */\n    CANCELLED: 1,\n    /** UNKNOWN. */\n    UNKNOWN: 2,\n    /** INVALID_ARGUMENT. */\n    INVALID_ARGUMENT: 3,\n    /** DEADLINE_EXCEEDED. */\n    DEADLINE_EXCEEDED: 4,\n    /** NOT_FOUND. */\n    NOT_FOUND: 5,\n    /** ALREADY_EXISTS. */\n    ALREADY_EXISTS: 6,\n    /** PERMISSION_DENIED. */\n    PERMISSION_DENIED: 7,\n    /** RESOURCE_EXHAUSTED. */\n    RESOURCE_EXHAUSTED: 8,\n    /** FAILED_PRECONDITION. */\n    FAILED_PRECONDITION: 9,\n    /** ABORTED. */\n    ABORTED: 10,\n    /** OUT_OF_RANGE. */\n    OUT_OF_RANGE: 11,\n    /** UNIMPLEMENTED. */\n    UNIMPLEMENTED: 12,\n    /** INTERNAL. */\n    INTERNAL: 13,\n    /** UNAVAILABLE. */\n    UNAVAILABLE: 14,\n    /** DATA_LOSS. */\n    DATA_LOSS: 15,\n    /** UNAUTHENTICATED. */\n    UNAUTHENTICATED: 16,\n};\nexport var MessageTypeValues = {\n    /** sent. */\n    SENT: 'SENT',\n    /** received. */\n    RECEIVED: 'RECEIVED',\n};\n//# sourceMappingURL=SemanticAttributes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction once(emitter, name, { signal } = {}) {\n    return new Promise((resolve, reject) => {\n        function cleanup() {\n            signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n            emitter.removeListener(name, onEvent);\n            emitter.removeListener('error', onError);\n        }\n        function onEvent(...args) {\n            cleanup();\n            resolve(args);\n        }\n        function onError(err) {\n            cleanup();\n            reject(err);\n        }\n        signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n        emitter.on(name, onEvent);\n        emitter.on('error', onError);\n    });\n}\nexports.default = once;\n//# sourceMappingURL=index.js.map","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.oneDataSystemClientFactory = void 0;\n/**\n * Configures 1DS properly and returns the core client object\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n * @returns The AI core object\n */\nconst getAICore = async (key, vscodeAPI, xhrOverride) => {\n    const oneDs = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"@microsoft/1ds-core-js\")));\n    const postPlugin = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"@microsoft/1ds-post-js\")));\n    const appInsightsCore = new oneDs.AppInsightsCore();\n    const collectorChannelPlugin = new postPlugin.PostChannel();\n    // Configure the app insights core to send to collector++ and disable logging of debug info\n    const coreConfig = {\n        instrumentationKey: key,\n        endpointUrl: \"https://mobile.events.data.microsoft.com/OneCollector/1.0\",\n        loggingLevelTelemetry: 0,\n        loggingLevelConsole: 0,\n        disableCookiesUsage: true,\n        disableDbgExt: true,\n        disableInstrumentationKeyValidation: true,\n        channels: [[\n                collectorChannelPlugin\n            ]]\n    };\n    if (xhrOverride) {\n        coreConfig.extensionConfig = {};\n        // Configure the channel to use a XHR Request override since it's not available in node\n        const channelConfig = {\n            alwaysUseXhrOverride: true,\n            httpXHROverride: xhrOverride\n        };\n        coreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n    }\n    const config = vscodeAPI.workspace.getConfiguration(\"telemetry\");\n    const internalTesting = config.get(\"internalTesting\");\n    appInsightsCore.initialize(coreConfig, []);\n    appInsightsCore.addTelemetryInitializer((envelope) => {\n        // Only add this flag when `telemetry.internalTesting` is enabled\n        if (!internalTesting) {\n            return;\n        }\n        envelope[\"ext\"] = envelope[\"ext\"] ?? {};\n        envelope[\"ext\"][\"utc\"] = envelope[\"ext\"][\"utc\"] ?? {};\n        // Sets it to be internal only based on Windows UTC flagging\n        envelope[\"ext\"][\"utc\"][\"flags\"] = 0x0000811ECD;\n    });\n    return appInsightsCore;\n};\n/**\n * Configures and creates a telemetry client using the 1DS sdk\n * @param key The ingestion key\n * @param xhrOverride An optional override to use for requests instead of the XHTMLRequest object. Useful for node environments\n */\nconst oneDataSystemClientFactory = async (key, vscodeAPI, xhrOverride) => {\n    let appInsightsCore = await getAICore(key, vscodeAPI, xhrOverride);\n    const flushOneDS = async () => {\n        try {\n            const flushPromise = new Promise((resolve, reject) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.flush(true, (completedFlush) => {\n                    if (!completedFlush) {\n                        reject(\"Failed to flush app 1DS!\");\n                        return;\n                    }\n                });\n            });\n            return flushPromise;\n        }\n        catch (e) {\n            throw new Error(\"Failed to flush 1DS!\\n\" + e.message);\n        }\n    };\n    // Shape the app insights core from 1DS into a standard format\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsCore?.track({\n                    name: eventName,\n                    baseData: { name: eventName, properties: data?.properties, measurements: data?.measurements }\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: flushOneDS,\n        dispose: async () => {\n            await flushOneDS();\n            const disposePromise = new Promise((resolve) => {\n                if (!appInsightsCore) {\n                    resolve();\n                    return;\n                }\n                appInsightsCore.unload(true, () => {\n                    resolve();\n                    appInsightsCore = undefined;\n                    return;\n                });\n            });\n            return disposePromise;\n        }\n    };\n    return telemetryClient;\n};\nexports.oneDataSystemClientFactory = oneDataSystemClientFactory;\n//# sourceMappingURL=1dsClientFactory.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTelemetryReporter = void 0;\nclass BaseTelemetryReporter {\n    constructor(telemetrySender, vscodeAPI, initializationOptions) {\n        this.telemetrySender = telemetrySender;\n        this.vscodeAPI = vscodeAPI;\n        this.userOptIn = false;\n        this.errorOptIn = false;\n        this.disposables = [];\n        this._onDidChangeTelemetryLevel = new this.vscodeAPI.EventEmitter();\n        this.onDidChangeTelemetryLevel = this._onDidChangeTelemetryLevel.event;\n        this.telemetryLogger = this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender, initializationOptions);\n        // Keep track of the user's opt-in status\n        this.updateUserOptIn();\n        this.telemetryLogger.onDidChangeEnableStates(() => {\n            this.updateUserOptIn();\n        });\n    }\n    /**\n     * Updates the user's telemetry opt-in status\n     */\n    updateUserOptIn() {\n        this.errorOptIn = this.telemetryLogger.isErrorsEnabled;\n        this.userOptIn = this.telemetryLogger.isUsageEnabled;\n        // The sender is lazy loaded so if telemetry is off it's not loaded in\n        if (this.telemetryLogger.isErrorsEnabled || this.telemetryLogger.isUsageEnabled) {\n            this.telemetrySender.instantiateSender();\n        }\n        this._onDidChangeTelemetryLevel.fire(this.telemetryLevel);\n    }\n    get telemetryLevel() {\n        if (this.errorOptIn && this.userOptIn) {\n            return \"all\";\n        }\n        else if (this.errorOptIn) {\n            return \"error\";\n        }\n        else {\n            return \"off\";\n        }\n    }\n    /**\n     * Internal function which logs telemetry events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryEvent(eventName, properties, measurements, dangerous) {\n        // If it's dangerous we skip going through the logger as the logger checks opt-in status, etc.\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logUsage(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends a telemetry event.\n     * Properties are sanitized on best-effort basis to remove sensitive data prior to sending.\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * Sends a raw (unsanitized) telemetry event with the given properties and measurements.\n     * NOTE: This will not be logged to the output channel due to API limitations.\n     * @param eventName The name of the event\n     * @param properties The set of properties to add to the event in the form of a string key value pair\n     * @param measurements The set of measurements to add to the event in the form of a string key  number value pair\n     */\n    sendRawTelemetryEvent(eventName, properties, measurements) {\n        const modifiedProperties = { ...properties };\n        for (const propertyKey of Object.keys(modifiedProperties ?? {})) {\n            const propertyValue = modifiedProperties[propertyKey];\n            if (typeof propertyKey === \"string\" && propertyValue !== undefined) {\n                // Trusted values are not sanitized, which is what we want for raw telemetry\n                modifiedProperties[propertyKey] = new this.vscodeAPI.TelemetryTrustedValue(typeof propertyValue === 'string' ? propertyValue : propertyValue.value);\n            }\n        }\n        this.sendTelemetryEvent(eventName, modifiedProperties, measurements);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures, defaults to true\n     */\n    sendDangerousTelemetryEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Internal function which logs telemetry error events and takes extra options.\n     * @param eventName The name of the event\n     * @param properties The properties of the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to sanitize to the properties and measures\n     * @param dangerous Whether or not to ignore telemetry level\n     */\n    internalSendTelemetryErrorEvent(eventName, properties, measurements, dangerous) {\n        if (dangerous) {\n            this.telemetrySender.sendEventData(eventName, { properties, measurements });\n        }\n        else {\n            this.telemetryLogger.logError(eventName, { properties, measurements });\n        }\n    }\n    /**\n     * Given an event name, some properties, and measurements sends an error event\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     */\n    sendTelemetryErrorEvent(eventName, properties, measurements) {\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, false);\n    }\n    /**\n     * **DANGEROUS** Given an event name, some properties, and measurements sends a telemetry error event without checking telemetry setting\n     * Do not use unless in a controlled environment i.e. sending telmetry from a CI pipeline or testing during development\n     * @param eventName The name of the event\n     * @param properties The properties to send with the event\n     * @param measurements The measurements (numeric values) to send with the event\n     * @param sanitize Whether or not to run the properties and measures through sanitiziation, defaults to true\n     */\n    sendDangerousTelemetryErrorEvent(eventName, properties, measurements) {\n        // Since telemetry is probably off when sending dangerously, we must start the sender\n        this.telemetrySender.instantiateSender();\n        this.internalSendTelemetryErrorEvent(eventName, properties, measurements, true);\n    }\n    /**\n     * Disposes of the telemetry reporter\n     */\n    async dispose() {\n        await this.telemetrySender.dispose();\n        this.telemetryLogger.dispose();\n        return Promise.all(this.disposables.map(d => d.dispose()));\n    }\n}\nexports.BaseTelemetryReporter = BaseTelemetryReporter;\n//# sourceMappingURL=baseTelemetryReporter.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTelemetrySender = void 0;\nvar InstantiationStatus;\n(function (InstantiationStatus) {\n    InstantiationStatus[InstantiationStatus[\"NOT_INSTANTIATED\"] = 0] = \"NOT_INSTANTIATED\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATING\"] = 1] = \"INSTANTIATING\";\n    InstantiationStatus[InstantiationStatus[\"INSTANTIATED\"] = 2] = \"INSTANTIATED\";\n})(InstantiationStatus || (InstantiationStatus = {}));\nclass BaseTelemetrySender {\n    constructor(key, clientFactory) {\n        // Whether or not the client has been instantiated\n        this._instantiationStatus = InstantiationStatus.NOT_INSTANTIATED;\n        // Queues used to store events until the sender is ready\n        this._eventQueue = [];\n        this._exceptionQueue = [];\n        this._clientFactory = clientFactory;\n        this._key = key;\n    }\n    /**\n     * Sends the event to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param eventName The name of the event to log\n     * @param data The data contanied in the event\n     */\n    sendEventData(eventName, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._eventQueue.push({ eventName, data });\n            }\n            return;\n        }\n        this._telemetryClient.logEvent(eventName, data);\n    }\n    /**\n     * Sends an exception to the passed in telemetry client\n     * The sender does no telemetry level checks as those are done by the reporter.\n     * @param exception The exception to collect\n     * @param data Data associated with the exception\n     */\n    sendErrorData(exception, data) {\n        if (!this._telemetryClient) {\n            if (this._instantiationStatus !== InstantiationStatus.INSTANTIATED) {\n                this._exceptionQueue.push({ exception, data });\n            }\n            return;\n        }\n        const errorData = { stack: exception.stack, message: exception.message, name: exception.name };\n        if (data) {\n            data.properties = { ...data.properties, ...errorData };\n        }\n        else {\n            data = { properties: errorData };\n        }\n        this._telemetryClient.logEvent(\"unhandlederror\", data);\n    }\n    /**\n     * Flushes the buffered telemetry data\n     */\n    async flush() {\n        return this._telemetryClient?.flush();\n    }\n    async dispose() {\n        await this.flush();\n        if (this._telemetryClient) {\n            await this._telemetryClient.dispose();\n            this._telemetryClient = undefined;\n        }\n        return;\n    }\n    /**\n     * Flushes the queued events that existed before the client was instantiated\n     */\n    _flushQueues() {\n        this._eventQueue.forEach(({ eventName, data }) => this.sendEventData(eventName, data));\n        this._eventQueue = [];\n        this._exceptionQueue.forEach(({ exception, data }) => this.sendErrorData(exception, data));\n        this._exceptionQueue = [];\n    }\n    /**\n     * Instantiates the telemetry client to make the sender \"active\"\n     */\n    instantiateSender() {\n        if (this._instantiationStatus !== InstantiationStatus.NOT_INSTANTIATED) {\n            return;\n        }\n        this._instantiationStatus = InstantiationStatus.INSTANTIATING;\n        // Call the client factory to get the client and then let it know it's instatntiated\n        this._clientFactory(this._key).then(client => {\n            this._telemetryClient = client;\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n            this._flushQueues();\n        }).catch(err => {\n            console.error(err);\n            // If it failed to instntiate, then we don't want to try again.\n            // So we mark it as instantiated. See #94\n            this._instantiationStatus = InstantiationStatus.INSTANTIATED;\n        });\n    }\n}\nexports.BaseTelemetrySender = BaseTelemetrySender;\n//# sourceMappingURL=baseTelemetrySender.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TelemetryUtil = void 0;\nclass TelemetryUtil {\n    static applyReplacements(data, replacementOptions) {\n        for (const key of Object.keys(data)) {\n            for (const option of replacementOptions) {\n                if (option.lookup.test(key)) {\n                    if (option.replacementString !== undefined) {\n                        data[key] = option.replacementString;\n                    }\n                    else {\n                        delete data[key];\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Given a key checks if it is a valid 1DS key\n     * @param key The key to check if it's a valid 1DS key\n     */\n    static shouldUseOneDataSystemSDK(key) {\n        // Simple to check to ensure the key is the right length and the dashes are in the right spot\n        return (key.length === 74 &&\n            key[32] === \"-\" &&\n            key[41] === \"-\" &&\n            key[46] === \"-\" &&\n            key[51] === \"-\" &&\n            key[56] === \"-\" &&\n            key[69] === \"-\");\n    }\n    // This also includes the common properties which core mixes in\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.nodeArch\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.telemetryclientversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    static getAdditionalCommonProperties(osShim) {\n        return {\n            \"common.os\": osShim.platform,\n            \"common.nodeArch\": osShim.architecture,\n            \"common.platformversion\": (osShim.release || \"\").replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, \"$1$2$3\"),\n            // Do not change this string as it gets found and replaced upon packaging\n            \"common.telemetryclientversion\": \"0.8.4\"\n        };\n    }\n    // Get singleton instance of TelemetryUtil\n    static getInstance() {\n        if (!TelemetryUtil._instance) {\n            TelemetryUtil._instance = new TelemetryUtil();\n        }\n        return TelemetryUtil._instance;\n    }\n}\nexports.TelemetryUtil = TelemetryUtil;\n//# sourceMappingURL=util.js.map","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst os = __importStar(require(\"os\"));\nconst vscode = __importStar(require(\"vscode\"));\nconst https = __importStar(require(\"https\"));\nconst baseTelemetryReporter_1 = require(\"../common/baseTelemetryReporter\");\nconst baseTelemetrySender_1 = require(\"../common/baseTelemetrySender\");\nconst util_1 = require(\"../common/util\");\nconst _1dsClientFactory_1 = require(\"../common/1dsClientFactory\");\n/**\n * A factory function which creates a telemetry client to be used by an sender to send telemetry in a node application.\n *\n * @param key The app insights key\n * @param replacementOptions Optional list of {@link ReplacementOption replacements} to apply to the telemetry client. This allows\n * the sender to filter out any sensitive or unnecessary information from the telemetry server.\n *\n * @returns A promise which resolves to the telemetry client or rejects upon error\n */\nconst appInsightsClientFactory = async (key, replacementOptions) => {\n    let appInsightsClient;\n    try {\n        process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"] = \"1\";\n        const appInsights = await Promise.resolve().then(() => __importStar(require(/* webpackMode: \"eager\" */ \"applicationinsights\")));\n        //check if another instance is already initialized\n        if (appInsights.defaultClient) {\n            appInsightsClient = new appInsights.TelemetryClient(key);\n            // no other way to enable offline mode\n            appInsightsClient.channel.setUseDiskRetryCaching(true);\n        }\n        else {\n            appInsights.setup(key)\n                .setAutoCollectRequests(false)\n                .setAutoCollectPerformance(false)\n                .setAutoCollectExceptions(false)\n                .setAutoCollectDependencies(false)\n                .setAutoDependencyCorrelation(false)\n                .setAutoCollectConsole(false)\n                .setAutoCollectHeartbeat(false)\n                .setAutoCollectIncomingRequestAzureFunctions(false)\n                .setUseDiskRetryCaching(true)\n                .start();\n            appInsightsClient = appInsights.defaultClient;\n        }\n        if (vscode && vscode.env) {\n            appInsightsClient.context.tags[appInsightsClient.context.keys.userId] = vscode.env.machineId;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.cloudRole] = vscode.env.appName;\n            appInsightsClient.context.tags[appInsightsClient.context.keys.cloudRoleInstance] = vscode.env.appName;\n        }\n    }\n    catch (e) {\n        return Promise.reject(\"Failed to initialize app insights!\\n\" + e.message);\n    }\n    if (replacementOptions?.length) {\n        addReplacementOptions(appInsightsClient, replacementOptions);\n    }\n    // Sets the appinsights client into a standardized form\n    const telemetryClient = {\n        logEvent: (eventName, data) => {\n            try {\n                appInsightsClient?.trackEvent({\n                    name: eventName,\n                    properties: data?.properties,\n                    measurements: data?.measurements\n                });\n            }\n            catch (e) {\n                throw new Error(\"Failed to log event to app insights!\\n\" + e.message);\n            }\n        },\n        flush: async () => {\n            try {\n                appInsightsClient?.flush();\n            }\n            catch (e) {\n                throw new Error(\"Failed to flush app insights!\\n\" + e.message);\n            }\n        },\n        dispose: async () => {\n            appInsightsClient?.flush();\n            appInsightsClient = undefined;\n        }\n    };\n    return telemetryClient;\n};\n/**\n * Adds replacement options to this {@link TelemetryClient}.\n *\n * If any replacement options are specified, this function will search through any event about to be\n * sent to the telemetry server and replace any matches with the specified replacement string. Both\n * the envelope and the base data will be searched.\n *\n * @param appInsightsClient The {@link TelemetryClient} to add the filters to.\n * @param replacementOptions The replacement options to add.\n */\nfunction addReplacementOptions(appInsightsClient, replacementOptions) {\n    appInsightsClient.addTelemetryProcessor((event) => {\n        if (Array.isArray(event.tags)) {\n            event.tags.forEach(tag => util_1.TelemetryUtil.applyReplacements(tag, replacementOptions));\n        }\n        else if (event.tags) {\n            util_1.TelemetryUtil.applyReplacements(event.tags, replacementOptions);\n        }\n        if (event.data.baseData) {\n            util_1.TelemetryUtil.applyReplacements(event.data.baseData, replacementOptions);\n        }\n        return true;\n    });\n}\n/**\n * Create a replacement for the XHTMLRequest object utilizing nodes HTTP module.\n * @returns A XHR override object used to override the XHTMLRequest object in the 1DS SDK\n */\nfunction getXHROverride() {\n    // Override the way events get sent since node doesn't have XHTMLRequest\n    const customHttpXHROverride = {\n        sendPOST: (payload, oncomplete) => {\n            const options = {\n                method: \"POST\",\n                headers: {\n                    ...payload.headers,\n                    \"Content-Type\": \"application/json\",\n                    \"Content-Length\": Buffer.byteLength(payload.data)\n                }\n            };\n            try {\n                const req = https.request(payload.urlString, options, res => {\n                    res.on(\"data\", function (responseData) {\n                        oncomplete(res.statusCode ?? 200, res.headers, responseData.toString());\n                    });\n                    // On response with error send status of 0 and a blank response to oncomplete so we can retry events\n                    res.on(\"error\", function () {\n                        oncomplete(0, {});\n                    });\n                });\n                req.write(payload.data, (err) => {\n                    if (err) {\n                        oncomplete(0, {});\n                    }\n                });\n                req.end();\n            }\n            catch {\n                // If it errors out, send status of 0 and a blank response to oncomplete so we can retry events\n                oncomplete(0, {});\n            }\n        }\n    };\n    return customHttpXHROverride;\n}\nclass TelemetryReporter extends baseTelemetryReporter_1.BaseTelemetryReporter {\n    constructor(key, replacementOptions) {\n        let clientFactory = (key) => appInsightsClientFactory(key, replacementOptions);\n        // If key is usable by 1DS use the 1DS SDk\n        if (util_1.TelemetryUtil.shouldUseOneDataSystemSDK(key)) {\n            clientFactory = (key) => (0, _1dsClientFactory_1.oneDataSystemClientFactory)(key, vscode, getXHROverride());\n        }\n        const osShim = {\n            release: os.release(),\n            platform: os.platform(),\n            architecture: os.arch(),\n        };\n        const sender = new baseTelemetrySender_1.BaseTelemetrySender(key, clientFactory);\n        if (key && key.indexOf(\"AIF-\") === 0) {\n            throw new Error(\"AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions\");\n        }\n        super(sender, vscode, { additionalCommonProperties: util_1.TelemetryUtil.getAdditionalCommonProperties(osShim) });\n    }\n}\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst events_1 = require(\"events\");\nconst debug_1 = __importDefault(require(\"debug\"));\nconst promisify_1 = __importDefault(require(\"./promisify\"));\nconst debug = debug_1.default('agent-base');\nfunction isAgent(v) {\n    return Boolean(v) && typeof v.addRequest === 'function';\n}\nfunction isSecureEndpoint() {\n    const { stack } = new Error();\n    if (typeof stack !== 'string')\n        return false;\n    return stack.split('\\n').some(l => l.indexOf('(https.js:') !== -1 || l.indexOf('node:https:') !== -1);\n}\nfunction createAgent(callback, opts) {\n    return new createAgent.Agent(callback, opts);\n}\n(function (createAgent) {\n    /**\n     * Base `http.Agent` implementation.\n     * No pooling/keep-alive is implemented by default.\n     *\n     * @param {Function} callback\n     * @api public\n     */\n    class Agent extends events_1.EventEmitter {\n        constructor(callback, _opts) {\n            super();\n            let opts = _opts;\n            if (typeof callback === 'function') {\n                this.callback = callback;\n            }\n            else if (callback) {\n                opts = callback;\n            }\n            // Timeout for the socket to be returned from the callback\n            this.timeout = null;\n            if (opts && typeof opts.timeout === 'number') {\n                this.timeout = opts.timeout;\n            }\n            // These aren't actually used by `agent-base`, but are required\n            // for the TypeScript definition files in `@types/node` :/\n            this.maxFreeSockets = 1;\n            this.maxSockets = 1;\n            this.maxTotalSockets = Infinity;\n            this.sockets = {};\n            this.freeSockets = {};\n            this.requests = {};\n            this.options = {};\n        }\n        get defaultPort() {\n            if (typeof this.explicitDefaultPort === 'number') {\n                return this.explicitDefaultPort;\n            }\n            return isSecureEndpoint() ? 443 : 80;\n        }\n        set defaultPort(v) {\n            this.explicitDefaultPort = v;\n        }\n        get protocol() {\n            if (typeof this.explicitProtocol === 'string') {\n                return this.explicitProtocol;\n            }\n            return isSecureEndpoint() ? 'https:' : 'http:';\n        }\n        set protocol(v) {\n            this.explicitProtocol = v;\n        }\n        callback(req, opts, fn) {\n            throw new Error('\"agent-base\" has no default implementation, you must subclass and override `callback()`');\n        }\n        /**\n         * Called by node-core's \"_http_client.js\" module when creating\n         * a new HTTP request with this Agent instance.\n         *\n         * @api public\n         */\n        addRequest(req, _opts) {\n            const opts = Object.assign({}, _opts);\n            if (typeof opts.secureEndpoint !== 'boolean') {\n                opts.secureEndpoint = isSecureEndpoint();\n            }\n            if (opts.host == null) {\n                opts.host = 'localhost';\n            }\n            if (opts.port == null) {\n                opts.port = opts.secureEndpoint ? 443 : 80;\n            }\n            if (opts.protocol == null) {\n                opts.protocol = opts.secureEndpoint ? 'https:' : 'http:';\n            }\n            if (opts.host && opts.path) {\n                // If both a `host` and `path` are specified then it's most\n                // likely the result of a `url.parse()` call... we need to\n                // remove the `path` portion so that `net.connect()` doesn't\n                // attempt to open that as a unix socket file.\n                delete opts.path;\n            }\n            delete opts.agent;\n            delete opts.hostname;\n            delete opts._defaultAgent;\n            delete opts.defaultPort;\n            delete opts.createConnection;\n            // Hint to use \"Connection: close\"\n            // XXX: non-documented `http` module API :(\n            req._last = true;\n            req.shouldKeepAlive = false;\n            let timedOut = false;\n            let timeoutId = null;\n            const timeoutMs = opts.timeout || this.timeout;\n            const onerror = (err) => {\n                if (req._hadError)\n                    return;\n                req.emit('error', err);\n                // For Safety. Some additional errors might fire later on\n                // and we need to make sure we don't double-fire the error event.\n                req._hadError = true;\n            };\n            const ontimeout = () => {\n                timeoutId = null;\n                timedOut = true;\n                const err = new Error(`A \"socket\" was not created for HTTP request before ${timeoutMs}ms`);\n                err.code = 'ETIMEOUT';\n                onerror(err);\n            };\n            const callbackError = (err) => {\n                if (timedOut)\n                    return;\n                if (timeoutId !== null) {\n                    clearTimeout(timeoutId);\n                    timeoutId = null;\n                }\n                onerror(err);\n            };\n            const onsocket = (socket) => {\n                if (timedOut)\n                    return;\n                if (timeoutId != null) {\n                    clearTimeout(timeoutId);\n                    timeoutId = null;\n                }\n                if (isAgent(socket)) {\n                    // `socket` is actually an `http.Agent` instance, so\n                    // relinquish responsibility for this `req` to the Agent\n                    // from here on\n                    debug('Callback returned another Agent instance %o', socket.constructor.name);\n                    socket.addRequest(req, opts);\n                    return;\n                }\n                if (socket) {\n                    socket.once('free', () => {\n                        this.freeSocket(socket, opts);\n                    });\n                    req.onSocket(socket);\n                    return;\n                }\n                const err = new Error(`no Duplex stream was returned to agent-base for \\`${req.method} ${req.path}\\``);\n                onerror(err);\n            };\n            if (typeof this.callback !== 'function') {\n                onerror(new Error('`callback` is not defined'));\n                return;\n            }\n            if (!this.promisifiedCallback) {\n                if (this.callback.length >= 3) {\n                    debug('Converting legacy callback function to promise');\n                    this.promisifiedCallback = promisify_1.default(this.callback);\n                }\n                else {\n                    this.promisifiedCallback = this.callback;\n                }\n            }\n            if (typeof timeoutMs === 'number' && timeoutMs > 0) {\n                timeoutId = setTimeout(ontimeout, timeoutMs);\n            }\n            if ('port' in opts && typeof opts.port !== 'number') {\n                opts.port = Number(opts.port);\n            }\n            try {\n                debug('Resolving socket for %o request: %o', opts.protocol, `${req.method} ${req.path}`);\n                Promise.resolve(this.promisifiedCallback(req, opts)).then(onsocket, callbackError);\n            }\n            catch (err) {\n                Promise.reject(err).catch(callbackError);\n            }\n        }\n        freeSocket(socket, opts) {\n            debug('Freeing socket %o %o', socket.constructor.name, opts);\n            socket.destroy();\n        }\n        destroy() {\n            debug('Destroying agent %o', this.constructor.name);\n        }\n    }\n    createAgent.Agent = Agent;\n    // So that `instanceof` works correctly\n    createAgent.prototype = createAgent.Agent.prototype;\n})(createAgent || (createAgent = {}));\nmodule.exports = createAgent;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction promisify(fn) {\n    return function (req, opts) {\n        return new Promise((resolve, reject) => {\n            fn.call(this, req, opts, (err, rtn) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(rtn);\n                }\n            });\n        });\n    };\n}\nexports.default = promisify;\n//# sourceMappingURL=promisify.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AsyncScopeManager = exports.OpenTelemetryScopeManagerWrapper = void 0;\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar events_1 = require(\"events\");\r\nvar OpenTelemetryScopeManagerWrapper = /** @class */ (function () {\r\n    function OpenTelemetryScopeManagerWrapper() {\r\n    }\r\n    OpenTelemetryScopeManagerWrapper.prototype.active = function () {\r\n        var _this = this;\r\n        var context = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        return __assign(__assign({}, context), { getValue: function (key) {\r\n                // todo: lazy import activeSymbol from opentelemetry/api\r\n                if (!_this._activeSymbol) {\r\n                    _this._activeSymbol = key;\r\n                    return context;\r\n                }\r\n                if (key === _this._activeSymbol) {\r\n                    return context;\r\n                }\r\n                return false;\r\n            }, setValue: function () { } });\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.with = function (span, fn) {\r\n        var parentSpanId = span.parentSpanId;\r\n        var name = span.name;\r\n        var correlationContext = OpenTelemetryScopeManagerWrapper._spanToContext(span, parentSpanId, name);\r\n        return CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, fn)();\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.bind = function (target) {\r\n        if (typeof target === \"function\") {\r\n            return CorrelationContextManager_1.CorrelationContextManager.wrapCallback(target);\r\n        }\r\n        else if (target instanceof events_1.EventEmitter) {\r\n            CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(target);\r\n        }\r\n        return target;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.enable = function () {\r\n        CorrelationContextManager_1.CorrelationContextManager.enable();\r\n        return this;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper.prototype.disable = function () {\r\n        CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        return this;\r\n    };\r\n    OpenTelemetryScopeManagerWrapper._spanToContext = function (span, parentSpanId, name) {\r\n        var spanContext = span.spanContext ? span.spanContext() : span.context(); // context is available in OT API <v0.19.0\r\n        var context = __assign(__assign({}, span.spanContext()), { traceFlags: span.spanContext().traceFlags });\r\n        var parentId = parentSpanId ? \"|\" + spanContext.traceId + \".\" + parentSpanId + \".\" : spanContext.traceId;\r\n        var aiContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        if (aiContext) {\r\n            context.traceId = aiContext.operation.id;\r\n            // If parent is no available use current context\r\n            if (!parentSpanId) {\r\n                parentId = aiContext.operation.parentId;\r\n            }\r\n        }\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.spanToContextObject(context, parentId, name);\r\n        return correlationContext;\r\n    };\r\n    return OpenTelemetryScopeManagerWrapper;\r\n}());\r\nexports.OpenTelemetryScopeManagerWrapper = OpenTelemetryScopeManagerWrapper;\r\nexports.AsyncScopeManager = new OpenTelemetryScopeManagerWrapper();\r\n//# sourceMappingURL=AsyncHooksScopeManager.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AzureFunctionsHook = void 0;\r\nvar Logging = require(\"../Library/Logging\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\n/** Node.js Azure Functions handle incoming HTTP requests before Application Insights SDK is available,\r\n * this code generate incoming request telemetry and generate correlation context to be used\r\n * by outgoing requests and other telemetry, we rely on hooks provided by Azure Functions\r\n*/\r\nvar AzureFunctionsHook = /** @class */ (function () {\r\n    function AzureFunctionsHook(client) {\r\n        this._client = client;\r\n        this._autoGenerateIncomingRequests = false;\r\n        try {\r\n            this._functionsCoreModule = require(\"@azure/functions-core\");\r\n            // Only v3 of Azure Functions library is supported right now. See matrix of versions here:\r\n            // https://github.com/Azure/azure-functions-nodejs-library\r\n            var funcProgModel = this._functionsCoreModule.getProgrammingModel();\r\n            if (funcProgModel.name === \"@azure/functions\" && funcProgModel.version.startsWith(\"3.\")) {\r\n                this._addPreInvocationHook();\r\n                this._addPostInvocationHook();\r\n            }\r\n            else {\r\n                Logging.warn(\"AzureFunctionsHook does not support model \\\"\" + funcProgModel.name + \"\\\" version \\\"\" + funcProgModel.version + \"\\\"\");\r\n            }\r\n        }\r\n        catch (error) {\r\n            Logging.info(\"AzureFunctionsHook failed to load, not running in Azure Functions\");\r\n        }\r\n    }\r\n    AzureFunctionsHook.prototype.enable = function (isEnabled) {\r\n        this._autoGenerateIncomingRequests = isEnabled;\r\n    };\r\n    AzureFunctionsHook.prototype.dispose = function () {\r\n        this.enable(false);\r\n        this._removeInvocationHooks();\r\n        this._functionsCoreModule = undefined;\r\n    };\r\n    AzureFunctionsHook.prototype._addPreInvocationHook = function () {\r\n        var _this = this;\r\n        if (!this._preInvocationHook) {\r\n            this._preInvocationHook = this._functionsCoreModule.registerHook(\"preInvocation\", function (preInvocationContext) { return __awaiter(_this, void 0, void 0, function () {\r\n                var ctx, extractedContext;\r\n                return __generator(this, function (_a) {\r\n                    ctx = preInvocationContext.invocationContext;\r\n                    try {\r\n                        extractedContext = CorrelationContextManager_1.CorrelationContextManager.startOperation(ctx);\r\n                        if (extractedContext) { // Will be null if CorrelationContextManager is not enabled, we should not try to propagate context in that case\r\n                            extractedContext.customProperties.setProperty(\"InvocationId\", ctx.invocationId);\r\n                            if (ctx.traceContext.attributes) {\r\n                                extractedContext.customProperties.setProperty(\"ProcessId\", ctx.traceContext.attributes[\"ProcessId\"]);\r\n                                extractedContext.customProperties.setProperty(\"LogLevel\", ctx.traceContext.attributes[\"LogLevel\"]);\r\n                                extractedContext.customProperties.setProperty(\"Category\", ctx.traceContext.attributes[\"Category\"]);\r\n                                extractedContext.customProperties.setProperty(\"HostInstanceId\", ctx.traceContext.attributes[\"HostInstanceId\"]);\r\n                                extractedContext.customProperties.setProperty(\"AzFuncLiveLogsSessionId\", ctx.traceContext.attributes[\"#AzFuncLiveLogsSessionId\"]);\r\n                            }\r\n                            preInvocationContext.functionCallback = CorrelationContextManager_1.CorrelationContextManager.wrapCallback(preInvocationContext.functionCallback, extractedContext);\r\n                            if (this._isHttpTrigger(ctx) && this._autoGenerateIncomingRequests) {\r\n                                preInvocationContext.hookData.appInsightsExtractedContext = extractedContext;\r\n                                preInvocationContext.hookData.appInsightsStartTime = Date.now(); // Start trackRequest timer\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        Logging.warn(\"Failed to propagate context in Azure Functions\", err);\r\n                        return [2 /*return*/];\r\n                    }\r\n                    return [2 /*return*/];\r\n                });\r\n            }); });\r\n        }\r\n    };\r\n    AzureFunctionsHook.prototype._addPostInvocationHook = function () {\r\n        var _this = this;\r\n        if (!this._postInvocationHook) {\r\n            this._postInvocationHook = this._functionsCoreModule.registerHook(\"postInvocation\", function (postInvocationContext) { return __awaiter(_this, void 0, void 0, function () {\r\n                var ctx, request_1, startTime_1, response_1, extractedContext_1;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    try {\r\n                        if (this._autoGenerateIncomingRequests) {\r\n                            ctx = postInvocationContext.invocationContext;\r\n                            if (this._isHttpTrigger(ctx)) {\r\n                                request_1 = postInvocationContext.inputs[0];\r\n                                if (request_1) {\r\n                                    startTime_1 = postInvocationContext.hookData.appInsightsStartTime || Date.now();\r\n                                    response_1 = this._getAzureFunctionResponse(postInvocationContext, ctx);\r\n                                    extractedContext_1 = postInvocationContext.hookData.appInsightsExtractedContext;\r\n                                    if (!extractedContext_1) {\r\n                                        this._createIncomingRequestTelemetry(request_1, response_1, startTime_1, null);\r\n                                    }\r\n                                    else {\r\n                                        CorrelationContextManager_1.CorrelationContextManager.runWithContext(extractedContext_1, function () {\r\n                                            _this._createIncomingRequestTelemetry(request_1, response_1, startTime_1, extractedContext_1.operation.parentId);\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        Logging.warn(\"Error creating automatic incoming request in Azure Functions\", err);\r\n                    }\r\n                    return [2 /*return*/];\r\n                });\r\n            }); });\r\n        }\r\n    };\r\n    AzureFunctionsHook.prototype._createIncomingRequestTelemetry = function (request, response, startTime, parentId) {\r\n        var statusCode = 200; //Default\r\n        if (response) {\r\n            for (var _i = 0, _a = [response.statusCode, response.status]; _i < _a.length; _i++) {\r\n                var value = _a[_i];\r\n                if (typeof value === \"number\" && Number.isInteger(value)) {\r\n                    statusCode = value;\r\n                    break;\r\n                }\r\n                else if (typeof value === \"string\") {\r\n                    var parsedVal = parseInt(value);\r\n                    if (!isNaN(parsedVal)) {\r\n                        statusCode = parsedVal;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            statusCode = undefined;\r\n        }\r\n        this._client.trackRequest({\r\n            name: request.method + \" \" + request.url,\r\n            resultCode: statusCode,\r\n            success: typeof (statusCode) === \"number\" ? (0 < statusCode) && (statusCode < 400) : undefined,\r\n            url: request.url,\r\n            time: new Date(startTime),\r\n            duration: Date.now() - startTime,\r\n            id: parentId\r\n        });\r\n        this._client.flush();\r\n    };\r\n    AzureFunctionsHook.prototype._getAzureFunctionResponse = function (postInvocationContext, ctx) {\r\n        var httpOutputBinding = ctx.bindingDefinitions.find(function (b) { return b.direction === \"out\" && b.type.toLowerCase() === \"http\"; });\r\n        if ((httpOutputBinding === null || httpOutputBinding === void 0 ? void 0 : httpOutputBinding.name) === \"$return\") {\r\n            return postInvocationContext.result;\r\n        }\r\n        else if (httpOutputBinding && ctx.bindings && ctx.bindings[httpOutputBinding.name] !== undefined) {\r\n            return ctx.bindings[httpOutputBinding.name];\r\n        }\r\n        else {\r\n            return ctx.res;\r\n        }\r\n    };\r\n    AzureFunctionsHook.prototype._isHttpTrigger = function (ctx) {\r\n        return ctx.bindingDefinitions.find(function (b) { var _a; return ((_a = b.type) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === \"httptrigger\"; });\r\n    };\r\n    AzureFunctionsHook.prototype._removeInvocationHooks = function () {\r\n        if (this._preInvocationHook) {\r\n            this._preInvocationHook.dispose();\r\n            this._preInvocationHook = undefined;\r\n        }\r\n        if (this._postInvocationHook) {\r\n            this._postInvocationHook.dispose();\r\n            this._postInvocationHook = undefined;\r\n        }\r\n    };\r\n    return AzureFunctionsHook;\r\n}());\r\nexports.AzureFunctionsHook = AzureFunctionsHook;\r\n//# sourceMappingURL=AzureFunctionsHook.js.map","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = /** @class */ (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CorrelationContextManager = void 0;\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\nvar Tracestate = require(\"../Library/Tracestate\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar Util = require(\"../Library/Util\");\r\nvar CorrelationContextManager = /** @class */ (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\r\n        if (context === undefined) { // cast undefined to null\r\n            return null;\r\n        }\r\n        return context;\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId,\r\n                    traceparent: traceparent,\r\n                    tracestate: tracestate\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    CorrelationContextManager.spanToContextObject = function (spanContext, parentId, name) {\r\n        var traceContext = new Traceparent();\r\n        traceContext.traceId = spanContext.traceId;\r\n        traceContext.spanId = spanContext.spanId;\r\n        traceContext.traceFlag = Traceparent.formatOpenTelemetryTraceFlags(spanContext.traceFlags) || Traceparent.DEFAULT_TRACE_FLAG;\r\n        traceContext.parentId = parentId;\r\n        return CorrelationContextManager.generateContextObject(traceContext.traceId, traceContext.parentId, name, null, traceContext);\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        var _a;\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n        return fn();\r\n    };\r\n    /**\r\n     * Wrapper for cls-hooked bindEmitter method\r\n     */\r\n    CorrelationContextManager.wrapEmitter = function (emitter) {\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                CorrelationContextManager.session.bindEmitter(emitter);\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn, context) {\r\n        var _a;\r\n        if (CorrelationContextManager.enabled) {\r\n            try {\r\n                return CorrelationContextManager.session.bind(fn, context ? (_a = {},\r\n                    _a[CorrelationContextManager.CONTEXT_NAME] = context,\r\n                    _a) : undefined);\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n            }\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function (forceClsHooked) {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.forceClsHooked = forceClsHooked;\r\n            this.hasEverEnabled = true;\r\n            if (typeof this.cls === \"undefined\") {\r\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\r\n                    this.cls = require(\"cls-hooked\");\r\n                }\r\n                else {\r\n                    this.cls = require(\"continuation-local-storage\");\r\n                }\r\n            }\r\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                try {\r\n                    return CorrelationContextManager.session.bind(cb);\r\n                }\r\n                catch (error) {\r\n                    Logging.warn(\"Error binding to session context\", Util.dumpObj(error));\r\n                }\r\n            });\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     * Create new correlation context.\r\n     */\r\n    CorrelationContextManager.startOperation = function (input, request) {\r\n        var traceContext = input && input.traceContext || null;\r\n        var span = input && input.spanContext ? input : null;\r\n        var spanContext = input && input.traceId ? input : null;\r\n        var headers = input && input.headers;\r\n        // OpenTelemetry Span\r\n        if (span) {\r\n            return this.spanToContextObject(span.spanContext(), span.parentSpanId, span.name);\r\n        }\r\n        // OpenTelemetry SpanContext\r\n        if (spanContext) {\r\n            return this.spanToContextObject(spanContext, \"|\" + spanContext.traceId + \".\" + spanContext.spanId + \".\", typeof request === \"string\" ? request : \"\");\r\n        }\r\n        var operationName = typeof request === \"string\" ? request : \"\";\r\n        // AzFunction TraceContext\r\n        if (traceContext) {\r\n            var traceparent = null;\r\n            var tracestate = null;\r\n            operationName = traceContext.attributes[\"OperationName\"] || operationName;\r\n            if (request) {\r\n                var azureFnRequest = request;\r\n                if (azureFnRequest.headers) {\r\n                    if (azureFnRequest.headers.traceparent) {\r\n                        traceparent = new Traceparent(azureFnRequest.headers.traceparent);\r\n                    }\r\n                    else if (azureFnRequest.headers[\"request-id\"]) {\r\n                        traceparent = new Traceparent(null, azureFnRequest.headers[\"request-id\"]);\r\n                    }\r\n                    if (azureFnRequest.headers.tracestate) {\r\n                        tracestate = new Tracestate(azureFnRequest.headers.tracestate);\r\n                    }\r\n                }\r\n            }\r\n            if (!traceparent) {\r\n                traceparent = new Traceparent(traceContext.traceparent);\r\n            }\r\n            if (!tracestate) {\r\n                tracestate = new Tracestate(traceContext.tracestate);\r\n            }\r\n            var correlationContextHeader = undefined;\r\n            if (typeof request === \"object\") {\r\n                var parser = new HttpRequestParser(request);\r\n                correlationContextHeader = parser.getCorrelationContextHeader();\r\n                operationName = parser.getOperationName({});\r\n            }\r\n            var correlationContext = CorrelationContextManager.generateContextObject(traceparent.traceId, traceparent.parentId, operationName, correlationContextHeader, traceparent, tracestate);\r\n            return correlationContext;\r\n        }\r\n        // No TraceContext available, parse as http.IncomingMessage\r\n        if (headers) {\r\n            var traceparent = new Traceparent(headers.traceparent ? headers.traceparent.toString() : null);\r\n            var tracestate = new Tracestate(headers.tracestate ? headers.tracestate.toString() : null);\r\n            var parser = new HttpRequestParser(input);\r\n            var correlationContext = CorrelationContextManager.generateContextObject(traceparent.traceId, traceparent.parentId, parser.getOperationName({}), parser.getCorrelationContextHeader(), traceparent, tracestate);\r\n            return correlationContext;\r\n        }\r\n        Logging.warn(\"startOperation was called with invalid arguments\", arguments);\r\n        return null;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     * Reset the namespace\r\n     */\r\n    CorrelationContextManager.reset = function () {\r\n        if (CorrelationContextManager.hasEverEnabled) {\r\n            CorrelationContextManager.session = null;\r\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\r\n        }\r\n    };\r\n    /**\r\n     *  Reports if CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    /**\r\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\r\n     * use async-listener (plain -cls)\r\n     */\r\n    CorrelationContextManager.shouldUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\r\n    };\r\n    /**\r\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\r\n     * @internal Used in tests only\r\n     */\r\n    CorrelationContextManager.canUseClsHooked = function () {\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\r\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\r\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\r\n        return !(greater800 && less820) && greater470;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\r\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = /** @class */ (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nvar AutoCollectExceptions = /** @class */ (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n        // Only use for 13.7.0+\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\r\n    }\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            if (!this._exceptionListenerHandle) {\r\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\r\n                // error for these scenarios.\r\n                var handle = function (reThrow, name, error) {\r\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\r\n                    var exceptionTelemetry = { exception: error };\r\n                    // Add full error in context so it could used in telemetryProcessors\r\n                    exceptionTelemetry.contextObjects = {};\r\n                    exceptionTelemetry.contextObjects[\"Error\"] = error;\r\n                    _this._client.trackException(exceptionTelemetry);\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    // only rethrow when we are the only listener\r\n                    if (reThrow && name && process.listeners(name).length === 1) {\r\n                        console.error(error);\r\n                        process.exit(1);\r\n                    }\r\n                };\r\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\r\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\r\n                    this._exceptionListenerHandle = handle.bind(this, false, undefined); // never rethrows\r\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\r\n                }\r\n                else {\r\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\r\n                    this._rejectionListenerHandle = handle.bind(this, false, undefined); // never rethrows\r\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\r\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\r\n                }\r\n                else {\r\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                }\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\r\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\r\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\r\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\r\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\r\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","\"use strict\";\r\nvar crypto = require(\"crypto\");\r\nvar os = require(\"os\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Context = require(\"../Library/Context\");\r\nvar HeartBeat = /** @class */ (function () {\r\n    function HeartBeat(client) {\r\n        this._collectionInterval = 900000;\r\n        if (!HeartBeat.INSTANCE) {\r\n            HeartBeat.INSTANCE = this;\r\n        }\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n    }\r\n    HeartBeat.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () { return _this.trackHeartBeat(_this._client.config, function () { }); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = null;\r\n            }\r\n        }\r\n    };\r\n    HeartBeat.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    HeartBeat.isEnabled = function () {\r\n        return HeartBeat.INSTANCE && HeartBeat.INSTANCE._isEnabled;\r\n    };\r\n    HeartBeat.prototype.trackHeartBeat = function (config, callback) {\r\n        var properties = {};\r\n        var sdkVersion = Context.sdkVersion; // \"node\" or \"node-nativeperf\"\r\n        properties[\"sdkVersion\"] = sdkVersion;\r\n        properties[\"osType\"] = os.type();\r\n        properties[\"osVersion\"] = os.release();\r\n        //  Random GUID that would help in analysis when app has stopped and restarted.\r\n        if (!this._uniqueProcessId) {\r\n            this._uniqueProcessId = crypto.randomBytes(16).toString(\"hex\");\r\n        }\r\n        properties[\"processSessionId\"] = this._uniqueProcessId;\r\n        if (process.env.WEBSITE_SITE_NAME) {\r\n            properties[\"appSrv_SiteName\"] = process.env.WEBSITE_SITE_NAME;\r\n        }\r\n        if (process.env.WEBSITE_HOME_STAMPNAME) {\r\n            properties[\"appSrv_wsStamp\"] = process.env.WEBSITE_HOME_STAMPNAME;\r\n        }\r\n        if (process.env.WEBSITE_HOSTNAME) {\r\n            properties[\"appSrv_wsHost\"] = process.env.WEBSITE_HOSTNAME;\r\n        }\r\n        if (process.env.WEBSITE_OWNER_NAME) {\r\n            properties[\"appSrv_wsOwner\"] = process.env.WEBSITE_OWNER_NAME;\r\n        }\r\n        if (process.env.WEBSITE_RESOURCE_GROUP) {\r\n            properties[\"appSrv_ResourceGroup\"] = process.env.WEBSITE_RESOURCE_GROUP;\r\n        }\r\n        if (process.env.WEBSITE_SLOT_NAME) {\r\n            properties[\"appSrv_SlotName\"] = process.env.WEBSITE_SLOT_NAME;\r\n        }\r\n        this._client.trackMetric({ name: Constants.HeartBeatMetricName, value: 0, properties: properties });\r\n        callback();\r\n    };\r\n    HeartBeat.prototype.dispose = function () {\r\n        HeartBeat.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return HeartBeat;\r\n}());\r\nmodule.exports = HeartBeat;\r\n//# sourceMappingURL=HeartBeat.js.map","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar AutoCollectHttpDependencies = /** @class */ (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/azure-coretracing.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            try {\r\n                var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                    !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n                // If someone else patched traceparent headers onto this request\r\n                var userAgentHeader = null;\r\n                // Azure SDK special handling\r\n                if (options.headers) {\r\n                    userAgentHeader = options.headers[\"User-Agent\"] || options.headers[\"user-agent\"];\r\n                    if (userAgentHeader && userAgentHeader.toString().indexOf(\"azsdk-js\") !== -1) {\r\n                        shouldCollect = false;\r\n                    }\r\n                }\r\n                if (request && options && shouldCollect) {\r\n                    CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                    if (_this._isEnabled) {\r\n                        // Mark as auto collected\r\n                        request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n                        // If there is no context create one, this apply when no request is triggering the dependency\r\n                        if (!CorrelationContextManager_1.CorrelationContextManager.getCurrentContext()) {\r\n                            // Create correlation context and wrap execution\r\n                            var operationId = null;\r\n                            if (CorrelationIdManager.w3cEnabled) {\r\n                                var traceparent = new Traceparent();\r\n                                operationId = traceparent.traceId;\r\n                            }\r\n                            else {\r\n                                var requestId = CorrelationIdManager.generateRequestId(null);\r\n                                operationId = CorrelationIdManager.getRootId(requestId);\r\n                            }\r\n                            var correlationContext = CorrelationContextManager_1.CorrelationContextManager.generateContextObject(operationId);\r\n                            CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n                            });\r\n                        }\r\n                        else {\r\n                            AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (err) {\r\n                Logging.warn(\"Failed to generate dependency telemetry.\", Util.dumpObj(err));\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, __spreadArrays([http, options], requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, __spreadArrays([https, options], requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var _a;\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, __spreadArrays([http, options], requestArgs));\r\n            request.end();\r\n            return request;\r\n        };\r\n        https.get = function (options) {\r\n            var _a;\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, __spreadArrays([https, options], requestArgs));\r\n            request.end();\r\n            return request;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId;\r\n        var uniqueTraceparent;\r\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\r\n            currentContext.operation.traceparent.updateSpanId();\r\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\r\n        }\r\n        else if (CorrelationIdManager.w3cEnabled) {\r\n            // Start an operation now so that we can include the w3c headers in the outgoing request\r\n            var traceparent = new Traceparent();\r\n            uniqueTraceparent = traceparent.toString();\r\n            uniqueRequestId = traceparent.getBackCompatRequestId();\r\n        }\r\n        else {\r\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + \".\");\r\n        }\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                try {\r\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\r\n                }\r\n                catch (err) {\r\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\r\n                }\r\n                if (currentContext && currentContext.operation) {\r\n                    try {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                        // Also set legacy headers\r\n                        if (!client.config.ignoreLegacyHeaders) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                            telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                        }\r\n                        // Set W3C headers, if available\r\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\r\n                        }\r\n                        else if (CorrelationIdManager.w3cEnabled) {\r\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\r\n                            var traceparent = new Traceparent().toString();\r\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\r\n                        }\r\n                        if (currentContext.operation.tracestate) {\r\n                            var tracestate = currentContext.operation.tracestate.toString();\r\n                            if (tracestate) {\r\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\r\n                            }\r\n                        }\r\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                        if (correlationContextHeader) {\r\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"response\", function (response) {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on(\"error\", function (error) {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onError(error);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = error;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on(\"abort\", function () {\r\n                if (telemetry.isProcessed) {\r\n                    return;\r\n                }\r\n                telemetry.isProcessed = true;\r\n                requestParser.onError(new Error(\"The request has been aborted and the network socket has closed.\"));\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = \"disableAppInsightsAutoCollection\";\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = \"_appInsightsAutoCollected\";\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the request/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = /** @class */ (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var dependencyName = this.method.toUpperCase();\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = \"\";\r\n        try {\r\n            var urlObject = new url.URL(this.url);\r\n            urlObject.search = undefined;\r\n            urlObject.hash = undefined;\r\n            dependencyName += \" \" + urlObject.pathname;\r\n            remoteDependencyTarget = urlObject.hostname;\r\n            if (urlObject.port) {\r\n                remoteDependencyTarget += \":\" + urlObject.port;\r\n            }\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget += \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        if (baseTelemetry && baseTelemetry.time) {\r\n            dependencyTelemetry.time = baseTelemetry.time;\r\n        }\r\n        else if (this.startTime) {\r\n            dependencyTelemetry.time = new Date(this.startTime);\r\n        }\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === \"string\") {\r\n            if (options.indexOf(\"http://\") === 0 || options.indexOf(\"https://\") === 0) {\r\n                // protocol exists, parse normally\r\n                try {\r\n                    options = new url.URL(options);\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n            else {\r\n                // protocol not found, insert http/https where appropriate\r\n                try {\r\n                    var parsed = new url.URL(\"http://\" + options);\r\n                    if (parsed.port === \"443\") {\r\n                        options = new url.URL(\"https://\" + options);\r\n                    }\r\n                    else {\r\n                        options = new url.URL(\"http://\" + options);\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n        }\r\n        else if (options && typeof url.URL === \"function\" && options instanceof url.URL) {\r\n            return url.format(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path && options.host) {\r\n            // need to force a protocol to make parameter valid - base url is required when input is a relative url\r\n            try {\r\n                var parsedQuery = new url.URL(options.path, \"http://\" + options.host + options.path);\r\n                options.pathname = parsedQuery.pathname;\r\n                options.search = parsedQuery.search;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Sometimes the hostname is provided but not the host\r\n        // Add in the path when this occurs\r\n        if (options.path && options.hostname && !options.host) {\r\n            // need to force a protocol to make parameter valid - base url is required when input is a relative url\r\n            try {\r\n                var parsedQuery = new url.URL(options.path, \"http://\" + options.hostname + options.path);\r\n                options.pathname = parsedQuery.pathname;\r\n                options.search = parsedQuery.search;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Similarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            try {\r\n                var parsedHost = new url.URL(\"http://\" + options.host);\r\n                if (!parsedHost.port && options.port) {\r\n                    options.hostname = options.host;\r\n                    delete options.host;\r\n                }\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || (request.protocol) || undefined;\r\n        options.hostname = options.hostname || \"localhost\";\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\nvar Tracestate = require(\"../Library/Tracestate\");\r\nvar Traceparent = require(\"../Library/Traceparent\");\r\n/**\r\n * Helper class to read data from the request/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = /** @class */ (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var name = this.method;\r\n        try {\r\n            name += \" \" + new url.URL(this.url).pathname;\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: name,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        if (baseTelemetry && baseTelemetry.time) {\r\n            requestTelemetry.time = baseTelemetry.time;\r\n        }\r\n        else if (this.startTime) {\r\n            requestTelemetry.time = new Date(this.startTime);\r\n        }\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        if (tags[HttpRequestParser.keys.operationName]) {\r\n            return tags[HttpRequestParser.keys.operationName];\r\n        }\r\n        var pathName = \"\";\r\n        try {\r\n            pathName = new url.URL(this.url).pathname;\r\n        }\r\n        catch (ex) { // Invalid URL\r\n            // Ignore error\r\n        }\r\n        var operationName = this.method;\r\n        if (pathName) {\r\n            operationName += \" \" + pathName;\r\n        }\r\n        return operationName;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype.getTraceparent = function () {\r\n        return this.traceparent;\r\n    };\r\n    HttpRequestParser.prototype.getTracestate = function () {\r\n        return this.tracestate;\r\n    };\r\n    HttpRequestParser.prototype.getLegacyRootId = function () {\r\n        return this.legacyRootId;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var protocol = (encrypted || request.headers[\"x-forwarded-proto\"] == \"https\") ? \"https\" : \"http\";\r\n        var baseUrl = protocol + \"://\" + request.headers.host + \"/\";\r\n        var pathName = \"\";\r\n        var search = \"\";\r\n        try {\r\n            var requestUrl = new url.URL(request.url, baseUrl);\r\n            pathName = requestUrl.pathname;\r\n            search = requestUrl.search;\r\n        }\r\n        catch (ex) {\r\n            // Ignore errors\r\n        }\r\n        var absoluteUrl = url.format({\r\n            protocol: protocol,\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === \"string\" && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    /**\r\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\r\n     */\r\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\r\n        // Set operationId\r\n        this.operationId = this.traceparent.traceId;\r\n        if (this.traceparent.legacyRootId) {\r\n            this.legacyRootId = this.traceparent.legacyRootId;\r\n        }\r\n        // Set parentId with existing spanId\r\n        this.parentId = this.traceparent.parentId;\r\n        // Update the spanId and set the current requestId\r\n        this.traceparent.updateSpanId();\r\n        this.requestId = this.traceparent.getBackCompatRequestId();\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader] ? request.headers[RequestResponseHeaders.traceStateHeader].toString() : null; // w3c header\r\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader] ? request.headers[RequestResponseHeaders.traceparentHeader].toString() : null; // w3c header\r\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader] ? request.headers[RequestResponseHeaders.requestIdHeader].toString() : null; // default AI header\r\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader] ? request.headers[RequestResponseHeaders.parentIdHeader].toString() : null; // legacy AI header\r\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader] ? request.headers[RequestResponseHeaders.rootIdHeader].toString() : null; // legacy AI header\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader] ? request.headers[RequestResponseHeaders.correlationContextHeader].toString() : null;\r\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\r\n                // Parse W3C Trace Context headers\r\n                this.traceparent = new Traceparent(traceparentHeader ? traceparentHeader.toString() : null); // new traceparent is always created from this\r\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader ? tracestateHeader.toString() : null); // discard tracestate if no traceparent is present\r\n                this.setBackCompatFromThisTraceContext();\r\n            }\r\n            else if (requestIdHeader) {\r\n                // Parse AI headers\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent(null, requestIdHeader);\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = requestIdHeader;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                if (CorrelationIdManager.w3cEnabled) {\r\n                    this.traceparent = new Traceparent();\r\n                    this.traceparent.parentId = legacy_parentId;\r\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\r\n                    this.setBackCompatFromThisTraceContext();\r\n                }\r\n                else {\r\n                    this.parentId = legacy_parentId;\r\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\r\n                    this.correlationContextHeader = null;\r\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n                }\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n            }\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        var cookieParts = cookieValue.split(\"|\");\r\n        if (cookieParts.length > 0) {\r\n            return cookieParts[0];\r\n        }\r\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = /** @class */ (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\r\n    };\r\n    AutoCollectHttpRequests.prototype._registerRequest = function (request, response, onRequest) {\r\n        var _this = this;\r\n        // Set up correlation context\r\n        var requestParser = new HttpRequestParser(request);\r\n        var correlationContext = this._generateCorrelationContext(requestParser);\r\n        // Note: Check for if correlation is enabled happens within this method.\r\n        // If not enabled, function will directly call the callback.\r\n        CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n            if (_this._isEnabled) {\r\n                // Mark as auto collected\r\n                request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                // Auto collect request\r\n                AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser);\r\n            }\r\n            if (typeof onRequest === \"function\") {\r\n                onRequest(request, response);\r\n            }\r\n        });\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        this._isInitialized = true;\r\n        // Avoid the creation of multiple handler on http(s).createServer\r\n        if (AutoCollectHttpRequests.HANDLER_READY) {\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.HANDLER_READY = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== \"function\") {\r\n                throw new Error(\"onRequest handler must be a function\");\r\n            }\r\n            return function (request, response) {\r\n                var _a;\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\r\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    (_a = AutoCollectHttpRequests.INSTANCE) === null || _a === void 0 ? void 0 : _a._registerRequest(request, response, onRequest);\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case \"request\":\r\n                    case \"checkContinue\":\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        // options parameter was added in Node.js v9.6.0, v8.12.0\r\n        // function createServer(requestListener?: RequestListener): Server;\r\n        // function createServer(options: ServerOptions, requestListener?: RequestListener): Server;\r\n        http.createServer = function (param1, param2) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            if (param2 && typeof param2 === \"function\") {\r\n                var server = originalHttpServer(param1, wrapOnRequestHandler(param2));\r\n                wrapServerEventHandler(server);\r\n                return server;\r\n            }\r\n            else {\r\n                var server = originalHttpServer(wrapOnRequestHandler(param1));\r\n                wrapServerEventHandler(server);\r\n                return server;\r\n            }\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        telemetry.isProcessed = false;\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        telemetry.isProcessed = false;\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n        // track an aborted request if an aborted event is emitted\r\n        // Newer versions of Node.js runtime will trigger error event as well, we need to ensure telemetry is not generated multiple times\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"aborted\", function () {\r\n                var errorMessage = \"The request has been aborted and the network socket has closed.\";\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, errorMessage);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (telemetry.isProcessed) {\r\n            return;\r\n        }\r\n        telemetry.isProcessed = true;\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        var legacyRootId = requestParser.getLegacyRootId();\r\n        if (legacyRootId) {\r\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n        CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        this._isAutoCorrelating = false;\r\n    };\r\n    AutoCollectHttpRequests.HANDLER_READY = false;\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = \"_appInsightsAutoCollected\";\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AutoCollectNativePerformance = void 0;\r\nvar Context = require(\"../Library/Context\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectNativePerformance = /** @class */ (function () {\r\n    function AutoCollectNativePerformance(client) {\r\n        this._disabledMetrics = {};\r\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\r\n        // just disable old native instance and reset JS member variables\r\n        if (AutoCollectNativePerformance.INSTANCE) {\r\n            AutoCollectNativePerformance.INSTANCE.dispose();\r\n        }\r\n        AutoCollectNativePerformance.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    /**\r\n     * Start instance of native metrics agent.\r\n     *\r\n     * @param {boolean} isEnabled\r\n     * @param {number} [collectionInterval=60000]\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\r\n        var _this = this;\r\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\r\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\r\n            try {\r\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\r\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\r\n                AutoCollectNativePerformance._metricsAvailable = true;\r\n                Logging.info(\"Native metrics module successfully loaded!\");\r\n            }\r\n            catch (err) {\r\n                // Package not available. Never try again\r\n                AutoCollectNativePerformance._metricsAvailable = false;\r\n                return;\r\n            }\r\n        }\r\n        this._isEnabled = isEnabled;\r\n        this._disabledMetrics = disabledMetrics;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        // Enable the emitter if we were able to construct one\r\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\r\n            // enable self\r\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\r\n                this._handle.unref();\r\n            }\r\n        }\r\n        else if (AutoCollectNativePerformance._emitter) {\r\n            // disable self\r\n            AutoCollectNativePerformance._emitter.enable(false);\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Cleanup this instance of AutoCollectNativePerformance\r\n     *\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype.dispose = function () {\r\n        this.enable(false);\r\n    };\r\n    /**\r\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\r\n     *\r\n     * @private\r\n     * @static\r\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\r\n     * @param {(IBaseConfig)} customConfig\r\n     * @returns {(boolean | IDisabledExtendedMetrics)}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics, customConfig) {\r\n        var disableAll = customConfig.disableAllExtendedMetrics;\r\n        var individualOptOuts = customConfig.extendedMetricDisablers;\r\n        // case 1: disable all env var set, RETURN with isEnabled=false\r\n        if (disableAll) {\r\n            return { isEnabled: false, disabledMetrics: {} };\r\n        }\r\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\r\n        if (individualOptOuts) {\r\n            var optOutsArr = individualOptOuts.split(\",\");\r\n            var disabledMetrics = {};\r\n            if (optOutsArr.length > 0) {\r\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\r\n                    var opt = optOutsArr_1[_i];\r\n                    disabledMetrics[opt] = true;\r\n                }\r\n            }\r\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\r\n            if (typeof collectExtendedMetrics === \"object\") {\r\n                return { isEnabled: true, disabledMetrics: __assign(__assign({}, collectExtendedMetrics), disabledMetrics) };\r\n            }\r\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\r\n        }\r\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\r\n        if (typeof collectExtendedMetrics === \"boolean\") {\r\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\r\n        }\r\n        else { // use else so we don't need to force typing on collectExtendedMetrics\r\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\r\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\r\n        }\r\n    };\r\n    /**\r\n     * Trigger an iteration of native metrics collection\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\r\n        var shouldSendAll = true;\r\n        if (typeof this._isEnabled !== \"object\") {\r\n            shouldSendAll = this._isEnabled;\r\n        }\r\n        if (shouldSendAll) {\r\n            this._trackGarbageCollection();\r\n            this._trackEventLoop();\r\n            this._trackHeapUsage();\r\n        }\r\n    };\r\n    /**\r\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\r\n     * collection that occurred during this collection interval.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\r\n        var _a;\r\n        if (this._disabledMetrics.gc) {\r\n            return;\r\n        }\r\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\r\n        for (var gc in gcData) {\r\n            var metrics = gcData[gc].metrics;\r\n            var name_1 = gc + \" Garbage Collection Duration\";\r\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n            this._client.trackMetric({\r\n                name: name_1,\r\n                value: metrics.total,\r\n                count: metrics.count,\r\n                max: metrics.max,\r\n                min: metrics.min,\r\n                stdDev: stdDev,\r\n                tagOverrides: (_a = {},\r\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                    _a)\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\r\n     * time spent in event loop for this interval.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\r\n        var _a;\r\n        if (this._disabledMetrics.loop) {\r\n            return;\r\n        }\r\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\r\n        var metrics = loopData.loopUsage;\r\n        if (metrics.count == 0) {\r\n            return;\r\n        }\r\n        var name = \"Event Loop CPU Time\";\r\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\r\n        this._client.trackMetric({\r\n            name: name,\r\n            value: metrics.total,\r\n            count: metrics.count,\r\n            min: metrics.min,\r\n            max: metrics.max,\r\n            stdDev: stdDev,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n    };\r\n    /**\r\n     * Track heap memory usage metrics as a custom metric.\r\n     *\r\n     * @private\r\n     * @memberof AutoCollectNativePerformance\r\n     */\r\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\r\n        var _a, _b, _c;\r\n        if (this._disabledMetrics.heap) {\r\n            return;\r\n        }\r\n        var memoryUsage = process.memoryUsage();\r\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Heap)\",\r\n            value: heapUsed,\r\n            count: 1,\r\n            tagOverrides: (_a = {},\r\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _a)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Total (Heap)\",\r\n            value: heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_b = {},\r\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _b)\r\n        });\r\n        this._client.trackMetric({\r\n            name: \"Memory Usage (Non-Heap)\",\r\n            value: rss - heapTotal,\r\n            count: 1,\r\n            tagOverrides: (_c = {},\r\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\r\n                _c)\r\n        });\r\n    };\r\n    return AutoCollectNativePerformance;\r\n}());\r\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\r\n//# sourceMappingURL=NativePerformance.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NetworkStatsbeat = void 0;\r\nvar NetworkStatsbeat = /** @class */ (function () {\r\n    function NetworkStatsbeat(endpoint, host) {\r\n        this.endpoint = endpoint;\r\n        this.host = host;\r\n        this.totalRequestCount = 0;\r\n        this.totalSuccesfulRequestCount = 0;\r\n        this.totalFailedRequestCount = [];\r\n        this.retryCount = [];\r\n        this.exceptionCount = [];\r\n        this.throttleCount = [];\r\n        this.intervalRequestExecutionTime = 0;\r\n        this.lastIntervalRequestExecutionTime = 0;\r\n        this.lastTime = +new Date;\r\n        this.lastRequestCount = 0;\r\n    }\r\n    return NetworkStatsbeat;\r\n}());\r\nexports.NetworkStatsbeat = NetworkStatsbeat;\r\n//# sourceMappingURL=NetworkStatsbeat.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AutoCollectPerformance = /** @class */ (function () {\r\n    /**\r\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\r\n     */\r\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\r\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\r\n        this._lastIntervalDependencyExecutionTime = 0;\r\n        if (!AutoCollectPerformance.INSTANCE) {\r\n            AutoCollectPerformance.INSTANCE = this;\r\n        }\r\n        this._lastRequests = { totalRequestCount: 0, totalFailedRequestCount: 0, time: 0 };\r\n        this._lastDependencies = { totalDependencyCount: 0, totalFailedDependencyCount: 0, time: 0 };\r\n        this._lastExceptions = { totalExceptionCount: 0, time: 0 };\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n        this._collectionInterval = collectionInterval;\r\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastDependencies = {\r\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                    time: +new Date\r\n                };\r\n                this._lastExceptions = {\r\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === \"function\") {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._collectionInterval = collectionInterval || this._collectionInterval;\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (duration, success) {\r\n        var durationMs;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\r\n        if (success === false) {\r\n            AutoCollectPerformance._totalFailedRequestCount++;\r\n        }\r\n        AutoCollectPerformance._totalRequestCount++;\r\n    };\r\n    AutoCollectPerformance.countException = function () {\r\n        AutoCollectPerformance._totalExceptionCount++;\r\n    };\r\n    AutoCollectPerformance.countDependency = function (duration, success) {\r\n        var durationMs;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\r\n        if (success === false) {\r\n            AutoCollectPerformance._totalFailedDependencyCount++;\r\n        }\r\n        AutoCollectPerformance._totalDependencyCount++;\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n        this._trackDependencyRate();\r\n        this._trackExceptionRate();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === \"function\") {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== \"undefined\" && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        var committedMemory = os.totalmem() - freeMem;\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\r\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\r\n        // Only supported by quickpulse service\r\n        if (this._enableLiveMetricsCounters) {\r\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\r\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\r\n            // Only send duration to live metrics if it has been updated!\r\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\r\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\r\n            }\r\n            // Only supported by quickpulse service\r\n            if (this._enableLiveMetricsCounters) {\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\r\n            }\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastDependencies = this._lastDependencies;\r\n            var dependencies = {\r\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\r\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\r\n                time: +new Date\r\n            };\r\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\r\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\r\n            var elapsedMs = dependencies.time - lastDependencies.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\r\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\r\n            if (elapsedMs > 0) {\r\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\r\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\r\n                // redundant check for livemetrics, but kept for consistency w/ requests\r\n                // Only send duration to live metrics if it has been updated!\r\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\r\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\r\n                }\r\n            }\r\n            this._lastDependencies = dependencies;\r\n        }\r\n    };\r\n    // Static counter is accumulated externally. Report the rate to client here\r\n    // Note: This is currently only used with QuickPulse client\r\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\r\n        if (this._enableLiveMetricsCounters) {\r\n            var lastExceptions = this._lastExceptions;\r\n            var exceptions = {\r\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\r\n                time: +new Date\r\n            };\r\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\r\n            var elapsedMs = exceptions.time - lastExceptions.time;\r\n            var elapsedSeconds = elapsedMs / 1000;\r\n            if (elapsedMs > 0) {\r\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\r\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\r\n            }\r\n            this._lastExceptions = exceptions;\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._totalDependencyCount = 0;\r\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\r\n    AutoCollectPerformance._totalExceptionCount = 0;\r\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\r\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AggregatedMetricCounters_1 = require(\"../Declarations/Metrics/AggregatedMetricCounters\");\r\nvar AggregatedMetricDimensions_1 = require(\"../Declarations/Metrics/AggregatedMetricDimensions\");\r\nvar AutoCollectPreAggregatedMetrics = /** @class */ (function () {\r\n    /**\r\n     * @param client - Telemetry Client\r\n     * @param collectionInterval - Metric collection interval in ms\r\n     */\r\n    function AutoCollectPreAggregatedMetrics(client, collectionInterval) {\r\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\r\n        if (!AutoCollectPreAggregatedMetrics.INSTANCE) {\r\n            AutoCollectPreAggregatedMetrics.INSTANCE = this;\r\n        }\r\n        this._isInitialized = false;\r\n        AutoCollectPreAggregatedMetrics._dependencyCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._requestCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._exceptionCountersCollection = [];\r\n        AutoCollectPreAggregatedMetrics._traceCountersCollection = [];\r\n        this._client = client;\r\n        this._collectionInterval = collectionInterval;\r\n    }\r\n    AutoCollectPreAggregatedMetrics.prototype.enable = function (isEnabled, collectionInterval) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._collectionInterval = collectionInterval || this._collectionInterval;\r\n                this._handle = setInterval(function () { return _this.trackPreAggregatedMetrics(); }, this._collectionInterval);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countException = function (dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._exceptionCountersCollection);\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countTrace = function (dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._traceCountersCollection);\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countRequest = function (duration, dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var durationMs;\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._requestCountersCollection);\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        counter.intervalExecutionTime += durationMs;\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.countDependency = function (duration, dimensions) {\r\n        if (!AutoCollectPreAggregatedMetrics.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = AutoCollectPreAggregatedMetrics._getAggregatedCounter(dimensions, this._dependencyCountersCollection);\r\n        var durationMs;\r\n        if (typeof duration === \"string\") {\r\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\r\n            durationMs = +new Date(\"1970-01-01T\" + duration + \"Z\"); // convert to num ms, returns NaN if wrong\r\n        }\r\n        else if (typeof duration === \"number\") {\r\n            durationMs = duration;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        counter.intervalExecutionTime += durationMs;\r\n        counter.totalCount++;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.isEnabled = function () {\r\n        return AutoCollectPreAggregatedMetrics.INSTANCE && AutoCollectPreAggregatedMetrics.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.trackPreAggregatedMetrics = function () {\r\n        this._trackRequestMetrics();\r\n        this._trackDependencyMetrics();\r\n        this._trackExceptionMetrics();\r\n        this._trackTraceMetrics();\r\n    };\r\n    AutoCollectPreAggregatedMetrics._getAggregatedCounter = function (dimensions, counterCollection) {\r\n        var notMatch = false;\r\n        // Check if counter with specified dimensions is available\r\n        for (var i = 0; i < counterCollection.length; i++) {\r\n            // Same object\r\n            if (dimensions === counterCollection[i].dimensions) {\r\n                return counterCollection[i];\r\n            }\r\n            // Diferent number of keys skip\r\n            if (Object.keys(dimensions).length !== Object.keys(counterCollection[i].dimensions).length) {\r\n                continue;\r\n            }\r\n            // Check dimension values\r\n            for (var dim in dimensions) {\r\n                if (dimensions[dim] != counterCollection[i].dimensions[dim]) {\r\n                    notMatch = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!notMatch) { // Found\r\n                return counterCollection[i];\r\n            }\r\n            notMatch = false;\r\n        }\r\n        // Create a new one if not found\r\n        var newCounter = new AggregatedMetricCounters_1.AggregatedMetricCounter(dimensions);\r\n        counterCollection.push(newCounter);\r\n        return newCounter;\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackRequestMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._requestCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._requestCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalRequests = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            var averageRequestExecutionTime = ((currentCounter.intervalExecutionTime - currentCounter.lastIntervalExecutionTime) / intervalRequests) || 0;\r\n            currentCounter.lastIntervalExecutionTime = currentCounter.intervalExecutionTime; // reset\r\n            if (elapsedMs > 0 && intervalRequests > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Server response time\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: averageRequestExecutionTime,\r\n                    count: intervalRequests,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.REQUESTS_DURATION\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackDependencyMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._dependencyCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._dependencyCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalDependencies = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            var averageDependencyExecutionTime = ((currentCounter.intervalExecutionTime - currentCounter.lastIntervalExecutionTime) / intervalDependencies) || 0;\r\n            currentCounter.lastIntervalExecutionTime = currentCounter.intervalExecutionTime; // reset\r\n            if (elapsedMs > 0 && intervalDependencies > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Dependency duration\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: averageDependencyExecutionTime,\r\n                    count: intervalDependencies,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.DEPENDENCIES_DURATION\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackExceptionMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._exceptionCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._exceptionCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalExceptions = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            if (elapsedMs > 0 && intervalExceptions > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Exceptions\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: intervalExceptions,\r\n                    count: intervalExceptions,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.EXCEPTIONS_COUNT\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackTraceMetrics = function () {\r\n        for (var i = 0; i < AutoCollectPreAggregatedMetrics._traceCountersCollection.length; i++) {\r\n            var currentCounter = AutoCollectPreAggregatedMetrics._traceCountersCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalTraces = (currentCounter.totalCount - currentCounter.lastTotalCount) || 0;\r\n            var elapsedMs = currentCounter.time - currentCounter.lastTime;\r\n            if (elapsedMs > 0 && intervalTraces > 0) {\r\n                this._trackPreAggregatedMetric({\r\n                    name: \"Traces\",\r\n                    dimensions: currentCounter.dimensions,\r\n                    value: intervalTraces,\r\n                    count: intervalTraces,\r\n                    aggregationInterval: elapsedMs,\r\n                    metricType: Constants.MetricId.TRACES_COUNT\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastTotalCount = currentCounter.totalCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype._trackPreAggregatedMetric = function (metric) {\r\n        // Build metric properties\r\n        var metricProperties = {};\r\n        for (var dim in metric.dimensions) {\r\n            metricProperties[AggregatedMetricDimensions_1.PreaggregatedMetricPropertyNames[dim]] = metric.dimensions[dim];\r\n        }\r\n        metricProperties = __assign(__assign({}, metricProperties), { \"_MS.MetricId\": metric.metricType, \"_MS.AggregationIntervalMs\": String(metric.aggregationInterval), \"_MS.IsAutocollected\": \"True\" });\r\n        var telemetry = {\r\n            name: metric.name,\r\n            value: metric.value,\r\n            count: metric.count,\r\n            properties: metricProperties,\r\n            kind: \"Aggregation\"\r\n        };\r\n        this._client.trackMetric(telemetry);\r\n    };\r\n    AutoCollectPreAggregatedMetrics.prototype.dispose = function () {\r\n        AutoCollectPreAggregatedMetrics.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return AutoCollectPreAggregatedMetrics;\r\n}());\r\nmodule.exports = AutoCollectPreAggregatedMetrics;\r\n//# sourceMappingURL=PreAggregatedMetrics.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP request/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = /** @class */ (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar os = require(\"os\");\r\nvar EnvelopeFactory = require(\"../Library/EnvelopeFactory\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Sender = require(\"../Library/Sender\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Vm = require(\"../Library/AzureVirtualMachine\");\r\nvar Config = require(\"../Library/Config\");\r\nvar Context = require(\"../Library/Context\");\r\nvar Network = require(\"./NetworkStatsbeat\");\r\nvar Util = require(\"../Library/Util\");\r\nvar STATSBEAT_LANGUAGE = \"node\";\r\nvar Statsbeat = /** @class */ (function () {\r\n    function Statsbeat(config, context) {\r\n        this._attach = Constants.StatsbeatAttach.sdk; // Default is SDK\r\n        this._feature = Constants.StatsbeatFeature.NONE;\r\n        this._instrumentation = Constants.StatsbeatInstrumentation.NONE;\r\n        this._isInitialized = false;\r\n        this._statbeatMetrics = [];\r\n        this._networkStatsbeatCollection = [];\r\n        this._config = config;\r\n        this._context = context || new Context();\r\n        var statsbeatConnectionString = this._getConnectionString(config);\r\n        this._statsbeatConfig = new Config(statsbeatConnectionString);\r\n        this._statsbeatConfig.samplingPercentage = 100; // Do not sample\r\n        this._sender = new Sender(this._statsbeatConfig, null, null, null, null, true, this._shutdownStatsbeat.bind(this));\r\n    }\r\n    Statsbeat.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._getCustomProperties();\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._handle = setInterval(function () {\r\n                    _this.trackShortIntervalStatsbeats();\r\n                }, Statsbeat.STATS_COLLECTION_SHORT_INTERVAL);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n            if (!this._longHandle) {\r\n                // On first enablement\r\n                this.trackLongIntervalStatsbeats();\r\n                this._longHandle = setInterval(function () {\r\n                    _this.trackLongIntervalStatsbeats();\r\n                }, Statsbeat.STATS_COLLECTION_LONG_INTERVAL);\r\n                this._longHandle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = null;\r\n            }\r\n            if (this._longHandle) {\r\n                clearInterval(this._longHandle);\r\n                this._longHandle = null;\r\n            }\r\n        }\r\n    };\r\n    Statsbeat.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    Statsbeat.prototype.isEnabled = function () {\r\n        return this._isEnabled;\r\n    };\r\n    Statsbeat.prototype.setCodelessAttach = function () {\r\n        this._attach = Constants.StatsbeatAttach.codeless;\r\n    };\r\n    Statsbeat.prototype.addFeature = function (feature) {\r\n        this._feature |= feature;\r\n    };\r\n    Statsbeat.prototype.removeFeature = function (feature) {\r\n        this._feature &= ~feature;\r\n    };\r\n    Statsbeat.prototype.addInstrumentation = function (instrumentation) {\r\n        this._instrumentation |= instrumentation;\r\n    };\r\n    Statsbeat.prototype.removeInstrumentation = function (instrumentation) {\r\n        this._instrumentation &= ~instrumentation;\r\n    };\r\n    Statsbeat.prototype.countRequest = function (endpoint, host, duration, success, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        counter.totalRequestCount++;\r\n        counter.intervalRequestExecutionTime += duration;\r\n        if (success === false) {\r\n            if (!statusCode) {\r\n                return;\r\n            }\r\n            var currentStatusCounter = counter.totalFailedRequestCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n            if (currentStatusCounter) {\r\n                currentStatusCounter.count++;\r\n            }\r\n            else {\r\n                counter.totalFailedRequestCount.push({ statusCode: statusCode, count: 1 });\r\n            }\r\n        }\r\n        else {\r\n            counter.totalSuccesfulRequestCount++;\r\n        }\r\n    };\r\n    Statsbeat.prototype.countException = function (endpoint, host, exceptionType) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentErrorCounter = counter.exceptionCount.find(function (exceptionCounter) { return exceptionType.name === exceptionCounter.exceptionType; });\r\n        if (currentErrorCounter) {\r\n            currentErrorCounter.count++;\r\n        }\r\n        else {\r\n            counter.exceptionCount.push({ exceptionType: exceptionType.name, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.countThrottle = function (endpoint, host, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentStatusCounter = counter.throttleCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n        if (currentStatusCounter) {\r\n            currentStatusCounter.count++;\r\n        }\r\n        else {\r\n            counter.throttleCount.push({ statusCode: statusCode, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.countRetry = function (endpoint, host, statusCode) {\r\n        if (!this.isEnabled()) {\r\n            return;\r\n        }\r\n        var counter = this._getNetworkStatsbeatCounter(endpoint, host);\r\n        var currentStatusCounter = counter.retryCount.find(function (statusCounter) { return statusCode === statusCounter.statusCode; });\r\n        if (currentStatusCounter) {\r\n            currentStatusCounter.count++;\r\n        }\r\n        else {\r\n            counter.retryCount.push({ statusCode: statusCode, count: 1 });\r\n        }\r\n    };\r\n    Statsbeat.prototype.trackShortIntervalStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var networkProperties, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this._getResourceProvider()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        networkProperties = {\r\n                            \"os\": this._os,\r\n                            \"rp\": this._resourceProvider,\r\n                            \"cikey\": this._cikey,\r\n                            \"runtimeVersion\": this._runtimeVersion,\r\n                            \"language\": this._language,\r\n                            \"version\": this._sdkVersion,\r\n                            \"attach\": this._attach\r\n                        };\r\n                        this._trackRequestDuration(networkProperties);\r\n                        this._trackRequestsCount(networkProperties);\r\n                        return [4 /*yield*/, this._sendStatsbeats()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        Logging.info(Statsbeat.TAG, \"Failed to send Statsbeat metrics: \" + Util.dumpObj(error_1));\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype.trackLongIntervalStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var commonProperties, attachProperties, instrumentationProperties, featureProperties, error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this._getResourceProvider()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        commonProperties = {\r\n                            \"os\": this._os,\r\n                            \"rp\": this._resourceProvider,\r\n                            \"cikey\": this._cikey,\r\n                            \"runtimeVersion\": this._runtimeVersion,\r\n                            \"language\": this._language,\r\n                            \"version\": this._sdkVersion,\r\n                            \"attach\": this._attach\r\n                        };\r\n                        attachProperties = Object.assign({\r\n                            \"rpId\": this._resourceIdentifier\r\n                        }, commonProperties);\r\n                        this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.ATTACH, value: 1, properties: attachProperties });\r\n                        if (this._instrumentation != Constants.StatsbeatInstrumentation.NONE) { // Only send if there are some instrumentations enabled\r\n                            instrumentationProperties = Object.assign({ \"feature\": this._instrumentation, \"type\": Constants.StatsbeatFeatureType.Instrumentation }, commonProperties);\r\n                            this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.FEATURE, value: 1, properties: instrumentationProperties });\r\n                        }\r\n                        if (this._feature != Constants.StatsbeatFeature.NONE) { // Only send if there are some features enabled\r\n                            featureProperties = Object.assign({ \"feature\": this._feature, \"type\": Constants.StatsbeatFeatureType.Feature }, commonProperties);\r\n                            this._statbeatMetrics.push({ name: Constants.StatsbeatCounter.FEATURE, value: 1, properties: featureProperties });\r\n                        }\r\n                        return [4 /*yield*/, this._sendStatsbeats()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_2 = _a.sent();\r\n                        Logging.info(Statsbeat.TAG, \"Failed to send Statsbeat metrics: \" + Util.dumpObj(error_2));\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype._getNetworkStatsbeatCounter = function (endpoint, host) {\r\n        var shortHost = this._getShortHost(host);\r\n        // Check if counter is available\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            // Same object\r\n            if (endpoint === this._networkStatsbeatCollection[i].endpoint &&\r\n                shortHost === this._networkStatsbeatCollection[i].host) {\r\n                return this._networkStatsbeatCollection[i];\r\n            }\r\n        }\r\n        // Create a new one if not found\r\n        var newCounter = new Network.NetworkStatsbeat(endpoint, shortHost);\r\n        this._networkStatsbeatCollection.push(newCounter);\r\n        return newCounter;\r\n    };\r\n    Statsbeat.prototype._trackRequestDuration = function (commonProperties) {\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            var currentCounter = this._networkStatsbeatCollection[i];\r\n            currentCounter.time = +new Date;\r\n            var intervalRequests = (currentCounter.totalRequestCount - currentCounter.lastRequestCount) || 0;\r\n            var totalRequestExecutionTime = currentCounter.intervalRequestExecutionTime - currentCounter.lastIntervalRequestExecutionTime;\r\n            var averageRequestExecutionTime = totalRequestExecutionTime > 0 ? (totalRequestExecutionTime / intervalRequests) || 0 : 0;\r\n            currentCounter.lastIntervalRequestExecutionTime = currentCounter.intervalRequestExecutionTime; // reset\r\n            if (intervalRequests > 0) {\r\n                // Add extra properties\r\n                var properties = Object.assign({\r\n                    \"endpoint\": this._networkStatsbeatCollection[i].endpoint,\r\n                    \"host\": this._networkStatsbeatCollection[i].host\r\n                }, commonProperties);\r\n                this._statbeatMetrics.push({\r\n                    name: Constants.StatsbeatCounter.REQUEST_DURATION,\r\n                    value: averageRequestExecutionTime,\r\n                    properties: properties\r\n                });\r\n            }\r\n            // Set last counters\r\n            currentCounter.lastRequestCount = currentCounter.totalRequestCount;\r\n            currentCounter.lastTime = currentCounter.time;\r\n        }\r\n    };\r\n    Statsbeat.prototype._getShortHost = function (originalHost) {\r\n        var shortHost = originalHost;\r\n        try {\r\n            var hostRegex = new RegExp(/^https?:\\/\\/(?:www\\.)?([^\\/.-]+)/);\r\n            var res = hostRegex.exec(originalHost);\r\n            if (res != null && res.length > 1) {\r\n                shortHost = res[1];\r\n            }\r\n            shortHost = shortHost.replace(\".in.applicationinsights.azure.com\", \"\");\r\n        }\r\n        catch (error) {\r\n            // Ignore error\r\n        }\r\n        return shortHost;\r\n    };\r\n    Statsbeat.prototype._trackRequestsCount = function (commonProperties) {\r\n        var _this = this;\r\n        var _loop_1 = function (i) {\r\n            currentCounter = this_1._networkStatsbeatCollection[i];\r\n            var properties = Object.assign({ \"endpoint\": currentCounter.endpoint, \"host\": currentCounter.host }, commonProperties);\r\n            if (currentCounter.totalSuccesfulRequestCount > 0) {\r\n                this_1._statbeatMetrics.push({\r\n                    name: Constants.StatsbeatCounter.REQUEST_SUCCESS,\r\n                    value: currentCounter.totalSuccesfulRequestCount,\r\n                    properties: properties\r\n                });\r\n                currentCounter.totalSuccesfulRequestCount = 0; //Reset\r\n            }\r\n            if (currentCounter.totalFailedRequestCount.length > 0) {\r\n                currentCounter.totalFailedRequestCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.REQUEST_FAILURE,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.totalFailedRequestCount = []; //Reset\r\n            }\r\n            if (currentCounter.retryCount.length > 0) {\r\n                currentCounter.retryCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.RETRY_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.retryCount = []; //Reset\r\n            }\r\n            if (currentCounter.throttleCount.length > 0) {\r\n                currentCounter.throttleCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"statusCode\": currentCounter.statusCode }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.THROTTLE_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.throttleCount = []; //Reset\r\n            }\r\n            if (currentCounter.exceptionCount.length > 0) {\r\n                currentCounter.exceptionCount.forEach(function (currentCounter) {\r\n                    properties = Object.assign(__assign(__assign({}, properties), { \"exceptionType\": currentCounter.exceptionType }));\r\n                    _this._statbeatMetrics.push({\r\n                        name: Constants.StatsbeatCounter.EXCEPTION_COUNT,\r\n                        value: currentCounter.count,\r\n                        properties: properties\r\n                    });\r\n                });\r\n                currentCounter.exceptionCount = []; //Reset\r\n            }\r\n        };\r\n        var this_1 = this, currentCounter;\r\n        for (var i = 0; i < this._networkStatsbeatCollection.length; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    Statsbeat.prototype._sendStatsbeats = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var envelopes, i, statsbeat, envelope;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        envelopes = [];\r\n                        for (i = 0; i < this._statbeatMetrics.length; i++) {\r\n                            statsbeat = {\r\n                                name: this._statbeatMetrics[i].name,\r\n                                value: this._statbeatMetrics[i].value,\r\n                                properties: this._statbeatMetrics[i].properties\r\n                            };\r\n                            envelope = EnvelopeFactory.createEnvelope(statsbeat, Contracts.TelemetryType.Metric, null, this._context, this._statsbeatConfig);\r\n                            envelope.name = Constants.StatsbeatTelemetryName;\r\n                            envelopes.push(envelope);\r\n                        }\r\n                        this._statbeatMetrics = [];\r\n                        return [4 /*yield*/, this._sender.send(envelopes)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Statsbeat.prototype._getCustomProperties = function () {\r\n        this._language = STATSBEAT_LANGUAGE;\r\n        this._cikey = this._config.instrumentationKey;\r\n        this._sdkVersion = Context.sdkVersion; // \"node\" or \"node-nativeperf\"\r\n        this._os = os.type();\r\n        this._runtimeVersion = process.version;\r\n    };\r\n    Statsbeat.prototype._getResourceProvider = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            // Check resource provider\r\n            var waiting = false;\r\n            _this._resourceProvider = Constants.StatsbeatResourceProvider.unknown;\r\n            _this._resourceIdentifier = Constants.StatsbeatResourceProvider.unknown;\r\n            if (process.env.WEBSITE_SITE_NAME) { // Web apps\r\n                _this._resourceProvider = Constants.StatsbeatResourceProvider.appsvc;\r\n                _this._resourceIdentifier = process.env.WEBSITE_SITE_NAME;\r\n                if (process.env.WEBSITE_HOME_STAMPNAME) {\r\n                    _this._resourceIdentifier += \"/\" + process.env.WEBSITE_HOME_STAMPNAME;\r\n                }\r\n            }\r\n            else if (process.env.FUNCTIONS_WORKER_RUNTIME) { // Function apps\r\n                _this._resourceProvider = Constants.StatsbeatResourceProvider.functions;\r\n                if (process.env.WEBSITE_HOSTNAME) {\r\n                    _this._resourceIdentifier = process.env.WEBSITE_HOSTNAME;\r\n                }\r\n            }\r\n            else if (_this._config) {\r\n                if (_this._isVM === undefined || _this._isVM == true) {\r\n                    waiting = true;\r\n                    Vm.AzureVirtualMachine.getAzureComputeMetadata(_this._config, function (vmInfo) {\r\n                        _this._isVM = vmInfo.isVM;\r\n                        if (_this._isVM) {\r\n                            _this._resourceProvider = Constants.StatsbeatResourceProvider.vm;\r\n                            _this._resourceIdentifier = vmInfo.id + \"/\" + vmInfo.subscriptionId;\r\n                            // Override OS as VM info have higher precedence\r\n                            if (vmInfo.osType) {\r\n                                _this._os = vmInfo.osType;\r\n                            }\r\n                        }\r\n                        resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _this._resourceProvider = Constants.StatsbeatResourceProvider.unknown;\r\n                }\r\n            }\r\n            if (!waiting) {\r\n                resolve();\r\n            }\r\n        });\r\n    };\r\n    Statsbeat.prototype._shutdownStatsbeat = function () {\r\n        this.enable(false); // Disable Statsbeat as is it failed 3 times cosnecutively during initialization, is possible SDK is running in private or restricted network\r\n    };\r\n    Statsbeat.prototype._getConnectionString = function (config) {\r\n        var currentEndpoint = config.endpointUrl;\r\n        var euEndpoints = [\r\n            \"westeurope\",\r\n            \"northeurope\",\r\n            \"francecentral\",\r\n            \"francesouth\",\r\n            \"germanywestcentral\",\r\n            \"norwayeast\",\r\n            \"norwaywest\",\r\n            \"swedencentral\",\r\n            \"switzerlandnorth\",\r\n            \"switzerlandwest\",\r\n            \"uksouth\",\r\n            \"ukwest\"\r\n        ];\r\n        for (var i = 0; i < euEndpoints.length; i++) {\r\n            if (currentEndpoint.indexOf(euEndpoints[i]) > -1) {\r\n                return Statsbeat.EU_CONNECTION_STRING;\r\n            }\r\n        }\r\n        return Statsbeat.NON_EU_CONNECTION_STRING;\r\n    };\r\n    Statsbeat.NON_EU_CONNECTION_STRING = \"InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com\";\r\n    Statsbeat.EU_CONNECTION_STRING = \"InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com\";\r\n    Statsbeat.STATS_COLLECTION_SHORT_INTERVAL = 900000; // 15 minutes\r\n    Statsbeat.STATS_COLLECTION_LONG_INTERVAL = 86400000; // 1 day\r\n    Statsbeat.TAG = \"Statsbeat\";\r\n    return Statsbeat;\r\n}());\r\nmodule.exports = Statsbeat;\r\n//# sourceMappingURL=Statsbeat.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar zlib = require(\"zlib\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar snippetInjectionHelper = require(\"../Library/SnippetInjectionHelper\");\r\nvar prefixHelper = require(\"../Library/PrefixHelper\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar ConnectionStringParser = require(\"../Library/ConnectionStringParser\");\r\nvar applicationinsights_web_snippet_1 = require(\"@microsoft/applicationinsights-web-snippet\");\r\nvar WebSnippet = /** @class */ (function () {\r\n    function WebSnippet(client) {\r\n        var _a;\r\n        this._isIkeyValid = true;\r\n        if (!!WebSnippet.INSTANCE) {\r\n            throw new Error(\"Web snippet injection should be configured from the applicationInsights object\");\r\n        }\r\n        WebSnippet.INSTANCE = this;\r\n        // AI URL used to validate if snippet already included\r\n        WebSnippet._aiUrl = Constants.WEB_INSTRUMENTATION_DEFAULT_SOURCE;\r\n        WebSnippet._aiDeprecatedUrl = Constants.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;\r\n        var clientWebIkey = this._getWebSnippetIkey((_a = client.config) === null || _a === void 0 ? void 0 : _a.webInstrumentationConnectionString);\r\n        this._webInstrumentationIkey = clientWebIkey || client.config.instrumentationKey;\r\n        this._clientWebInstrumentationConfig = client.config.webInstrumentationConfig;\r\n        this._clientWebInstrumentationSrc = client.config.webInstrumentationSrc;\r\n        this._statsbeat = client.getStatsbeat();\r\n    }\r\n    WebSnippet.prototype.enable = function (isEnabled, webInstrumentationConnectionString) {\r\n        this._isEnabled = isEnabled;\r\n        this._webInstrumentationIkey = this._getWebSnippetIkey(webInstrumentationConnectionString) || this._webInstrumentationIkey;\r\n        WebSnippet._snippet = this._getWebInstrumentationReplacedStr();\r\n        if (this._isEnabled && !this._isInitialized && this._isIkeyValid) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.addFeature(Constants.StatsbeatFeature.WEB_SNIPPET);\r\n            }\r\n            this._initialize();\r\n        }\r\n        else if (!this._isEnabled) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.removeFeature(Constants.StatsbeatFeature.WEB_SNIPPET);\r\n            }\r\n        }\r\n    };\r\n    WebSnippet.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    WebSnippet.prototype._getWebSnippetIkey = function (connectionString) {\r\n        var iKey = null;\r\n        try {\r\n            var csCode = ConnectionStringParser.parse(connectionString);\r\n            var iKeyCode = csCode.instrumentationkey || \"\";\r\n            if (!ConnectionStringParser.isIkeyValid(iKeyCode)) {\r\n                this._isIkeyValid = false;\r\n                Logging.info(\"Invalid web Instrumentation connection string, web Instrumentation is not enabled.\");\r\n            }\r\n            else {\r\n                this._isIkeyValid = true;\r\n                iKey = iKeyCode;\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"get web snippet ikey error: \" + err);\r\n        }\r\n        return iKey;\r\n    };\r\n    WebSnippet.prototype._getWebInstrumentationReplacedStr = function () {\r\n        var configStr = this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig);\r\n        var osStr = prefixHelper.getOsPrefix();\r\n        var rpStr = prefixHelper.getResourceProvider();\r\n        var snippetReplacedStr = this._webInstrumentationIkey + \"\\\",\\r\\n\" + configStr + \" disableIkeyDeprecationMessage: true,\\r\\n sdkExtension: \\\"\" + rpStr + osStr + \"d_n_\";\r\n        var replacedSnippet = applicationinsights_web_snippet_1.webSnippet.replace(\"INSTRUMENTATION_KEY\", snippetReplacedStr);\r\n        if (this._clientWebInstrumentationSrc) {\r\n            return replacedSnippet.replace(Constants.WEB_INSTRUMENTATION_DEFAULT_SOURCE + \".2.min.js\", this._clientWebInstrumentationSrc);\r\n        }\r\n        return replacedSnippet;\r\n    };\r\n    // Do not use string replace here, because double quote should be kept.\r\n    // we want to transfer all values of config to the web snippet in the following way:\r\n    // cfg: {\r\n    //      config1: \"config1 string value\",\r\n    //      config2: true,\r\n    //      config3: 1,\r\n    //      ...\r\n    //}});\r\n    WebSnippet.prototype._getClientWebInstrumentationConfigStr = function (config) {\r\n        var configStr = \"\";\r\n        try {\r\n            if (config != undefined && config.length > 0) {\r\n                config.forEach(function (item) {\r\n                    var key = item.name;\r\n                    if (key === undefined)\r\n                        return;\r\n                    var val = item.value;\r\n                    var entry = \"\";\r\n                    // NOTE: users should convert object/function to string themselves\r\n                    // Type \"function\" and \"object\" will be skipped!\r\n                    switch (typeof val) {\r\n                        case \"function\":\r\n                            break;\r\n                        case \"object\":\r\n                            break;\r\n                        case \"string\":\r\n                            entry = \" \" + key + \": \\\"\" + val + \"\\\",\\r\\n\";\r\n                            configStr += entry;\r\n                            break;\r\n                        default:\r\n                            entry = \" \" + key + \": \" + val + \",\\r\\n\";\r\n                            configStr += entry;\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if has any errors here, web Instrumentation will be disabled.\r\n            this._isEnabled = false;\r\n            Logging.info(\"Parse client web instrumentation error. Web Instrumentation is disabled\");\r\n        }\r\n        return configStr;\r\n    };\r\n    WebSnippet.prototype._initialize = function () {\r\n        this._isInitialized = true;\r\n        var originalHttpServer = http.createServer;\r\n        var originalHttpsServer = https.createServer;\r\n        var isEnabled = this._isEnabled;\r\n        http.createServer = function (requestListener) {\r\n            var originalRequestListener = requestListener;\r\n            if (originalRequestListener) {\r\n                requestListener = function (request, response) {\r\n                    // Patch response write method\r\n                    var originalResponseWrite = response.write;\r\n                    var isGetRequest = request.method == \"GET\";\r\n                    response.write = function wrap(a, b, c) {\r\n                        //only patch GET request\r\n                        try {\r\n                            if (isEnabled && isGetRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(response);\r\n                                var writeBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    writeBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(response, a)) {\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, undefined, writeBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalResponseWrite.apply(response, arguments);\r\n                    };\r\n                    // Patch response end method for cases when HTML is added there\r\n                    var originalResponseEnd = response.end;\r\n                    response.end = function wrap(a, b, c) {\r\n                        if (isEnabled && isGetRequest) {\r\n                            try {\r\n                                if (isEnabled && isGetRequest) {\r\n                                    var headers = snippetInjectionHelper.getContentEncodingFromHeaders(response);\r\n                                    var endBufferType = undefined;\r\n                                    if (typeof b === \"string\") {\r\n                                        endBufferType = b;\r\n                                    }\r\n                                    if (headers === null || headers === undefined) {\r\n                                        if (WebSnippet.INSTANCE.ValidateInjection(response, a)) {\r\n                                            arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, undefined, endBufferType);\r\n                                        }\r\n                                    }\r\n                                    else if (headers.length) {\r\n                                        var encodeType = headers[0];\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(response, a, encodeType);\r\n                                    }\r\n                                }\r\n                            }\r\n                            catch (err) {\r\n                                Logging.warn(\"Inject snipet error: \" + err);\r\n                            }\r\n                        }\r\n                        return originalResponseEnd.apply(response, arguments);\r\n                    };\r\n                    return originalRequestListener(request, response);\r\n                };\r\n            }\r\n            return originalHttpServer(requestListener);\r\n        };\r\n        https.createServer = function (options, httpsRequestListener) {\r\n            var originalHttpsRequestListener = httpsRequestListener;\r\n            if (originalHttpsRequestListener) {\r\n                httpsRequestListener = function (req, res) {\r\n                    var isGetHttpsRequest = req.method == \"GET\";\r\n                    var originalHttpsResponseWrite = res.write;\r\n                    var originalHttpsResponseEnd = res.end;\r\n                    res.write = function wrap(a, b, c) {\r\n                        try {\r\n                            if (isEnabled && isGetHttpsRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(res);\r\n                                var writeBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    writeBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(res, a)) {\r\n                                        arguments[0] = this.InjectWebSnippet(res, a, undefined, writeBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalHttpsResponseWrite.apply(res, arguments);\r\n                    };\r\n                    res.end = function wrap(a, b, c) {\r\n                        try {\r\n                            if (isEnabled && isGetHttpsRequest) {\r\n                                var headers = snippetInjectionHelper.getContentEncodingFromHeaders(res);\r\n                                var endBufferType = undefined;\r\n                                if (typeof b === \"string\") {\r\n                                    endBufferType = b;\r\n                                }\r\n                                if (headers === null || headers === undefined) {\r\n                                    if (WebSnippet.INSTANCE.ValidateInjection(res, a)) {\r\n                                        arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, undefined, endBufferType);\r\n                                    }\r\n                                }\r\n                                else if (headers.length) {\r\n                                    var encodeType = headers[0];\r\n                                    arguments[0] = WebSnippet.INSTANCE.InjectWebSnippet(res, a, encodeType);\r\n                                }\r\n                            }\r\n                        }\r\n                        catch (err) {\r\n                            Logging.warn(\"Inject snippet error: \" + err);\r\n                        }\r\n                        return originalHttpsResponseEnd.apply(res, arguments);\r\n                    };\r\n                    return originalHttpsRequestListener(req, res);\r\n                };\r\n                return originalHttpsServer(options, httpsRequestListener);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Validate response and try to inject Web snippet\r\n     */\r\n    WebSnippet.prototype.ValidateInjection = function (response, input) {\r\n        try {\r\n            if (!response || !input || response.statusCode != 200)\r\n                return false;\r\n            var isContentHtml = snippetInjectionHelper.isContentTypeHeaderHtml(response);\r\n            if (!isContentHtml)\r\n                return false;\r\n            var inputStr = input.slice().toString();\r\n            if (inputStr.indexOf(\"<head>\") >= 0 && inputStr.indexOf(\"</head>\") >= 0) {\r\n                // Check if snippet not already present looking for AI Web SDK URL\r\n                if (inputStr.indexOf(WebSnippet._aiUrl) < 0 && inputStr.indexOf(WebSnippet._aiDeprecatedUrl) < 0) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"validate injections error: \" + err);\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Inject Web snippet\r\n     */\r\n    WebSnippet.prototype.InjectWebSnippet = function (response, input, encodeType, bufferEncodeType) {\r\n        try {\r\n            var isCompressedBuffer = !!encodeType;\r\n            if (!isCompressedBuffer) {\r\n                var html = input.toString();\r\n                var index = html.indexOf(\"</head>\");\r\n                if (index < 0)\r\n                    return input;\r\n                var newHtml = snippetInjectionHelper.insertSnippetByIndex(index, html, WebSnippet._snippet);\r\n                if (typeof input === \"string\") {\r\n                    response.removeHeader(\"Content-Length\");\r\n                    input = newHtml;\r\n                    response.setHeader(\"Content-Length\", Buffer.byteLength(input));\r\n                }\r\n                else if (Buffer.isBuffer(input)) {\r\n                    var bufferType = bufferEncodeType ? bufferEncodeType : \"utf8\";\r\n                    var isValidBufferType = snippetInjectionHelper.isBufferType(input, bufferType);\r\n                    if (isValidBufferType) {\r\n                        response.removeHeader(\"Content-Length\");\r\n                        var encodedString = Buffer.from(newHtml).toString(bufferType);\r\n                        input = Buffer.from(encodedString, bufferType);\r\n                        response.setHeader(\"Content-Length\", input.length);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                response.removeHeader(\"Content-Length\");\r\n                input = this._getInjectedCompressBuffer(response, input, encodeType);\r\n                response.setHeader(\"Content-Length\", input.length);\r\n            }\r\n        }\r\n        catch (ex) {\r\n            Logging.warn(\"Failed to inject web snippet and change content-lenght headers. Exception:\" + ex);\r\n        }\r\n        return input;\r\n    };\r\n    //***********************\r\n    // should NOT use sync functions here. But currently cannot get async functions to work\r\n    // because reponse.write return boolean\r\n    // and also this function do not support partial compression as well\r\n    // need more investigation\r\n    WebSnippet.prototype._getInjectedCompressBuffer = function (response, input, encodeType) {\r\n        try {\r\n            switch (encodeType) {\r\n                case snippetInjectionHelper.contentEncodingMethod.GZIP:\r\n                    var gunzipBuffer = zlib.gunzipSync(input);\r\n                    if (this.ValidateInjection(response, gunzipBuffer)) {\r\n                        var injectedGunzipBuffer = this.InjectWebSnippet(response, gunzipBuffer);\r\n                        input = zlib.gzipSync(injectedGunzipBuffer);\r\n                    }\r\n                    break;\r\n                case snippetInjectionHelper.contentEncodingMethod.DEFLATE:\r\n                    var inflateBuffer = zlib.inflateSync(input);\r\n                    if (this.ValidateInjection(response, inflateBuffer)) {\r\n                        var injectedInflateBuffer = this.InjectWebSnippet(response, inflateBuffer);\r\n                        input = zlib.deflateSync(injectedInflateBuffer);\r\n                    }\r\n                    break;\r\n                case snippetInjectionHelper.contentEncodingMethod.BR:\r\n                    var BrotliDecompressSync = snippetInjectionHelper.getBrotliDecompressSync(zlib);\r\n                    var BrotliCompressSync = snippetInjectionHelper.getBrotliCompressSync(zlib);\r\n                    if (BrotliDecompressSync && BrotliCompressSync) {\r\n                        var decompressBuffer = BrotliDecompressSync(input);\r\n                        if (this.ValidateInjection(response, decompressBuffer)) {\r\n                            var injectedDecompressBuffer = this.InjectWebSnippet(response, decompressBuffer);\r\n                            input = BrotliCompressSync(injectedDecompressBuffer);\r\n                        }\r\n                        break;\r\n                    }\r\n            }\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"get web injection compress buffer error: \" + err);\r\n        }\r\n        return input;\r\n    };\r\n    WebSnippet.prototype.dispose = function () {\r\n        WebSnippet.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    return WebSnippet;\r\n}());\r\nmodule.exports = WebSnippet;\r\n//# sourceMappingURL=WebSnippet.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.parseEventHubSpan = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar core_1 = require(\"@opentelemetry/core\");\r\nvar semantic_conventions_1 = require(\"@opentelemetry/semantic-conventions\");\r\nvar Constants_1 = require(\"../../../Declarations/Constants\");\r\n/**\r\n * Average span.links[].attributes.enqueuedTime\r\n */\r\nvar getTimeSinceEnqueued = function (span) {\r\n    var countEnqueueDiffs = 0;\r\n    var sumEnqueueDiffs = 0;\r\n    var startTimeMs = core_1.hrTimeToMilliseconds(span.startTime);\r\n    span.links.forEach(function (_a) {\r\n        var attributes = _a.attributes;\r\n        var enqueuedTime = attributes === null || attributes === void 0 ? void 0 : attributes[Constants_1.ENQUEUED_TIME];\r\n        if (enqueuedTime) {\r\n            countEnqueueDiffs += 1;\r\n            sumEnqueueDiffs += startTimeMs - (parseFloat(enqueuedTime.toString()) || 0);\r\n        }\r\n    });\r\n    return Math.max(sumEnqueueDiffs / (countEnqueueDiffs || 1), 0);\r\n};\r\n/**\r\n * Implementation of Mapping to Azure Monitor\r\n *\r\n * https://gist.github.com/lmolkova/e4215c0f44a49ef824983382762e6b92#file-z_azure_monitor_exporter_mapping-md\r\n */\r\nvar parseEventHubSpan = function (span, telemetry) {\r\n    var _a;\r\n    var namespace = span.attributes[Constants_1.AzNamespace];\r\n    var peerAddress = (span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME] ||\r\n        span.attributes[\"peer.address\"] ||\r\n        \"unknown\").replace(/\\/$/g, \"\"); // remove trailing \"/\"\r\n    var messageBusDestination = (span.attributes[Constants_1.MessageBusDestination] || \"unknown\");\r\n    switch (span.kind) {\r\n        case api_1.SpanKind.CLIENT:\r\n            telemetry.dependencyTypeName = namespace;\r\n            telemetry.target = peerAddress + \"/\" + messageBusDestination;\r\n            break;\r\n        case api_1.SpanKind.PRODUCER:\r\n            telemetry.dependencyTypeName = Constants_1.DependencyTypeName.QueueMessage + \" | \" + namespace;\r\n            telemetry.target = peerAddress + \"/\" + messageBusDestination;\r\n            break;\r\n        case api_1.SpanKind.CONSUMER:\r\n            telemetry.source = peerAddress + \"/\" + messageBusDestination;\r\n            telemetry.measurements = __assign(__assign({}, telemetry.measurements), (_a = {}, _a[Constants_1.TIME_SINCE_ENQUEUED] = getTimeSinceEnqueued(span), _a));\r\n            break;\r\n        default: // no op\r\n    }\r\n};\r\nexports.parseEventHubSpan = parseEventHubSpan;\r\n//# sourceMappingURL=EventHub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.spanToTelemetryContract = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar url_1 = require(\"url\");\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar semantic_conventions_1 = require(\"@opentelemetry/semantic-conventions\");\r\nvar Constants = require(\"../../Declarations/Constants\");\r\nvar EventHub_1 = require(\"./Azure/EventHub\");\r\nvar Util = require(\"../../Library/Util\");\r\nfunction createPropertiesFromSpan(span) {\r\n    var properties = {};\r\n    for (var _i = 0, _a = Object.keys(span.attributes); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        if (!(key.startsWith(\"http.\") ||\r\n            key.startsWith(\"rpc.\") ||\r\n            key.startsWith(\"db.\") ||\r\n            key.startsWith(\"peer.\") ||\r\n            key.startsWith(\"net.\"))) {\r\n            properties[key] = span.attributes[key];\r\n        }\r\n    }\r\n    var links = span.links.map(function (link) { return ({\r\n        operation_Id: link.context.traceId,\r\n        id: link.context.spanId\r\n    }); });\r\n    if (links.length > 0) {\r\n        properties[\"_MS.links\"] = Util.stringify(links);\r\n    }\r\n    return properties;\r\n}\r\nfunction isSqlDB(dbSystem) {\r\n    return (dbSystem === semantic_conventions_1.DbSystemValues.DB2 ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.DERBY ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.MARIADB ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.MSSQL ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.ORACLE ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.SQLITE ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.OTHER_SQL ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.HSQLDB ||\r\n        dbSystem === semantic_conventions_1.DbSystemValues.H2);\r\n}\r\nfunction getUrl(span) {\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    if (httpMethod) {\r\n        var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n        if (httpUrl) {\r\n            return String(httpUrl);\r\n        }\r\n        else {\r\n            var httpScheme = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_SCHEME];\r\n            var httpTarget = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_TARGET];\r\n            if (httpScheme && httpTarget) {\r\n                var httpHost = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_HOST];\r\n                if (httpHost) {\r\n                    return httpScheme + \"://\" + httpHost + httpTarget;\r\n                }\r\n                else {\r\n                    var netPeerPort = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_PORT];\r\n                    if (netPeerPort) {\r\n                        var netPeerName = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME];\r\n                        if (netPeerName) {\r\n                            return httpScheme + \"://\" + netPeerName + \":\" + netPeerPort + httpTarget;\r\n                        }\r\n                        else {\r\n                            var netPeerIp = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_IP];\r\n                            if (netPeerIp) {\r\n                                return httpScheme + \"://\" + netPeerIp + \":\" + netPeerPort + httpTarget;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return \"\";\r\n}\r\nfunction getDependencyTarget(span) {\r\n    var peerService = span.attributes[semantic_conventions_1.SemanticAttributes.PEER_SERVICE];\r\n    var httpHost = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_HOST];\r\n    var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n    var netPeerName = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_NAME];\r\n    var netPeerIp = span.attributes[semantic_conventions_1.SemanticAttributes.NET_PEER_IP];\r\n    if (peerService) {\r\n        return String(peerService);\r\n    }\r\n    else if (httpHost) {\r\n        return String(httpHost);\r\n    }\r\n    else if (httpUrl) {\r\n        return String(httpUrl);\r\n    }\r\n    else if (netPeerName) {\r\n        return String(netPeerName);\r\n    }\r\n    else if (netPeerIp) {\r\n        return String(netPeerIp);\r\n    }\r\n    return \"\";\r\n}\r\nfunction createDependencyData(span) {\r\n    var remoteDependency = {\r\n        name: span.name,\r\n        success: span.status.code != api_1.SpanStatusCode.ERROR,\r\n        resultCode: \"0\",\r\n        duration: 0,\r\n        data: \"\",\r\n        dependencyTypeName: \"\"\r\n    };\r\n    if (span.kind === api_1.SpanKind.PRODUCER) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.QueueMessage;\r\n    }\r\n    if (span.kind === api_1.SpanKind.INTERNAL && span.parentSpanId) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.InProc;\r\n    }\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    var dbSystem = span.attributes[semantic_conventions_1.SemanticAttributes.DB_SYSTEM];\r\n    var rpcSystem = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_SYSTEM];\r\n    // HTTP Dependency\r\n    if (httpMethod) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.Http;\r\n        var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n        if (httpUrl) {\r\n            var pathName = \"\";\r\n            try {\r\n                var dependencyUrl = new url_1.URL(String(httpUrl));\r\n                pathName = dependencyUrl.pathname;\r\n            }\r\n            catch (ex) {\r\n                // Ignore error\r\n            }\r\n            remoteDependency.name = httpMethod + \" \" + pathName;\r\n        }\r\n        remoteDependency.data = getUrl(span);\r\n        var httpStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_STATUS_CODE];\r\n        if (httpStatusCode) {\r\n            remoteDependency.resultCode = String(httpStatusCode);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        if (target) {\r\n            try {\r\n                // Remove default port\r\n                var portRegex = new RegExp(/(https?)(:\\/\\/.*)(:\\d+)(\\S*)/);\r\n                var res = portRegex.exec(target);\r\n                if (res != null) {\r\n                    var protocol = res[1];\r\n                    var port = res[3];\r\n                    if ((protocol == \"https\" && port == \":443\") || (protocol == \"http\" && port == \":80\")) {\r\n                        // Drop port\r\n                        target = res[1] + res[2] + res[4];\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                // Ignore error\r\n            }\r\n            remoteDependency.target = \"\" + target;\r\n        }\r\n    }\r\n    // DB Dependency\r\n    else if (dbSystem) {\r\n        // TODO: Remove special logic when Azure UX supports OpenTelemetry dbSystem\r\n        if (String(dbSystem) === semantic_conventions_1.DbSystemValues.MYSQL) {\r\n            remoteDependency.dependencyTypeName = \"mysql\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.POSTGRESQL) {\r\n            remoteDependency.dependencyTypeName = \"postgresql\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.MONGODB) {\r\n            remoteDependency.dependencyTypeName = \"mongodb\";\r\n        }\r\n        else if (String(dbSystem) === semantic_conventions_1.DbSystemValues.REDIS) {\r\n            remoteDependency.dependencyTypeName = \"redis\";\r\n        }\r\n        else if (isSqlDB(String(dbSystem))) {\r\n            remoteDependency.dependencyTypeName = \"SQL\";\r\n        }\r\n        else {\r\n            remoteDependency.dependencyTypeName = String(dbSystem);\r\n        }\r\n        var dbStatement = span.attributes[semantic_conventions_1.SemanticAttributes.DB_STATEMENT];\r\n        var dbOperation = span.attributes[semantic_conventions_1.SemanticAttributes.DB_OPERATION];\r\n        if (dbStatement) {\r\n            remoteDependency.data = String(dbStatement);\r\n        }\r\n        else if (dbOperation) {\r\n            remoteDependency.data = String(dbOperation);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        var dbName = span.attributes[semantic_conventions_1.SemanticAttributes.DB_NAME];\r\n        if (target) {\r\n            remoteDependency.target = dbName ? target + \"|\" + dbName : \"\" + target;\r\n        }\r\n        else {\r\n            remoteDependency.target = dbName ? \"\" + dbName : \"\" + dbSystem;\r\n        }\r\n    }\r\n    // grpc Dependency\r\n    else if (rpcSystem) {\r\n        remoteDependency.dependencyTypeName = Constants.DependencyTypeName.Grpc;\r\n        var grpcStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_GRPC_STATUS_CODE];\r\n        if (grpcStatusCode) {\r\n            remoteDependency.resultCode = String(grpcStatusCode);\r\n        }\r\n        var target = getDependencyTarget(span);\r\n        if (target) {\r\n            remoteDependency.target = \"\" + target;\r\n        }\r\n        else if (rpcSystem) {\r\n            remoteDependency.target = String(rpcSystem);\r\n        }\r\n    }\r\n    return remoteDependency;\r\n}\r\nfunction createRequestData(span) {\r\n    var requestData = {\r\n        name: span.name,\r\n        success: span.status.code != api_1.SpanStatusCode.ERROR,\r\n        resultCode: \"0\",\r\n        duration: 0,\r\n        url: \"\",\r\n        source: undefined\r\n    };\r\n    var httpMethod = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_METHOD];\r\n    var grpcStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.RPC_GRPC_STATUS_CODE];\r\n    if (httpMethod) {\r\n        // Try to get request name for server spans\r\n        if (span.kind == api_1.SpanKind.SERVER) {\r\n            var httpRoute = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_ROUTE];\r\n            var httpUrl = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_URL];\r\n            if (httpRoute) {\r\n                requestData.name = httpMethod + \" \" + httpRoute;\r\n            }\r\n            else if (httpUrl) {\r\n                try {\r\n                    var url = new url_1.URL(String(httpUrl));\r\n                    requestData.name = httpMethod + \" \" + url.pathname;\r\n                }\r\n                catch (ex) {\r\n                    // Ignore error\r\n                }\r\n            }\r\n        }\r\n        requestData.url = getUrl(span);\r\n        var httpStatusCode = span.attributes[semantic_conventions_1.SemanticAttributes.HTTP_STATUS_CODE];\r\n        if (httpStatusCode) {\r\n            requestData.resultCode = String(httpStatusCode);\r\n        }\r\n    }\r\n    else if (grpcStatusCode) {\r\n        requestData.resultCode = String(grpcStatusCode);\r\n    }\r\n    return requestData;\r\n}\r\nfunction spanToTelemetryContract(span) {\r\n    var telemetry;\r\n    switch (span.kind) {\r\n        case api_1.SpanKind.CLIENT:\r\n        case api_1.SpanKind.PRODUCER:\r\n        case api_1.SpanKind.INTERNAL:\r\n            telemetry = createDependencyData(span);\r\n            break;\r\n        case api_1.SpanKind.SERVER:\r\n        case api_1.SpanKind.CONSUMER:\r\n            telemetry = createRequestData(span);\r\n            break;\r\n    }\r\n    var spanContext = span.spanContext ? span.spanContext() : span.context(); // context is available in OT API <v0.19.0\r\n    var id = \"\" + spanContext.spanId;\r\n    var duration = Math.round(span.duration[0] * 1e3 + span.duration[1] / 1e6);\r\n    telemetry.id = id;\r\n    telemetry.duration = duration;\r\n    telemetry.properties = createPropertiesFromSpan(span);\r\n    // Azure SDK\r\n    if (span.attributes[Constants.AzNamespace]) {\r\n        if (span.kind === api_1.SpanKind.INTERNAL) {\r\n            telemetry.dependencyTypeName = Constants.DependencyTypeName.InProc + \" | \" + span.attributes[Constants.AzNamespace];\r\n        }\r\n        if (span.attributes[Constants.AzNamespace] === Constants.MicrosoftEventHub) {\r\n            EventHub_1.parseEventHubSpan(span, telemetry);\r\n        }\r\n    }\r\n    return telemetry;\r\n}\r\nexports.spanToTelemetryContract = spanToTelemetryContract;\r\n//# sourceMappingURL=SpanParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar api_1 = require(\"@opentelemetry/api\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar SpanParser = require(\"./SpanParser\");\r\nvar AsyncHooksScopeManager_1 = require(\"../AsyncHooksScopeManager\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    try {\r\n        var span_1 = event.data;\r\n        var telemetry_1 = SpanParser.spanToTelemetryContract(span_1);\r\n        AsyncHooksScopeManager_1.AsyncScopeManager.with(span_1, function () {\r\n            clients.forEach(function (client) {\r\n                if (span_1.kind === api_1.SpanKind.SERVER || span_1.kind === api_1.SpanKind.CONSUMER) {\r\n                    client.trackRequest(telemetry_1);\r\n                }\r\n                else if (span_1.kind === api_1.SpanKind.CLIENT || span_1.kind === api_1.SpanKind.INTERNAL || span_1.kind === api_1.SpanKind.PRODUCER) {\r\n                    client.trackDependency(telemetry_1);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    catch (err) {\r\n        { /** ignore errors */ }\r\n    }\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"azure-coretracing\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.AZURE_CORE_TRACING);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"azure-coretracing\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=azure-coretracing.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical\r\n};\r\nvar subscriber = function (event) {\r\n    var message = event.data.result;\r\n    var AIlevel = bunyanToAILevelMap[event.data.level];\r\n    clients.forEach(function (client) {\r\n        try {\r\n            // Try to parse message as Bunyan log is JSON\r\n            var log = JSON.parse(message);\r\n            if (log.err) {\r\n                var bunyanError = new Error(log.err.message);\r\n                bunyanError.name = log.err.name;\r\n                bunyanError.stack = log.err.stack;\r\n                if (client.config.enableLoggerErrorToTrace) {\r\n                    client.trackTrace({ message: message, severity: AIlevel });\r\n                    return;\r\n                }\r\n                client.trackException({ exception: bunyanError });\r\n                return;\r\n            }\r\n        }\r\n        catch (err) {\r\n            // Ignore error\r\n        }\r\n        client.trackTrace({ message: message, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.BUNYAN);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    var message = event.data.message;\r\n    clients.forEach(function (client) {\r\n        if (message instanceof Error && !client.config.enableLoggerErrorToTrace) {\r\n            client.trackException({ exception: message });\r\n        }\r\n        else if (message instanceof Error) {\r\n            // If logging errors as traces return the error as a string and mark severity as error\r\n            client.trackTrace({ message: message.toString(), severity: (event.data.stderr ? Contracts_1.SeverityLevel.Error : Contracts_1.SeverityLevel.Information) });\r\n        }\r\n        else {\r\n            // Message can have a trailing newline\r\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n                message = message.substring(0, message.length - 1);\r\n            }\r\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n        }\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.CONSOLE);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.registerContextPreservation = exports.IsInitialized = void 0;\r\nvar Logging = require(\"../../Library/Logging\");\r\nvar JsonConfig_1 = require(\"../../Library/JsonConfig\");\r\nexports.IsInitialized = !JsonConfig_1.JsonConfig.getInstance().noDiagnosticChannel;\r\nvar TAG = \"DiagnosticChannel\";\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = JsonConfig_1.JsonConfig.getInstance().noPatchModules;\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston,\r\n        azuresdk: publishers.azuresdk\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\r\n        }\r\n    }\r\n    if (unpatchedModules.length > 0) {\r\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\r\n    }\r\n}\r\nelse {\r\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    var diagChannel = require(\"diagnostic-channel\");\r\n    diagChannel.channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    if (event.data.event.commandName === \"ismaster\") {\r\n        // suppress noisy ismaster commands\r\n        return;\r\n    }\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            time: event.data.startedData.time,\r\n            dependencyTypeName: \"mongodb\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.MONGODB);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.MYSQL);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.POSTGRES);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.subscriber = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            time: event.data.time,\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nexports.subscriber = subscriber;\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.REDIS);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.enable = void 0;\r\nvar Constants_1 = require(\"../../Declarations/Constants\");\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    var message = event.data.message;\r\n    var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n    clients.forEach(function (client) {\r\n        if (message instanceof Error && !client.config.enableLoggerErrorToTrace) {\r\n            client.trackException({\r\n                exception: message,\r\n                properties: event.data.meta\r\n            });\r\n        }\r\n        else if (message instanceof Error) {\r\n            client.trackTrace({\r\n                message: message.toString(),\r\n                severity: AIlevel,\r\n                properties: event.data.meta\r\n            });\r\n        }\r\n        else {\r\n            client.trackTrace({\r\n                message: message,\r\n                severity: AIlevel,\r\n                properties: event.data.meta\r\n            });\r\n        }\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        var clientFound = clients.find(function (c) { return c == client; });\r\n        if (clientFound) {\r\n            return;\r\n        }\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber, diagnostic_channel_1.trueFilter, function (module, version) {\r\n                var statsbeat = client.getStatsbeat();\r\n                if (statsbeat) {\r\n                    statsbeat.addInstrumentation(Constants_1.StatsbeatInstrumentation.WINSTON);\r\n                }\r\n            });\r\n        }\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\nfunction dispose() {\r\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n    clients = [];\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WEB_INSTRUMENTATION_DEPRECATED_SOURCE = exports.WEB_INSTRUMENTATION_DEFAULT_SOURCE = exports.TIME_SINCE_ENQUEUED = exports.ENQUEUED_TIME = exports.MessageBusDestination = exports.MicrosoftEventHub = exports.AzNamespace = exports.StatsbeatNetworkCategory = exports.StatsbeatFeatureType = exports.StatsbeatInstrumentation = exports.StatsbeatFeature = exports.StatsbeatCounter = exports.StatsbeatAttach = exports.StatsbeatResourceProvider = exports.StatsbeatTelemetryName = exports.HeartBeatMetricName = exports.DependencyTypeName = exports.TelemetryTypeStringToQuickPulseDocumentType = exports.TelemetryTypeStringToQuickPulseType = exports.QuickPulseType = exports.QuickPulseDocumentType = exports.PerformanceToQuickPulseCounter = exports.MetricId = exports.PerformanceCounter = exports.QuickPulseCounter = exports.DEFAULT_LIVEMETRICS_HOST = exports.DEFAULT_LIVEMETRICS_ENDPOINT = exports.DEFAULT_BREEZE_ENDPOINT = exports.APPLICATION_INSIGHTS_SDK_VERSION = void 0;\r\nexports.APPLICATION_INSIGHTS_SDK_VERSION = \"2.7.3\";\r\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\r\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\r\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\r\nvar QuickPulseCounter;\r\n(function (QuickPulseCounter) {\r\n    // Memory\r\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\r\n    // CPU\r\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    // Request\r\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\r\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\r\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\r\n    // Dependency\r\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\r\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\r\n    // Exception\r\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\r\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\r\nvar PerformanceCounter;\r\n(function (PerformanceCounter) {\r\n    // Memory\r\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\r\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\r\n    // CPU\r\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\r\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\r\n    // Requests\r\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\r\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\r\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\r\nvar MetricId;\r\n(function (MetricId) {\r\n    MetricId[\"REQUESTS_DURATION\"] = \"requests/duration\";\r\n    MetricId[\"DEPENDENCIES_DURATION\"] = \"dependencies/duration\";\r\n    MetricId[\"EXCEPTIONS_COUNT\"] = \"exceptions/count\";\r\n    MetricId[\"TRACES_COUNT\"] = \"traces/count\";\r\n})(MetricId = exports.MetricId || (exports.MetricId = {}));\r\n/**\r\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\r\n */\r\nexports.PerformanceToQuickPulseCounter = (_a = {},\r\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\r\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\r\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\r\n    // Remap quick pulse only counters\r\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\r\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\r\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\r\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\r\n    _a);\r\nexports.QuickPulseDocumentType = {\r\n    Event: \"Event\",\r\n    Exception: \"Exception\",\r\n    Trace: \"Trace\",\r\n    Metric: \"Metric\",\r\n    Request: \"Request\",\r\n    Dependency: \"RemoteDependency\",\r\n    Availability: \"Availability\",\r\n    PageView: \"PageView\"\r\n};\r\nexports.QuickPulseType = {\r\n    Event: \"EventTelemetryDocument\",\r\n    Exception: \"ExceptionTelemetryDocument\",\r\n    Trace: \"TraceTelemetryDocument\",\r\n    Metric: \"MetricTelemetryDocument\",\r\n    Request: \"RequestTelemetryDocument\",\r\n    Dependency: \"DependencyTelemetryDocument\",\r\n    Availability: \"AvailabilityTelemetryDocument\",\r\n    PageView: \"PageViewTelemetryDocument\"\r\n};\r\nexports.TelemetryTypeStringToQuickPulseType = {\r\n    EventData: exports.QuickPulseType.Event,\r\n    ExceptionData: exports.QuickPulseType.Exception,\r\n    MessageData: exports.QuickPulseType.Trace,\r\n    MetricData: exports.QuickPulseType.Metric,\r\n    RequestData: exports.QuickPulseType.Request,\r\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\r\n    AvailabilityData: exports.QuickPulseType.Availability,\r\n    PageViewData: exports.QuickPulseType.PageView\r\n};\r\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\r\n    EventData: exports.QuickPulseDocumentType.Event,\r\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\r\n    MessageData: exports.QuickPulseDocumentType.Trace,\r\n    MetricData: exports.QuickPulseDocumentType.Metric,\r\n    RequestData: exports.QuickPulseDocumentType.Request,\r\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\r\n    AvailabilityData: exports.QuickPulseDocumentType.Availability,\r\n    PageViewData: exports.QuickPulseDocumentType.PageView\r\n};\r\nexports.DependencyTypeName = {\r\n    Grpc: \"GRPC\",\r\n    Http: \"HTTP\",\r\n    InProc: \"InProc\",\r\n    Sql: \"SQL\",\r\n    QueueMessage: \"Queue Message\"\r\n};\r\nexports.HeartBeatMetricName = \"HeartbeatState\";\r\nexports.StatsbeatTelemetryName = \"Statsbeat\";\r\nexports.StatsbeatResourceProvider = {\r\n    appsvc: \"appsvc\",\r\n    functions: \"functions\",\r\n    vm: \"vm\",\r\n    unknown: \"unknown\"\r\n};\r\nexports.StatsbeatAttach = {\r\n    codeless: \"codeless\",\r\n    sdk: \"sdk\"\r\n};\r\nexports.StatsbeatCounter = {\r\n    REQUEST_SUCCESS: \"Request Success Count\",\r\n    REQUEST_FAILURE: \"Request Failure Count\",\r\n    REQUEST_DURATION: \"Request Duration\",\r\n    RETRY_COUNT: \"Retry Count\",\r\n    THROTTLE_COUNT: \"Throttle Count\",\r\n    EXCEPTION_COUNT: \"Exception Count\",\r\n    ATTACH: \"Attach\",\r\n    FEATURE: \"Feature\"\r\n};\r\nvar StatsbeatFeature;\r\n(function (StatsbeatFeature) {\r\n    StatsbeatFeature[StatsbeatFeature[\"NONE\"] = 0] = \"NONE\";\r\n    StatsbeatFeature[StatsbeatFeature[\"DISK_RETRY\"] = 1] = \"DISK_RETRY\";\r\n    StatsbeatFeature[StatsbeatFeature[\"AAD_HANDLING\"] = 2] = \"AAD_HANDLING\";\r\n    StatsbeatFeature[StatsbeatFeature[\"WEB_SNIPPET\"] = 4] = \"WEB_SNIPPET\";\r\n})(StatsbeatFeature = exports.StatsbeatFeature || (exports.StatsbeatFeature = {}));\r\nvar StatsbeatInstrumentation;\r\n(function (StatsbeatInstrumentation) {\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"NONE\"] = 0] = \"NONE\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"AZURE_CORE_TRACING\"] = 1] = \"AZURE_CORE_TRACING\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"MONGODB\"] = 2] = \"MONGODB\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"MYSQL\"] = 4] = \"MYSQL\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"REDIS\"] = 8] = \"REDIS\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"POSTGRES\"] = 16] = \"POSTGRES\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"BUNYAN\"] = 32] = \"BUNYAN\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"WINSTON\"] = 64] = \"WINSTON\";\r\n    StatsbeatInstrumentation[StatsbeatInstrumentation[\"CONSOLE\"] = 128] = \"CONSOLE\";\r\n})(StatsbeatInstrumentation = exports.StatsbeatInstrumentation || (exports.StatsbeatInstrumentation = {}));\r\nvar StatsbeatFeatureType;\r\n(function (StatsbeatFeatureType) {\r\n    StatsbeatFeatureType[StatsbeatFeatureType[\"Feature\"] = 0] = \"Feature\";\r\n    StatsbeatFeatureType[StatsbeatFeatureType[\"Instrumentation\"] = 1] = \"Instrumentation\";\r\n})(StatsbeatFeatureType = exports.StatsbeatFeatureType || (exports.StatsbeatFeatureType = {}));\r\nvar StatsbeatNetworkCategory;\r\n(function (StatsbeatNetworkCategory) {\r\n    StatsbeatNetworkCategory[StatsbeatNetworkCategory[\"Breeze\"] = 0] = \"Breeze\";\r\n    StatsbeatNetworkCategory[StatsbeatNetworkCategory[\"Quickpulse\"] = 1] = \"Quickpulse\";\r\n})(StatsbeatNetworkCategory = exports.StatsbeatNetworkCategory || (exports.StatsbeatNetworkCategory = {}));\r\n//Azure SDK Span Attributes\r\nexports.AzNamespace = \"az.namespace\";\r\nexports.MicrosoftEventHub = \"Microsoft.EventHub\";\r\nexports.MessageBusDestination = \"message_bus.destination\";\r\n/**\r\n * AI enqueued time attribute.\r\n * @internal\r\n */\r\nexports.ENQUEUED_TIME = \"enqueuedTime\";\r\n/**\r\n * AI time since enqueued attribute.\r\n * @internal\r\n */\r\nexports.TIME_SINCE_ENQUEUED = \"timeSinceEnqueued\";\r\nexports.WEB_INSTRUMENTATION_DEFAULT_SOURCE = \"https://js.monitor.azure.com/scripts/b/ai\";\r\nexports.WEB_INSTRUMENTATION_DEPRECATED_SOURCE = \"https://az416426.vo.msecnd.net/scripts/b/ai\";\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.domainSupportsProperties = exports.RemoteDependencyDataConstants = void 0;\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = /** @class */ (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain || // Do extra typechecks in case the type supports it but properties is null/undefined\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = /** @class */ (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = /** @class */ (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = /** @class */ (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = /** @class */ (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = /** @class */ (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = /** @class */ (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = /** @class */ (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = /** @class */ (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = /** @class */ (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = /** @class */ (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = /** @class */ (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = /** @class */ (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = /** @class */ (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = /** @class */ (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = /** @class */ (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = /** @class */ (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DependencyDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EnvelopeQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EventDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=ExceptionDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MessageDocumentQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MetricQuickPulse.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=RequestDocumentQuickPulse.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./MetricQuickPulse\"), exports);\r\n__exportStar(require(\"./EnvelopeQuickPulse\"), exports);\r\n__exportStar(require(\"./DocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./ExceptionDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./MessageDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./DependencyDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./RequestDocumentQuickPulse\"), exports);\r\n__exportStar(require(\"./EventDocumentQuickPulse\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=AvailabilityTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=DependencyTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EnvelopeTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=EventTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=ExceptionTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=MetricTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=NodeHttpDependencyTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=NodeHttpRequestTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=PageViewTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=RequestTelemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=Telemetry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TelemetryType = exports.TelemetryTypeString = exports.baseTypeToTelemetryType = exports.telemetryTypeToBaseType = void 0;\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n        case TelemetryType.Availability:\r\n            return \"AvailabilityData\";\r\n        case TelemetryType.PageView:\r\n            return \"PageViewData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n        case \"AvailabilityData\":\r\n            return TelemetryType.Availability;\r\n        case \"PageViewData\":\r\n            return TelemetryType.PageView;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\nexports.TelemetryTypeString = {\r\n    Event: \"EventData\",\r\n    Exception: \"ExceptionData\",\r\n    Trace: \"MessageData\",\r\n    Metric: \"MetricData\",\r\n    Request: \"RequestData\",\r\n    Dependency: \"RemoteDependencyData\",\r\n    Availability: \"AvailabilityData\",\r\n    PageView: \"PageViewData\"\r\n};\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\r\n    TelemetryType[TelemetryType[\"PageView\"] = 7] = \"PageView\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=TraceTelemetry.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./DependencyTelemetry\"), exports);\r\n__exportStar(require(\"./EventTelemetry\"), exports);\r\n__exportStar(require(\"./ExceptionTelemetry\"), exports);\r\n__exportStar(require(\"./MetricTelemetry\"), exports);\r\n__exportStar(require(\"./RequestTelemetry\"), exports);\r\n__exportStar(require(\"./TraceTelemetry\"), exports);\r\n__exportStar(require(\"./Telemetry\"), exports);\r\n__exportStar(require(\"./NodeHttpDependencyTelemetry\"), exports);\r\n__exportStar(require(\"./NodeHttpRequestTelemetry\"), exports);\r\n__exportStar(require(\"./AvailabilityTelemetry\"), exports);\r\n__exportStar(require(\"./PageViewTelemetry\"), exports);\r\n__exportStar(require(\"./EnvelopeTelemetry\"), exports);\r\n__exportStar(require(\"./TelemetryType\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Constants\"), exports);\r\n__exportStar(require(\"./Generated\"), exports);\r\n__exportStar(require(\"./TelemetryTypes\"), exports);\r\n__exportStar(require(\"./QuickPulseTypes\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AggregatedMetricCounter = void 0;\r\nvar AggregatedMetricCounter = /** @class */ (function () {\r\n    function AggregatedMetricCounter(dimensions) {\r\n        this.dimensions = dimensions;\r\n        this.totalCount = 0;\r\n        this.lastTotalCount = 0;\r\n        this.intervalExecutionTime = 0;\r\n        this.lastTime = +new Date;\r\n        this.lastIntervalExecutionTime = 0;\r\n    }\r\n    return AggregatedMetricCounter;\r\n}());\r\nexports.AggregatedMetricCounter = AggregatedMetricCounter;\r\n//# sourceMappingURL=AggregatedMetricCounters.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PreaggregatedMetricPropertyNames = void 0;\r\n// Names expected in Breeze side for dimensions\r\nexports.PreaggregatedMetricPropertyNames = {\r\n    cloudRoleInstance: \"cloud/roleInstance\",\r\n    cloudRoleName: \"cloud/roleName\",\r\n    operationSynthetic: \"operation/synthetic\",\r\n    requestSuccess: \"Request.Success\",\r\n    requestResultCode: \"request/resultCode\",\r\n    dependencyType: \"Dependency.Type\",\r\n    dependencyTarget: \"dependency/target\",\r\n    dependencySuccess: \"Dependency.Success\",\r\n    dependencyResultCode: \"dependency/resultCode\",\r\n    traceSeverityLevel: \"trace/severityLevel\"\r\n};\r\n//# sourceMappingURL=AggregatedMetricDimensions.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar azureCore = require(\"@azure/core-rest-pipeline\");\r\nvar applicationInsightsResource = \"https://monitor.azure.com//.default\";\r\nfunction emptySendRequest(_request) {\r\n    return null;\r\n}\r\nvar AuthorizationHandler = /** @class */ (function () {\r\n    function AuthorizationHandler(credential) {\r\n        var scopes = [applicationInsightsResource];\r\n        this._azureTokenPolicy = azureCore.bearerTokenAuthenticationPolicy({ credential: credential, scopes: scopes });\r\n    }\r\n    /**\r\n    * Applies the Bearer token to the request through the Authorization header.\r\n    */\r\n    AuthorizationHandler.prototype.addAuthorizationHeader = function (requestOptions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var authHeaderName, webResource;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        authHeaderName = \"authorization\";\r\n                        webResource = azureCore.createPipelineRequest({ url: \"https://\" });\r\n                        return [4 /*yield*/, this._azureTokenPolicy.sendRequest(webResource, emptySendRequest)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        requestOptions.headers[authHeaderName] = webResource.headers.get(authHeaderName);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return AuthorizationHandler;\r\n}());\r\nmodule.exports = AuthorizationHandler;\r\n//# sourceMappingURL=AuthorizationHandler.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AzureVirtualMachine = void 0;\r\nvar Logging = require(\"./Logging\");\r\nvar Util = require(\"./Util\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar AIMS_URI = \"http://169.254.169.254/metadata/instance/compute\";\r\nvar AIMS_API_VERSION = \"api-version=2017-12-01\";\r\nvar AIMS_FORMAT = \"format=json\";\r\nvar ConnectionErrorMessage = \"UNREACH\"; // EHOSTUNREACH, ENETUNREACH\r\nvar AzureVirtualMachine = /** @class */ (function () {\r\n    function AzureVirtualMachine() {\r\n    }\r\n    AzureVirtualMachine.getAzureComputeMetadata = function (config, callback) {\r\n        var _a;\r\n        var _this = this;\r\n        var vmInfo = {};\r\n        var metadataRequestUrl = AIMS_URI + \"?\" + AIMS_API_VERSION + \"&\" + AIMS_FORMAT;\r\n        var requestOptions = (_a = {\r\n                method: \"GET\"\r\n            },\r\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\r\n            _a.headers = {\r\n                \"Metadata\": \"True\"\r\n            },\r\n            _a);\r\n        var req = Util.makeRequest(config, metadataRequestUrl, requestOptions, function (res) {\r\n            if (res.statusCode === 200) {\r\n                // Success; VM\r\n                vmInfo.isVM = true;\r\n                var virtualMachineData_1 = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    virtualMachineData_1 += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    try {\r\n                        var data = JSON.parse(virtualMachineData_1);\r\n                        vmInfo.id = data[\"vmId\"] || \"\";\r\n                        vmInfo.subscriptionId = data[\"subscriptionId\"] || \"\";\r\n                        vmInfo.osType = data[\"osType\"] || \"\";\r\n                    }\r\n                    catch (error) {\r\n                        // Failed to parse JSON\r\n                        Logging.info(AzureVirtualMachine.TAG, error);\r\n                    }\r\n                    callback(vmInfo);\r\n                });\r\n            }\r\n            else {\r\n                callback(vmInfo);\r\n            }\r\n        }, false, false);\r\n        if (req) {\r\n            setTimeout(function () {\r\n                _this._requestTimedOut = true;\r\n                req.abort();\r\n            }, AzureVirtualMachine.HTTP_TIMEOUT);\r\n            req.on(\"error\", function (error) {\r\n                // Unable to contact endpoint.\r\n                // Do nothing for now.\r\n                if (_this._requestTimedOut) {\r\n                    if (error) {\r\n                        error.name = \"telemetry timeout\";\r\n                        error.message = \"telemetry request timed out\";\r\n                    }\r\n                }\r\n                if (error && error.message && error.message.indexOf(ConnectionErrorMessage) > -1) {\r\n                    vmInfo.isVM = false; // confirm it's not in VM\r\n                }\r\n                else {\r\n                    // Only log when is not determined if VM or not to avoid noise outside of Azure VMs\r\n                    Logging.info(AzureVirtualMachine.TAG, error);\r\n                }\r\n                callback(vmInfo);\r\n            });\r\n            req.end();\r\n        }\r\n    };\r\n    AzureVirtualMachine.HTTP_TIMEOUT = 2500; // 2.5 seconds\r\n    AzureVirtualMachine.TAG = \"AzureVirtualMachine\";\r\n    return AzureVirtualMachine;\r\n}());\r\nexports.AzureVirtualMachine = AzureVirtualMachine;\r\n//# sourceMappingURL=AzureVirtualMachine.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Util = require(\"./Util\");\r\nvar Channel = /** @class */ (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occurred while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(envelope);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // invoke send\r\n            if (isNodeCrashing || Util.isNodeExit) {\r\n                this._sender.saveOnCrash(this._buffer);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(this._buffer, callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer = [];\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\r\nvar Logging = require(\"./Logging\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar url = require(\"url\");\r\nvar JsonConfig_1 = require(\"./JsonConfig\");\r\nvar Config = /** @class */ (function () {\r\n    function Config(setupString) {\r\n        this._endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\r\n        // Load config values from env variables and JSON if available\r\n        this._mergeConfig();\r\n        var connectionStringEnv = this._connectionString;\r\n        var csCode = ConnectionStringParser.parse(setupString);\r\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\r\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\r\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\r\n            : setupString; // CS was invalid, so it must be an ikey\r\n        var instrumentationKeyEnv = this._instrumentationKey;\r\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || instrumentationKeyEnv;\r\n        var endpoint = \"\" + (this.endpointUrl || csCode.ingestionendpoint || csEnv.ingestionendpoint || this._endpointBase);\r\n        if (endpoint.endsWith(\"/\")) {\r\n            // Remove extra '/' if present\r\n            endpoint = endpoint.slice(0, -1);\r\n        }\r\n        this.endpointUrl = endpoint + \"/v2.1/track\";\r\n        this.maxBatchSize = this.maxBatchSize || 250;\r\n        this.maxBatchIntervalMs = this.maxBatchIntervalMs || 15000;\r\n        this.disableAppInsights = this.disableAppInsights || false;\r\n        this.samplingPercentage = this.samplingPercentage || 100;\r\n        this.correlationIdRetryIntervalMs = this.correlationIdRetryIntervalMs || 30 * 1000;\r\n        this.enableWebInstrumentation = this.enableWebInstrumentation || this.enableAutoWebSnippetInjection || false;\r\n        this.webInstrumentationConfig = this.webInstrumentationConfig || null;\r\n        this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n        this.correlationHeaderExcludedDomains =\r\n            this.correlationHeaderExcludedDomains ||\r\n                [\r\n                    \"*.core.windows.net\",\r\n                    \"*.core.chinacloudapi.cn\",\r\n                    \"*.core.cloudapi.de\",\r\n                    \"*.core.usgovcloudapi.net\",\r\n                    \"*.core.microsoft.scloud\",\r\n                    \"*.core.eaglex.ic.gov\"\r\n                ];\r\n        this.ignoreLegacyHeaders = this.ignoreLegacyHeaders || false;\r\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this._endpointBase;\r\n        this.quickPulseHost = this.quickPulseHost || csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\r\n        this.webInstrumentationConnectionString = this.webInstrumentationConnectionString || this._webInstrumentationConnectionString || \"\";\r\n        this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n        // Parse quickPulseHost if it starts with http(s)://\r\n        if (this.quickPulseHost.match(/^https?:\\/\\//)) {\r\n            this.quickPulseHost = new url.URL(this.quickPulseHost).host;\r\n        }\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"instrumentationKey\", {\r\n        get: function () {\r\n            return this._instrumentationKey;\r\n        },\r\n        set: function (iKey) {\r\n            if (!Config._validateInstrumentationKey(iKey)) {\r\n                Logging.warn(\"An invalid instrumentation key was provided. There may be resulting telemetry loss\", this.instrumentationKey);\r\n            }\r\n            this._instrumentationKey = iKey;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"webSnippetConnectionString\", {\r\n        get: function () {\r\n            return this._webInstrumentationConnectionString;\r\n        },\r\n        set: function (connectionString) {\r\n            this._webInstrumentationConnectionString = connectionString;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Config.prototype, \"webInstrumentationConnectionString\", {\r\n        get: function () {\r\n            return this._webInstrumentationConnectionString;\r\n        },\r\n        set: function (connectionString) {\r\n            this._webInstrumentationConnectionString = connectionString;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Config.prototype._mergeConfig = function () {\r\n        var jsonConfig = JsonConfig_1.JsonConfig.getInstance();\r\n        this._connectionString = jsonConfig.connectionString;\r\n        this._instrumentationKey = jsonConfig.instrumentationKey;\r\n        this.correlationHeaderExcludedDomains = jsonConfig.correlationHeaderExcludedDomains;\r\n        this.correlationIdRetryIntervalMs = jsonConfig.correlationIdRetryIntervalMs;\r\n        this.disableAllExtendedMetrics = jsonConfig.disableAllExtendedMetrics;\r\n        this.disableAppInsights = jsonConfig.disableAppInsights;\r\n        this.disableStatsbeat = jsonConfig.disableStatsbeat;\r\n        this.distributedTracingMode = jsonConfig.distributedTracingMode;\r\n        this.enableAutoCollectConsole = jsonConfig.enableAutoCollectConsole;\r\n        this.enableLoggerErrorToTrace = jsonConfig.enableLoggerErrorToTrace;\r\n        this.enableAutoCollectDependencies = jsonConfig.enableAutoCollectDependencies;\r\n        this.enableAutoCollectIncomingRequestAzureFunctions = jsonConfig.enableAutoCollectIncomingRequestAzureFunctions;\r\n        this.enableAutoCollectExceptions = jsonConfig.enableAutoCollectExceptions;\r\n        this.enableAutoCollectExtendedMetrics = jsonConfig.enableAutoCollectExtendedMetrics;\r\n        this.enableAutoCollectExternalLoggers = jsonConfig.enableAutoCollectExternalLoggers;\r\n        this.enableAutoCollectHeartbeat = jsonConfig.enableAutoCollectHeartbeat;\r\n        this.enableAutoCollectPerformance = jsonConfig.enableAutoCollectPerformance;\r\n        this.enableAutoCollectPreAggregatedMetrics = jsonConfig.enableAutoCollectPreAggregatedMetrics;\r\n        this.enableAutoCollectRequests = jsonConfig.enableAutoCollectRequests;\r\n        this.enableAutoDependencyCorrelation = jsonConfig.enableAutoDependencyCorrelation;\r\n        this.enableInternalDebugLogging = jsonConfig.enableInternalDebugLogging;\r\n        this.enableInternalWarningLogging = jsonConfig.enableInternalWarningLogging;\r\n        this.enableResendInterval = jsonConfig.enableResendInterval;\r\n        this.enableMaxBytesOnDisk = jsonConfig.enableMaxBytesOnDisk;\r\n        this.enableSendLiveMetrics = jsonConfig.enableSendLiveMetrics;\r\n        this.enableUseAsyncHooks = jsonConfig.enableUseAsyncHooks;\r\n        this.enableUseDiskRetryCaching = jsonConfig.enableUseDiskRetryCaching;\r\n        this.endpointUrl = jsonConfig.endpointUrl;\r\n        this.extendedMetricDisablers = jsonConfig.extendedMetricDisablers;\r\n        this.ignoreLegacyHeaders = jsonConfig.ignoreLegacyHeaders;\r\n        this.maxBatchIntervalMs = jsonConfig.maxBatchIntervalMs;\r\n        this.maxBatchSize = jsonConfig.maxBatchSize;\r\n        this.proxyHttpUrl = jsonConfig.proxyHttpUrl;\r\n        this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n        this.quickPulseHost = jsonConfig.quickPulseHost;\r\n        this.samplingPercentage = jsonConfig.samplingPercentage;\r\n        this.enableWebInstrumentation = jsonConfig.enableWebInstrumentation;\r\n        this._webInstrumentationConnectionString = jsonConfig.webInstrumentationConnectionString;\r\n        this.webInstrumentationConfig = jsonConfig.webInstrumentationConfig;\r\n        this.webInstrumentationSrc = jsonConfig.webInstrumentationSrc;\r\n    };\r\n    /**\r\n    * Validate UUID Format\r\n    * Specs taken from breeze repo\r\n    * The definition of a VALID instrumentation key is as follows:\r\n    * Not none\r\n    * Not empty\r\n    * Every character is a hex character [0-9a-f]\r\n    * 32 characters are separated into 5 sections via 4 dashes\r\n    * First section has 8 characters\r\n    * Second section has 4 characters\r\n    * Third section has 4 characters\r\n    * Fourth section has 4 characters\r\n    * Fifth section has 12 characters\r\n    */\r\n    Config._validateInstrumentationKey = function (iKey) {\r\n        var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n        var regexp = new RegExp(UUID_Regex);\r\n        return regexp.test(iKey);\r\n    };\r\n    Config.ENV_azurePrefix = \"APPSETTING_\"; // Azure adds this prefix to all environment variables\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\"; // This key is provided in the readme\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar ConnectionStringParser = /** @class */ (function () {\r\n    function ConnectionStringParser() {\r\n    }\r\n    ConnectionStringParser.parse = function (connectionString) {\r\n        if (!connectionString) {\r\n            return {};\r\n        }\r\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\r\n        var result = kvPairs.reduce(function (fields, kv) {\r\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\r\n            if (kvParts.length === 2) { // only save fields with valid formats\r\n                var key = kvParts[0].toLowerCase();\r\n                var value = kvParts[1];\r\n                fields[key] = value;\r\n            }\r\n            return fields;\r\n        }, {});\r\n        if (Object.keys(result).length > 0) {\r\n            // this is a valid connection string, so parse the results\r\n            if (result.endpointsuffix) {\r\n                // use endpoint suffix where overrides are not provided\r\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\r\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\r\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\r\n            }\r\n            // apply the default endpoints\r\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\r\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\r\n        }\r\n        return result;\r\n    };\r\n    ConnectionStringParser.isIkeyValid = function (iKey) {\r\n        if (!iKey || iKey == \"\")\r\n            return false;\r\n        var UUID_Regex = \"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$\";\r\n        var regexp = new RegExp(UUID_Regex);\r\n        return regexp.test(iKey);\r\n    };\r\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\r\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\r\n    return ConnectionStringParser;\r\n}());\r\nmodule.exports = ConnectionStringParser;\r\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Constants_1 = require(\"../Declarations/Constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = /** @class */ (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext(packageJsonPath);\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        try {\r\n            packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n            if (!Context.appVersion[packageJsonPath]) {\r\n                Context.appVersion[packageJsonPath] = \"unknown\";\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n        }\r\n        catch (exception) {\r\n            Logging.info(\"Failed to read app version: \", exception);\r\n        }\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        var cloudRoleInstance = os && os.hostname();\r\n        var cloudRole = Context.DefaultRoleName;\r\n        // Try to get more accurate roleName and instance when running in Azure\r\n        if (process.env.WEBSITE_SITE_NAME) { // Azure Web apps and Functions\r\n            cloudRole = process.env.WEBSITE_SITE_NAME;\r\n        }\r\n        if (process.env.WEBSITE_INSTANCE_ID) {\r\n            cloudRoleInstance = process.env.WEBSITE_INSTANCE_ID;\r\n        }\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = cloudRoleInstance;\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = cloudRole;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        Context.sdkVersion = Constants_1.APPLICATION_INSIGHTS_SDK_VERSION;\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar CorrelationIdManager = /** @class */ (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        // No Op, App ID Exchange not required in SDK anymore\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        // No Op, App ID Exchange not required in SDK anymore\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == \"|\" ? parentId : \"|\" + parentId;\r\n            if (parentId[parentId.length - 1] !== \".\") {\r\n                parentId += \".\";\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, \"_\");\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf(\".\");\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === \"|\" ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return \"|\" + Util.w3cTraceId() + \".\";\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === \".\" || c === \"_\") {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = \"0\" + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + \"#\";\r\n    };\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    CorrelationIdManager.w3cEnabled = true;\r\n    CorrelationIdManager.HTTP_TIMEOUT = 2500; // 2.5 seconds\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = /** @class */ (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Availability:\r\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.PageView:\r\n                data = EnvelopeFactory.createPageViewData(telemetry);\r\n                break;\r\n        }\r\n        if (data && data.baseData) {\r\n            if (Contracts.domainSupportsProperties(data.baseData)) { // Do instanceof check. TS will automatically cast and allow the properties property\r\n                if (commonProperties) {\r\n                    // if no properties are specified just add the common ones\r\n                    if (!data.baseData.properties) {\r\n                        data.baseData.properties = commonProperties;\r\n                    }\r\n                    else {\r\n                        // otherwise, check each of the common ones\r\n                        for (var name in commonProperties) {\r\n                            // only override if the property `name` has not been set on this item\r\n                            if (!data.baseData.properties[name]) {\r\n                                data.baseData.properties[name] = commonProperties[name];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                EnvelopeFactory.addAzureFunctionsCorrelationProperties(data.baseData.properties);\r\n                if (data.baseData.properties) {\r\n                    // sanitize properties\r\n                    data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n                }\r\n            }\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.addAzureFunctionsCorrelationProperties = function (properties) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        if (correlationContext && correlationContext.customProperties && correlationContext.customProperties[\"getProperty\"] instanceof Function) {\r\n            properties = properties || {}; // Initialize properties if not present\r\n            var property = correlationContext.customProperties.getProperty(\"InvocationId\");\r\n            if (property) {\r\n                properties[\"InvocationId\"] = property;\r\n            }\r\n            property = correlationContext.customProperties.getProperty(\"ProcessId\");\r\n            if (property) {\r\n                properties[\"ProcessId\"] = property;\r\n            }\r\n            property = correlationContext.customProperties.getProperty(\"LogLevel\");\r\n            if (property) {\r\n                properties[\"LogLevel\"] = property;\r\n            }\r\n            property = correlationContext.customProperties.getProperty(\"Category\");\r\n            if (property) {\r\n                properties[\"Category\"] = property;\r\n            }\r\n            property = correlationContext.customProperties.getProperty(\"HostInstanceId\");\r\n            if (property) {\r\n                properties[\"HostInstanceId\"] = property;\r\n            }\r\n            property = correlationContext.customProperties.getProperty(\"AzFuncLiveLogsSessionId\");\r\n            if (property) {\r\n                properties[\"AzFuncLiveLogsSessionId\"] = property;\r\n            }\r\n        }\r\n    };\r\n    EnvelopeFactory.truncateProperties = function (telemetry) {\r\n        if (telemetry.properties) {\r\n            try {\r\n                var properties = {};\r\n                var propertiesKeys = Object.keys(telemetry.properties);\r\n                var propertiesValues = Object.values(telemetry.properties);\r\n                for (var i = 0; i < propertiesKeys.length; i++) {\r\n                    if (propertiesKeys[i].length <= 150) {\r\n                        if (!Util.isDate(propertiesValues[i])) {\r\n                            if (propertiesValues[i] == null) {\r\n                                propertiesValues[i] = \"\";\r\n                            }\r\n                            if (typeof (propertiesValues[i]) === \"object\") {\r\n                                propertiesValues[i] = Util.stringify(propertiesValues[i]);\r\n                            }\r\n                            properties[propertiesKeys[i]] = String(propertiesValues[i]).substring(0, 8192);\r\n                        }\r\n                        properties[propertiesKeys[i]] = propertiesValues[i];\r\n                    }\r\n                }\r\n                return properties;\r\n            }\r\n            catch (error) {\r\n                Logging.warn(\"Failed to properly truncate telemetry properties: \", error);\r\n            }\r\n        }\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var _a;\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = (_a = telemetry.message) === null || _a === void 0 ? void 0 : _a.substring(0, 32768);\r\n        trace.properties = this.truncateProperties(telemetry);\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var _a, _b, _c;\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        remoteDependency.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 1024);\r\n        remoteDependency.data = (_b = telemetry.data) === null || _b === void 0 ? void 0 : _b.substring(0, 8192);\r\n        remoteDependency.target = (_c = telemetry.target) === null || _c === void 0 ? void 0 : _c.substring(0, 1024);\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = this.truncateProperties(telemetry);\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode.toString() : \"0\");\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var _a;\r\n        var event = new Contracts.EventData();\r\n        event.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 512);\r\n        event.properties = this.truncateProperties(telemetry);\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var _a, _b;\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = this.truncateProperties(telemetry);\r\n        if (!isNaN(telemetry.severity)) {\r\n            exception.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        }\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = (_a = telemetry.exception.message) === null || _a === void 0 ? void 0 : _a.substring(0, 32768);\r\n        exceptionDetails.typeName = (_b = telemetry.exception.name) === null || _b === void 0 ? void 0 : _b.substring(0, 1024);\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var _a, _b, _c, _d;\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 1024);\r\n        requestData.url = (_b = telemetry.url) === null || _b === void 0 ? void 0 : _b.substring(0, 2048);\r\n        requestData.source = (_c = telemetry.source) === null || _c === void 0 ? void 0 : _c.substring(0, 1024);\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (_d = (telemetry.resultCode ? telemetry.resultCode.toString() : \"0\")) === null || _d === void 0 ? void 0 : _d.substring(0, 1024);\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = this.truncateProperties(telemetry);\r\n        requestData.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var _a;\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 1024);\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metric.ns = telemetry.namespace;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = this.truncateProperties(telemetry);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\r\n        var _a, _b;\r\n        var availabilityData = new Contracts.AvailabilityData();\r\n        if (telemetry.id) {\r\n            availabilityData.id = telemetry.id;\r\n        }\r\n        else {\r\n            availabilityData.id = Util.w3cTraceId();\r\n        }\r\n        availabilityData.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 1024);\r\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        availabilityData.success = telemetry.success;\r\n        availabilityData.runLocation = telemetry.runLocation;\r\n        availabilityData.message = (_b = telemetry.message) === null || _b === void 0 ? void 0 : _b.substring(0, 8192);\r\n        availabilityData.measurements = telemetry.measurements;\r\n        availabilityData.properties = this.truncateProperties(telemetry);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\r\n        data.baseData = availabilityData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createPageViewData = function (telemetry) {\r\n        var _a, _b;\r\n        var pageViewData = new Contracts.PageViewData();\r\n        pageViewData.name = (_a = telemetry.name) === null || _a === void 0 ? void 0 : _a.substring(0, 1024);\r\n        pageViewData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        pageViewData.url = (_b = telemetry.url) === null || _b === void 0 ? void 0 : _b.substring(0, 2048);\r\n        pageViewData.measurements = telemetry.measurements;\r\n        pageViewData.properties = this.truncateProperties(telemetry);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.PageView);\r\n        data.baseData = pageViewData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = /** @class */ (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^(\\s+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\n]+):(\\d+):(\\d+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FileAccessControl = void 0;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar FileAccessControl = /** @class */ (function () {\r\n    function FileAccessControl() {\r\n    }\r\n    // Check if file access control could be enabled\r\n    FileAccessControl.checkFileProtection = function () {\r\n        if (!FileAccessControl.OS_PROVIDES_FILE_PROTECTION && !FileAccessControl.OS_FILE_PROTECTION_CHECKED) {\r\n            FileAccessControl.OS_FILE_PROTECTION_CHECKED = true;\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (FileAccessControl.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    FileAccessControl.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(FileAccessControl.ICACLS_PATH);\r\n                }\r\n                catch (e) {\r\n                    // Ignore errors\r\n                }\r\n                if (!FileAccessControl.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(FileAccessControl.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                FileAccessControl.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    };\r\n    FileAccessControl.applyACLRules = function (directory) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var identity, ex_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!FileAccessControl.USE_ICACLS) return [3 /*break*/, 7];\r\n                        if (!(FileAccessControl.ACLED_DIRECTORIES[directory] === undefined)) return [3 /*break*/, 6];\r\n                        // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n                        // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n                        // This is better than the alternative of potentially infinitely spawned processes\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = false;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, this._getACLIdentity()];\r\n                    case 2:\r\n                        identity = _a.sent();\r\n                        return [4 /*yield*/, this._runICACLS(this._getACLArguments(directory, identity))];\r\n                    case 3:\r\n                        _a.sent();\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = true;\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        ex_1 = _a.sent();\r\n                        FileAccessControl.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                        throw ex_1;\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        if (!FileAccessControl.ACLED_DIRECTORIES[directory]) {\r\n                            throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n                        }\r\n                        _a.label = 7;\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl.applyACLRulesSync = function (directory) {\r\n        if (FileAccessControl.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (FileAccessControl.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                FileAccessControl.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!FileAccessControl.ACLED_DIRECTORIES[directory]) { // falsy but not undefined\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    FileAccessControl._runICACLS = function (args) {\r\n        return new Promise(function (resolve, reject) {\r\n            var aclProc = child_process.spawn(FileAccessControl.ICACLS_PATH, args, { windowsHide: true });\r\n            aclProc.on(\"error\", function (e) { return reject(e); });\r\n            aclProc.on(\"close\", function (code, signal) {\r\n                if (code === 0) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    reject(new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(FileAccessControl.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    FileAccessControl._getACLIdentity = function () {\r\n        return new Promise(function (resolve, reject) {\r\n            if (FileAccessControl.ACL_IDENTITY) {\r\n                resolve(FileAccessControl.ACL_IDENTITY);\r\n            }\r\n            var psProc = child_process.spawn(FileAccessControl.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: [\"ignore\", \"pipe\", \"pipe\"] // Needed to prevent hanging on Win 7\r\n            });\r\n            var data = \"\";\r\n            psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n            psProc.on(\"error\", function (e) { return reject(e); });\r\n            psProc.on(\"close\", function (code, signal) {\r\n                FileAccessControl.ACL_IDENTITY = data && data.trim();\r\n                if (code === 0) {\r\n                    resolve(FileAccessControl.ACL_IDENTITY);\r\n                }\r\n                else {\r\n                    reject(new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    FileAccessControl._getACLIdentitySync = function () {\r\n        if (FileAccessControl.ACL_IDENTITY) {\r\n            return FileAccessControl.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(FileAccessControl.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: [\"ignore\", \"pipe\", \"pipe\"] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            FileAccessControl.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return FileAccessControl.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    FileAccessControl._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\", // Full permission for current user\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    FileAccessControl.TAG = \"FileAccessControl\";\r\n    FileAccessControl.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    FileAccessControl.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    FileAccessControl.ACLED_DIRECTORIES = {};\r\n    FileAccessControl.ACL_IDENTITY = null;\r\n    FileAccessControl.OS_FILE_PROTECTION_CHECKED = false;\r\n    FileAccessControl.OS_PROVIDES_FILE_PROTECTION = false;\r\n    FileAccessControl.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return FileAccessControl;\r\n}());\r\nexports.FileAccessControl = FileAccessControl;\r\n//# sourceMappingURL=FileAccessControl.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getShallowFileSize = exports.getShallowDirectorySizeSync = exports.getShallowDirectorySize = exports.confirmDirExists = exports.unlinkAsync = exports.readdirAsync = exports.readFileAsync = exports.writeFileAsync = exports.appendFileAsync = exports.accessAsync = exports.mkdirAsync = exports.lstatAsync = exports.statAsync = void 0;\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar util_1 = require(\"util\");\r\nexports.statAsync = util_1.promisify(fs.stat);\r\nexports.lstatAsync = util_1.promisify(fs.lstat);\r\nexports.mkdirAsync = util_1.promisify(fs.mkdir);\r\nexports.accessAsync = util_1.promisify(fs.access);\r\nexports.appendFileAsync = util_1.promisify(fs.appendFile);\r\nexports.writeFileAsync = util_1.promisify(fs.writeFile);\r\nexports.readFileAsync = util_1.promisify(fs.readFile);\r\nexports.readdirAsync = util_1.promisify(fs.readdir);\r\nexports.unlinkAsync = util_1.promisify(fs.unlink);\r\n/**\r\n * Validate directory exists.\r\n */\r\nvar confirmDirExists = function (directory) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var stats, err_1, mkdirErr_1;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                _a.trys.push([0, 2, , 7]);\r\n                return [4 /*yield*/, exports.lstatAsync(directory)];\r\n            case 1:\r\n                stats = _a.sent();\r\n                if (!stats.isDirectory()) {\r\n                    throw new Error(\"Path existed but was not a directory\");\r\n                }\r\n                return [3 /*break*/, 7];\r\n            case 2:\r\n                err_1 = _a.sent();\r\n                if (!(err_1 && err_1.code === \"ENOENT\")) return [3 /*break*/, 6];\r\n                _a.label = 3;\r\n            case 3:\r\n                _a.trys.push([3, 5, , 6]);\r\n                return [4 /*yield*/, exports.mkdirAsync(directory)];\r\n            case 4:\r\n                _a.sent();\r\n                return [3 /*break*/, 6];\r\n            case 5:\r\n                mkdirErr_1 = _a.sent();\r\n                if (mkdirErr_1 && mkdirErr_1.code !== \"EEXIST\") {\r\n                    // Handle race condition by ignoring EEXIST\r\n                    throw mkdirErr_1;\r\n                }\r\n                return [3 /*break*/, 6];\r\n            case 6: return [3 /*break*/, 7];\r\n            case 7: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexports.confirmDirExists = confirmDirExists;\r\n/**\r\n * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n */\r\nvar getShallowDirectorySize = function (directory) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var files, totalSize, _i, files_1, file, fileStats;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, exports.readdirAsync(directory)];\r\n            case 1:\r\n                files = _a.sent();\r\n                totalSize = 0;\r\n                _i = 0, files_1 = files;\r\n                _a.label = 2;\r\n            case 2:\r\n                if (!(_i < files_1.length)) return [3 /*break*/, 5];\r\n                file = files_1[_i];\r\n                return [4 /*yield*/, exports.statAsync(path.join(directory, file))];\r\n            case 3:\r\n                fileStats = _a.sent();\r\n                if (fileStats.isFile()) {\r\n                    totalSize += fileStats.size;\r\n                }\r\n                _a.label = 4;\r\n            case 4:\r\n                _i++;\r\n                return [3 /*break*/, 2];\r\n            case 5: return [2 /*return*/, totalSize];\r\n        }\r\n    });\r\n}); };\r\nexports.getShallowDirectorySize = getShallowDirectorySize;\r\n/**\r\n* Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n*/\r\nvar getShallowDirectorySizeSync = function (directory) {\r\n    var files = fs.readdirSync(directory);\r\n    var totalSize = 0;\r\n    for (var i = 0; i < files.length; i++) {\r\n        totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n    }\r\n    return totalSize;\r\n};\r\nexports.getShallowDirectorySizeSync = getShallowDirectorySizeSync;\r\n/**\r\n* Computes the size (in bytes) of a file asynchronously.\r\n*/\r\nvar getShallowFileSize = function (filePath) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var fileStats;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, exports.statAsync(filePath)];\r\n            case 1:\r\n                fileStats = _a.sent();\r\n                if (fileStats.isFile()) {\r\n                    return [2 /*return*/, fileStats.size];\r\n                }\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nexports.getShallowFileSize = getShallowFileSize;\r\n//# sourceMappingURL=FileSystemHelper.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=Functions.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar FileSystemHelper = require(\"./FileSystemHelper\");\r\nvar InternalAzureLogger = /** @class */ (function () {\r\n    function InternalAzureLogger() {\r\n        var _this = this;\r\n        this.TAG = \"Logger\";\r\n        this._cleanupTimeOut = 60 * 30 * 1000; // 30 minutes;\r\n        this._tempDir = \"\";\r\n        this._logFileName = \"\";\r\n        this._fileFullPath = \"\";\r\n        this._backUpNameFormat = \"\";\r\n        this._logToFile = false;\r\n        this._logToConsole = true;\r\n        var logDestination = process.env.APPLICATIONINSIGHTS_LOG_DESTINATION; // destination can be one of file, console or file+console\r\n        if (logDestination == \"file+console\") {\r\n            this._logToFile = true;\r\n        }\r\n        if (logDestination == \"file\") {\r\n            this._logToFile = true;\r\n            this._logToConsole = false;\r\n        }\r\n        this.maxSizeBytes = 50000;\r\n        this.maxHistory = 1;\r\n        this._logFileName = \"applicationinsights.log\";\r\n        // If custom path not provided use temp folder, /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var logFilePath = process.env.APPLICATIONINSIGHTS_LOGDIR;\r\n        if (!logFilePath) {\r\n            this._tempDir = path.join(os.tmpdir(), \"appInsights-node\");\r\n        }\r\n        else {\r\n            if (path.isAbsolute(logFilePath)) {\r\n                this._tempDir = logFilePath;\r\n            }\r\n            else {\r\n                this._tempDir = path.join(process.cwd(), logFilePath);\r\n            }\r\n        }\r\n        this._fileFullPath = path.join(this._tempDir, this._logFileName);\r\n        this._backUpNameFormat = \".\" + this._logFileName; // {currentime}.applicationinsights.log\r\n        if (this._logToFile) {\r\n            if (!InternalAzureLogger._fileCleanupTimer) {\r\n                InternalAzureLogger._fileCleanupTimer = setInterval(function () { _this._fileCleanupTask(); }, this._cleanupTimeOut);\r\n                InternalAzureLogger._fileCleanupTimer.unref();\r\n            }\r\n        }\r\n    }\r\n    InternalAzureLogger.prototype.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        var args = message ? __spreadArrays([message], optionalParams) : optionalParams;\r\n        if (this._logToFile) {\r\n            this._storeToDisk(args);\r\n        }\r\n        if (this._logToConsole) {\r\n            console.info.apply(console, args);\r\n        }\r\n    };\r\n    InternalAzureLogger.prototype.warning = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        var args = message ? __spreadArrays([message], optionalParams) : optionalParams;\r\n        if (this._logToFile) {\r\n            this._storeToDisk(args);\r\n        }\r\n        if (this._logToConsole) {\r\n            console.warn.apply(console, args);\r\n        }\r\n    };\r\n    InternalAzureLogger.getInstance = function () {\r\n        if (!InternalAzureLogger._instance) {\r\n            InternalAzureLogger._instance = new InternalAzureLogger();\r\n        }\r\n        return InternalAzureLogger._instance;\r\n    };\r\n    InternalAzureLogger.prototype._storeToDisk = function (args) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, err_1, appendError_1, err_2, size, err_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        data = args + \"\\r\\n\";\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, FileSystemHelper.confirmDirExists(this._tempDir)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        err_1 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to create directory for log file: \" + (err_1 && err_1.message));\r\n                        return [2 /*return*/];\r\n                    case 4:\r\n                        _a.trys.push([4, 6, , 11]);\r\n                        return [4 /*yield*/, FileSystemHelper.accessAsync(this._fileFullPath, fs.constants.F_OK)];\r\n                    case 5:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 11];\r\n                    case 6:\r\n                        appendError_1 = _a.sent();\r\n                        _a.label = 7;\r\n                    case 7:\r\n                        _a.trys.push([7, 9, , 10]);\r\n                        return [4 /*yield*/, FileSystemHelper.appendFileAsync(this._fileFullPath, data)];\r\n                    case 8:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                    case 9:\r\n                        err_2 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to put log into file: \" + (appendError_1 && appendError_1.message));\r\n                        return [2 /*return*/];\r\n                    case 10: return [3 /*break*/, 11];\r\n                    case 11:\r\n                        _a.trys.push([11, 17, , 18]);\r\n                        return [4 /*yield*/, FileSystemHelper.getShallowFileSize(this._fileFullPath)];\r\n                    case 12:\r\n                        size = _a.sent();\r\n                        if (!(size > this.maxSizeBytes)) return [3 /*break*/, 14];\r\n                        return [4 /*yield*/, this._createBackupFile(data)];\r\n                    case 13:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 16];\r\n                    case 14: return [4 /*yield*/, FileSystemHelper.appendFileAsync(this._fileFullPath, data)];\r\n                    case 15:\r\n                        _a.sent();\r\n                        _a.label = 16;\r\n                    case 16: return [3 /*break*/, 18];\r\n                    case 17:\r\n                        err_3 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to create backup file: \" + (err_3 && err_3.message));\r\n                        return [3 /*break*/, 18];\r\n                    case 18: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger.prototype._createBackupFile = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var buffer, backupPath, err_4;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 3, 4, 5]);\r\n                        return [4 /*yield*/, FileSystemHelper.readFileAsync(this._fileFullPath)];\r\n                    case 1:\r\n                        buffer = _a.sent();\r\n                        backupPath = path.join(this._tempDir, new Date().getTime() + \".\" + this._logFileName);\r\n                        return [4 /*yield*/, FileSystemHelper.writeFileAsync(backupPath, buffer)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 3:\r\n                        err_4 = _a.sent();\r\n                        console.log(\"Failed to generate backup log file\", err_4);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        // Store logs\r\n                        FileSystemHelper.writeFileAsync(this._fileFullPath, data);\r\n                        return [7 /*endfinally*/];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger.prototype._fileCleanupTask = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, totalFiles, i, pathToDelete, err_5;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        // Filter only backup files\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(_this._backUpNameFormat) > -1; });\r\n                        // Sort by creation date\r\n                        files.sort(function (a, b) {\r\n                            // Check expiration\r\n                            var aCreationDate = new Date(parseInt(a.split(_this._backUpNameFormat)[0]));\r\n                            var bCreationDate = new Date(parseInt(b.split(_this._backUpNameFormat)[0]));\r\n                            if (aCreationDate < bCreationDate) {\r\n                                return -1;\r\n                            }\r\n                            if (aCreationDate >= bCreationDate) {\r\n                                return 1;\r\n                            }\r\n                        });\r\n                        totalFiles = files.length;\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < totalFiles - this.maxHistory)) return [3 /*break*/, 5];\r\n                        pathToDelete = path.join(this._tempDir, files[i]);\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(pathToDelete)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_5 = _a.sent();\r\n                        console.log(this.TAG, \"Failed to cleanup log files: \" + (err_5 && err_5.message));\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    InternalAzureLogger._fileCleanupTimer = null;\r\n    return InternalAzureLogger;\r\n}());\r\nmodule.exports = InternalAzureLogger;\r\n//# sourceMappingURL=InternalAzureLogger.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.JsonConfig = void 0;\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Logging = require(\"./Logging\");\r\nvar ENV_CONFIGURATION_FILE = \"APPLICATIONINSIGHTS_CONFIGURATION_FILE\";\r\n// Azure Connection String\r\nvar ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\r\n// Instrumentation Key\r\nvar ENV_azurePrefix = \"APPSETTING_\"; // Azure adds this prefix to all environment variables\r\nvar ENV_instrumentationKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\nvar ENV_legacyInstrumentationKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n// Native Metrics Opt Outs\r\nvar ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\r\nvar ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\r\nvar ENV_http_proxy = \"http_proxy\";\r\nvar ENV_https_proxy = \"https_proxy\";\r\nvar ENV_noDiagnosticChannel = \"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\";\r\nvar ENV_noStatsbeat = \"APPLICATION_INSIGHTS_NO_STATSBEAT\";\r\nvar ENV_noHttpAgentKeepAlive = \"APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE\";\r\nvar ENV_noPatchModules = \"APPLICATION_INSIGHTS_NO_PATCH_MODULES\";\r\nvar ENV_webInstrumentationEnable = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED\";\r\nvar ENV_webInstrumentation_connectionString = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING\";\r\nvar ENV_webInstrumentation_source = \"APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE\";\r\n// Old web instrumentation env variables are to be deprecated\r\n// Those env variables will NOT be exposed in doc after version 2.3.5\r\nvar ENV_webSnippetEnable = \"APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED\";\r\nvar ENV_webSnippet_connectionString = \"APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING\";\r\nvar JsonConfig = /** @class */ (function () {\r\n    function JsonConfig() {\r\n        // Load env variables first\r\n        this.connectionString = process.env[ENV_connectionString];\r\n        this.instrumentationKey = process.env[ENV_instrumentationKey]\r\n            || process.env[ENV_azurePrefix + ENV_instrumentationKey]\r\n            || process.env[ENV_legacyInstrumentationKey]\r\n            || process.env[ENV_azurePrefix + ENV_legacyInstrumentationKey];\r\n        if (!this.connectionString && this.instrumentationKey) {\r\n            Logging.warn(\"APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK.\");\r\n        }\r\n        this.disableAllExtendedMetrics = !!process.env[ENV_nativeMetricsDisableAll];\r\n        this.extendedMetricDisablers = process.env[ENV_nativeMetricsDisablers];\r\n        this.proxyHttpUrl = process.env[ENV_http_proxy];\r\n        this.proxyHttpsUrl = process.env[ENV_https_proxy];\r\n        this.noDiagnosticChannel = !!process.env[ENV_noDiagnosticChannel];\r\n        this.disableStatsbeat = !!process.env[ENV_noStatsbeat];\r\n        this.noHttpAgentKeepAlive = !!process.env[ENV_noHttpAgentKeepAlive];\r\n        this.noPatchModules = process.env[ENV_noPatchModules] || \"\";\r\n        this.enableWebInstrumentation = !!process.env[ENV_webInstrumentationEnable] || !!process.env[ENV_webSnippetEnable];\r\n        this.webInstrumentationSrc = process.env[ENV_webInstrumentation_source] || \"\";\r\n        this.webInstrumentationConnectionString = process.env[ENV_webInstrumentation_connectionString] || process.env[ENV_webSnippet_connectionString] || \"\";\r\n        this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n        this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n        this._loadJsonFile();\r\n    }\r\n    JsonConfig.getInstance = function () {\r\n        if (!JsonConfig._instance) {\r\n            JsonConfig._instance = new JsonConfig();\r\n        }\r\n        return JsonConfig._instance;\r\n    };\r\n    JsonConfig.prototype._loadJsonFile = function () {\r\n        var jsonString = \"\";\r\n        var contentJsonConfig = process.env[\"APPLICATIONINSIGHTS_CONFIGURATION_CONTENT\"];\r\n        // JSON string added directly in env variable\r\n        if (contentJsonConfig) {\r\n            jsonString = contentJsonConfig;\r\n        }\r\n        // JSON file\r\n        else {\r\n            var configFileName = \"applicationinsights.json\";\r\n            var rootPath = path.join(__dirname, \"../../\"); // Root of applicationinsights folder (__dirname = ../out/Library)\r\n            var tempDir = path.join(rootPath, configFileName); // default\r\n            var configFile = process.env[ENV_CONFIGURATION_FILE];\r\n            if (configFile) {\r\n                if (path.isAbsolute(configFile)) {\r\n                    tempDir = configFile;\r\n                }\r\n                else {\r\n                    tempDir = path.join(rootPath, configFile); // Relative path to applicationinsights folder\r\n                }\r\n            }\r\n            try {\r\n                jsonString = fs.readFileSync(tempDir, \"utf8\");\r\n            }\r\n            catch (err) {\r\n                Logging.info(\"Failed to read JSON config file: \", err);\r\n            }\r\n        }\r\n        try {\r\n            var jsonConfig = JSON.parse(jsonString);\r\n            if (jsonConfig.disableStatsbeat != undefined) {\r\n                this.disableStatsbeat = jsonConfig.disableStatsbeat;\r\n            }\r\n            if (jsonConfig.disableAllExtendedMetrics != undefined) {\r\n                this.disableAllExtendedMetrics = jsonConfig.disableStatsbeat;\r\n            }\r\n            if (jsonConfig.noDiagnosticChannel != undefined) {\r\n                this.noDiagnosticChannel = jsonConfig.noDiagnosticChannel;\r\n            }\r\n            if (jsonConfig.noHttpAgentKeepAlive != undefined) {\r\n                this.noHttpAgentKeepAlive = jsonConfig.noHttpAgentKeepAlive;\r\n            }\r\n            if (jsonConfig.connectionString != undefined) {\r\n                this.connectionString = jsonConfig.connectionString;\r\n            }\r\n            if (jsonConfig.extendedMetricDisablers != undefined) {\r\n                this.extendedMetricDisablers = jsonConfig.extendedMetricDisablers;\r\n            }\r\n            if (jsonConfig.noDiagnosticChannel != undefined) {\r\n                this.noDiagnosticChannel = jsonConfig.noDiagnosticChannel;\r\n            }\r\n            if (jsonConfig.proxyHttpUrl != undefined) {\r\n                this.proxyHttpUrl = jsonConfig.proxyHttpUrl;\r\n            }\r\n            if (jsonConfig.proxyHttpsUrl != undefined) {\r\n                this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n            }\r\n            if (jsonConfig.proxyHttpsUrl != undefined) {\r\n                this.proxyHttpsUrl = jsonConfig.proxyHttpsUrl;\r\n            }\r\n            if (jsonConfig.noPatchModules != undefined) {\r\n                this.noPatchModules = jsonConfig.noPatchModules;\r\n            }\r\n            if (jsonConfig.enableAutoWebSnippetInjection != undefined) {\r\n                this.enableWebInstrumentation = jsonConfig.enableAutoWebSnippetInjection;\r\n                this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n            }\r\n            if (jsonConfig.enableWebInstrumentation != undefined) {\r\n                this.enableWebInstrumentation = jsonConfig.enableWebInstrumentation;\r\n                this.enableAutoWebSnippetInjection = this.enableWebInstrumentation;\r\n            }\r\n            if (jsonConfig.webSnippetConnectionString != undefined) {\r\n                this.webInstrumentationConnectionString = jsonConfig.webSnippetConnectionString;\r\n                this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n            }\r\n            if (jsonConfig.webInstrumentationConnectionString != undefined) {\r\n                this.webInstrumentationConnectionString = jsonConfig.webInstrumentationConnectionString;\r\n                this.webSnippetConnectionString = this.webInstrumentationConnectionString;\r\n            }\r\n            if (jsonConfig.webInstrumentationConfig != undefined) {\r\n                this.webInstrumentationConfig = jsonConfig.webInstrumentationConfig;\r\n            }\r\n            if (jsonConfig.webInstrumentationSrc != undefined) {\r\n                this.webInstrumentationSrc = jsonConfig.webInstrumentationSrc;\r\n            }\r\n            if (jsonConfig.enableLoggerErrorToTrace != undefined) {\r\n                this.enableLoggerErrorToTrace = jsonConfig.enableLoggerErrorToTrace;\r\n            }\r\n            this.endpointUrl = jsonConfig.endpointUrl;\r\n            this.maxBatchSize = jsonConfig.maxBatchSize;\r\n            this.maxBatchIntervalMs = jsonConfig.maxBatchIntervalMs;\r\n            this.disableAppInsights = jsonConfig.disableAppInsights;\r\n            this.samplingPercentage = jsonConfig.samplingPercentage;\r\n            this.correlationIdRetryIntervalMs = jsonConfig.correlationIdRetryIntervalMs;\r\n            this.correlationHeaderExcludedDomains = jsonConfig.correlationHeaderExcludedDomains;\r\n            this.ignoreLegacyHeaders = jsonConfig.ignoreLegacyHeaders;\r\n            this.distributedTracingMode = jsonConfig.distributedTracingMode;\r\n            this.enableAutoCollectExternalLoggers = jsonConfig.enableAutoCollectExternalLoggers;\r\n            this.enableAutoCollectConsole = jsonConfig.enableAutoCollectConsole;\r\n            this.enableLoggerErrorToTrace = jsonConfig.enableLoggerErrorToTrace;\r\n            this.enableAutoCollectExceptions = jsonConfig.enableAutoCollectExceptions;\r\n            this.enableAutoCollectPerformance = jsonConfig.enableAutoCollectPerformance;\r\n            this.enableAutoCollectExtendedMetrics = jsonConfig.enableAutoCollectExtendedMetrics;\r\n            this.enableAutoCollectPreAggregatedMetrics = jsonConfig.enableAutoCollectPreAggregatedMetrics;\r\n            this.enableAutoCollectHeartbeat = jsonConfig.enableAutoCollectHeartbeat;\r\n            this.enableAutoCollectRequests = jsonConfig.enableAutoCollectRequests;\r\n            this.enableAutoCollectDependencies = jsonConfig.enableAutoCollectDependencies;\r\n            this.enableAutoDependencyCorrelation = jsonConfig.enableAutoDependencyCorrelation;\r\n            this.enableAutoCollectIncomingRequestAzureFunctions = jsonConfig.enableAutoCollectIncomingRequestAzureFunctions;\r\n            this.enableUseAsyncHooks = jsonConfig.enableUseAsyncHooks;\r\n            this.enableUseDiskRetryCaching = jsonConfig.enableUseDiskRetryCaching;\r\n            this.enableResendInterval = jsonConfig.enableResendInterval;\r\n            this.enableMaxBytesOnDisk = jsonConfig.enableMaxBytesOnDisk;\r\n            this.enableInternalDebugLogging = jsonConfig.enableInternalDebugLogging;\r\n            this.enableInternalWarningLogging = jsonConfig.enableInternalWarningLogging;\r\n            this.enableSendLiveMetrics = jsonConfig.enableSendLiveMetrics;\r\n            this.quickPulseHost = jsonConfig.quickPulseHost;\r\n        }\r\n        catch (err) {\r\n            Logging.info(\"Invalid JSON config file: \", err);\r\n        }\r\n    };\r\n    return JsonConfig;\r\n}());\r\nexports.JsonConfig = JsonConfig;\r\n//# sourceMappingURL=JsonConfig.js.map","\"use strict\";\r\nvar InternalAzureLogger = require(\"./InternalAzureLogger\");\r\nvar Logging = /** @class */ (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (this.enableDebug) {\r\n            InternalAzureLogger.getInstance().info(this.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this.disableWarnings) {\r\n            InternalAzureLogger.getInstance().warning(this.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = /** @class */ (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waiting for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getResourceProvider = exports.getOsPrefix = exports.isFunctionApp = exports.isWebApp = exports.isLinux = exports.isWindows = void 0;\r\nvar isWindows = function () {\r\n    return process.platform === \"win32\";\r\n};\r\nexports.isWindows = isWindows;\r\nvar isLinux = function () {\r\n    return process.platform === \"linux\";\r\n};\r\nexports.isLinux = isLinux;\r\nvar isWebApp = function () {\r\n    return process.env.WEBSITE_SITE_NAME ? true : false;\r\n};\r\nexports.isWebApp = isWebApp;\r\nvar isFunctionApp = function () {\r\n    return process.env.FUNCTIONS_WORKER_RUNTIME ? true : false;\r\n};\r\nexports.isFunctionApp = isFunctionApp;\r\n/**\r\n * Get prefix for OS\r\n * Windows system: \"w\"\r\n * Linux system: \"l\"\r\n * non-Windows and non-Linux system: \"u\" (unknown)\r\n */\r\nvar getOsPrefix = function () {\r\n    return exports.isWindows() ? \"w\" : exports.isLinux() ? \"l\" : \"u\";\r\n};\r\nexports.getOsPrefix = getOsPrefix;\r\n/**\r\n * TODO: add vm resource provider\r\n * Get prefix resource provider, vm will considered as \"unknown RP\"\r\n * Web App: \"a\"\r\n * Function App: \"f\"\r\n * non-Web and non-Function APP: \"u\" (unknown)\r\n */\r\nvar getResourceProvider = function () {\r\n    return exports.isWebApp() ? \"a\" : exports.isFunctionApp() ? \"f\" : \"u\";\r\n};\r\nexports.getResourceProvider = getResourceProvider;\r\n//# sourceMappingURL=PrefixHelper.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar os = require(\"os\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar StreamId = Util.w3cTraceId(); // Create a guid\r\nvar QuickPulseEnvelopeFactory = /** @class */ (function () {\r\n    function QuickPulseEnvelopeFactory() {\r\n    }\r\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\r\n        var machineName = (os && typeof os.hostname === \"function\"\r\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\r\n        var instance = (context.tags\r\n            && context.keys\r\n            && context.keys.cloudRoleInstance\r\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\r\n        var roleName = (context.tags\r\n            && context.keys\r\n            && context.keys.cloudRole\r\n            && context.tags[context.keys.cloudRole]) || null;\r\n        var envelope = {\r\n            Documents: documents.length > 0 ? documents : null,\r\n            InstrumentationKey: config.instrumentationKey || \"\",\r\n            Metrics: metrics.length > 0 ? metrics : null,\r\n            InvariantVersion: 1,\r\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\r\n            Version: context.tags[context.keys.internalSdkVersion],\r\n            StreamId: StreamId,\r\n            MachineName: machineName,\r\n            Instance: instance,\r\n            RoleName: roleName\r\n        };\r\n        return envelope;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\r\n        var data;\r\n        data = {\r\n            Name: telemetry.name,\r\n            Value: telemetry.value,\r\n            Weight: telemetry.count || 1\r\n        };\r\n        return data;\r\n    };\r\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\r\n        switch (envelope.data.baseType) {\r\n            case Contracts.TelemetryTypeString.Event:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Exception:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Trace:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Dependency:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\r\n            case Contracts.TelemetryTypeString.Request:\r\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\r\n        }\r\n        return null;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var name = envelope.data.baseData.name;\r\n        var eventDocument = __assign(__assign({}, document), { Name: name });\r\n        return eventDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\r\n        var traceDocument = __assign(__assign({}, document), { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\r\n        return traceDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var exceptionDetails = envelope.data.baseData.exceptions;\r\n        var exception = \"\";\r\n        var exceptionMessage = \"\";\r\n        var exceptionType = \"\";\r\n        // Try to fill exception information from first error only\r\n        if (exceptionDetails && exceptionDetails.length > 0) {\r\n            // Try to grab the stack from parsedStack or stack\r\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\r\n                exceptionDetails[0].parsedStack.forEach(function (err) {\r\n                    exception += err.assembly + \"\\n\";\r\n                });\r\n            }\r\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\r\n                exception = exceptionDetails[0].stack;\r\n            }\r\n            exceptionMessage = exceptionDetails[0].message;\r\n            exceptionType = exceptionDetails[0].typeName;\r\n        }\r\n        var exceptionDocument = __assign(__assign({}, document), { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\r\n        return exceptionDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var requestDocument = __assign(__assign({}, document), { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\r\n         });\r\n        return requestDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\r\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\r\n        var baseData = envelope.data.baseData;\r\n        var dependencyDocument = __assign(__assign({}, document), { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\r\n        return dependencyDocument;\r\n    };\r\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\r\n        var documentType;\r\n        var __type;\r\n        var operationId, properties;\r\n        if (envelope.data.baseType) {\r\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\r\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\r\n        }\r\n        else {\r\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\r\n            // valid baseType values\r\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\r\n        }\r\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\r\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\r\n        var document = {\r\n            DocumentType: documentType,\r\n            __type: __type,\r\n            OperationId: operationId,\r\n            Version: \"1.0\",\r\n            Properties: properties\r\n        };\r\n        return document;\r\n    };\r\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\r\n        var properties = [];\r\n        // Collect measurements\r\n        var meas = (envelope.data.baseData).measurements || {};\r\n        for (var key in meas) {\r\n            if (meas.hasOwnProperty(key)) {\r\n                var value = meas[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        // Collect properties\r\n        var props = (envelope.data.baseData).properties || {};\r\n        for (var key in props) {\r\n            if (props.hasOwnProperty(key)) {\r\n                var value = props[key];\r\n                var property = { key: key, value: value };\r\n                properties.push(property);\r\n            }\r\n        }\r\n        return properties;\r\n    };\r\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\r\n    return QuickPulseEnvelopeFactory;\r\n}());\r\nmodule.exports = QuickPulseEnvelopeFactory;\r\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar https = require(\"https\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\nvar QuickPulseUtil = require(\"./QuickPulseUtil\");\r\nvar Util = require(\"./Util\");\r\nvar url = require(\"url\");\r\nvar QuickPulseConfig = {\r\n    method: \"POST\",\r\n    time: \"x-ms-qps-transmission-time\",\r\n    pollingIntervalHint: \"x-ms-qps-service-polling-interval-hint\",\r\n    endpointRedirect: \"x-ms-qps-service-endpoint-redirect-v2\",\r\n    instanceName: \"x-ms-qps-instance-name\",\r\n    streamId: \"x-ms-qps-stream-id\",\r\n    machineName: \"x-ms-qps-machine-name\",\r\n    roleName: \"x-ms-qps-role-name\",\r\n    streamid: \"x-ms-qps-stream-id\",\r\n    invariantVersion: \"x-ms-qps-invariant-version\",\r\n    subscribed: \"x-ms-qps-subscribed\"\r\n};\r\nvar QuickPulseSender = /** @class */ (function () {\r\n    function QuickPulseSender(config, getAuthorizationHandler) {\r\n        this._config = config;\r\n        this._consecutiveErrors = 0;\r\n        this._getAuthorizationHandler = getAuthorizationHandler;\r\n    }\r\n    QuickPulseSender.prototype.ping = function (envelope, redirectedHostEndpoint, done) {\r\n        var pingHeaders = [\r\n            { name: QuickPulseConfig.streamId, value: envelope.StreamId },\r\n            { name: QuickPulseConfig.machineName, value: envelope.MachineName },\r\n            { name: QuickPulseConfig.roleName, value: envelope.RoleName },\r\n            { name: QuickPulseConfig.instanceName, value: envelope.Instance },\r\n            { name: QuickPulseConfig.invariantVersion, value: envelope.InvariantVersion.toString() }\r\n        ];\r\n        this._submitData(envelope, redirectedHostEndpoint, done, \"ping\", pingHeaders);\r\n    };\r\n    QuickPulseSender.prototype.post = function (envelope, redirectedHostEndpoint, done) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: \r\n                    // Important: When POSTing data, envelope must be an array\r\n                    return [4 /*yield*/, this._submitData([envelope], redirectedHostEndpoint, done, \"post\")];\r\n                    case 1:\r\n                        // Important: When POSTing data, envelope must be an array\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseSender.prototype._submitData = function (envelope, redirectedHostEndpoint, done, postOrPing, additionalHeaders) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var payload, options, authHandler, authError_1, notice, req;\r\n            var _a, _b;\r\n            var _this = this;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        payload = Util.stringify(envelope);\r\n                        options = (_a = {},\r\n                            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\r\n                            _a.host = (redirectedHostEndpoint && redirectedHostEndpoint.length > 0) ? redirectedHostEndpoint : this._config.quickPulseHost,\r\n                            _a.method = QuickPulseConfig.method,\r\n                            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\r\n                            _a.headers = (_b = {\r\n                                    \"Expect\": \"100-continue\"\r\n                                },\r\n                                _b[QuickPulseConfig.time] = QuickPulseUtil.getTransmissionTime(),\r\n                                _b[\"Content-Type\"] = \"application\\/json\",\r\n                                _b[\"Content-Length\"] = Buffer.byteLength(payload),\r\n                                _b),\r\n                            _a);\r\n                        if (additionalHeaders && additionalHeaders.length > 0) {\r\n                            additionalHeaders.forEach(function (header) { return options.headers[header.name] = header.value; });\r\n                        }\r\n                        if (!(postOrPing === \"post\")) return [3 /*break*/, 4];\r\n                        authHandler = this._getAuthorizationHandler ? this._getAuthorizationHandler(this._config) : null;\r\n                        if (!authHandler) return [3 /*break*/, 4];\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 3, , 4]);\r\n                        // Add bearer token\r\n                        return [4 /*yield*/, authHandler.addAuthorizationHeader(options)];\r\n                    case 2:\r\n                        // Add bearer token\r\n                        _c.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        authError_1 = _c.sent();\r\n                        notice = \"Failed to get AAD bearer token for the Application. Error:\";\r\n                        Logging.info(QuickPulseSender.TAG, notice, authError_1);\r\n                        // Do not send request to Quickpulse if auth fails, data will be dropped\r\n                        return [2 /*return*/];\r\n                    case 4:\r\n                        // HTTPS only\r\n                        if (this._config.httpsAgent) {\r\n                            options.agent = this._config.httpsAgent;\r\n                        }\r\n                        else {\r\n                            options.agent = Util.tlsRestrictedAgent;\r\n                        }\r\n                        req = https.request(options, function (res) {\r\n                            if (res.statusCode == 200) {\r\n                                var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\r\n                                var redirectHeader = null;\r\n                                try {\r\n                                    redirectHeader = res.headers[QuickPulseConfig.endpointRedirect] ? new url.URL(res.headers[QuickPulseConfig.endpointRedirect].toString()).host : null;\r\n                                }\r\n                                catch (error) {\r\n                                    _this._onError(\"Failed to parse redirect header from QuickPulse: \" + Util.dumpObj(error));\r\n                                }\r\n                                var pollingIntervalHint = res.headers[QuickPulseConfig.pollingIntervalHint] ? parseInt(res.headers[QuickPulseConfig.pollingIntervalHint].toString()) : null;\r\n                                _this._consecutiveErrors = 0;\r\n                                done(shouldPOSTData, res, redirectHeader, pollingIntervalHint);\r\n                            }\r\n                            else {\r\n                                _this._onError(\"StatusCode:\" + res.statusCode + \" StatusMessage:\" + res.statusMessage);\r\n                                done();\r\n                            }\r\n                        });\r\n                        req.on(\"error\", function (error) {\r\n                            _this._onError(error);\r\n                            done();\r\n                        });\r\n                        req.write(payload);\r\n                        req.end();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseSender.prototype._onError = function (error) {\r\n        // Unable to contact qps endpoint.\r\n        // Do nothing for now.\r\n        this._consecutiveErrors++;\r\n        // LOG every error, but WARN instead when X number of consecutive errors occur\r\n        var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\r\n        if (this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\r\n            notice = \"Live Metrics endpoint could not be reached \" + this._consecutiveErrors + \" consecutive times. Most recent error:\";\r\n            Logging.warn(QuickPulseSender.TAG, notice, error);\r\n        }\r\n        else {\r\n            // Potentially transient error, do not change the ping/post state yet.\r\n            Logging.info(QuickPulseSender.TAG, notice, error);\r\n        }\r\n    };\r\n    QuickPulseSender.TAG = \"QuickPulseSender\";\r\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\r\n    return QuickPulseSender;\r\n}());\r\nmodule.exports = QuickPulseSender;\r\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar Logging = require(\"./Logging\");\r\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\r\nvar QuickPulseSender = require(\"./QuickPulseSender\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar Context = require(\"./Context\");\r\n/** State Container for sending to the QuickPulse Service */\r\nvar QuickPulseStateManager = /** @class */ (function () {\r\n    function QuickPulseStateManager(config, context, getAuthorizationHandler) {\r\n        this._isCollectingData = false;\r\n        this._lastSuccessTime = Date.now();\r\n        this._lastSendSucceeded = true;\r\n        this._metrics = {};\r\n        this._documents = [];\r\n        this._collectors = [];\r\n        this._redirectedHost = null;\r\n        this._pollingIntervalHint = -1;\r\n        this.config = config;\r\n        this.context = context || new Context();\r\n        this._sender = new QuickPulseSender(this.config, getAuthorizationHandler);\r\n        this._isEnabled = false;\r\n    }\r\n    /**\r\n     *\r\n     * @param collector\r\n     */\r\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\r\n        this._collectors.push(collector);\r\n    };\r\n    /**\r\n     * Override of TelemetryClient.trackMetric\r\n     */\r\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\r\n        this._addMetric(telemetry);\r\n    };\r\n    /**\r\n     * Add a document to the current buffer\r\n     * @param envelope\r\n     */\r\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\r\n        // Only add documents in buffer when Live Metrics is collecting data\r\n        if (this._isCollectingData) {\r\n            var document_1 = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\r\n            if (document_1) {\r\n                this._documents.push(document_1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable communication with QuickPulseService\r\n     * @param isEnabled\r\n     */\r\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\r\n        if (isEnabled && !this._isEnabled) {\r\n            this._isEnabled = true;\r\n            this._goQuickPulse();\r\n        }\r\n        else if (!isEnabled && this._isEnabled) {\r\n            this._isEnabled = false;\r\n            clearTimeout(this._handle);\r\n            this._handle = undefined;\r\n        }\r\n    };\r\n    /**\r\n     * Enable or disable all collectors in this instance\r\n     * @param enable\r\n     */\r\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\r\n        this._collectors.forEach(function (collector) {\r\n            collector.enable(enable);\r\n        });\r\n    };\r\n    /**\r\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\r\n     * @param telemetry\r\n     */\r\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\r\n        var value = telemetry.value;\r\n        var count = telemetry.count || 1;\r\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\r\n        if (name) {\r\n            if (this._metrics[name]) {\r\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\r\n                this._metrics[name].Weight += count;\r\n            }\r\n            else {\r\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\r\n                this._metrics[name].Name = name;\r\n                this._metrics[name].Weight = 1;\r\n            }\r\n        }\r\n    };\r\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\r\n        delete this._metrics;\r\n        this._metrics = {};\r\n        this._documents.length = 0;\r\n    };\r\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var metrics, envelope, pingInterval, currentTimeout;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\r\n                        envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\r\n                        // Clear this document, metric buffer\r\n                        this._resetQuickPulseBuffer();\r\n                        if (!this._isCollectingData) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this._post(envelope)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        this._ping(envelope);\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        pingInterval = this._pollingIntervalHint > 0 ? this._pollingIntervalHint : QuickPulseStateManager.PING_INTERVAL;\r\n                        currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : pingInterval;\r\n                        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\r\n                            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\r\n                            this._isCollectingData = false;\r\n                            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n                        }\r\n                        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\r\n                            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\r\n                            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\r\n                        }\r\n                        this._lastSendSucceeded = null;\r\n                        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\r\n                        this._handle.unref(); // Don't block apps from terminating\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QuickPulseStateManager.prototype._ping = function (envelope) {\r\n        this._sender.ping(envelope, this._redirectedHost, this._quickPulseDone.bind(this));\r\n    };\r\n    QuickPulseStateManager.prototype._post = function (envelope) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._sender.post(envelope, this._redirectedHost, this._quickPulseDone.bind(this))];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\r\n     */\r\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res, redirectedHost, pollingIntervalHint) {\r\n        if (shouldPOST != undefined) {\r\n            if (this._isCollectingData !== shouldPOST) {\r\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\r\n                this.enableCollectors(shouldPOST);\r\n            }\r\n            this._isCollectingData = shouldPOST;\r\n            if (redirectedHost && redirectedHost.length > 0) {\r\n                this._redirectedHost = redirectedHost;\r\n                Logging.info(\"Redirecting endpoint to: \", redirectedHost);\r\n            }\r\n            if (pollingIntervalHint && pollingIntervalHint > 0) {\r\n                this._pollingIntervalHint = pollingIntervalHint;\r\n            }\r\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\r\n                this._lastSuccessTime = Date.now();\r\n                this._lastSendSucceeded = true;\r\n            }\r\n            else {\r\n                this._lastSendSucceeded = false;\r\n            }\r\n        }\r\n        else {\r\n            // Received an error, keep the state as is\r\n            this._lastSendSucceeded = false;\r\n        }\r\n    };\r\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\r\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\r\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\r\n    QuickPulseStateManager.PING_INTERVAL = 5000;\r\n    QuickPulseStateManager.POST_INTERVAL = 1000;\r\n    return QuickPulseStateManager;\r\n}());\r\nmodule.exports = QuickPulseStateManager;\r\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\r\n/**\r\n * @description UTC time the request was made. Expressed as the number of 100-nanosecond intervals that have elapsed since 12:00:00 midnight on January 1, 0001. This is used for clock skew calculations, so the value can never be stale (cached).\r\n *\r\n * @example\r\n * 8/5/2020 10:15:00 PM UTC => 637322625000000000\r\n * 8/5/2020 10:15:01 PM UTC => 637322625010000000\r\n *\r\n * @returns {number}\r\n */\r\nvar getTransmissionTime = function () {\r\n    return (Date.now() + 62135596800000) * 10000;\r\n};\r\nmodule.exports = { getTransmissionTime: getTransmissionTime };\r\n//# sourceMappingURL=QuickPulseUtil.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immediate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * across transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\",\r\n    /**\r\n     * W3C distributed tracing protocol header\r\n     */\r\n    traceparentHeader: \"traceparent\",\r\n    /**\r\n     * W3C distributed tracing protocol state header\r\n     */\r\n    traceStateHeader: \"tracestate\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar Constants = require(\"../Declarations/Constants\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar FileSystemHelper = require(\"./FileSystemHelper\");\r\nvar Util = require(\"./Util\");\r\nvar url_1 = require(\"url\");\r\nvar Logging = require(\"./Logging\");\r\nvar FileAccessControl_1 = require(\"./FileAccessControl\");\r\nvar legacyThrottleStatusCode = 439; //  - Too many requests and refresh cache\r\nvar throttleStatusCode = 402; // Monthly Quota Exceeded (new SDK)\r\nvar RESPONSE_CODES_INDICATING_REACHED_BREEZE = [200, 206, 402, 408, 429, 439, 500];\r\nvar Sender = /** @class */ (function () {\r\n    function Sender(config, getAuthorizationHandler, onSuccess, onError, statsbeat, isStatsbeatSender, shutdownStatsbeat) {\r\n        this._redirectedHost = null;\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._statsbeat = statsbeat;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        this._numConsecutiveRedirects = 0;\r\n        this._resendTimer = null;\r\n        this._getAuthorizationHandler = getAuthorizationHandler;\r\n        this._fileCleanupTimer = null;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        this._tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        this._isStatsbeatSender = isStatsbeatSender || false;\r\n        this._shutdownStatsbeat = shutdownStatsbeat;\r\n        this._failedToIngestCounter = 0;\r\n        this._statsbeatHasReachedIngestionAtLeastOnce = false;\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        var _this = this;\r\n        if (value) {\r\n            FileAccessControl_1.FileAccessControl.checkFileProtection(); // Only check file protection when disk retry is enabled\r\n        }\r\n        this._enableDiskRetryMode = FileAccessControl_1.FileAccessControl.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === \"number\" && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === \"number\" && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !FileAccessControl_1.FileAccessControl.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            this._logWarn(\"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n        if (this._enableDiskRetryMode) {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.addFeature(Constants.StatsbeatFeature.DISK_RETRY);\r\n            }\r\n            // Starts file cleanup task\r\n            if (!this._fileCleanupTimer) {\r\n                this._fileCleanupTimer = setTimeout(function () { _this._fileCleanupTask(); }, Sender.CLEANUP_TIMEOUT);\r\n                this._fileCleanupTimer.unref();\r\n            }\r\n        }\r\n        else {\r\n            if (this._statsbeat) {\r\n                this._statsbeat.removeFeature(Constants.StatsbeatFeature.DISK_RETRY);\r\n            }\r\n            if (this._fileCleanupTimer) {\r\n                clearTimeout(this._fileCleanupTimer);\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype.send = function (envelopes, callback) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var endpointUrl, endpointHost, options, authHandler, authError_1, errorMsg, batch_1, payload_1;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!envelopes) return [3 /*break*/, 5];\r\n                        endpointUrl = this._redirectedHost || this._config.endpointUrl;\r\n                        endpointHost = new url_1.URL(endpointUrl).hostname;\r\n                        options = {\r\n                            method: \"POST\",\r\n                            withCredentials: false,\r\n                            headers: {\r\n                                \"Content-Type\": \"application/x-json-stream\"\r\n                            }\r\n                        };\r\n                        authHandler = this._getAuthorizationHandler ? this._getAuthorizationHandler(this._config) : null;\r\n                        if (!authHandler) return [3 /*break*/, 4];\r\n                        if (this._statsbeat) {\r\n                            this._statsbeat.addFeature(Constants.StatsbeatFeature.AAD_HANDLING);\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        // Add bearer token\r\n                        return [4 /*yield*/, authHandler.addAuthorizationHeader(options)];\r\n                    case 2:\r\n                        // Add bearer token\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        authError_1 = _a.sent();\r\n                        errorMsg = \"Failed to get AAD bearer token for the Application.\";\r\n                        if (this._enableDiskRetryMode) {\r\n                            errorMsg += \"This batch of telemetry items will be retried. \";\r\n                            this._storeToDisk(envelopes);\r\n                        }\r\n                        errorMsg += \"Error:\" + authError_1.toString();\r\n                        this._logWarn(errorMsg);\r\n                        if (typeof callback === \"function\") {\r\n                            callback(errorMsg);\r\n                        }\r\n                        return [2 /*return*/]; // If AAD auth fails do not send to Breeze\r\n                    case 4:\r\n                        batch_1 = \"\";\r\n                        envelopes.forEach(function (envelope) {\r\n                            var payload = Util.stringify(envelope);\r\n                            if (typeof payload !== \"string\") {\r\n                                return;\r\n                            }\r\n                            batch_1 += payload + \"\\n\";\r\n                        });\r\n                        // Remove last \\n\r\n                        if (batch_1.length > 0) {\r\n                            batch_1 = batch_1.substring(0, batch_1.length - 1);\r\n                        }\r\n                        payload_1 = Buffer.from ? Buffer.from(batch_1) : new Buffer(batch_1);\r\n                        zlib.gzip(payload_1, function (err, buffer) {\r\n                            var dataToSend = buffer;\r\n                            if (err) {\r\n                                _this._logWarn(Util.dumpObj(err));\r\n                                dataToSend = payload_1; // something went wrong so send without gzip\r\n                                options.headers[\"Content-Length\"] = payload_1.length.toString();\r\n                            }\r\n                            else {\r\n                                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                                options.headers[\"Content-Length\"] = buffer.length.toString();\r\n                            }\r\n                            _this._logInfo(Util.dumpObj(options));\r\n                            // Ensure this request is not captured by auto-collection.\r\n                            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n                            var startTime = +new Date();\r\n                            var requestCallback = function (res) {\r\n                                res.setEncoding(\"utf-8\");\r\n                                //returns empty if the data is accepted\r\n                                var responseString = \"\";\r\n                                res.on(\"data\", function (data) {\r\n                                    responseString += data;\r\n                                });\r\n                                res.on(\"end\", function () {\r\n                                    var endTime = +new Date();\r\n                                    var duration = endTime - startTime;\r\n                                    _this._numConsecutiveFailures = 0;\r\n                                    // Handling of Statsbeat instance sending data, should turn it off if is not able to reach ingestion endpoint\r\n                                    if (_this._isStatsbeatSender && !_this._statsbeatHasReachedIngestionAtLeastOnce) {\r\n                                        if (RESPONSE_CODES_INDICATING_REACHED_BREEZE.includes(res.statusCode)) {\r\n                                            _this._statsbeatHasReachedIngestionAtLeastOnce = true;\r\n                                        }\r\n                                        else {\r\n                                            _this._statsbeatFailedToIngest();\r\n                                        }\r\n                                    }\r\n                                    if (_this._statsbeat) {\r\n                                        if (res.statusCode == throttleStatusCode || res.statusCode == legacyThrottleStatusCode) { // Throttle\r\n                                            _this._statsbeat.countThrottle(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, res.statusCode);\r\n                                        }\r\n                                        else {\r\n                                            _this._statsbeat.countRequest(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, duration, res.statusCode === 200, res.statusCode);\r\n                                        }\r\n                                    }\r\n                                    if (_this._enableDiskRetryMode) {\r\n                                        // try to send any cached events if the user is back online\r\n                                        if (res.statusCode === 200) {\r\n                                            if (!_this._resendTimer) {\r\n                                                _this._resendTimer = setTimeout(function () {\r\n                                                    _this._resendTimer = null;\r\n                                                    _this._sendFirstFileOnDisk();\r\n                                                }, _this._resendInterval);\r\n                                                _this._resendTimer.unref();\r\n                                            }\r\n                                        }\r\n                                        else if (_this._isRetriable(res.statusCode)) {\r\n                                            try {\r\n                                                if (_this._statsbeat) {\r\n                                                    _this._statsbeat.countRetry(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, res.statusCode);\r\n                                                }\r\n                                                var breezeResponse = JSON.parse(responseString);\r\n                                                var filteredEnvelopes_1 = [];\r\n                                                if (breezeResponse.errors) {\r\n                                                    breezeResponse.errors.forEach(function (error) {\r\n                                                        // Only retry errors if 429, 500 or 503 response codes\r\n                                                        if (error.statusCode == 429 || error.statusCode == 500 || error.statusCode == 503) {\r\n                                                            filteredEnvelopes_1.push(envelopes[error.index]);\r\n                                                        }\r\n                                                    });\r\n                                                    if (filteredEnvelopes_1.length > 0) {\r\n                                                        _this._storeToDisk(filteredEnvelopes_1);\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            catch (ex) {\r\n                                                _this._storeToDisk(envelopes); // Retriable status code with not valid Breeze response\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    // Redirect handling\r\n                                    if (res.statusCode === 307 || // Temporary Redirect\r\n                                        res.statusCode === 308) { // Permanent Redirect\r\n                                        _this._numConsecutiveRedirects++;\r\n                                        // To prevent circular redirects\r\n                                        if (_this._numConsecutiveRedirects < 10) {\r\n                                            // Try to get redirect header\r\n                                            var locationHeader = res.headers[\"location\"] ? res.headers[\"location\"].toString() : null;\r\n                                            if (locationHeader) {\r\n                                                _this._redirectedHost = locationHeader;\r\n                                                // Send to redirect endpoint as HTTPs library doesn't handle redirect automatically\r\n                                                _this.send(envelopes, callback);\r\n                                            }\r\n                                        }\r\n                                        else {\r\n                                            var circularRedirectError = { name: \"Circular Redirect\", message: \"Error sending telemetry because of circular redirects.\" };\r\n                                            if (_this._statsbeat) {\r\n                                                _this._statsbeat.countException(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, circularRedirectError);\r\n                                            }\r\n                                            if (typeof callback === \"function\") {\r\n                                                callback(\"Error sending telemetry because of circular redirects.\");\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        _this._numConsecutiveRedirects = 0;\r\n                                        if (typeof callback === \"function\") {\r\n                                            callback(responseString);\r\n                                        }\r\n                                        _this._logInfo(responseString);\r\n                                        if (typeof _this._onSuccess === \"function\") {\r\n                                            _this._onSuccess(responseString);\r\n                                        }\r\n                                    }\r\n                                });\r\n                            };\r\n                            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n                            // Needed as of Node.js v13 default timeouts on HTTP requests are no longer default\r\n                            // Timeout should trigger the request on error function to run\r\n                            req.setTimeout(Sender.HTTP_TIMEOUT, function () {\r\n                                _this._requestTimedOut = true;\r\n                                req.abort();\r\n                            });\r\n                            req.on(\"error\", function (error) {\r\n                                if (_this._isStatsbeatSender && !_this._statsbeatHasReachedIngestionAtLeastOnce) {\r\n                                    _this._statsbeatFailedToIngest();\r\n                                }\r\n                                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                                _this._numConsecutiveFailures++;\r\n                                if (_this._statsbeat) {\r\n                                    _this._statsbeat.countException(Constants.StatsbeatNetworkCategory.Breeze, endpointHost, error);\r\n                                }\r\n                                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                                // Continue informing on each failure if verbose logging is being used\r\n                                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                                    if (_this._enableDiskRetryMode) {\r\n                                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                                    }\r\n                                    _this._logWarn(notice, Util.dumpObj(error));\r\n                                }\r\n                                else {\r\n                                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                                    _this._logInfo(notice, Util.dumpObj(error));\r\n                                }\r\n                                _this._onErrorHelper(error);\r\n                                if (typeof callback === \"function\") {\r\n                                    if (error) {\r\n                                        // If the error type is a timeout we want to provide more meaningful output\r\n                                        if (_this._requestTimedOut) {\r\n                                            error.name = \"telemetry timeout\";\r\n                                            error.message = \"telemetry request timed out\";\r\n                                        }\r\n                                        callback(Util.dumpObj(error));\r\n                                    }\r\n                                    else {\r\n                                        callback(\"Error sending telemetry\");\r\n                                    }\r\n                                }\r\n                                if (_this._enableDiskRetryMode) {\r\n                                    _this._storeToDisk(envelopes);\r\n                                }\r\n                            });\r\n                            req.write(dataToSend);\r\n                            req.end();\r\n                        });\r\n                        _a.label = 5;\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (envelopes) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(Util.stringify(envelopes));\r\n        }\r\n    };\r\n    Sender.prototype._isRetriable = function (statusCode) {\r\n        return (statusCode === 206 || // Partial Accept\r\n            statusCode === 401 || // Unauthorized\r\n            statusCode === 403 || // Forbidden\r\n            statusCode === 408 || // Timeout\r\n            statusCode === 429 || // Too many requests\r\n            statusCode === 500 || // Server Error\r\n            statusCode === 502 || // Bad Gateway\r\n            statusCode === 503 || // Server Unavailable\r\n            statusCode === 504 // Gateway Timeout\r\n        );\r\n    };\r\n    Sender.prototype._logInfo = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this._isStatsbeatSender) {\r\n            Logging.info(Sender.TAG, message, optionalParams);\r\n        }\r\n    };\r\n    Sender.prototype._logWarn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!this._isStatsbeatSender) {\r\n            Logging.warn(Sender.TAG, message, optionalParams);\r\n        }\r\n    };\r\n    Sender.prototype._statsbeatFailedToIngest = function () {\r\n        if (this._shutdownStatsbeat) { // Check if callback is available\r\n            this._failedToIngestCounter++;\r\n            if (this._failedToIngestCounter >= 3) {\r\n                this._shutdownStatsbeat();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (envelopes) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var ex_1, ex_2, size, ex_3, fileName, fileFullPath, ex_4;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        this._logInfo(\"Checking existence of data storage directory: \" + this._tempDir);\r\n                        return [4 /*yield*/, FileSystemHelper.confirmDirExists(this._tempDir)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        ex_1 = _a.sent();\r\n                        this._logWarn(\"Failed to create folder to put telemetry: \" + Util.dumpObj(ex_1));\r\n                        this._onErrorHelper(ex_1);\r\n                        return [2 /*return*/];\r\n                    case 3:\r\n                        _a.trys.push([3, 5, , 6]);\r\n                        return [4 /*yield*/, FileAccessControl_1.FileAccessControl.applyACLRules(this._tempDir)];\r\n                    case 4:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        ex_2 = _a.sent();\r\n                        this._logWarn(\"Failed to apply file access control to folder: \" + Util.dumpObj(ex_2));\r\n                        this._onErrorHelper(ex_2);\r\n                        return [2 /*return*/];\r\n                    case 6:\r\n                        _a.trys.push([6, 8, , 9]);\r\n                        return [4 /*yield*/, FileSystemHelper.getShallowDirectorySize(this._tempDir)];\r\n                    case 7:\r\n                        size = _a.sent();\r\n                        if (size > this._maxBytesOnDisk) {\r\n                            this._logWarn(\"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        ex_3 = _a.sent();\r\n                        this._logWarn(\"Failed to read directory for retriable telemetry: \" + Util.dumpObj(ex_3));\r\n                        this._onErrorHelper(ex_3);\r\n                        return [2 /*return*/];\r\n                    case 9:\r\n                        _a.trys.push([9, 11, , 12]);\r\n                        fileName = new Date().getTime() + \".ai.json\";\r\n                        fileFullPath = path.join(this._tempDir, fileName);\r\n                        // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                        // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                        this._logInfo(\"saving data to disk at: \" + fileFullPath);\r\n                        return [4 /*yield*/, FileSystemHelper.writeFileAsync(fileFullPath, Util.stringify(envelopes), { mode: 384 })];\r\n                    case 10:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 12];\r\n                    case 11:\r\n                        ex_4 = _a.sent();\r\n                        this._logWarn(\"Failed to persist telemetry to disk: \" + Util.dumpObj(ex_4));\r\n                        this._onErrorHelper(ex_4);\r\n                        return [2 /*return*/];\r\n                    case 12: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        try {\r\n            this._logInfo(\"Checking existence of data storage directory: \" + this._tempDir);\r\n            if (!fs.existsSync(this._tempDir)) {\r\n                fs.mkdirSync(this._tempDir);\r\n            }\r\n            // Make sure permissions are valid\r\n            FileAccessControl_1.FileAccessControl.applyACLRulesSync(this._tempDir);\r\n            var dirSize = FileSystemHelper.getShallowDirectorySizeSync(this._tempDir);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                this._logInfo(\"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(this._tempDir, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            this._logInfo(\"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            this._logWarn(\"Error while saving data to disk: \" + Util.dumpObj(error));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, firstFile, filePath, buffer, envelopes, err_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (!(files.length > 0)) return [3 /*break*/, 5];\r\n                        firstFile = files[0];\r\n                        filePath = path.join(this._tempDir, firstFile);\r\n                        return [4 /*yield*/, FileSystemHelper.readFileAsync(filePath)];\r\n                    case 2:\r\n                        buffer = _a.sent();\r\n                        // delete the file first to prevent double sending\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(filePath)];\r\n                    case 3:\r\n                        // delete the file first to prevent double sending\r\n                        _a.sent();\r\n                        envelopes = JSON.parse(buffer.toString());\r\n                        return [4 /*yield*/, this.send(envelopes)];\r\n                    case 4:\r\n                        _a.sent();\r\n                        _a.label = 5;\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_1 = _a.sent();\r\n                        this._onErrorHelper(err_1);\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.prototype._fileCleanupTask = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var files, i, fileCreationDate, expired, filePath, err_2;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 6, , 7]);\r\n                        return [4 /*yield*/, FileSystemHelper.readdirAsync(this._tempDir)];\r\n                    case 1:\r\n                        files = _a.sent();\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (!(files.length > 0)) return [3 /*break*/, 5];\r\n                        i = 0;\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        if (!(i < files.length)) return [3 /*break*/, 5];\r\n                        fileCreationDate = new Date(parseInt(files[i].split(\".ai.json\")[0]));\r\n                        expired = new Date(+(new Date()) - Sender.FILE_RETEMPTION_PERIOD) > fileCreationDate;\r\n                        if (!expired) return [3 /*break*/, 4];\r\n                        filePath = path.join(this._tempDir, files[i]);\r\n                        return [4 /*yield*/, FileSystemHelper.unlinkAsync(filePath).catch(function (err) {\r\n                                _this._onErrorHelper(err);\r\n                            })];\r\n                    case 3:\r\n                        _a.sent();\r\n                        _a.label = 4;\r\n                    case 4:\r\n                        i++;\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        err_2 = _a.sent();\r\n                        if (err_2.code != \"ENOENT\") {\r\n                            this._onErrorHelper(err_2);\r\n                        }\r\n                        return [3 /*break*/, 7];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throttling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000; // 1 minute\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1024 * 1024; // 50 mb\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.CLEANUP_TIMEOUT = 60 * 60 * 1000; // 1 hour\r\n    Sender.FILE_RETEMPTION_PERIOD = 7 * 24 * 60 * 60 * 1000; // 7 days\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.HTTP_TIMEOUT = 20000; // 20 seconds\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isContentTypeHeaderHtml = exports.insertSnippetByIndex = exports.getContentEncodingFromHeaders = exports.isSupportedContentEncoding = exports.findBufferEncodingType = exports.isBufferType = exports.getBrotliDecompressSync = exports.getBrotliDecompressAsync = exports.getBrotliCompressSync = exports.getBrotliCompressAsync = exports.inflateAsync = exports.deflateAsync = exports.gunzipAsync = exports.gzipAsync = exports.isBrotliSupperted = exports.bufferEncodingTypes = exports.contentEncodingMethod = void 0;\r\nvar zlib = require(\"zlib\");\r\nvar util_1 = require(\"util\");\r\n// currently support the following encoding types\r\nvar contentEncodingMethod;\r\n(function (contentEncodingMethod) {\r\n    contentEncodingMethod[\"GZIP\"] = \"gzip\";\r\n    contentEncodingMethod[\"DEFLATE\"] = \"deflate\";\r\n    contentEncodingMethod[\"BR\"] = \"br\";\r\n})(contentEncodingMethod = exports.contentEncodingMethod || (exports.contentEncodingMethod = {}));\r\n//current supported encoding types\r\nexports.bufferEncodingTypes = [\"utf8\", \"utf16le\", \"latin1\", \"base64\", \"hex\", \"ascii\", \"binary\", \"ucs2\"];\r\n//for node version under 10, Brotli compression is not supported.\r\nvar isBrotliSupperted = function () {\r\n    var majVer = process.versions.node.split(\".\")[0];\r\n    return parseInt(majVer) >= 10;\r\n};\r\nexports.isBrotliSupperted = isBrotliSupperted;\r\nexports.gzipAsync = util_1.promisify(zlib.gzip);\r\nexports.gunzipAsync = util_1.promisify(zlib.gunzip);\r\nexports.deflateAsync = util_1.promisify(zlib.deflate);\r\nexports.inflateAsync = util_1.promisify(zlib.inflate);\r\nvar getBrotliCompressAsync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliCompress === \"function\") {\r\n        return util_1.promisify(zlibObject.brotliCompress);\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliCompressAsync = getBrotliCompressAsync;\r\nvar getBrotliCompressSync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliCompressSync === \"function\") {\r\n        return zlibObject.brotliCompressSync;\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliCompressSync = getBrotliCompressSync;\r\nvar getBrotliDecompressAsync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliDecompress === \"function\") {\r\n        return util_1.promisify(zlibObject.brotliDecompress);\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliDecompressAsync = getBrotliDecompressAsync;\r\nvar getBrotliDecompressSync = function (zlibObject) {\r\n    var isMajorVer = exports.isBrotliSupperted();\r\n    if (isMajorVer && typeof zlibObject.brotliDecompressSync === \"function\") {\r\n        return zlibObject.brotliDecompressSync;\r\n    }\r\n    return null;\r\n};\r\nexports.getBrotliDecompressSync = getBrotliDecompressSync;\r\nvar isBufferType = function (buffer, type) {\r\n    var encodingType = type ? type : \"utf8\";\r\n    var result = false;\r\n    if (Buffer.isEncoding(encodingType)) {\r\n        var newBuffer = Buffer.from(buffer.toString(encodingType), encodingType);\r\n        result = newBuffer.toJSON().data.toString() === buffer.toJSON().data.toString();\r\n    }\r\n    return result;\r\n};\r\nexports.isBufferType = isBufferType;\r\nvar findBufferEncodingType = function (buffer) {\r\n    var bufferType = null;\r\n    for (var key in exports.bufferEncodingTypes) {\r\n        var type = exports.bufferEncodingTypes[key];\r\n        if (Buffer.isEncoding(type) && exports.isBufferType(buffer, type)) {\r\n            bufferType = type;\r\n            break;\r\n        }\r\n    }\r\n    return bufferType;\r\n};\r\nexports.findBufferEncodingType = findBufferEncodingType;\r\nvar isSupportedContentEncoding = function (encodingMethod) {\r\n    var encodingType = null;\r\n    switch (encodingMethod) {\r\n        case \"gzip\":\r\n            encodingType = contentEncodingMethod.GZIP;\r\n            break;\r\n        case \"br\":\r\n            encodingType = contentEncodingMethod.BR;\r\n            break;\r\n        case \"deflate\":\r\n            encodingType = contentEncodingMethod.DEFLATE;\r\n            break;\r\n        default:\r\n    }\r\n    return encodingType;\r\n};\r\nexports.isSupportedContentEncoding = isSupportedContentEncoding;\r\n// mutiple content-encoding is not supported\r\n// for mutiple content-encoding, this method will return any empty array\r\nvar getContentEncodingFromHeaders = function (response) {\r\n    var headers = [];\r\n    var contentEncodingHeaders = response.getHeader(\"Content-Encoding\");\r\n    if (!contentEncodingHeaders)\r\n        return null;\r\n    if (typeof contentEncodingHeaders === \"string\") {\r\n        var supportedContentEncoding = exports.isSupportedContentEncoding(contentEncodingHeaders);\r\n        if (supportedContentEncoding) {\r\n            headers.push(supportedContentEncoding);\r\n        }\r\n    }\r\n    return headers;\r\n};\r\nexports.getContentEncodingFromHeaders = getContentEncodingFromHeaders;\r\nvar insertSnippetByIndex = function (index, html, snippet) {\r\n    if (index < 0)\r\n        return null;\r\n    var newHtml = null;\r\n    var subStart = html.substring(0, index);\r\n    var subEnd = html.substring(index);\r\n    newHtml = subStart + \"<script type=\\\"text/javascript\\\">\" + snippet + \"</script>\" + subEnd;\r\n    return newHtml;\r\n};\r\nexports.insertSnippetByIndex = insertSnippetByIndex;\r\nvar isContentTypeHeaderHtml = function (response) {\r\n    var isHtml = false;\r\n    var contentType = response.getHeader(\"Content-Type\");\r\n    if (contentType) {\r\n        if (typeof contentType === \"string\") {\r\n            isHtml = contentType.indexOf(\"html\") >= 0;\r\n        }\r\n        else {\r\n            isHtml = contentType.toString().indexOf(\"html\") >= 0;\r\n        }\r\n    }\r\n    return isHtml;\r\n};\r\nexports.isContentTypeHeaderHtml = isContentTypeHeaderHtml;\r\n//# sourceMappingURL=SnippetInjectionHelper.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar AuthorizationHandler = require(\"./AuthorizationHandler\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Statsbeat = require(\"../AutoCollection/Statsbeat\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(setupString) {\r\n        this._telemetryProcessors = [];\r\n        var config = new Config(setupString);\r\n        this.config = config;\r\n        if (!this.config.instrumentationKey || this.config.instrumentationKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, please provide a connection string before starting Application Insights SDK.\");\r\n        }\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        this.authorizationHandler = null;\r\n        if (!this.config.disableStatsbeat) {\r\n            this._statsbeat = new Statsbeat(this.config, this.context);\r\n            this._statsbeat.enable(true);\r\n        }\r\n        var sender = new Sender(this.config, this.getAuthorizationHandler, null, null, this._statsbeat);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log information about availability of an application\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Availability);\r\n    };\r\n    /**\r\n     * Log a page view\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackPageView = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.PageView);\r\n    };\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            // url.parse() is deprecated, update to use WHATWG URL API instead\r\n            try {\r\n                telemetry.target = new url.URL(telemetry.data).host;\r\n            }\r\n            catch (error) {\r\n                // set target as null to be compliant with previous behavior\r\n                telemetry.target = null;\r\n                Logging.warn(TelemetryClient.TAG, \"The URL object is failed to create.\", error);\r\n            }\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            TelemetryProcessors.preAggregatedMetricsTelemetryProcessor(envelope, this.context);\r\n            if (accepted) {\r\n                TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(TelemetryClient.TAG, \"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     *  @deprecated The method should not be called, Azure Properties will be added always when available\r\n     * Automatically populate telemetry properties like RoleName when running in Azure\r\n     *\r\n      * @param value if true properties will be populated\r\n     */\r\n    TelemetryClient.prototype.setAutoPopulateAzureProperties = function (value) {\r\n        // NO-OP\r\n    };\r\n    /**\r\n     * Get Authorization handler\r\n     */\r\n    TelemetryClient.prototype.getAuthorizationHandler = function (config) {\r\n        if (config && config.aadTokenCredential) {\r\n            if (!this.authorizationHandler) {\r\n                Logging.info(TelemetryClient.TAG, \"Adding authorization handler\");\r\n                this.authorizationHandler = new AuthorizationHandler(config.aadTokenCredential);\r\n            }\r\n            return this.authorizationHandler;\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects[\"correlationContext\"] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(TelemetryClient.TAG, \"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        // Sanitize tags and properties after running telemetry processors\r\n        if (accepted) {\r\n            if (envelope && envelope.tags) {\r\n                envelope.tags = Util.validateStringMap(envelope.tags);\r\n            }\r\n            if (envelope && envelope.data && envelope.data.baseData && envelope.data.baseData.properties) {\r\n                envelope.data.baseData.properties = Util.validateStringMap(envelope.data.baseData.properties);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    /*\r\n     * Get Statsbeat instance\r\n     */\r\n    TelemetryClient.prototype.getStatsbeat = function () {\r\n        return this._statsbeat;\r\n    };\r\n    TelemetryClient.TAG = \"TelemetryClient\";\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\n/**\r\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\r\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\r\n * https://www.w3.org/TR/trace-context/#traceparent-field\r\n */\r\nvar Traceparent = /** @class */ (function () {\r\n    function Traceparent(traceparent, parentId) {\r\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\r\n        this.version = Traceparent.DEFAULT_VERSION;\r\n        if (traceparent && typeof traceparent === \"string\") { // traceparent constructor\r\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\r\n            if (traceparent.split(\",\").length > 1) { // If more than 1 traceparent is present, discard both\r\n                this.traceId = Util.w3cTraceId();\r\n                this.spanId = Util.w3cTraceId().substr(0, 16);\r\n            }\r\n            else {\r\n                var traceparentArr = traceparent.trim().split(\"-\");\r\n                var len = traceparentArr.length;\r\n                if (len >= 4) { // traceparent must contain at least 4 fields\r\n                    this.version = traceparentArr[0];\r\n                    this.traceId = traceparentArr[1];\r\n                    this.spanId = traceparentArr[2];\r\n                    this.traceFlag = traceparentArr[3];\r\n                }\r\n                else { // Discard traceparent if a field is missing\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                // Version validation\r\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                if (this.version === \"00\" && len !== 4) { // 0x00 (and perhaps future versions) require exactly 4 fields. This strict check will need to be updated on each spec release\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (this.version === \"ff\") { // 0xff is forbidden, generate new traceparent\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                    this.traceId = Util.w3cTraceId();\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                }\r\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\r\n                    this.version = Traceparent.DEFAULT_VERSION;\r\n                }\r\n                // TraceFlag validation\r\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\r\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate TraceId, regenerate new traceid if invalid\r\n                if (!Traceparent.isValidTraceId(this.traceId)) {\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Validate Span Id, discard entire traceparent if invalid\r\n                if (!Traceparent.isValidSpanId(this.spanId)) {\r\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\r\n                    this.traceId = Util.w3cTraceId();\r\n                }\r\n                // Save backCompat parentId\r\n                this.parentId = this.getBackCompatRequestId();\r\n            }\r\n        }\r\n        else if (parentId) { // backcompat constructor\r\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\r\n            this.parentId = parentId.slice(); // copy\r\n            var operationId = CorrelationIdManager.getRootId(parentId);\r\n            if (!Traceparent.isValidTraceId(operationId)) {\r\n                this.legacyRootId = operationId;\r\n                operationId = Util.w3cTraceId();\r\n            }\r\n            if (parentId.indexOf(\"|\") !== -1) {\r\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\r\n            }\r\n            this.traceId = operationId;\r\n            this.spanId = parentId;\r\n        }\r\n        else {\r\n            // Fallback default constructor\r\n            // if request does not contain any correlation headers, see case p2\r\n            this.traceId = Util.w3cTraceId();\r\n            this.spanId = Util.w3cTraceId().substr(0, 16);\r\n        }\r\n    }\r\n    Traceparent.isValidTraceId = function (id) {\r\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    Traceparent.isValidSpanId = function (id) {\r\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\r\n    };\r\n    Traceparent.formatOpenTelemetryTraceFlags = function (traceFlags) {\r\n        var formattedFlags = (\"0\" + traceFlags.toString(16));\r\n        return formattedFlags.substring(formattedFlags.length - 2);\r\n    };\r\n    Traceparent.prototype.getBackCompatRequestId = function () {\r\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\r\n    };\r\n    Traceparent.prototype.toString = function () {\r\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\r\n    };\r\n    Traceparent.prototype.updateSpanId = function () {\r\n        this.spanId = Util.w3cTraceId().substr(0, 16);\r\n    };\r\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\r\n    Traceparent.DEFAULT_VERSION = \"00\";\r\n    return Traceparent;\r\n}());\r\nmodule.exports = Traceparent;\r\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\r\n/**\r\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\r\n * is documented at https://www.w3.org/TR/trace-context/#header-value\r\n * @class Tracestate\r\n */\r\nvar Tracestate = /** @class */ (function () {\r\n    // if true, performs strict tracestate header checking, else just passes it along\r\n    function Tracestate(id) {\r\n        this.fieldmap = [];\r\n        if (!id) {\r\n            return;\r\n        }\r\n        this.fieldmap = this.parseHeader(id);\r\n    }\r\n    Tracestate.prototype.toString = function () {\r\n        var fieldarr = this.fieldmap;\r\n        if (!fieldarr || fieldarr.length == 0) {\r\n            return null;\r\n        }\r\n        return fieldarr.join(\", \");\r\n    };\r\n    Tracestate.validateKeyChars = function (key) {\r\n        var keyParts = key.split(\"@\");\r\n        if (keyParts.length == 2) {\r\n            // Parse for tenant@vendor format\r\n            var tenant = keyParts[0].trim();\r\n            var vendor = keyParts[1].trim();\r\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\r\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\r\n            return tenantValid && vendorValid;\r\n        }\r\n        else if (keyParts.length == 1) {\r\n            // Parse for standard key format\r\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\r\n        }\r\n        return false;\r\n    };\r\n    Tracestate.prototype.parseHeader = function (id) {\r\n        var res = [];\r\n        var keydeduper = {};\r\n        var parts = id.split(\",\");\r\n        if (parts.length > 32)\r\n            return null;\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var rawPart = parts_1[_i];\r\n            var part = rawPart.trim(); // trim out whitespace\r\n            if (part.length === 0) {\r\n                continue; // Discard empty pairs, but keep the rest of this tracestate\r\n            }\r\n            var pair = part.split(\"=\");\r\n            // pair should contain exactly one \"=\"\r\n            if (pair.length !== 2) {\r\n                return null; // invalid pair: discard entire tracestate\r\n            }\r\n            // Validate length and charset of this key\r\n            if (!Tracestate.validateKeyChars(pair[0])) {\r\n                return null;\r\n            }\r\n            // Assert uniqueness of this key\r\n            if (keydeduper[pair[0]]) {\r\n                return null; // duplicate key: discard entire tracestate\r\n            }\r\n            else {\r\n                keydeduper[pair[0]] = true;\r\n            }\r\n            // All checks passed -- add this part\r\n            res.push(part);\r\n        }\r\n        return res;\r\n    };\r\n    Tracestate.strict = true;\r\n    return Tracestate;\r\n}());\r\nmodule.exports = Tracestate;\r\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar JsonConfig_1 = require(\"./JsonConfig\");\r\nvar Util = /** @class */ (function () {\r\n    function Util() {\r\n        Util._addCloseHandler();\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    Util.w3cSpanId = function () {\r\n        return Util.w3cTraceId().substring(16);\r\n    };\r\n    Util.isValidW3CId = function (id) {\r\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Error]\";\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\"\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = \"\";\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            try {\r\n                if (regex.test(new url.URL(requestUrl).hostname)) {\r\n                    return false;\r\n                }\r\n            }\r\n            catch (ex) {\r\n                // Ignore errors\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @param {boolean} useProxy Use proxy URL from config\r\n     * @param {boolean} useAgent Set Http Agent in request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback, useProxy, useAgent) {\r\n        if (useProxy === void 0) { useProxy = true; }\r\n        if (useAgent === void 0) { useAgent = true; }\r\n        if (requestUrl && requestUrl.indexOf(\"//\") === 0) {\r\n            requestUrl = \"https:\" + requestUrl;\r\n        }\r\n        var requestUrlParsed = new url.URL(requestUrl);\r\n        var options = __assign(__assign({}, requestOptions), { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (useProxy) {\r\n            if (requestUrlParsed.protocol === \"https:\") {\r\n                proxyUrl = config.proxyHttpsUrl || undefined;\r\n            }\r\n            if (requestUrlParsed.protocol === \"http:\") {\r\n                proxyUrl = config.proxyHttpUrl || undefined;\r\n            }\r\n            if (proxyUrl) {\r\n                if (proxyUrl.indexOf(\"//\") === 0) {\r\n                    proxyUrl = \"http:\" + proxyUrl;\r\n                }\r\n                try {\r\n                    var proxyUrlParsed = new url.URL(proxyUrl);\r\n                    // https is not supported at the moment\r\n                    if (proxyUrlParsed.protocol === \"https:\") {\r\n                        Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                        proxyUrl = undefined;\r\n                    }\r\n                    else {\r\n                        options = __assign(__assign({}, options), { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign(__assign({}, options.headers), { Host: requestUrlParsed.hostname }) });\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    Logging.warn(\"Wrong proxy URL provided\");\r\n                }\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === \"https:\" && !proxyUrl;\r\n        if (useAgent) {\r\n            if (isHttps && config.httpsAgent !== undefined) {\r\n                options.agent = config.httpsAgent;\r\n            }\r\n            else if (!isHttps && config.httpAgent !== undefined) {\r\n                options.agent = config.httpAgent;\r\n            }\r\n            else if (isHttps) {\r\n                // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n                options.agent = Util._useKeepAlive ? Util.keepAliveAgent : Util.tlsRestrictedAgent;\r\n            }\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    /**\r\n     * Parse standard <string | string[] | number> request-context header\r\n     */\r\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\r\n        var header; // attempt to cast correlationHeader to string\r\n        if (typeof correlationHeader === \"string\") {\r\n            header = correlationHeader;\r\n        }\r\n        else if (correlationHeader instanceof Array) { // string[]\r\n            header = correlationHeader.join(\",\");\r\n        }\r\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\r\n            // best effort attempt: requires well-defined toString\r\n            try {\r\n                header = correlationHeader.toString();\r\n            }\r\n            catch (err) {\r\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\r\n            }\r\n        }\r\n        if (header) {\r\n            Util.addCorrelationIdHeaderFromString(client, request, header);\r\n        }\r\n        else {\r\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    /**\r\n     * Returns string representation of an object suitable for diagnostics logging.\r\n     */\r\n    Util.dumpObj = function (object) {\r\n        if (object) {\r\n            try {\r\n                var objectTypeDump = Object[\"prototype\"].toString.call(object);\r\n                var propertyValueDump = \"\";\r\n                if (objectTypeDump === \"[object Error]\") {\r\n                    propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object.name + \"'\";\r\n                }\r\n                else {\r\n                    propertyValueDump = this.stringify(object);\r\n                }\r\n                return objectTypeDump + propertyValueDump;\r\n            }\r\n            catch (ex) {\r\n                return object.toString();\r\n            }\r\n        }\r\n    };\r\n    Util.stringify = function (payload) {\r\n        try {\r\n            return JSON.stringify(payload);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, payload);\r\n        }\r\n    };\r\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\r\n        var components = correlationHeader.split(\",\");\r\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\r\n        if (!found) {\r\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n        }\r\n    };\r\n    Util._addCloseHandler = function () {\r\n        if (!Util._listenerAttached) {\r\n            process.on(\"exit\", function () {\r\n                Util.isNodeExit = true;\r\n                Util._useKeepAlive = false;\r\n            });\r\n            Util._listenerAttached = true;\r\n        }\r\n    };\r\n    Util._useKeepAlive = !JsonConfig_1.JsonConfig.getInstance().noHttpAgentKeepAlive;\r\n    Util._listenerAttached = false;\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.keepAliveAgent = new https.Agent({\r\n        keepAlive: true,\r\n        maxSockets: 25,\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    Util.isNodeExit = false;\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.azureRoleEnvironmentTelemetryProcessor = void 0;\r\n/**\r\n *  @deprecated The method should not be called, Azure Properties will be added always when available\r\n *  A telemetry processor that handles Azure specific variables.\r\n */\r\nfunction azureRoleEnvironmentTelemetryProcessor(envelope, context) {\r\n    // NO-OP\r\n}\r\nexports.azureRoleEnvironmentTelemetryProcessor = azureRoleEnvironmentTelemetryProcessor;\r\n//# sourceMappingURL=AzureRoleEnvironmentTelemetryInitializer.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.performanceMetricsTelemetryProcessor = void 0;\r\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\r\nvar TelemetryType = require(\"../Declarations/Contracts\");\r\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\r\n    // If live metrics is enabled, forward all telemetry there\r\n    if (client) {\r\n        client.addDocument(envelope);\r\n    }\r\n    // Increment rate counters (for standard metrics and live metrics)\r\n    switch (envelope.data.baseType) {\r\n        case TelemetryType.TelemetryTypeString.Exception:\r\n            AutoCollectPerformance.countException();\r\n            break;\r\n        case TelemetryType.TelemetryTypeString.Request:\r\n            var requestData = envelope.data.baseData;\r\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\r\n            break;\r\n        case TelemetryType.TelemetryTypeString.Dependency:\r\n            var remoteDependencyData = envelope.data.baseData;\r\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\r\n            break;\r\n    }\r\n    return true;\r\n}\r\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\r\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.preAggregatedMetricsTelemetryProcessor = void 0;\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar AutoCollecPreAggregatedMetrics = require(\"../AutoCollection/PreAggregatedMetrics\");\r\nvar TelemetryType = require(\"../Declarations/Contracts\");\r\nfunction preAggregatedMetricsTelemetryProcessor(envelope, context) {\r\n    if (AutoCollecPreAggregatedMetrics.isEnabled()) {\r\n        // Increment rate counters\r\n        switch (envelope.data.baseType) {\r\n            case TelemetryType.TelemetryTypeString.Exception:\r\n                var exceptionData = envelope.data.baseData;\r\n                exceptionData.properties = __assign(__assign({}, exceptionData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Exceptions', Ver:'1.1')\" });\r\n                var exceptionDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole]\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countException(exceptionDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Trace:\r\n                var traceData = envelope.data.baseData;\r\n                traceData.properties = __assign(__assign({}, traceData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Traces', Ver:'1.1')\" });\r\n                var traceDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    traceSeverityLevel: Contracts.SeverityLevel[traceData.severity]\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countTrace(traceDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Request:\r\n                var requestData = envelope.data.baseData;\r\n                requestData.properties = __assign(__assign({}, requestData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Requests', Ver:'1.1')\" });\r\n                var requestDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    operationSynthetic: envelope.tags[context.keys.operationSyntheticSource],\r\n                    requestSuccess: requestData.success,\r\n                    requestResultCode: requestData.responseCode\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countRequest(requestData.duration, requestDimensions);\r\n                break;\r\n            case TelemetryType.TelemetryTypeString.Dependency:\r\n                var remoteDependencyData = envelope.data.baseData;\r\n                remoteDependencyData.properties = __assign(__assign({}, remoteDependencyData.properties), { \"_MS.ProcessedByMetricExtractors\": \"(Name:'Dependencies', Ver:'1.1')\" });\r\n                var dependencyDimensions = {\r\n                    cloudRoleInstance: envelope.tags[context.keys.cloudRoleInstance],\r\n                    cloudRoleName: envelope.tags[context.keys.cloudRole],\r\n                    operationSynthetic: envelope.tags[context.keys.operationSyntheticSource],\r\n                    dependencySuccess: remoteDependencyData.success,\r\n                    dependencyType: remoteDependencyData.type,\r\n                    dependencyTarget: remoteDependencyData.target,\r\n                    dependencyResultCode: remoteDependencyData.resultCode\r\n                };\r\n                AutoCollecPreAggregatedMetrics.countDependency(remoteDependencyData.duration, dependencyDimensions);\r\n                break;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.preAggregatedMetricsTelemetryProcessor = preAggregatedMetricsTelemetryProcessor;\r\n//# sourceMappingURL=PreAggregatedMetricsTelemetryProcessor.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getSamplingHashCode = exports.samplingTelemetryProcessor = void 0;\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./AzureRoleEnvironmentTelemetryInitializer\"), exports);\r\n__exportStar(require(\"./SamplingTelemetryProcessor\"), exports);\r\n__exportStar(require(\"./PerformanceMetricsTelemetryProcessor\"), exports);\r\n__exportStar(require(\"./PreAggregatedMetricsTelemetryProcessor\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.dispose = exports.Configuration = exports.wrapWithCorrelationContext = exports.startOperation = exports.getCorrelationContext = exports.start = exports.setup = exports.liveMetricsClient = exports.defaultClient = exports.DistributedTracingModes = void 0;\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollecPreAggregatedMetrics = require(\"./AutoCollection/PreAggregatedMetrics\");\r\nvar HeartBeat = require(\"./AutoCollection/HeartBeat\");\r\nvar WebSnippet = require(\"./AutoCollection/WebSnippet\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\r\nvar Logging = require(\"./Library/Logging\");\r\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\r\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\r\nvar AzureFunctionsHook_1 = require(\"./AutoCollection/AzureFunctionsHook\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\nexports.azureFunctionsTypes = require(\"./Library/Functions\");\r\nvar DistributedTracingModes;\r\n(function (DistributedTracingModes) {\r\n    /**\r\n     * Send Application Insights correlation headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\r\n    /**\r\n     * (Default) Send both W3C Trace Context headers and back-compatibility Application Insights headers\r\n     */\r\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\r\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\r\n// Default autocollection configuration\r\nvar defaultConfig = _getDefaultAutoCollectConfig();\r\nvar _isConsole = defaultConfig.isConsole();\r\nvar _isConsoleLog = defaultConfig.isConsoleLog();\r\nvar _isLoggerErrorToTrace = defaultConfig.isLoggerErrorToTrace(); // default to false\r\nvar _isExceptions = defaultConfig.isExceptions();\r\nvar _isPerformance = defaultConfig.isPerformance();\r\nvar _isPreAggregatedMetrics = defaultConfig.isPreAggregatedMetrics();\r\nvar _isHeartBeat = defaultConfig.isHeartBeat(); // off by default for now\r\nvar _isRequests = defaultConfig.isRequests();\r\nvar _isDependencies = defaultConfig.isDependencies();\r\nvar _isDiskRetry = defaultConfig.isDiskRetry();\r\nvar _isCorrelating = defaultConfig.isCorrelating();\r\nvar _forceClsHooked;\r\nvar _isSendingLiveMetrics = defaultConfig.isSendingLiveMetrics(); // Off by default\r\nvar _isNativePerformance = defaultConfig.isNativePerformance();\r\nvar _disabledExtendedMetrics;\r\nvar _isSnippetInjection = defaultConfig.isSnippetInjection(); // default to false\r\nvar _isAzureFunctions = defaultConfig.isAzureFunctions(); // default to false\r\nfunction _getDefaultAutoCollectConfig() {\r\n    return {\r\n        isConsole: function () { return true; },\r\n        isConsoleLog: function () { return false; },\r\n        isExceptions: function () { return true; },\r\n        isPerformance: function () { return true; },\r\n        isPreAggregatedMetrics: function () { return true; },\r\n        isHeartBeat: function () { return false; },\r\n        isRequests: function () { return true; },\r\n        isDependencies: function () { return true; },\r\n        isDiskRetry: function () { return true; },\r\n        isCorrelating: function () { return true; },\r\n        isSendingLiveMetrics: function () { return false; },\r\n        isNativePerformance: function () { return true; },\r\n        isSnippetInjection: function () { return false; },\r\n        isAzureFunctions: function () { return false; },\r\n        isLoggerErrorToTrace: function () { return false; },\r\n    };\r\n}\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _webSnippetConnectionString = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _preAggregatedMetrics;\r\nvar _heartbeat;\r\nvar _webSnippet;\r\nvar _nativePerformance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _azureFunctions;\r\nvar _isStarted = false;\r\nvar _performanceLiveMetrics;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(setupString) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(setupString);\r\n        _initializeConfig();\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _preAggregatedMetrics = new AutoCollecPreAggregatedMetrics(exports.defaultClient);\r\n        _heartbeat = new HeartBeat(exports.defaultClient);\r\n        _webSnippet = new WebSnippet(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n        if (!_nativePerformance) {\r\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\r\n        }\r\n        _azureFunctions = new AzureFunctionsHook_1.AzureFunctionsHook(exports.defaultClient);\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _preAggregatedMetrics.enable(_isPreAggregatedMetrics);\r\n        _heartbeat.enable(_isHeartBeat);\r\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n        _webSnippet.enable(_isSnippetInjection, _webSnippetConnectionString);\r\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\r\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\r\n        }\r\n        _azureFunctions.enable(_isAzureFunctions);\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\nfunction _initializeConfig() {\r\n    _isConsole = exports.defaultClient.config.enableAutoCollectExternalLoggers !== undefined ? exports.defaultClient.config.enableAutoCollectExternalLoggers : _isConsole;\r\n    _isConsoleLog = exports.defaultClient.config.enableAutoCollectConsole !== undefined ? exports.defaultClient.config.enableAutoCollectConsole : _isConsoleLog;\r\n    _isLoggerErrorToTrace = exports.defaultClient.config.enableLoggerErrorToTrace !== undefined ? exports.defaultClient.config.enableLoggerErrorToTrace : _isLoggerErrorToTrace;\r\n    _isExceptions = exports.defaultClient.config.enableAutoCollectExceptions !== undefined ? exports.defaultClient.config.enableAutoCollectExceptions : _isExceptions;\r\n    _isPerformance = exports.defaultClient.config.enableAutoCollectPerformance !== undefined ? exports.defaultClient.config.enableAutoCollectPerformance : _isPerformance;\r\n    _isPreAggregatedMetrics = exports.defaultClient.config.enableAutoCollectPreAggregatedMetrics !== undefined ? exports.defaultClient.config.enableAutoCollectPreAggregatedMetrics : _isPreAggregatedMetrics;\r\n    _isHeartBeat = exports.defaultClient.config.enableAutoCollectHeartbeat !== undefined ? exports.defaultClient.config.enableAutoCollectHeartbeat : _isHeartBeat;\r\n    _isRequests = exports.defaultClient.config.enableAutoCollectRequests !== undefined ? exports.defaultClient.config.enableAutoCollectRequests : _isRequests;\r\n    _isDependencies = exports.defaultClient.config.enableAutoDependencyCorrelation !== undefined ? exports.defaultClient.config.enableAutoDependencyCorrelation : _isDependencies;\r\n    _isDiskRetry = exports.defaultClient.config.enableUseDiskRetryCaching !== undefined ? exports.defaultClient.config.enableUseDiskRetryCaching : _isDiskRetry;\r\n    _isCorrelating = exports.defaultClient.config.enableAutoDependencyCorrelation !== undefined ? exports.defaultClient.config.enableAutoDependencyCorrelation : _isCorrelating;\r\n    _forceClsHooked = exports.defaultClient.config.enableUseAsyncHooks !== undefined ? exports.defaultClient.config.enableUseAsyncHooks : _forceClsHooked;\r\n    _isSendingLiveMetrics = exports.defaultClient.config.enableSendLiveMetrics !== undefined ? exports.defaultClient.config.enableSendLiveMetrics : _isSendingLiveMetrics;\r\n    _isSnippetInjection = exports.defaultClient.config.enableAutoWebSnippetInjection === true ? true : _isSnippetInjection;\r\n    _isAzureFunctions = exports.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions !== undefined ? exports.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions : _isAzureFunctions;\r\n    var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(exports.defaultClient.config.enableAutoCollectExtendedMetrics, exports.defaultClient.config);\r\n    _isNativePerformance = extendedMetricsConfig.isEnabled;\r\n    _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\r\n}\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\nfunction startOperation(context, request) {\r\n    return CorrelationContextManager.CorrelationContextManager.startOperation(context, request);\r\n}\r\nexports.startOperation = startOperation;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn, context) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn, context);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = /** @class */ (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\r\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\r\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\r\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\r\n     * services. Default=AI\r\n    */\r\n    Configuration.setDistributedTracingMode = function (value) {\r\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\r\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\r\n        _isPerformance = value;\r\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics, exports.defaultClient.config);\r\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\r\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of pre aggregated metrics tracking (enabled by default)\r\n     * @param value if true pre aggregated metrics will be collected every minute and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPreAggregatedMetrics = function (value) {\r\n        _isPreAggregatedMetrics = value;\r\n        if (_isStarted) {\r\n            _preAggregatedMetrics.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true HeartBeat metric data will be collected every 15 mintues and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectHeartbeat = function (value) {\r\n        _isHeartBeat = value;\r\n        if (_isStarted) {\r\n            _heartbeat.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of Web snippet injection, this config is NOT exposed in documentation after version 2.3.5\r\n     * @deprecated, please use enableWebInstrumentation instead.\r\n     * @param value if true Web snippet will be tried to be injected in server response\r\n     * @param WebSnippetConnectionString if provided, web snippet injection will use this ConnectionString. Default to use the connectionString in Node.js app initialization\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.enableAutoWebSnippetInjection = function (value, WebSnippetConnectionString) {\r\n        _isSnippetInjection = value;\r\n        _webSnippetConnectionString = WebSnippetConnectionString;\r\n        if (_isStarted) {\r\n            _webSnippet.enable(value, _webSnippetConnectionString);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of Web snippet injection\r\n     * @param value if true Web snippet will be tried to be injected in server response\r\n     * @param WebSnippetConnectionString if provided, web snippet injection will use this ConnectionString. Default to use the connectionString in Node.js app initialization\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.enableWebInstrumentation = function (value, WebSnippetConnectionString) {\r\n        _isSnippetInjection = value;\r\n        _webSnippetConnectionString = WebSnippetConnectionString;\r\n        if (_isStarted) {\r\n            _webSnippet.enable(value, _webSnippetConnectionString);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\r\n        _isCorrelating = value;\r\n        _forceClsHooked = useAsyncHooks;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable automatic incoming request tracking when using Azure Functions\r\n     * @param value if true auto collection of incoming requests will be enabled\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectIncomingRequestAzureFunctions = function (value) {\r\n        _isAzureFunctions = value;\r\n        if (_isStarted) {\r\n            _azureFunctions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables communication with Application Insights Live Metrics.\r\n     * @param enable if true, enables communication with the live metrics service\r\n     */\r\n    Configuration.setSendLiveMetrics = function (enable) {\r\n        if (enable === void 0) { enable = false; }\r\n        if (!exports.defaultClient) {\r\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\r\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\r\n            return Configuration;\r\n        }\r\n        if (!exports.liveMetricsClient && enable) {\r\n            // No qps client exists. Create one and prepare it to be enabled at .start()\r\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config, exports.defaultClient.context, exports.defaultClient.getAuthorizationHandler);\r\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\r\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\r\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\r\n        }\r\n        else if (exports.liveMetricsClient) {\r\n            // qps client already exists; enable/disable it\r\n            exports.liveMetricsClient.enable(enable);\r\n        }\r\n        _isSendingLiveMetrics = enable;\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    CorrelationIdManager.w3cEnabled = true; // reset to default\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_preAggregatedMetrics) {\r\n        _preAggregatedMetrics.dispose();\r\n    }\r\n    if (_heartbeat) {\r\n        _heartbeat.dispose();\r\n    }\r\n    if (_webSnippet) {\r\n        _webSnippet.dispose();\r\n    }\r\n    if (_nativePerformance) {\r\n        _nativePerformance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n    if (exports.liveMetricsClient) {\r\n        exports.liveMetricsClient.enable(false);\r\n        _isSendingLiveMetrics = false;\r\n        exports.liveMetricsClient = undefined;\r\n    }\r\n    if (_azureFunctions) {\r\n        _azureFunctions.dispose();\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","module.exports =\n{\n  parallel      : require('./parallel.js'),\n  serial        : require('./serial.js'),\n  serialOrdered : require('./serialOrdered.js')\n};\n","// API\nmodule.exports = abort;\n\n/**\n * Aborts leftover active jobs\n *\n * @param {object} state - current state object\n */\nfunction abort(state)\n{\n  Object.keys(state.jobs).forEach(clean.bind(state));\n\n  // reset leftover jobs\n  state.jobs = {};\n}\n\n/**\n * Cleans up leftover job by invoking abort function for the provided job id\n *\n * @this  state\n * @param {string|number} key - job id to abort\n */\nfunction clean(key)\n{\n  if (typeof this.jobs[key] == 'function')\n  {\n    this.jobs[key]();\n  }\n}\n","var defer = require('./defer.js');\n\n// API\nmodule.exports = async;\n\n/**\n * Runs provided callback asynchronously\n * even if callback itself is not\n *\n * @param   {function} callback - callback to invoke\n * @returns {function} - augmented callback\n */\nfunction async(callback)\n{\n  var isAsync = false;\n\n  // check if async happened\n  defer(function() { isAsync = true; });\n\n  return function async_callback(err, result)\n  {\n    if (isAsync)\n    {\n      callback(err, result);\n    }\n    else\n    {\n      defer(function nextTick_callback()\n      {\n        callback(err, result);\n      });\n    }\n  };\n}\n","module.exports = defer;\n\n/**\n * Runs provided function on next iteration of the event loop\n *\n * @param {function} fn - function to run\n */\nfunction defer(fn)\n{\n  var nextTick = typeof setImmediate == 'function'\n    ? setImmediate\n    : (\n      typeof process == 'object' && typeof process.nextTick == 'function'\n      ? process.nextTick\n      : null\n    );\n\n  if (nextTick)\n  {\n    nextTick(fn);\n  }\n  else\n  {\n    setTimeout(fn, 0);\n  }\n}\n","var async = require('./async.js')\n  , abort = require('./abort.js')\n  ;\n\n// API\nmodule.exports = iterate;\n\n/**\n * Iterates over each job object\n *\n * @param {array|object} list - array or object (named list) to iterate over\n * @param {function} iterator - iterator to run\n * @param {object} state - current job status\n * @param {function} callback - invoked when all elements processed\n */\nfunction iterate(list, iterator, state, callback)\n{\n  // store current index\n  var key = state['keyedList'] ? state['keyedList'][state.index] : state.index;\n\n  state.jobs[key] = runJob(iterator, key, list[key], function(error, output)\n  {\n    // don't repeat yourself\n    // skip secondary callbacks\n    if (!(key in state.jobs))\n    {\n      return;\n    }\n\n    // clean up jobs\n    delete state.jobs[key];\n\n    if (error)\n    {\n      // don't process rest of the results\n      // stop still active jobs\n      // and reset the list\n      abort(state);\n    }\n    else\n    {\n      state.results[key] = output;\n    }\n\n    // return salvaged results\n    callback(error, state.results);\n  });\n}\n\n/**\n * Runs iterator over provided job element\n *\n * @param   {function} iterator - iterator to invoke\n * @param   {string|number} key - key/index of the element in the list of jobs\n * @param   {mixed} item - job description\n * @param   {function} callback - invoked after iterator is done with the job\n * @returns {function|mixed} - job abort function or something else\n */\nfunction runJob(iterator, key, item, callback)\n{\n  var aborter;\n\n  // allow shortcut if iterator expects only two arguments\n  if (iterator.length == 2)\n  {\n    aborter = iterator(item, async(callback));\n  }\n  // otherwise go with full three arguments\n  else\n  {\n    aborter = iterator(item, key, async(callback));\n  }\n\n  return aborter;\n}\n","// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n","var abort = require('./abort.js')\n  , async = require('./async.js')\n  ;\n\n// API\nmodule.exports = terminator;\n\n/**\n * Terminates jobs in the attached state context\n *\n * @this  AsyncKitState#\n * @param {function} callback - final callback to invoke after termination\n */\nfunction terminator(callback)\n{\n  if (!Object.keys(this.jobs).length)\n  {\n    return;\n  }\n\n  // fast forward iteration index\n  this.index = this.size;\n\n  // abort jobs\n  abort(this);\n\n  // send back results we have so far\n  async(callback)(null, this.results);\n}\n","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = parallel;\n\n/**\n * Runs iterator over provided array elements in parallel\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction parallel(list, iterator, callback)\n{\n  var state = initState(list);\n\n  while (state.index < (state['keyedList'] || list).length)\n  {\n    iterate(list, iterator, state, function(error, result)\n    {\n      if (error)\n      {\n        callback(error, result);\n        return;\n      }\n\n      // looks like it's the last one\n      if (Object.keys(state.jobs).length === 0)\n      {\n        callback(null, state.results);\n        return;\n      }\n    });\n\n    state.index++;\n  }\n\n  return terminator.bind(state, callback);\n}\n","var serialOrdered = require('./serialOrdered.js');\n\n// Public API\nmodule.exports = serial;\n\n/**\n * Runs iterator over provided array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serial(list, iterator, callback)\n{\n  return serialOrdered(list, iterator, null, callback);\n}\n","var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = serialOrdered;\n// sorting helpers\nmodule.exports.ascending  = ascending;\nmodule.exports.descending = descending;\n\n/**\n * Runs iterator over provided sorted array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} sortMethod - custom sort function\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serialOrdered(list, iterator, sortMethod, callback)\n{\n  var state = initState(list, sortMethod);\n\n  iterate(list, iterator, state, function iteratorHandler(error, result)\n  {\n    if (error)\n    {\n      callback(error, result);\n      return;\n    }\n\n    state.index++;\n\n    // are we there yet?\n    if (state.index < (state['keyedList'] || list).length)\n    {\n      iterate(list, iterator, state, iteratorHandler);\n      return;\n    }\n\n    // done here\n    callback(null, state.results);\n  });\n\n  return terminator.bind(state, callback);\n}\n\n/*\n * -- Sort methods\n */\n\n/**\n * sort helper to sort array elements in ascending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction ascending(a, b)\n{\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\n/**\n * sort helper to sort array elements in descending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction descending(a, b)\n{\n  return -1 * ascending(a, b);\n}\n","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","var util = require('util');\nvar Stream = require('stream').Stream;\nvar DelayedStream = require('delayed-stream');\n\nmodule.exports = CombinedStream;\nfunction CombinedStream() {\n  this.writable = false;\n  this.readable = true;\n  this.dataSize = 0;\n  this.maxDataSize = 2 * 1024 * 1024;\n  this.pauseStreams = true;\n\n  this._released = false;\n  this._streams = [];\n  this._currentStream = null;\n  this._insideLoop = false;\n  this._pendingNext = false;\n}\nutil.inherits(CombinedStream, Stream);\n\nCombinedStream.create = function(options) {\n  var combinedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    combinedStream[option] = options[option];\n  }\n\n  return combinedStream;\n};\n\nCombinedStream.isStreamLike = function(stream) {\n  return (typeof stream !== 'function')\n    && (typeof stream !== 'string')\n    && (typeof stream !== 'boolean')\n    && (typeof stream !== 'number')\n    && (!Buffer.isBuffer(stream));\n};\n\nCombinedStream.prototype.append = function(stream) {\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n\n  if (isStreamLike) {\n    if (!(stream instanceof DelayedStream)) {\n      var newStream = DelayedStream.create(stream, {\n        maxDataSize: Infinity,\n        pauseStream: this.pauseStreams,\n      });\n      stream.on('data', this._checkDataSize.bind(this));\n      stream = newStream;\n    }\n\n    this._handleErrors(stream);\n\n    if (this.pauseStreams) {\n      stream.pause();\n    }\n  }\n\n  this._streams.push(stream);\n  return this;\n};\n\nCombinedStream.prototype.pipe = function(dest, options) {\n  Stream.prototype.pipe.call(this, dest, options);\n  this.resume();\n  return dest;\n};\n\nCombinedStream.prototype._getNext = function() {\n  this._currentStream = null;\n\n  if (this._insideLoop) {\n    this._pendingNext = true;\n    return; // defer call\n  }\n\n  this._insideLoop = true;\n  try {\n    do {\n      this._pendingNext = false;\n      this._realGetNext();\n    } while (this._pendingNext);\n  } finally {\n    this._insideLoop = false;\n  }\n};\n\nCombinedStream.prototype._realGetNext = function() {\n  var stream = this._streams.shift();\n\n\n  if (typeof stream == 'undefined') {\n    this.end();\n    return;\n  }\n\n  if (typeof stream !== 'function') {\n    this._pipeNext(stream);\n    return;\n  }\n\n  var getStream = stream;\n  getStream(function(stream) {\n    var isStreamLike = CombinedStream.isStreamLike(stream);\n    if (isStreamLike) {\n      stream.on('data', this._checkDataSize.bind(this));\n      this._handleErrors(stream);\n    }\n\n    this._pipeNext(stream);\n  }.bind(this));\n};\n\nCombinedStream.prototype._pipeNext = function(stream) {\n  this._currentStream = stream;\n\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n  if (isStreamLike) {\n    stream.on('end', this._getNext.bind(this));\n    stream.pipe(this, {end: false});\n    return;\n  }\n\n  var value = stream;\n  this.write(value);\n  this._getNext();\n};\n\nCombinedStream.prototype._handleErrors = function(stream) {\n  var self = this;\n  stream.on('error', function(err) {\n    self._emitError(err);\n  });\n};\n\nCombinedStream.prototype.write = function(data) {\n  this.emit('data', data);\n};\n\nCombinedStream.prototype.pause = function() {\n  if (!this.pauseStreams) {\n    return;\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n  this.emit('pause');\n};\n\nCombinedStream.prototype.resume = function() {\n  if (!this._released) {\n    this._released = true;\n    this.writable = true;\n    this._getNext();\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n  this.emit('resume');\n};\n\nCombinedStream.prototype.end = function() {\n  this._reset();\n  this.emit('end');\n};\n\nCombinedStream.prototype.destroy = function() {\n  this._reset();\n  this.emit('close');\n};\n\nCombinedStream.prototype._reset = function() {\n  this.writable = false;\n  this._streams = [];\n  this._currentStream = null;\n};\n\nCombinedStream.prototype._checkDataSize = function() {\n  this._updateDataSize();\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this._emitError(new Error(message));\n};\n\nCombinedStream.prototype._updateDataSize = function() {\n  this.dataSize = 0;\n\n  var self = this;\n  this._streams.forEach(function(stream) {\n    if (!stream.dataSize) {\n      return;\n    }\n\n    self.dataSize += stream.dataSize;\n  });\n\n  if (this._currentStream && this._currentStream.dataSize) {\n    this.dataSize += this._currentStream.dataSize;\n  }\n};\n\nCombinedStream.prototype._emitError = function(err) {\n  this._reset();\n  this.emit('error', err);\n};\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nObject.defineProperty(DelayedStream.prototype, 'readable', {\n  configurable: true,\n  enumerable: true,\n  get: function() {\n    return this.source.readable;\n  }\n});\n\nDelayedStream.prototype.setEncoding = function() {\n  return this.source.setEncoding.apply(this.source, arguments);\n};\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.azureCoreTracing = exports.AzureMonitorSymbol = void 0;\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\r\nvar publisherName = \"azure-coretracing\";\r\nvar isPatched = false;\r\n/**\r\n * By default, @azure/core-tracing default tracer is a NoopTracer.\r\n * This patching changes the default tracer to a patched BasicTracer\r\n * which emits ended spans as diag-channel events.\r\n *\r\n * The @opentelemetry/tracing package must be installed to use these patches\r\n * https://www.npmjs.com/package/@opentelemetry/tracing\r\n * @param coreTracing\r\n */\r\nvar azureCoreTracingPatchFunction = function (coreTracing) {\r\n    if (isPatched) {\r\n        // tracer is already cached -- noop\r\n        return coreTracing;\r\n    }\r\n    try {\r\n        var tracing = require(\"@opentelemetry/sdk-trace-base\");\r\n        var api = require(\"@opentelemetry/api\");\r\n        var defaultProvider = new tracing.BasicTracerProvider();\r\n        var defaultTracer = defaultProvider.getTracer(\"applicationinsights tracer\");\r\n        // Patch Azure SDK setTracer, @azure/core-tracing <= 1.0.0-preview.12\r\n        if (coreTracing.setTracer) {\r\n            var setTracerOriginal_1 = coreTracing.setTracer;\r\n            coreTracing.setTracer = function (tracer) {\r\n                // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\r\n                // set while the span is constructed\r\n                var startSpanOriginal = tracer.startSpan;\r\n                tracer.startSpan = function (name, options, context) {\r\n                    var span = startSpanOriginal.call(this, name, options, context);\r\n                    var originalEnd = span.end;\r\n                    span.end = function () {\r\n                        var result = originalEnd.apply(this, arguments);\r\n                        diagnostic_channel_1.channel.publish(publisherName, span);\r\n                        return result;\r\n                    };\r\n                    return span;\r\n                };\r\n                tracer[exports.AzureMonitorSymbol] = true;\r\n                setTracerOriginal_1.call(this, tracer);\r\n            };\r\n            api.trace.getSpan(api.context.active()); // seed OpenTelemetryScopeManagerWrapper with \"active\" symbol\r\n            coreTracing.setTracer(defaultTracer);\r\n        }\r\n        else { // Patch OpenTelemetry setGlobalTracerProvider  @azure/core-tracing > 1.0.0-preview.13\r\n            var setGlobalTracerProviderOriginal_1 = api.trace.setGlobalTracerProvider;\r\n            api.trace.setGlobalTracerProvider = function (tracerProvider) {\r\n                var getTracerOriginal = tracerProvider.getTracer;\r\n                tracerProvider.getTracer = function (tracerName, version) {\r\n                    var tracer = getTracerOriginal.call(this, tracerName, version);\r\n                    if (!tracer[exports.AzureMonitorSymbol]) { // Avoid patching multiple times\r\n                        var startSpanOriginal_1 = tracer.startSpan;\r\n                        tracer.startSpan = function (spanName, options, context) {\r\n                            var span = startSpanOriginal_1.call(this, spanName, options, context);\r\n                            var originalEnd = span.end;\r\n                            span.end = function () {\r\n                                var result = originalEnd.apply(this, arguments);\r\n                                diagnostic_channel_1.channel.publish(publisherName, span);\r\n                                return result;\r\n                            };\r\n                            return span;\r\n                        };\r\n                        tracer[exports.AzureMonitorSymbol] = true;\r\n                    }\r\n                    return tracer;\r\n                };\r\n                return setGlobalTracerProviderOriginal_1.call(this, tracerProvider);\r\n            };\r\n            defaultProvider.register();\r\n            api.trace.getSpan(api.context.active()); // seed OpenTelemetryScopeManagerWrapper with \"active\" symbol\r\n            // Register Azure SDK instrumentation\r\n            var openTelemetryInstr = require(\"@opentelemetry/instrumentation\");\r\n            var azureSdkInstr = require(\"@azure/opentelemetry-instrumentation-azure-sdk\");\r\n            openTelemetryInstr.registerInstrumentations({\r\n                instrumentations: [\r\n                    azureSdkInstr.createAzureSdkInstrumentation()\r\n                ]\r\n            });\r\n        }\r\n        isPatched = true;\r\n    }\r\n    catch (e) { /* squash errors */ }\r\n    return coreTracing;\r\n};\r\nexports.azureCoreTracing = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: azureCoreTracingPatchFunction,\r\n    publisherName: publisherName\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=azure-coretracing.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.bunyan = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.console = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.tedious = exports.pgPool = exports.pg = exports.winston = exports.redis = exports.mysql = exports.mongodb = exports.mongodbCore = exports.console = exports.bunyan = exports.azuresdk = void 0;\r\nvar azuresdk = require(\"./azure-coretracing.pub\");\r\nexports.azuresdk = azuresdk;\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar tedious = require(\"./tedious.pub\");\r\nexports.tedious = tedious;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n    azuresdk.enable();\r\n    tedious.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mongoCore = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore = {\r\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\r\n    patch: mongodbcorePatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mongo330 = exports.mongo3 = exports.mongo2 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            }\r\n        }\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = __assign(__assign({}, event), { time: new Date() });\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event.operationId === \"function\") {\r\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n        }\r\n        else {\r\n            // fallback -- correlation will not work here\r\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event.operationId === \"function\") {\r\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n        }\r\n        else {\r\n            // fallback -- correlation will not work here\r\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\nvar mongodb3PatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument();\r\n    var eventMap = {};\r\n    var contextMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n        eventMap[event.requestId] = __assign(__assign({}, event), { time: new Date() });\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\r\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\r\nvar mongodbcorePatchFunction = function (originalMongo) {\r\n    var originalConnect = originalMongo.Server.prototype.connect;\r\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.coreTopology.s.pool.write;\r\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.coreTopology.s.pool.logout;\r\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongo;\r\n};\r\nvar mongodb330PatchFunction = function (originalMongo) {\r\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\r\n    var listener = originalMongo.instrument();\r\n    var eventMap = {};\r\n    var contextMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\r\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n            delete contextMap[event.requestId];\r\n        }\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\r\n    patch: mongodbPatchFunction\r\n};\r\nexports.mongo3 = {\r\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\r\n    patch: mongodb3PatchFunction\r\n};\r\nexports.mongo330 = {\r\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\r\n    patch: mongodb330PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.mysql = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null, startDate: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            resultContainer.startDate = new Date();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\"\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\"\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: mysqlPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.postgresPool1 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        return originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\r\n    patch: postgresPool1PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.postgres = exports.postgres6 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nvar publisherName = \"postgres\";\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n            time: new Date()\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(publisherName, data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nfunction postgresLatestPatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n            time: new Date()\r\n        };\r\n        var queryResult;\r\n        var start = process.hrtime();\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(publisherName, data);\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // Only try to wrap the callback if it is a function. We want to keep the same\r\n        // behavior of returning a promise only if no callback is provided. Wrapping\r\n        // a nonfunction makes it a function and pg will interpret it as a callback\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values\r\n                    };\r\n                    callbackProvided = typeof callback === \"function\";\r\n                    callback = callbackProvided ? patchCallback(callback) : callback;\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    if (callback) {\r\n                        callbackProvided = typeof callback === \"function\";\r\n                        callback = callbackProvided ? patchCallback(callback) : callback;\r\n                    }\r\n                    else {\r\n                        callbackProvided = typeof values === \"function\";\r\n                        values = callbackProvided ? patchCallback(values) : values;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values\r\n                    };\r\n                }\r\n                else if (config.cursor) {\r\n                    data.query.text = (_a = config.cursor) === null || _a === void 0 ? void 0 : _a.text;\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callbackProvided = typeof callback === \"function\";\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    callbackProvided = typeof values === \"function\";\r\n                    values = callbackProvided ? patchCallback(values) : values;\r\n                }\r\n                else {\r\n                    callbackProvided = typeof config.callback === \"function\";\r\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        try {\r\n            queryResult = originalClientQuery.apply(this, arguments);\r\n        }\r\n        catch (err) {\r\n            patchCallback()(err, undefined);\r\n            throw err;\r\n        }\r\n        if (!callbackProvided) {\r\n            if ((queryResult instanceof Promise)) {\r\n                return queryResult\r\n                    // pass resolved promise after publishing the event\r\n                    .then(function (result) {\r\n                    patchCallback()(undefined, result);\r\n                    return new _this._Promise(function (resolve, reject) {\r\n                        resolve(result);\r\n                    });\r\n                })\r\n                    // pass along rejected promise after publishing the error\r\n                    .catch(function (error) {\r\n                    patchCallback()(error, undefined);\r\n                    return new _this._Promise(function (resolve, reject) {\r\n                        reject(error);\r\n                    });\r\n                });\r\n            }\r\n            // Result could be a Cursor, QueryStream or Readable Stream\r\n            else {\r\n                var command = queryResult.text ? queryResult.text : \"\";\r\n                if (queryResult.cursor) {\r\n                    command = (_b = queryResult.cursor) === null || _b === void 0 ? void 0 : _b.text;\r\n                }\r\n                if (command) {\r\n                    var res = {\r\n                        command: command,\r\n                        rowCount: 0,\r\n                    };\r\n                    patchCallback()(undefined, res);\r\n                }\r\n            }\r\n        }\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.*\",\r\n    patch: postgres6PatchFunction\r\n};\r\nexports.postgres = {\r\n    versionSpecifier: \">=7.* <=8.*\",\r\n    patch: postgresLatestPatchFunction,\r\n    publisherName: publisherName\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.redis = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                var startDate_1 = new Date();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\r\n    patch: redisPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.tedious = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar tediousPatchFunction = function (originalTedious) {\r\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\r\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\r\n        function getPatchedCallback(origCallback) {\r\n            var start = process.hrtime();\r\n            var data = {\r\n                query: {},\r\n                database: {\r\n                    host: null,\r\n                    port: null\r\n                },\r\n                result: null,\r\n                error: null,\r\n                duration: 0\r\n            };\r\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\r\n                var end = process.hrtime(start);\r\n                data = __assign(__assign({}, data), { database: {\r\n                        host: this.connection.config.server,\r\n                        port: this.connection.config.options.port\r\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\r\n                        text: this.parametersByName.statement.value\r\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\r\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\r\n                origCallback.call(this, err, rowCount, rows);\r\n            });\r\n        }\r\n        var request = arguments[0];\r\n        arguments[0].callback = getPatchedCallback(request.callback);\r\n        originalMakeRequest.apply(this, arguments);\r\n    };\r\n    return originalTedious;\r\n};\r\nexports.tedious = {\r\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\r\n    patch: tediousPatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.enable = exports.winston2 = exports.winston3 = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winston2PatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nvar winston3PatchFunction = function (originalWinston) {\r\n    var mapLevelToKind = function (winston, level) {\r\n        var levelKind;\r\n        if (winston.config.npm.levels[level] != null) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (winston.config.syslog.levels[level] != null) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        return levelKind;\r\n    };\r\n    var AppInsightsTransport = /** @class */ (function (_super) {\r\n        __extends(AppInsightsTransport, _super);\r\n        function AppInsightsTransport(winston, opts) {\r\n            var _this = _super.call(this, opts) || this;\r\n            _this.winston = winston;\r\n            return _this;\r\n        }\r\n        AppInsightsTransport.prototype.log = function (info, callback) {\r\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\r\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\r\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\r\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\r\n            var levelKind = mapLevelToKind(this.winston, level);\r\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\r\n            for (var key in splat) {\r\n                if (splat.hasOwnProperty(key)) {\r\n                    meta[key] = splat[key];\r\n                }\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\r\n            callback();\r\n        };\r\n        return AppInsightsTransport;\r\n    }(originalWinston.Transport));\r\n    // Patch this function\r\n    function patchedConfigure() {\r\n        // Grab highest sev logging level in case of custom logging levels\r\n        var levels = originalWinston.config.npm.levels;\r\n        if (arguments && arguments[0] && arguments[0].levels) {\r\n            levels = arguments[0].levels;\r\n        }\r\n        var lastLevel;\r\n        for (var level in levels) {\r\n            if (levels.hasOwnProperty(level)) {\r\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\r\n            }\r\n        }\r\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\r\n    }\r\n    var origCreate = originalWinston.createLogger;\r\n    originalWinston.createLogger = function patchedCreate() {\r\n        // Grab highest sev logging level in case of custom logging levels\r\n        var levels = originalWinston.config.npm.levels;\r\n        if (arguments && arguments[0] && arguments[0].levels) {\r\n            levels = arguments[0].levels;\r\n        }\r\n        var lastLevel;\r\n        for (var level in levels) {\r\n            if (levels.hasOwnProperty(level)) {\r\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\r\n            }\r\n        }\r\n        // Add custom app insights transport to the end\r\n        // Remark: Configure is not available until after createLogger()\r\n        // and the Logger prototype is not exported in winston 3.x, so\r\n        // patch both createLogger and configure. Could also call configure\r\n        // again after createLogger, but that would cause configure to be called\r\n        // twice per create.\r\n        var result = origCreate.apply(this, arguments);\r\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\r\n        var origConfigure = result.configure;\r\n        result.configure = function () {\r\n            origConfigure.apply(this, arguments);\r\n            patchedConfigure.apply(this, arguments);\r\n        };\r\n        return result;\r\n    };\r\n    var origRootConfigure = originalWinston.configure;\r\n    originalWinston.configure = function () {\r\n        origRootConfigure.apply(this, arguments);\r\n        patchedConfigure.apply(this, arguments);\r\n    };\r\n    originalWinston.add(new AppInsightsTransport(originalWinston));\r\n    return originalWinston;\r\n};\r\nexports.winston3 = {\r\n    versionSpecifier: \"3.x\",\r\n    patch: winston3PatchFunction\r\n};\r\nexports.winston2 = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winston2PatchFunction\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 4694;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 420;\nmodule.exports = webpackEmptyContext;","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.channel = exports.ContextPreservingEventEmitter = exports.trueFilter = exports.makePatchingRequire = void 0;\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nObject.defineProperty(exports, \"makePatchingRequire\", { enumerable: true, get: function () { return patchRequire_2.makePatchingRequire; } });\r\nvar trueFilter = function (publishing) { return true; };\r\nexports.trueFilter = trueFilter;\r\nvar ContextPreservingEventEmitter = /** @class */ (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.modulesPatched = [];\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter, patchCallback) {\r\n        if (filter === void 0) { filter = exports.trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter, patchCallback: patchCallback });\r\n        var patched = this.checkIfModuleIsAlreadyPatched(name);\r\n        if (patched && patchCallback) {\r\n            patchCallback(patched.name, patched.version);\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = exports.trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addPatchedModule = function (name, version) {\r\n        for (var _i = 0, _a = this.modulesPatched; _i < _a.length; _i++) {\r\n            var module_1 = _a[_i];\r\n            if (module_1.name === name) {\r\n                return;\r\n            }\r\n        }\r\n        // If new patch notify listeners\r\n        this.modulesPatched.push({ name: name, version: version });\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            listeners.forEach(function (listener) {\r\n                if (listener.patchCallback) {\r\n                    listener.patchCallback(name, version);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.checkIfModuleIsAlreadyPatched = function (name) {\r\n        for (var _i = 0, _a = this.modulesPatched; _i < _a.length; _i++) {\r\n            var module_2 = _a[_i];\r\n            if (module_2.name === name) {\r\n                return module_2;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nexports.ContextPreservingEventEmitter = ContextPreservingEventEmitter;\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.makePatchingRequire = void 0;\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\nvar channel_1 = require(\"./channel\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                    if (channel_1.channel) {\r\n                        var name_1 = modulePatcher.publisherName || moduleId;\r\n                        channel_1.channel.addPatchedModule(name_1, moduleVersion);\r\n                    }\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range\n      .trim()\n      .split(/\\s+/)\n      .join(' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => comps.join(' ').trim())\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('lru-cache')\nconst cache = new LRU({ max: 1000 })\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    let next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(`${match[2]}.${match[3] || '0'}.${match[4] || '0'}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCE', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst net_1 = __importDefault(require(\"net\"));\nconst tls_1 = __importDefault(require(\"tls\"));\nconst url_1 = __importDefault(require(\"url\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst once_1 = __importDefault(require(\"@tootallnate/once\"));\nconst agent_base_1 = require(\"agent-base\");\nconst debug = (0, debug_1.default)('http-proxy-agent');\nfunction isHTTPS(protocol) {\n    return typeof protocol === 'string' ? /^https:?$/i.test(protocol) : false;\n}\n/**\n * The `HttpProxyAgent` implements an HTTP Agent subclass that connects\n * to the specified \"HTTP proxy server\" in order to proxy HTTP requests.\n *\n * @api public\n */\nclass HttpProxyAgent extends agent_base_1.Agent {\n    constructor(_opts) {\n        let opts;\n        if (typeof _opts === 'string') {\n            opts = url_1.default.parse(_opts);\n        }\n        else {\n            opts = _opts;\n        }\n        if (!opts) {\n            throw new Error('an HTTP(S) proxy server `host` and `port` must be specified!');\n        }\n        debug('Creating new HttpProxyAgent instance: %o', opts);\n        super(opts);\n        const proxy = Object.assign({}, opts);\n        // If `true`, then connect to the proxy server over TLS.\n        // Defaults to `false`.\n        this.secureProxy = opts.secureProxy || isHTTPS(proxy.protocol);\n        // Prefer `hostname` over `host`, and set the `port` if needed.\n        proxy.host = proxy.hostname || proxy.host;\n        if (typeof proxy.port === 'string') {\n            proxy.port = parseInt(proxy.port, 10);\n        }\n        if (!proxy.port && proxy.host) {\n            proxy.port = this.secureProxy ? 443 : 80;\n        }\n        if (proxy.host && proxy.path) {\n            // If both a `host` and `path` are specified then it's most likely\n            // the result of a `url.parse()` call... we need to remove the\n            // `path` portion so that `net.connect()` doesn't attempt to open\n            // that as a Unix socket file.\n            delete proxy.path;\n            delete proxy.pathname;\n        }\n        this.proxy = proxy;\n    }\n    /**\n     * Called when the node-core HTTP client library is creating a\n     * new HTTP request.\n     *\n     * @api protected\n     */\n    callback(req, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { proxy, secureProxy } = this;\n            const parsed = url_1.default.parse(req.path);\n            if (!parsed.protocol) {\n                parsed.protocol = 'http:';\n            }\n            if (!parsed.hostname) {\n                parsed.hostname = opts.hostname || opts.host || null;\n            }\n            if (parsed.port == null && typeof opts.port) {\n                parsed.port = String(opts.port);\n            }\n            if (parsed.port === '80') {\n                // if port is 80, then we can remove the port so that the\n                // \":80\" portion is not on the produced URL\n                parsed.port = '';\n            }\n            // Change the `http.ClientRequest` instance's \"path\" field\n            // to the absolute path of the URL that will be requested.\n            req.path = url_1.default.format(parsed);\n            // Inject the `Proxy-Authorization` header if necessary.\n            if (proxy.auth) {\n                req.setHeader('Proxy-Authorization', `Basic ${Buffer.from(proxy.auth).toString('base64')}`);\n            }\n            // Create a socket connection to the proxy server.\n            let socket;\n            if (secureProxy) {\n                debug('Creating `tls.Socket`: %o', proxy);\n                socket = tls_1.default.connect(proxy);\n            }\n            else {\n                debug('Creating `net.Socket`: %o', proxy);\n                socket = net_1.default.connect(proxy);\n            }\n            // At this point, the http ClientRequest's internal `_header` field\n            // might have already been set. If this is the case then we'll need\n            // to re-generate the string since we just changed the `req.path`.\n            if (req._header) {\n                let first;\n                let endOfHeaders;\n                debug('Regenerating stored HTTP header string for request');\n                req._header = null;\n                req._implicitHeader();\n                if (req.output && req.output.length > 0) {\n                    // Node < 12\n                    debug('Patching connection write() output buffer with updated header');\n                    first = req.output[0];\n                    endOfHeaders = first.indexOf('\\r\\n\\r\\n') + 4;\n                    req.output[0] = req._header + first.substring(endOfHeaders);\n                    debug('Output buffer: %o', req.output);\n                }\n                else if (req.outputData && req.outputData.length > 0) {\n                    // Node >= 12\n                    debug('Patching connection write() output buffer with updated header');\n                    first = req.outputData[0].data;\n                    endOfHeaders = first.indexOf('\\r\\n\\r\\n') + 4;\n                    req.outputData[0].data =\n                        req._header + first.substring(endOfHeaders);\n                    debug('Output buffer: %o', req.outputData[0].data);\n                }\n            }\n            // Wait for the socket's `connect` event, so that this `callback()`\n            // function throws instead of the `http` request machinery. This is\n            // important for i.e. `PacProxyAgent` which determines a failed proxy\n            // connection via the `callback()` function throwing.\n            yield (0, once_1.default)(socket, 'connect');\n            return socket;\n        });\n    }\n}\nexports.default = HttpProxyAgent;\n//# sourceMappingURL=agent.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst agent_1 = __importDefault(require(\"./agent\"));\nfunction createHttpProxyAgent(opts) {\n    return new agent_1.default(opts);\n}\n(function (createHttpProxyAgent) {\n    createHttpProxyAgent.HttpProxyAgent = agent_1.default;\n    createHttpProxyAgent.prototype = agent_1.default.prototype;\n})(createHttpProxyAgent || (createHttpProxyAgent = {}));\nmodule.exports = createHttpProxyAgent;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst net_1 = __importDefault(require(\"net\"));\nconst tls_1 = __importDefault(require(\"tls\"));\nconst url_1 = __importDefault(require(\"url\"));\nconst assert_1 = __importDefault(require(\"assert\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst agent_base_1 = require(\"agent-base\");\nconst parse_proxy_response_1 = __importDefault(require(\"./parse-proxy-response\"));\nconst debug = debug_1.default('https-proxy-agent:agent');\n/**\n * The `HttpsProxyAgent` implements an HTTP Agent subclass that connects to\n * the specified \"HTTP(s) proxy server\" in order to proxy HTTPS requests.\n *\n * Outgoing HTTP requests are first tunneled through the proxy server using the\n * `CONNECT` HTTP request method to establish a connection to the proxy server,\n * and then the proxy server connects to the destination target and issues the\n * HTTP request from the proxy server.\n *\n * `https:` requests have their socket connection upgraded to TLS once\n * the connection to the proxy server has been established.\n *\n * @api public\n */\nclass HttpsProxyAgent extends agent_base_1.Agent {\n    constructor(_opts) {\n        let opts;\n        if (typeof _opts === 'string') {\n            opts = url_1.default.parse(_opts);\n        }\n        else {\n            opts = _opts;\n        }\n        if (!opts) {\n            throw new Error('an HTTP(S) proxy server `host` and `port` must be specified!');\n        }\n        debug('creating new HttpsProxyAgent instance: %o', opts);\n        super(opts);\n        const proxy = Object.assign({}, opts);\n        // If `true`, then connect to the proxy server over TLS.\n        // Defaults to `false`.\n        this.secureProxy = opts.secureProxy || isHTTPS(proxy.protocol);\n        // Prefer `hostname` over `host`, and set the `port` if needed.\n        proxy.host = proxy.hostname || proxy.host;\n        if (typeof proxy.port === 'string') {\n            proxy.port = parseInt(proxy.port, 10);\n        }\n        if (!proxy.port && proxy.host) {\n            proxy.port = this.secureProxy ? 443 : 80;\n        }\n        // ALPN is supported by Node.js >= v5.\n        // attempt to negotiate http/1.1 for proxy servers that support http/2\n        if (this.secureProxy && !('ALPNProtocols' in proxy)) {\n            proxy.ALPNProtocols = ['http 1.1'];\n        }\n        if (proxy.host && proxy.path) {\n            // If both a `host` and `path` are specified then it's most likely\n            // the result of a `url.parse()` call... we need to remove the\n            // `path` portion so that `net.connect()` doesn't attempt to open\n            // that as a Unix socket file.\n            delete proxy.path;\n            delete proxy.pathname;\n        }\n        this.proxy = proxy;\n    }\n    /**\n     * Called when the node-core HTTP client library is creating a\n     * new HTTP request.\n     *\n     * @api protected\n     */\n    callback(req, opts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { proxy, secureProxy } = this;\n            // Create a socket connection to the proxy server.\n            let socket;\n            if (secureProxy) {\n                debug('Creating `tls.Socket`: %o', proxy);\n                socket = tls_1.default.connect(proxy);\n            }\n            else {\n                debug('Creating `net.Socket`: %o', proxy);\n                socket = net_1.default.connect(proxy);\n            }\n            const headers = Object.assign({}, proxy.headers);\n            const hostname = `${opts.host}:${opts.port}`;\n            let payload = `CONNECT ${hostname} HTTP/1.1\\r\\n`;\n            // Inject the `Proxy-Authorization` header if necessary.\n            if (proxy.auth) {\n                headers['Proxy-Authorization'] = `Basic ${Buffer.from(proxy.auth).toString('base64')}`;\n            }\n            // The `Host` header should only include the port\n            // number when it is not the default port.\n            let { host, port, secureEndpoint } = opts;\n            if (!isDefaultPort(port, secureEndpoint)) {\n                host += `:${port}`;\n            }\n            headers.Host = host;\n            headers.Connection = 'close';\n            for (const name of Object.keys(headers)) {\n                payload += `${name}: ${headers[name]}\\r\\n`;\n            }\n            const proxyResponsePromise = parse_proxy_response_1.default(socket);\n            socket.write(`${payload}\\r\\n`);\n            const { statusCode, buffered } = yield proxyResponsePromise;\n            if (statusCode === 200) {\n                req.once('socket', resume);\n                if (opts.secureEndpoint) {\n                    // The proxy is connecting to a TLS server, so upgrade\n                    // this socket connection to a TLS connection.\n                    debug('Upgrading socket connection to TLS');\n                    const servername = opts.servername || opts.host;\n                    return tls_1.default.connect(Object.assign(Object.assign({}, omit(opts, 'host', 'hostname', 'path', 'port')), { socket,\n                        servername }));\n                }\n                return socket;\n            }\n            // Some other status code that's not 200... need to re-play the HTTP\n            // header \"data\" events onto the socket once the HTTP machinery is\n            // attached so that the node core `http` can parse and handle the\n            // error status code.\n            // Close the original socket, and a new \"fake\" socket is returned\n            // instead, so that the proxy doesn't get the HTTP request\n            // written to it (which may contain `Authorization` headers or other\n            // sensitive data).\n            //\n            // See: https://hackerone.com/reports/541502\n            socket.destroy();\n            const fakeSocket = new net_1.default.Socket({ writable: false });\n            fakeSocket.readable = true;\n            // Need to wait for the \"socket\" event to re-play the \"data\" events.\n            req.once('socket', (s) => {\n                debug('replaying proxy buffer for failed request');\n                assert_1.default(s.listenerCount('data') > 0);\n                // Replay the \"buffered\" Buffer onto the fake `socket`, since at\n                // this point the HTTP module machinery has been hooked up for\n                // the user.\n                s.push(buffered);\n                s.push(null);\n            });\n            return fakeSocket;\n        });\n    }\n}\nexports.default = HttpsProxyAgent;\nfunction resume(socket) {\n    socket.resume();\n}\nfunction isDefaultPort(port, secure) {\n    return Boolean((!secure && port === 80) || (secure && port === 443));\n}\nfunction isHTTPS(protocol) {\n    return typeof protocol === 'string' ? /^https:?$/i.test(protocol) : false;\n}\nfunction omit(obj, ...keys) {\n    const ret = {};\n    let key;\n    for (key in obj) {\n        if (!keys.includes(key)) {\n            ret[key] = obj[key];\n        }\n    }\n    return ret;\n}\n//# sourceMappingURL=agent.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst agent_1 = __importDefault(require(\"./agent\"));\nfunction createHttpsProxyAgent(opts) {\n    return new agent_1.default(opts);\n}\n(function (createHttpsProxyAgent) {\n    createHttpsProxyAgent.HttpsProxyAgent = agent_1.default;\n    createHttpsProxyAgent.prototype = agent_1.default.prototype;\n})(createHttpsProxyAgent || (createHttpsProxyAgent = {}));\nmodule.exports = createHttpsProxyAgent;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst debug_1 = __importDefault(require(\"debug\"));\nconst debug = debug_1.default('https-proxy-agent:parse-proxy-response');\nfunction parseProxyResponse(socket) {\n    return new Promise((resolve, reject) => {\n        // we need to buffer any HTTP traffic that happens with the proxy before we get\n        // the CONNECT response, so that if the response is anything other than an \"200\"\n        // response code, then we can re-play the \"data\" events on the socket once the\n        // HTTP parser is hooked up...\n        let buffersLength = 0;\n        const buffers = [];\n        function read() {\n            const b = socket.read();\n            if (b)\n                ondata(b);\n            else\n                socket.once('readable', read);\n        }\n        function cleanup() {\n            socket.removeListener('end', onend);\n            socket.removeListener('error', onerror);\n            socket.removeListener('close', onclose);\n            socket.removeListener('readable', read);\n        }\n        function onclose(err) {\n            debug('onclose had error %o', err);\n        }\n        function onend() {\n            debug('onend');\n        }\n        function onerror(err) {\n            cleanup();\n            debug('onerror %o', err);\n            reject(err);\n        }\n        function ondata(b) {\n            buffers.push(b);\n            buffersLength += b.length;\n            const buffered = Buffer.concat(buffers, buffersLength);\n            const endOfHeaders = buffered.indexOf('\\r\\n\\r\\n');\n            if (endOfHeaders === -1) {\n                // keep buffering\n                debug('have not received end of HTTP headers yet...');\n                read();\n                return;\n            }\n            const firstLine = buffered.toString('ascii', 0, buffered.indexOf('\\r\\n'));\n            const statusCode = +firstLine.split(' ')[1];\n            debug('got proxy server response: %o', firstLine);\n            resolve({\n                statusCode,\n                buffered\n            });\n        }\n        socket.on('error', onerror);\n        socket.on('close', onclose);\n        socket.on('end', onend);\n        read();\n    });\n}\nexports.default = parseProxyResponse;\n//# sourceMappingURL=parse-proxy-response.js.map","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\nvar MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar safeRe = exports.safeRe = []\nvar src = exports.src = []\nvar R = 0\n\nvar LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nvar safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nfunction makeSafeRe (value) {\n  for (var i = 0; i < safeRegexReplacements.length; i++) {\n    var token = safeRegexReplacements[i][0]\n    var max = safeRegexReplacements[i][1]\n    value = value\n      .split(token + '*').join(token + '{0,' + max + '}')\n      .split(token + '+').join(token + '{1,' + max + '}')\n  }\n  return value\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '\\\\d+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-]' + LETTERDASHNUMBER + '*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = LETTERDASHNUMBER + '+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nsafeRe[TILDETRIM] = new RegExp(makeSafeRe(src[TILDETRIM]), 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nsafeRe[CARETTRIM] = new RegExp(makeSafeRe(src[CARETTRIM]), 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nsafeRe[COMPARATORTRIM] = new RegExp(makeSafeRe(src[COMPARATORTRIM]), 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n\n    // Replace all greedy whitespace to prevent regex dos issues. These regex are\n    // used internally via the safeRe object since all inputs in this library get\n    // normalized first to trim and collapse all extra whitespace. The original\n    // regexes are exported for userland consumption and lower level usage. A\n    // future breaking change could export the safer regex only with a note that\n    // all input should have extra whitespace removed.\n    safeRe[i] = new RegExp(makeSafeRe(src[i]))\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? safeRe[LOOSE] : safeRe[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? safeRe[LOOSE] : safeRe[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  comp = comp.trim().split(/\\s+/).join(' ')\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? safeRe[COMPARATORLOOSE] : safeRe[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First reduce all whitespace as much as possible so we do not have to rely\n  // on potentially slow regexes like \\s*. This is then stored and used for\n  // future error messages as well.\n  this.raw = range\n    .trim()\n    .split(/\\s+/)\n    .join(' ')\n\n  // First, split based on boolean or ||\n  this.set = this.raw.split('||').map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + this.raw)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? safeRe[HYPHENRANGELOOSE] : safeRe[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(safeRe[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, safeRe[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(safeRe[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(safeRe[CARETTRIM], caretTrimReplace)\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n  var compRe = loose ? safeRe[COMPARATORLOOSE] : safeRe[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? safeRe[TILDELOOSE] : safeRe[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? safeRe[CARETLOOSE] : safeRe[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? safeRe[XRANGELOOSE] : safeRe[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(safeRe[STAR], '')\n}\n\n// This function is passed to string.replace(safeRe[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(safeRe[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif ('GITHUB_ACTIONS' in env) {\n\t\treturn 1;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport { isSupportedEnvironment } from './common/uri';\nimport { IntervalTimer, SequencerByKey } from './common/async';\nimport { generateCodeChallenge, generateCodeVerifier, randomUUID } from './cryptoUtils';\nimport { BetterTokenStorage, IDidChangeInOtherWindowEvent } from './betterSecretStorage';\nimport { LoopbackAuthServer } from './node/authServer';\nimport { base64Decode } from './node/buffer';\nimport { fetching } from './node/fetch';\nimport { UriEventHandler } from './UriEventHandler';\nimport TelemetryReporter from '@vscode/extension-telemetry';\nimport { Environment } from '@azure/ms-rest-azure-env';\n\nconst redirectUrl = 'https://vscode.dev/redirect';\nconst defaultActiveDirectoryEndpointUrl = Environment.AzureCloud.activeDirectoryEndpointUrl;\nconst DEFAULT_CLIENT_ID = 'aebc6443-996d-45c2-90f0-388ff96faa56';\nconst DEFAULT_TENANT = 'organizations';\nconst MSA_TID = '9188040d-6c67-4c5b-b112-36a304b66dad';\nconst MSA_PASSTHRU_TID = 'f8cdef31-a31e-4b4a-93e4-5f571e91255a';\n\nconst enum MicrosoftAccountType {\n\tAAD = 'aad',\n\tMSA = 'msa',\n\tUnknown = 'unknown'\n}\n\ninterface IToken {\n\taccessToken?: string; // When unable to refresh due to network problems, the access token becomes undefined\n\tidToken?: string; // depending on the scopes can be either supplied or empty\n\n\texpiresIn?: number; // How long access token is valid, in seconds\n\texpiresAt?: number; // UNIX epoch time at which token will expire\n\trefreshToken: string;\n\n\taccount: {\n\t\tlabel: string;\n\t\tid: string;\n\t\ttype: MicrosoftAccountType;\n\t};\n\tscope: string;\n\tsessionId: string; // The account id + the scope\n}\n\nexport interface IStoredSession {\n\tid: string;\n\trefreshToken: string;\n\tscope: string; // Scopes are alphabetized and joined with a space\n\taccount: {\n\t\tlabel: string;\n\t\tid: string;\n\t};\n\tendpoint: string | undefined;\n}\n\nexport interface ITokenResponse {\n\taccess_token: string;\n\texpires_in: number;\n\text_expires_in: number;\n\trefresh_token: string;\n\tscope: string;\n\ttoken_type: string;\n\tid_token?: string;\n}\n\nexport interface IMicrosoftTokens {\n\taccessToken: string;\n\tidToken?: string;\n}\n\ninterface IScopeData {\n\toriginalScopes?: string[];\n\tscopes: string[];\n\tscopeStr: string;\n\tscopesToSend: string;\n\tclientId: string;\n\ttenant: string;\n}\n\nexport const REFRESH_NETWORK_FAILURE = 'Network failure';\n\nexport class AzureActiveDirectoryService {\n\t// For details on why this is set to 2/3... see https://github.com/microsoft/vscode/issues/133201#issuecomment-966668197\n\tprivate static a = 1000 * 2 / 3;\n\tprivate static b = 1000 * 60 * 30;\n\n\tprivate c: IToken[] = [];\n\tprivate d: Map<string, NodeJS.Timeout> = new Map<string, NodeJS.Timeout>();\n\tprivate f: vscode.EventEmitter<vscode.AuthenticationProviderAuthenticationSessionsChangeEvent> = new vscode.EventEmitter<vscode.AuthenticationProviderAuthenticationSessionsChangeEvent>();\n\n\t// Used to keep track of current requests when not using the local server approach.\n\tprivate g = new Map<string, string[]>();\n\tprivate h = new Map<string, Promise<vscode.AuthenticationSession>>();\n\tprivate i = new Map<string, string>();\n\n\t// Used to keep track of tokens that we need to store but can't because we aren't the focused window.\n\tprivate j: Map<string, IToken> = new Map<string, IToken>();\n\n\t// Used to sequence requests to the same scope.\n\tprivate k = new SequencerByKey<string>();\n\n\tconstructor(\n\t\tprivate readonly l: vscode.LogOutputChannel,\n\t\t_context: vscode.ExtensionContext,\n\t\tprivate readonly m: UriEventHandler,\n\t\tprivate readonly n: BetterTokenStorage<IStoredSession>,\n\t\tprivate readonly o: TelemetryReporter,\n\t\tprivate readonly p: Environment\n\t) {\n\t\t_context.subscriptions.push(this.n.onDidChangeInOtherWindow((e) => this.N(e)));\n\t\t_context.subscriptions.push(vscode.window.onDidChangeWindowState(async (e) => e.focused && await this.M()));\n\n\t\t// In the event that a window isn't focused for a long time, we should still try to store the tokens at some point.\n\t\tconst timer = new IntervalTimer();\n\t\ttimer.cancelAndSet(\n\t\t\t() => !vscode.window.state.focused && this.M(),\n\t\t\t// 5 hours + random extra 0-30 seconds so that each window doesn't try to store at the same time\n\t\t\t(18000000) + Math.floor(Math.random() * 30000));\n\t\t_context.subscriptions.push(timer);\n\t}\n\n\tpublic async initialize(): Promise<void> {\n\t\tthis.l.trace('Reading sessions from secret storage...');\n\t\tconst sessions = await this.n.getAll(item => this.O(item));\n\t\tthis.l.trace(`Got ${sessions.length} stored sessions`);\n\n\t\tconst refreshes = sessions.map(async session => {\n\t\t\tthis.l.trace(`[${session.scope}] '${session.id}' Read stored session`);\n\t\t\tconst scopes = session.scope.split(' ');\n\t\t\tconst scopeData: IScopeData = {\n\t\t\t\tscopes,\n\t\t\t\tscopeStr: session.scope,\n\t\t\t\t// filter our special scopes\n\t\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\tclientId: this.E(scopes),\n\t\t\t\ttenant: this.F(scopes),\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tawait this.C(session.refreshToken, scopeData, session.id);\n\t\t\t} catch (e) {\n\t\t\t\t// If we aren't connected to the internet, then wait and try to refresh again later.\n\t\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\tthis.c.push({\n\t\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\t\trefreshToken: session.refreshToken,\n\t\t\t\t\t\taccount: {\n\t\t\t\t\t\t\t...session.account,\n\t\t\t\t\t\t\ttype: MicrosoftAccountType.Unknown\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: session.scope,\n\t\t\t\t\t\tsessionId: session.id\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\tthis.l.error(e);\n\t\t\t\t\tawait this.w({\n\t\t\t\t\t\taccessToken: undefined,\n\t\t\t\t\t\trefreshToken: session.refreshToken,\n\t\t\t\t\t\taccount: {\n\t\t\t\t\t\t\t...session.account,\n\t\t\t\t\t\t\ttype: MicrosoftAccountType.Unknown\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope: session.scope,\n\t\t\t\t\t\tsessionId: session.id\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst result = await Promise.allSettled(refreshes);\n\t\tfor (const res of result) {\n\t\t\tif (res.status === 'rejected') {\n\t\t\t\tthis.l.error(`Failed to initialize stored data: ${res.reason}`);\n\t\t\t\tthis.clearSessions();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (const token of this.c) {\n\t\t\t/* __GDPR__\n\t\t\t\t\"login\" : {\n\t\t\t\t\t\"owner\": \"TylerLeonhardt\",\n\t\t\t\t\t\"comment\": \"Used to determine the usage of the Microsoft Auth Provider.\",\n\t\t\t\t\t\"scopes\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Used to determine what scope combinations are being requested.\" },\n\t\t\t\t\t\"accountType\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Used to determine what account types are being used.\" }\n\t\t\t\t}\n\t\t\t*/\n\t\t\tthis.o.sendTelemetryEvent('account', {\n\t\t\t\t// Get rid of guids from telemetry.\n\t\t\t\tscopes: JSON.stringify(token.scope.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i, '{guid}').split(' ')),\n\t\t\t\taccountType: token.account.type\n\t\t\t});\n\t\t}\n\t}\n\n\t//#region session operations\n\n\tpublic get onDidChangeSessions(): vscode.Event<vscode.AuthenticationProviderAuthenticationSessionsChangeEvent> {\n\t\treturn this.f.event;\n\t}\n\n\tpublic getSessions(scopes?: string[]): Promise<vscode.AuthenticationSession[]> {\n\t\tif (!scopes) {\n\t\t\tthis.l.info('Getting sessions for all scopes...');\n\t\t\tconst sessions = this.c.map(token => this.A(token));\n\t\t\tthis.l.info(`Got ${sessions.length} sessions for all scopes...`);\n\t\t\treturn Promise.resolve(sessions);\n\t\t}\n\n\t\tlet modifiedScopes = [...scopes];\n\t\tif (!modifiedScopes.includes('openid')) {\n\t\t\tmodifiedScopes.push('openid');\n\t\t}\n\t\tif (!modifiedScopes.includes('email')) {\n\t\t\tmodifiedScopes.push('email');\n\t\t}\n\t\tif (!modifiedScopes.includes('profile')) {\n\t\t\tmodifiedScopes.push('profile');\n\t\t}\n\t\tif (!modifiedScopes.includes('offline_access')) {\n\t\t\tmodifiedScopes.push('offline_access');\n\t\t}\n\t\tmodifiedScopes = modifiedScopes.sort();\n\n\t\tconst modifiedScopesStr = modifiedScopes.join(' ');\n\t\tconst clientId = this.E(scopes);\n\t\tconst scopeData: IScopeData = {\n\t\t\tclientId,\n\t\t\toriginalScopes: scopes,\n\t\t\tscopes: modifiedScopes,\n\t\t\tscopeStr: modifiedScopesStr,\n\t\t\t// filter our special scopes\n\t\t\tscopesToSend: modifiedScopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\ttenant: this.F(scopes),\n\t\t};\n\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Queued getting sessions`);\n\t\treturn this.k.queue(modifiedScopesStr, () => this.q(scopeData));\n\t}\n\n\tprivate async q(scopeData: IScopeData): Promise<vscode.AuthenticationSession[]> {\n\t\tthis.l.info(`[${scopeData.scopeStr}] Getting sessions`);\n\n\t\tconst matchingTokens = this.c.filter(token => token.scope === scopeData.scopeStr);\n\t\t// If we still don't have a matching token try to get a new token from an existing token by using\n\t\t// the refreshToken. This is documented here:\n\t\t// https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token\n\t\t// \"Refresh tokens are valid for all permissions that your client has already received consent for.\"\n\t\tif (!matchingTokens.length) {\n\t\t\t// Get a token with the correct client id.\n\t\t\tconst token = scopeData.clientId === DEFAULT_CLIENT_ID\n\t\t\t\t? this.c.find(t => t.refreshToken && !t.scope.includes('VSCODE_CLIENT_ID'))\n\t\t\t\t: this.c.find(t => t.refreshToken && t.scope.includes(`VSCODE_CLIENT_ID:${scopeData.clientId}`));\n\n\t\t\tif (token) {\n\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Found a matching token with a different scopes '${token.scope}'. Attempting to get a new session using the existing session.`);\n\t\t\t\ttry {\n\t\t\t\t\tconst itoken = await this.D(token.refreshToken, scopeData);\n\t\t\t\t\tthis.f.fire({ added: [this.A(itoken)], removed: [], changed: [] });\n\t\t\t\t\tmatchingTokens.push(itoken);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.l.error(`[${scopeData.scopeStr}] Attempted to get a new session using the existing session with scopes '${token.scope}' but it failed due to: ${err.message ?? err}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.l.info(`[${scopeData.scopeStr}] Got ${matchingTokens.length} sessions`);\n\t\tconst results = await Promise.allSettled(matchingTokens.map(token => this.B(token, scopeData)));\n\t\treturn results\n\t\t\t.filter(result => result.status === 'fulfilled')\n\t\t\t.map(result => (result as PromiseFulfilledResult<vscode.AuthenticationSession>).value);\n\t}\n\n\tpublic createSession(scopes: string[]): Promise<vscode.AuthenticationSession> {\n\t\tlet modifiedScopes = [...scopes];\n\t\tif (!modifiedScopes.includes('openid')) {\n\t\t\tmodifiedScopes.push('openid');\n\t\t}\n\t\tif (!modifiedScopes.includes('email')) {\n\t\t\tmodifiedScopes.push('email');\n\t\t}\n\t\tif (!modifiedScopes.includes('profile')) {\n\t\t\tmodifiedScopes.push('profile');\n\t\t}\n\t\tif (!modifiedScopes.includes('offline_access')) {\n\t\t\tmodifiedScopes.push('offline_access');\n\t\t}\n\t\tmodifiedScopes = modifiedScopes.sort();\n\t\tconst scopeData: IScopeData = {\n\t\t\toriginalScopes: scopes,\n\t\t\tscopes: modifiedScopes,\n\t\t\tscopeStr: modifiedScopes.join(' '),\n\t\t\t// filter our special scopes\n\t\t\tscopesToSend: modifiedScopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\tclientId: this.E(scopes),\n\t\t\ttenant: this.F(scopes),\n\t\t};\n\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Queued creating session`);\n\t\treturn this.k.queue(scopeData.scopeStr, () => this.r(scopeData));\n\t}\n\n\tprivate async r(scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tthis.l.info(`[${scopeData.scopeStr}] Creating session`);\n\n\t\tconst runsRemote = vscode.env.remoteName !== undefined;\n\t\tconst runsServerless = vscode.env.remoteName === undefined && vscode.env.uiKind === vscode.UIKind.Web;\n\n\t\tif (runsServerless && this.p.activeDirectoryEndpointUrl !== defaultActiveDirectoryEndpointUrl) {\n\t\t\tthrow new Error('Sign in to non-public clouds is not supported on the web.');\n\t\t}\n\n\t\tif (runsRemote || runsServerless) {\n\t\t\treturn this.v(scopeData);\n\t\t}\n\n\t\ttry {\n\t\t\treturn await this.u(scopeData);\n\t\t} catch (e) {\n\t\t\tthis.l.error(`[${scopeData.scopeStr}] Error creating session: ${e}`);\n\n\t\t\t// If the error was about starting the server, try directly hitting the login endpoint instead\n\t\t\tif (e.message === 'Error listening to server' || e.message === 'Closed' || e.message === 'Timeout waiting for port') {\n\t\t\t\treturn this.v(scopeData);\n\t\t\t}\n\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tprivate async u(scopeData: IScopeData) {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Starting login flow with local server`);\n\t\tconst codeVerifier = generateCodeVerifier();\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\t\tconst qs = new URLSearchParams({\n\t\t\tresponse_type: 'code',\n\t\t\tresponse_mode: 'query',\n\t\t\tclient_id: scopeData.clientId,\n\t\t\tredirect_uri: redirectUrl,\n\t\t\tscope: scopeData.scopesToSend,\n\t\t\tprompt: 'select_account',\n\t\t\tcode_challenge_method: 'S256',\n\t\t\tcode_challenge: codeChallenge,\n\t\t}).toString();\n\t\tconst loginUrl = new URL(`${scopeData.tenant}/oauth2/v2.0/authorize?${qs}`, this.p.activeDirectoryEndpointUrl).toString();\n\t\tconst server = new LoopbackAuthServer(path.join(__dirname, '../media'), loginUrl);\n\t\tawait server.start();\n\n\t\tlet codeToExchange;\n\t\ttry {\n\t\t\tvscode.env.openExternal(vscode.Uri.parse(`http://127.0.0.1:${server.port}/signin?nonce=${encodeURIComponent(server.nonce)}`));\n\t\t\tconst { code } = await server.waitForOAuthResponse();\n\t\t\tcodeToExchange = code;\n\t\t} finally {\n\t\t\tsetTimeout(() => {\n\t\t\t\tvoid server.stop();\n\t\t\t}, 5000);\n\t\t}\n\n\t\tconst session = await this.I(codeToExchange, codeVerifier, scopeData);\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${session.id}' Sending change event for added session`);\n\t\tthis.f.fire({ added: [session], removed: [], changed: [] });\n\t\tthis.l.info(`[${scopeData.scopeStr}] '${session.id}' session successfully created!`);\n\t\treturn session;\n\t}\n\n\tprivate async v(scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Starting login flow without local server`);\n\t\tlet callbackUri = await vscode.env.asExternalUri(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.microsoft-authentication`));\n\t\tconst nonce = generateCodeVerifier();\n\t\tconst callbackQuery = new URLSearchParams(callbackUri.query);\n\t\tcallbackQuery.set('nonce', encodeURIComponent(nonce));\n\t\tcallbackUri = callbackUri.with({\n\t\t\tquery: callbackQuery.toString()\n\t\t});\n\t\tconst state = encodeURIComponent(callbackUri.toString(true));\n\t\tconst codeVerifier = generateCodeVerifier();\n\t\tconst codeChallenge = await generateCodeChallenge(codeVerifier);\n\t\tconst signInUrl = new URL(`${scopeData.tenant}/oauth2/v2.0/authorize`, this.p.activeDirectoryEndpointUrl);\n\t\tsignInUrl.search = new URLSearchParams({\n\t\t\tresponse_type: 'code',\n\t\t\tclient_id: encodeURIComponent(scopeData.clientId),\n\t\t\tresponse_mode: 'query',\n\t\t\tredirect_uri: redirectUrl,\n\t\t\tstate,\n\t\t\tscope: scopeData.scopesToSend,\n\t\t\tprompt: 'select_account',\n\t\t\tcode_challenge_method: 'S256',\n\t\t\tcode_challenge: codeChallenge,\n\t\t}).toString();\n\t\tconst uri = vscode.Uri.parse(signInUrl.toString());\n\t\tvscode.env.openExternal(uri);\n\n\t\tlet inputBox: vscode.InputBox | undefined;\n\t\tconst timeoutPromise = new Promise((_: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\tconst wait = setTimeout(() => {\n\t\t\t\tclearTimeout(wait);\n\t\t\t\tinputBox?.dispose();\n\t\t\t\treject('Login timed out.');\n\t\t\t}, 1000 * 60 * 5);\n\t\t});\n\n\t\tconst existingNonces = this.g.get(scopeData.scopeStr) || [];\n\t\tthis.g.set(scopeData.scopeStr, [...existingNonces, nonce]);\n\n\t\t// Register a single listener for the URI callback, in case the user starts the login process multiple times\n\t\t// before completing it.\n\t\tlet existingPromise = this.h.get(scopeData.scopeStr);\n\t\tif (!existingPromise) {\n\t\t\tif (isSupportedEnvironment(callbackUri)) {\n\t\t\t\texistingPromise = this.G(scopeData);\n\t\t\t} else {\n\t\t\t\tinputBox = vscode.window.createInputBox();\n\t\t\t\texistingPromise = this.H(inputBox, codeVerifier, scopeData);\n\t\t\t}\n\t\t\tthis.h.set(scopeData.scopeStr, existingPromise);\n\t\t}\n\n\t\tthis.i.set(nonce, codeVerifier);\n\n\t\treturn Promise.race([existingPromise, timeoutPromise])\n\t\t\t.finally(() => {\n\t\t\t\tthis.g.delete(scopeData.scopeStr);\n\t\t\t\tthis.h.delete(scopeData.scopeStr);\n\t\t\t\tthis.i.delete(nonce);\n\t\t\t});\n\t}\n\n\tpublic async removeSessionById(sessionId: string, writeToDisk: boolean = true): Promise<vscode.AuthenticationSession | undefined> {\n\t\tconst tokenIndex = this.c.findIndex(token => token.sessionId === sessionId);\n\t\tif (tokenIndex === -1) {\n\t\t\tthis.l.warn(`'${sessionId}' Session not found to remove`);\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst token = this.c.splice(tokenIndex, 1)[0];\n\t\tthis.l.trace(`[${token.scope}] '${sessionId}' Queued removing session`);\n\t\treturn this.k.queue(token.scope, () => this.w(token, writeToDisk));\n\t}\n\n\tpublic async clearSessions() {\n\t\tthis.l.trace('Logging out of all sessions');\n\t\tthis.c = [];\n\t\tawait this.n.deleteAll(item => this.O(item));\n\n\t\tthis.d.forEach(timeout => {\n\t\t\tclearTimeout(timeout);\n\t\t});\n\n\t\tthis.d.clear();\n\t\tthis.l.trace('All sessions logged out');\n\t}\n\n\tprivate async w(token: IToken, writeToDisk: boolean = true): Promise<vscode.AuthenticationSession | undefined> {\n\t\tthis.l.info(`[${token.scope}] '${token.sessionId}' Logging out of session`);\n\t\tthis.y(token.sessionId);\n\n\t\tif (writeToDisk) {\n\t\t\tawait this.n.delete(token.sessionId);\n\t\t}\n\n\t\tconst tokenIndex = this.c.findIndex(t => t.sessionId === token.sessionId);\n\t\tif (tokenIndex !== -1) {\n\t\t\tthis.c.splice(tokenIndex, 1);\n\t\t}\n\n\t\tconst session = this.A(token);\n\t\tthis.l.trace(`[${token.scope}] '${token.sessionId}' Sending change event for session that was removed`);\n\t\tthis.f.fire({ added: [], removed: [session], changed: [] });\n\t\tthis.l.info(`[${token.scope}] '${token.sessionId}' Logged out of session successfully!`);\n\t\treturn session;\n\t}\n\n\t//#endregion\n\n\t//#region timeout\n\n\tprivate x(sessionId: string, refreshToken: string, scopeData: IScopeData, timeout: number) {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId}' Setting refresh timeout for ${timeout} milliseconds`);\n\t\tthis.y(sessionId);\n\t\tthis.d.set(sessionId, setTimeout(async () => {\n\t\t\ttry {\n\t\t\t\tconst refreshedToken = await this.C(refreshToken, scopeData, sessionId);\n\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId}' Sending change event for session that was refreshed`);\n\t\t\t\tthis.f.fire({ added: [], removed: [], changed: [this.A(refreshedToken)] });\n\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId}' refresh timeout complete`);\n\t\t\t} catch (e) {\n\t\t\t\tif (e.message !== REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\tawait this.removeSessionById(sessionId);\n\t\t\t\t}\n\t\t\t}\n\t\t}, timeout));\n\t}\n\n\tprivate y(sessionId: string): void {\n\t\tconst timeout = this.d.get(sessionId);\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\tthis.d.delete(sessionId);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region convert operations\n\n\tprivate z(json: ITokenResponse, scopeData: IScopeData, existingId?: string): IToken {\n\t\tlet claims = undefined;\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${existingId ?? 'new'}' Attempting to parse token response.`);\n\n\t\ttry {\n\t\t\tif (json.id_token) {\n\t\t\t\tclaims = JSON.parse(base64Decode(json.id_token.split('.')[1]));\n\t\t\t} else {\n\t\t\t\tthis.l.warn(`[${scopeData.scopeStr}] '${existingId ?? 'new'}' Attempting to parse access_token instead since no id_token was included in the response.`);\n\t\t\t\tclaims = JSON.parse(base64Decode(json.access_token.split('.')[1]));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\n\t\tconst id = `${claims.tid}/${(claims.oid ?? (claims.altsecid ?? '' + claims.ipd ?? ''))}`;\n\t\tconst sessionId = existingId || `${id}/${randomUUID()}`;\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId}' Token response parsed successfully.`);\n\t\treturn {\n\t\t\texpiresIn: json.expires_in,\n\t\t\texpiresAt: json.expires_in ? Date.now() + json.expires_in * 1000 : undefined,\n\t\t\taccessToken: json.access_token,\n\t\t\tidToken: json.id_token,\n\t\t\trefreshToken: json.refresh_token,\n\t\t\tscope: scopeData.scopeStr,\n\t\t\tsessionId,\n\t\t\taccount: {\n\t\t\t\tlabel: claims.email ?? claims.preferred_username ?? claims.unique_name ?? 'user@example.com',\n\t\t\t\tid,\n\t\t\t\ttype: claims.tid === MSA_TID || claims.tid === MSA_PASSTHRU_TID ? MicrosoftAccountType.MSA : MicrosoftAccountType.AAD\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Return a session object without checking for expiry and potentially refreshing.\n\t * @param token The token information.\n\t */\n\tprivate A(token: IToken): vscode.AuthenticationSession {\n\t\treturn {\n\t\t\tid: token.sessionId,\n\t\t\taccessToken: token.accessToken!,\n\t\t\tidToken: token.idToken,\n\t\t\taccount: token.account,\n\t\t\tscopes: token.scope.split(' ')\n\t\t};\n\t}\n\n\tprivate async B(token: IToken, scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tif (token.accessToken && (!token.expiresAt || token.expiresAt > Date.now())) {\n\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Token available from cache${token.expiresAt ? `, expires in ${token.expiresAt - Date.now()} milliseconds` : ''}.`);\n\t\t\treturn {\n\t\t\t\tid: token.sessionId,\n\t\t\t\taccessToken: token.accessToken,\n\t\t\t\tidToken: token.idToken,\n\t\t\t\taccount: token.account,\n\t\t\t\tscopes: scopeData.originalScopes ?? scopeData.scopes\n\t\t\t};\n\t\t}\n\n\t\ttry {\n\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Token expired or unavailable, trying refresh`);\n\t\t\tconst refreshedToken = await this.C(token.refreshToken, scopeData, token.sessionId);\n\t\t\tif (refreshedToken.accessToken) {\n\t\t\t\treturn {\n\t\t\t\t\tid: token.sessionId,\n\t\t\t\t\taccessToken: refreshedToken.accessToken,\n\t\t\t\t\tidToken: refreshedToken.idToken,\n\t\t\t\t\taccount: token.account,\n\t\t\t\t\t// We always prefer the original scopes requested since that array is used as a key in the AuthService\n\t\t\t\t\tscopes: scopeData.originalScopes ?? scopeData.scopes\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error('Unavailable due to network problems');\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region refresh logic\n\n\tprivate C(refreshToken: string, scopeData: IScopeData, sessionId?: string): Promise<IToken> {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId ?? 'new'}' Queued refreshing token`);\n\t\treturn this.k.queue(scopeData.scopeStr, () => this.D(refreshToken, scopeData, sessionId));\n\t}\n\n\tprivate async D(refreshToken: string, scopeData: IScopeData, sessionId?: string): Promise<IToken> {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${sessionId ?? 'new'}' Refreshing token`);\n\t\tconst postData = new URLSearchParams({\n\t\t\trefresh_token: refreshToken,\n\t\t\tclient_id: scopeData.clientId,\n\t\t\tgrant_type: 'refresh_token',\n\t\t\tscope: scopeData.scopesToSend\n\t\t}).toString();\n\n\t\ttry {\n\t\t\tconst json = await this.J(postData, scopeData);\n\t\t\tconst token = this.z(json, scopeData, sessionId);\n\t\t\tif (token.expiresIn) {\n\t\t\t\tthis.x(token.sessionId, token.refreshToken, scopeData, token.expiresIn * AzureActiveDirectoryService.a);\n\t\t\t}\n\t\t\tthis.K(token, scopeData);\n\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Token refresh success`);\n\t\t\treturn token;\n\t\t} catch (e) {\n\t\t\tif (e.message === REFRESH_NETWORK_FAILURE) {\n\t\t\t\t// We were unable to refresh because of a network failure (i.e. the user lost internet access).\n\t\t\t\t// so set up a timeout to try again later. We only do this if we have a session id to reference later.\n\t\t\t\tif (sessionId) {\n\t\t\t\t\tthis.x(sessionId, refreshToken, scopeData, AzureActiveDirectoryService.b);\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tthis.l.error(`[${scopeData.scopeStr}] '${sessionId ?? 'new'}' Refreshing token failed: ${e.message}`);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region scope parsers\n\n\tprivate E(scopes: string[]) {\n\t\treturn scopes.reduce<string | undefined>((prev, current) => {\n\t\t\tif (current.startsWith('VSCODE_CLIENT_ID:')) {\n\t\t\t\treturn current.split('VSCODE_CLIENT_ID:')[1];\n\t\t\t}\n\t\t\treturn prev;\n\t\t}, undefined) ?? DEFAULT_CLIENT_ID;\n\t}\n\n\tprivate F(scopes: string[]) {\n\t\treturn scopes.reduce<string | undefined>((prev, current) => {\n\t\t\tif (current.startsWith('VSCODE_TENANT:')) {\n\t\t\t\treturn current.split('VSCODE_TENANT:')[1];\n\t\t\t}\n\t\t\treturn prev;\n\t\t}, undefined) ?? DEFAULT_TENANT;\n\t}\n\n\t//#endregion\n\n\t//#region oauth flow\n\n\tprivate async G(scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tlet uriEventListener: vscode.Disposable;\n\t\treturn new Promise((resolve: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\turiEventListener = this.m.event(async (uri: vscode.Uri) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst query = new URLSearchParams(uri.query);\n\t\t\t\t\tlet code = query.get('code');\n\t\t\t\t\tlet nonce = query.get('nonce');\n\t\t\t\t\tif (Array.isArray(code)) {\n\t\t\t\t\t\tcode = code[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (!code) {\n\t\t\t\t\t\tthrow new Error('No code included in query');\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(nonce)) {\n\t\t\t\t\t\tnonce = nonce[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (!nonce) {\n\t\t\t\t\t\tthrow new Error('No nonce included in query');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst acceptedStates = this.g.get(scopeData.scopeStr) || [];\n\t\t\t\t\t// Workaround double encoding issues of state in web\n\t\t\t\t\tif (!acceptedStates.includes(nonce) && !acceptedStates.includes(decodeURIComponent(nonce))) {\n\t\t\t\t\t\tthrow new Error('Nonce does not match.');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst verifier = this.i.get(nonce) ?? this.i.get(decodeURIComponent(nonce));\n\t\t\t\t\tif (!verifier) {\n\t\t\t\t\t\tthrow new Error('No available code verifier');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst session = await this.I(code, verifier, scopeData);\n\t\t\t\t\tthis.f.fire({ added: [session], removed: [], changed: [] });\n\t\t\t\t\tthis.l.info(`[${scopeData.scopeStr}] '${session.id}' session successfully created!`);\n\t\t\t\t\tresolve(session);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}).then(result => {\n\t\t\turiEventListener.dispose();\n\t\t\treturn result;\n\t\t}).catch(err => {\n\t\t\turiEventListener.dispose();\n\t\t\tthrow err;\n\t\t});\n\t}\n\n\tprivate async H(inputBox: vscode.InputBox, verifier: string, scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Starting login flow with input box`);\n\t\tinputBox.ignoreFocusOut = true;\n\t\tinputBox.title = vscode.l10n.t('Microsoft Authentication');\n\t\tinputBox.prompt = vscode.l10n.t('Provide the authorization code to complete the sign in flow.');\n\t\tinputBox.placeholder = vscode.l10n.t('Paste authorization code here...');\n\t\treturn new Promise((resolve: (value: vscode.AuthenticationSession) => void, reject) => {\n\t\t\tinputBox.show();\n\t\t\tinputBox.onDidAccept(async () => {\n\t\t\t\tconst code = inputBox.value;\n\t\t\t\tif (code) {\n\t\t\t\t\tinputBox.dispose();\n\t\t\t\t\tconst session = await this.I(code, verifier, scopeData);\n\t\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${session.id}' sending session changed event because session was added.`);\n\t\t\t\t\tthis.f.fire({ added: [session], removed: [], changed: [] });\n\t\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${session.id}' session successfully created!`);\n\t\t\t\t\tresolve(session);\n\t\t\t\t}\n\t\t\t});\n\t\t\tinputBox.onDidHide(() => {\n\t\t\t\tif (!inputBox.value) {\n\t\t\t\t\tinputBox.dispose();\n\t\t\t\t\treject('Cancelled');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate async I(code: string, codeVerifier: string, scopeData: IScopeData): Promise<vscode.AuthenticationSession> {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] Exchanging login code for session`);\n\t\tlet token: IToken | undefined;\n\t\ttry {\n\t\t\tconst postData = new URLSearchParams({\n\t\t\t\tgrant_type: 'authorization_code',\n\t\t\t\tcode: code,\n\t\t\t\tclient_id: scopeData.clientId,\n\t\t\t\tscope: scopeData.scopesToSend,\n\t\t\t\tcode_verifier: codeVerifier,\n\t\t\t\tredirect_uri: redirectUrl\n\t\t\t}).toString();\n\n\t\t\tconst json = await this.J(postData, scopeData);\n\t\t\tthis.l.trace(`[${scopeData.scopeStr}] Exchanging code for token succeeded!`);\n\t\t\ttoken = this.z(json, scopeData);\n\t\t} catch (e) {\n\t\t\tthis.l.error(`[${scopeData.scopeStr}] Error exchanging code for token: ${e}`);\n\t\t\tthrow e;\n\t\t}\n\n\t\tif (token.expiresIn) {\n\t\t\tthis.x(token.sessionId, token.refreshToken, scopeData, token.expiresIn * AzureActiveDirectoryService.a);\n\t\t}\n\t\tthis.K(token, scopeData);\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Exchanging login code for session succeeded!`);\n\t\treturn await this.B(token, scopeData);\n\t}\n\n\tprivate async J(postData: string, scopeData: IScopeData): Promise<ITokenResponse> {\n\t\tlet endpointUrl: string;\n\t\tif (this.p.activeDirectoryEndpointUrl !== defaultActiveDirectoryEndpointUrl) {\n\t\t\t// If this is for sovereign clouds, don't try using the proxy endpoint, which supports only public cloud\n\t\t\tendpointUrl = this.p.activeDirectoryEndpointUrl;\n\t\t} else {\n\t\t\tconst proxyEndpoints: { [providerId: string]: string } | undefined = await vscode.commands.executeCommand('workbench.getCodeExchangeProxyEndpoints');\n\t\t\tendpointUrl = proxyEndpoints?.microsoft || this.p.activeDirectoryEndpointUrl;\n\t\t}\n\t\tconst endpoint = new URL(`${scopeData.tenant}/oauth2/v2.0/token`, endpointUrl);\n\n\t\tlet attempts = 0;\n\t\twhile (attempts <= 3) {\n\t\t\tattempts++;\n\t\t\tlet result;\n\t\t\tlet errorMessage: string | undefined;\n\t\t\ttry {\n\t\t\t\tresult = await fetching(endpoint, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'Content-Length': postData.length.toString()\n\t\t\t\t\t},\n\t\t\t\t\tbody: postData\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\terrorMessage = e.message ?? e;\n\t\t\t}\n\n\t\t\tif (!result || result.status > 499) {\n\t\t\t\tif (attempts > 3) {\n\t\t\t\t\tthis.l.error(`[${scopeData.scopeStr}] Fetching token failed: ${result ? await result.text() : errorMessage}`);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Exponential backoff\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 5 * attempts * attempts * 1000));\n\t\t\t\tcontinue;\n\t\t\t} else if (!result.ok) {\n\t\t\t\t// For 4XX errors, the user may actually have an expired token or have changed\n\t\t\t\t// their password recently which is throwing a 4XX. For this, we throw an error\n\t\t\t\t// so that the user can be prompted to sign in again.\n\t\t\t\tthrow new Error(await result.text());\n\t\t\t}\n\n\t\t\treturn await result.json() as ITokenResponse;\n\t\t}\n\n\t\tthrow new Error(REFRESH_NETWORK_FAILURE);\n\t}\n\n\t//#endregion\n\n\t//#region storage operations\n\n\tprivate K(token: IToken, scopeData: IScopeData): void {\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Setting token`);\n\n\t\tconst existingTokenIndex = this.c.findIndex(t => t.sessionId === token.sessionId);\n\t\tif (existingTokenIndex > -1) {\n\t\t\tthis.c.splice(existingTokenIndex, 1, token);\n\t\t} else {\n\t\t\tthis.c.push(token);\n\t\t}\n\n\t\t// Don't await because setting the token is only useful for any new windows that open.\n\t\tvoid this.L(token, scopeData);\n\t}\n\n\tprivate async L(token: IToken, scopeData: IScopeData): Promise<void> {\n\t\tif (!vscode.window.state.focused) {\n\t\t\tif (this.j.has(token.sessionId)) {\n\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Window is not focused, replacing token to be stored`);\n\t\t\t} else {\n\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Window is not focused, pending storage of token`);\n\t\t\t}\n\t\t\tthis.j.set(token.sessionId, token);\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.n.store(token.sessionId, {\n\t\t\tid: token.sessionId,\n\t\t\trefreshToken: token.refreshToken,\n\t\t\tscope: token.scope,\n\t\t\taccount: token.account,\n\t\t\tendpoint: this.p.activeDirectoryEndpointUrl,\n\t\t});\n\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Stored token`);\n\t}\n\n\tprivate async M(): Promise<void> {\n\t\tif (this.j.size === 0) {\n\t\t\tthis.l.trace('No pending tokens to store');\n\t\t\treturn;\n\t\t}\n\n\t\tconst tokens = [...this.j.values()];\n\t\tthis.j.clear();\n\n\t\tthis.l.trace(`Storing ${tokens.length} pending tokens...`);\n\t\tawait Promise.allSettled(tokens.map(async token => {\n\t\t\tthis.l.trace(`[${token.scope}] '${token.sessionId}' Storing pending token`);\n\t\t\tawait this.n.store(token.sessionId, {\n\t\t\t\tid: token.sessionId,\n\t\t\t\trefreshToken: token.refreshToken,\n\t\t\t\tscope: token.scope,\n\t\t\t\taccount: token.account,\n\t\t\t\tendpoint: this.p.activeDirectoryEndpointUrl,\n\t\t\t});\n\t\t\tthis.l.trace(`[${token.scope}] '${token.sessionId}' Stored pending token`);\n\t\t}));\n\t\tthis.l.trace('Done storing pending tokens');\n\t}\n\n\tprivate async N(e: IDidChangeInOtherWindowEvent<IStoredSession>): Promise<void> {\n\t\tfor (const key of e.added) {\n\t\t\tconst session = await this.n.get(key);\n\t\t\tif (!session) {\n\t\t\t\tthis.l.error('session not found that was apparently just added');\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!this.O(session)) {\n\t\t\t\t// If the session wasn't made for this login endpoint, ignore this update\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst matchesExisting = this.c.some(token => token.scope === session.scope && token.sessionId === session.id);\n\t\t\tif (!matchesExisting && session.refreshToken) {\n\t\t\t\ttry {\n\t\t\t\t\tconst scopes = session.scope.split(' ');\n\t\t\t\t\tconst scopeData: IScopeData = {\n\t\t\t\t\t\tscopes,\n\t\t\t\t\t\tscopeStr: session.scope,\n\t\t\t\t\t\t// filter our special scopes\n\t\t\t\t\t\tscopesToSend: scopes.filter(s => !s.startsWith('VSCODE_')).join(' '),\n\t\t\t\t\t\tclientId: this.E(scopes),\n\t\t\t\t\t\ttenant: this.F(scopes),\n\t\t\t\t\t};\n\t\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${session.id}' Session added in another window`);\n\t\t\t\t\tconst token = await this.C(session.refreshToken, scopeData, session.id);\n\t\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Sending change event for session that was added`);\n\t\t\t\t\tthis.f.fire({ added: [this.A(token)], removed: [], changed: [] });\n\t\t\t\t\tthis.l.trace(`[${scopeData.scopeStr}] '${token.sessionId}' Session added in another window added here`);\n\t\t\t\t\tcontinue;\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Network failures will automatically retry on next poll.\n\t\t\t\t\tif (e.message !== REFRESH_NETWORK_FAILURE) {\n\t\t\t\t\t\tvscode.window.showErrorMessage(vscode.l10n.t('You have been signed out because reading stored authentication information failed.'));\n\t\t\t\t\t\tawait this.removeSessionById(session.id);\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const { value } of e.removed) {\n\t\t\tthis.l.trace(`[${value.scope}] '${value.id}' Session removed in another window`);\n\t\t\tif (!this.O(value)) {\n\t\t\t\t// If the session wasn't made for this login endpoint, ignore this update\n\t\t\t\tthis.l.trace(`[${value.scope}] '${value.id}' Session doesn't match endpoint. Skipping...`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tawait this.removeSessionById(value.id, false);\n\t\t\tthis.l.trace(`[${value.scope}] '${value.id}' Session removed in another window removed here`);\n\t\t}\n\n\t\t// NOTE: We don't need to handle changed sessions because all that really would give us is a new refresh token\n\t\t// because access tokens are not stored in Secret Storage due to their short lifespan. This new refresh token\n\t\t// is not useful in this window because we really only care about the lifetime of the _access_ token which we\n\t\t// are already managing (see usages of `setSessionTimeout`).\n\t\t// However, in order to minimize the amount of times we store tokens, if a token was stored via another window,\n\t\t// we cancel any pending token storage operations.\n\t\tfor (const sessionId of e.updated) {\n\t\t\tif (this.j.delete(sessionId)) {\n\t\t\t\tthis.l.trace(`'${sessionId}' Cancelled pending token storage because token was updated in another window`);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate O(session: IStoredSession): boolean {\n\t\t// For older sessions with no endpoint set, it can be assumed to be the default endpoint\n\t\tsession.endpoint ||= defaultActiveDirectoryEndpointUrl;\n\n\t\treturn session.endpoint === this.p.activeDirectoryEndpointUrl;\n\t}\n\n\t//#endregion\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport class UriEventHandler extends vscode.EventEmitter<vscode.Uri> implements vscode.UriHandler {\n\tpublic handleUri(uri: vscode.Uri) {\n\t\tthis.fire(uri);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport Logger from './logger';\nimport { Event, EventEmitter, ExtensionContext, SecretStorage, SecretStorageChangeEvent } from 'vscode';\n\nexport interface IDidChangeInOtherWindowEvent<T> {\n\tadded: string[];\n\tupdated: string[];\n\tremoved: Array<{ key: string; value: T }>;\n}\n\nexport class BetterTokenStorage<T> {\n\t// set before and after _tokensPromise is set so getTokens can handle multiple operations.\n\tprivate a = false;\n\t// the current state. Don't use this directly and call getTokens() so that you ensure you\n\t// have awaited for all operations.\n\tprivate b: Promise<Map<string, T>> = Promise.resolve(new Map());\n\n\t// The vscode SecretStorage instance for this extension.\n\tprivate readonly c: SecretStorage;\n\n\tprivate d = new EventEmitter<IDidChangeInOtherWindowEvent<T>>();\n\tpublic onDidChangeInOtherWindow: Event<IDidChangeInOtherWindowEvent<T>> = this.d.event;\n\n\t/**\n\t *\n\t * @param f The key in the secret storage that will hold the list of keys associated with this instance of BetterTokenStorage\n\t * @param context the vscode Context used to register disposables and retreive the vscode.SecretStorage for this instance of VS Code\n\t */\n\tconstructor(private f: string, context: ExtensionContext) {\n\t\tthis.c = context.secrets;\n\t\tcontext.subscriptions.push(context.secrets.onDidChange((e) => this.l(e)));\n\t\tthis.g();\n\t}\n\n\tprivate g(): void {\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tthis.c.get(this.f).then(\n\t\t\t\tkeyListStr => {\n\t\t\t\t\tif (!keyListStr) {\n\t\t\t\t\t\tresolve(new Map());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst keyList: Array<string> = JSON.parse(keyListStr);\n\t\t\t\t\t// Gather promises that contain key value pairs our of secret storage\n\t\t\t\t\tconst promises = keyList.map(key => new Promise<{ key: string; value: string | undefined }>((res, rej) => {\n\t\t\t\t\t\tthis.c.get(key).then((value) => {\n\t\t\t\t\t\t\tres({ key, value });\n\t\t\t\t\t\t}, rej);\n\t\t\t\t\t}));\n\t\t\t\t\tPromise.allSettled(promises).then((results => {\n\t\t\t\t\t\tconst tokens = new Map<string, T>();\n\t\t\t\t\t\tresults.forEach(p => {\n\t\t\t\t\t\t\tif (p.status === 'fulfilled' && p.value.value) {\n\t\t\t\t\t\t\t\tconst secret = this.i(p.value.value);\n\t\t\t\t\t\t\t\ttokens.set(p.value.key, secret);\n\t\t\t\t\t\t\t} else if (p.status === 'rejected') {\n\t\t\t\t\t\t\t\tLogger.error(p.reason);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tLogger.error('Key was not found in SecretStorage.');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresolve(tokens);\n\t\t\t\t\t}));\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tLogger.error(err);\n\t\t\t\t\tresolve(new Map());\n\t\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync get(key: string): Promise<T | undefined> {\n\t\tconst tokens = await this.k();\n\t\treturn tokens.get(key);\n\t}\n\n\tasync getAll(predicate?: (item: T) => boolean): Promise<T[]> {\n\t\tconst tokens = await this.k();\n\t\tconst values = new Array<T>();\n\t\tfor (const [_, value] of tokens) {\n\t\t\tif (!predicate || predicate(value)) {\n\t\t\t\tvalues.push(value);\n\t\t\t}\n\t\t}\n\t\treturn values;\n\t}\n\n\tasync store(key: string, value: T): Promise<void> {\n\t\tconst tokens = await this.k();\n\n\t\tconst isAddition = !tokens.has(key);\n\t\ttokens.set(key, value);\n\t\tconst valueStr = this.j(value);\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tconst promises = [this.c.store(key, valueStr)];\n\n\t\t\t// if we are adding a secret we need to update the keylist too\n\t\t\tif (isAddition) {\n\t\t\t\tpromises.push(this.h(tokens));\n\t\t\t}\n\n\t\t\tPromise.allSettled(promises).then(results => {\n\t\t\t\tresults.forEach(r => {\n\t\t\t\t\tif (r.status === 'rejected') {\n\t\t\t\t\t\tLogger.error(r.reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresolve(tokens);\n\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync delete(key: string): Promise<void> {\n\t\tconst tokens = await this.k();\n\t\tif (!tokens.has(key)) {\n\t\t\treturn;\n\t\t}\n\t\ttokens.delete(key);\n\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tPromise.allSettled([\n\t\t\t\tthis.c.delete(key),\n\t\t\t\tthis.h(tokens)\n\t\t\t]).then(results => {\n\t\t\t\tresults.forEach(r => {\n\t\t\t\t\tif (r.status === 'rejected') {\n\t\t\t\t\t\tLogger.error(r.reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresolve(tokens);\n\t\t\t});\n\t\t});\n\t\tthis.a = false;\n\t}\n\n\tasync deleteAll(predicate?: (item: T) => boolean): Promise<void> {\n\t\tconst tokens = await this.k();\n\t\tconst promises = [];\n\t\tfor (const [key, value] of tokens) {\n\t\t\tif (!predicate || predicate(value)) {\n\t\t\t\tpromises.push(this.delete(key));\n\t\t\t}\n\t\t}\n\t\tawait Promise.all(promises);\n\t}\n\n\tprivate async h(tokens: Map<string, T>) {\n\t\tconst keyList = [];\n\t\tfor (const [key] of tokens) {\n\t\t\tkeyList.push(key);\n\t\t}\n\n\t\tconst keyListStr = JSON.stringify(keyList);\n\t\tawait this.c.store(this.f, keyListStr);\n\t}\n\n\tprotected i(secret: string): T {\n\t\treturn JSON.parse(secret);\n\t}\n\n\tprotected j(secret: T): string {\n\t\treturn JSON.stringify(secret);\n\t}\n\n\t// This is the one way to get tokens to ensure all other operations that\n\t// came before you have been processed.\n\tprivate async k(): Promise<Map<string, T>> {\n\t\tlet tokens;\n\t\tdo {\n\t\t\ttokens = await this.b;\n\t\t} while (this.a);\n\t\treturn tokens;\n\t}\n\n\t// This is a crucial function that handles whether or not the token has changed in\n\t// a different window of VS Code and sends the necessary event if it has.\n\t// Scenarios this should cover:\n\t// * Added in another window\n\t// * Updated in another window\n\t// * Deleted in another window\n\t// * Added in this window\n\t// * Updated in this window\n\t// * Deleted in this window\n\tprivate async l(e: SecretStorageChangeEvent) {\n\t\tconst key = e.key;\n\n\t\t// The KeyList is only a list of keys to aid initial start up of VS Code to know which\n\t\t// Keys are associated with this handler.\n\t\tif (key === this.f) {\n\t\t\treturn;\n\t\t}\n\t\tconst tokens = await this.k();\n\n\t\tthis.a = true;\n\t\tthis.b = new Promise((resolve, _) => {\n\t\t\tthis.c.get(key).then(\n\t\t\t\tstorageSecretStr => {\n\t\t\t\t\tif (!storageSecretStr) {\n\t\t\t\t\t\t// true -> secret was deleted in another window\n\t\t\t\t\t\t// false -> secret was deleted in this window\n\t\t\t\t\t\tif (tokens.has(key)) {\n\t\t\t\t\t\t\tconst value = tokens.get(key)!;\n\t\t\t\t\t\t\ttokens.delete(key);\n\t\t\t\t\t\t\tthis.d.fire({ added: [], updated: [], removed: [{ key, value }] });\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn tokens;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst storageSecret = this.i(storageSecretStr);\n\t\t\t\t\tconst cachedSecret = tokens.get(key);\n\n\t\t\t\t\tif (!cachedSecret) {\n\t\t\t\t\t\t// token was added in another window\n\t\t\t\t\t\ttokens.set(key, storageSecret);\n\t\t\t\t\t\tthis.d.fire({ added: [key], updated: [], removed: [] });\n\t\t\t\t\t\treturn tokens;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cachedSecretStr = this.j(cachedSecret);\n\t\t\t\t\tif (storageSecretStr !== cachedSecretStr) {\n\t\t\t\t\t\t// token was updated in another window\n\t\t\t\t\t\ttokens.set(key, storageSecret);\n\t\t\t\t\t\tthis.d.fire({ added: [], updated: [key], removed: [] });\n\t\t\t\t\t}\n\n\t\t\t\t\t// what's in our token cache and what's in storage must be the same\n\t\t\t\t\t// which means this should cover the last two scenarios of\n\t\t\t\t\t// Added in this window & Updated in this window.\n\t\t\t\t\treturn tokens;\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tLogger.error(err);\n\t\t\t\t\treturn tokens;\n\t\t\t\t}).then(resolve);\n\t\t});\n\t\tthis.a = false;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from 'vscode';\n\nexport class SequencerByKey<TKey> {\n\n\tprivate a = new Map<TKey, Promise<unknown>>();\n\n\tqueue<T>(key: TKey, promiseTask: () => Promise<T>): Promise<T> {\n\t\tconst runningPromise = this.a.get(key) ?? Promise.resolve();\n\t\tconst newPromise = runningPromise\n\t\t\t.catch(() => { })\n\t\t\t.then(promiseTask)\n\t\t\t.finally(() => {\n\t\t\t\tif (this.a.get(key) === newPromise) {\n\t\t\t\t\tthis.a.delete(key);\n\t\t\t\t}\n\t\t\t});\n\t\tthis.a.set(key, newPromise);\n\t\treturn newPromise;\n\t}\n}\n\nexport class IntervalTimer extends Disposable {\n\n\tprivate a: any;\n\n\tconstructor() {\n\t\tsuper(() => this.cancel());\n\t\tthis.a = -1;\n\t}\n\n\tcancel(): void {\n\t\tif (this.a !== -1) {\n\t\t\tclearInterval(this.a);\n\t\t\tthis.a = -1;\n\t\t}\n\t}\n\n\tcancelAndSet(runner: () => void, interval: number): void {\n\t\tthis.cancel();\n\t\tthis.a = setInterval(() => {\n\t\t\trunner();\n\t\t}, interval);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { env, UIKind, Uri } from 'vscode';\n\nconst LOCALHOST_ADDRESSES = ['localhost', '127.0.0.1', '0:0:0:0:0:0:0:1', '::1'];\nfunction isLocalhost(uri: Uri): boolean {\n\tif (!/^https?$/i.test(uri.scheme)) {\n\t\treturn false;\n\t}\n\tconst host = uri.authority.split(':')[0];\n\treturn LOCALHOST_ADDRESSES.indexOf(host) >= 0;\n}\n\nexport function isSupportedEnvironment(uri: Uri): boolean {\n\tif (env.uiKind === UIKind.Desktop) {\n\t\treturn true;\n\t}\n\t// local development (localhost:* or 127.0.0.1:*)\n\tif (isLocalhost(uri)) {\n\t\treturn true;\n\t}\n\t// At this point we should only ever see https\n\tif (uri.scheme !== 'https') {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\t// vscode.dev & insiders.vscode.dev\n\t\t/(?:^|\\.)vscode\\.dev$/.test(uri.authority) ||\n\t\t// github.dev & codespaces\n\t\t/(?:^|\\.)github\\.dev$/.test(uri.authority) ||\n\t\t// github.dev/codespaces local setup (github.localhost)\n\t\t/(?:^|\\.)github\\.localhost$/.test(uri.authority)\n\t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { base64Encode } from './node/buffer';\nimport { crypto } from './node/crypto';\n\nexport function randomUUID() {\n\treturn crypto.randomUUID();\n}\n\nfunction dec2hex(dec: number): string {\n\treturn ('0' + dec.toString(16)).slice(-2);\n}\n\nexport function generateCodeVerifier(): string {\n\tconst array = new Uint32Array(56 / 2);\n\tcrypto.getRandomValues(array);\n\treturn Array.from(array, dec2hex).join('');\n}\n\nfunction sha256(plain: string | undefined) {\n\tconst encoder = new TextEncoder();\n\tconst data = encoder.encode(plain);\n\treturn crypto.subtle.digest('SHA-256', data);\n}\n\nfunction base64urlencode(a: ArrayBuffer) {\n\tlet str = '';\n\tconst bytes = new Uint8Array(a);\n\tconst len = bytes.byteLength;\n\tfor (let i = 0; i < len; i++) {\n\t\tstr += String.fromCharCode(bytes[i]);\n\t}\n\treturn base64Encode(str)\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_')\n\t\t.replace(/=+$/, '');\n}\n\nexport async function generateCodeChallenge(v: string) {\n\tconst hashed = await sha256(v);\n\tconst base64encoded = base64urlencode(hashed);\n\treturn base64encoded;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nconst Logger = vscode.window.createOutputChannel(vscode.l10n.t('Microsoft Authentication'), { log: true });\nexport default Logger;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as http from 'http';\nimport { URL } from 'url';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { randomBytes } from 'crypto';\n\nfunction sendFile(res: http.ServerResponse, filepath: string) {\n\tfs.readFile(filepath, (err, body) => {\n\t\tif (err) {\n\t\t\tconsole.error(err);\n\t\t\tres.writeHead(404);\n\t\t\tres.end();\n\t\t} else {\n\t\t\tres.writeHead(200, {\n\t\t\t\t'content-length': body.length,\n\t\t\t});\n\t\t\tres.end(body);\n\t\t}\n\t});\n}\n\ninterface IOAuthResult {\n\tcode: string;\n\tstate: string;\n}\n\ninterface ILoopbackServer {\n\t/**\n\t * If undefined, the server is not started yet.\n\t */\n\tport: number | undefined;\n\n\t/**\n\t * The nonce used\n\t */\n\tnonce: string;\n\n\t/**\n\t * The state parameter used in the OAuth flow.\n\t */\n\tstate: string | undefined;\n\n\t/**\n\t * Starts the server.\n\t * @returns The port to listen on.\n\t * @throws If the server fails to start.\n\t * @throws If the server is already started.\n\t */\n\tstart(): Promise<number>;\n\t/**\n\t * Stops the server.\n\t * @throws If the server is not started.\n\t * @throws If the server fails to stop.\n\t */\n\tstop(): Promise<void>;\n\t/**\n\t * Returns a promise that resolves to the result of the OAuth flow.\n\t */\n\twaitForOAuthResponse(): Promise<IOAuthResult>;\n}\n\nexport class LoopbackAuthServer implements ILoopbackServer {\n\tprivate readonly a: http.Server;\n\tprivate readonly b: Promise<IOAuthResult>;\n\tprivate c: URL;\n\n\tpublic nonce = randomBytes(16).toString('base64');\n\tpublic port: number | undefined;\n\n\tpublic set state(state: string | undefined) {\n\t\tif (state) {\n\t\t\tthis.c.searchParams.set('state', state);\n\t\t} else {\n\t\t\tthis.c.searchParams.delete('state');\n\t\t}\n\t}\n\tpublic get state(): string | undefined {\n\t\treturn this.c.searchParams.get('state') ?? undefined;\n\t}\n\n\tconstructor(serveRoot: string, startingRedirect: string) {\n\t\tif (!serveRoot) {\n\t\t\tthrow new Error('serveRoot must be defined');\n\t\t}\n\t\tif (!startingRedirect) {\n\t\t\tthrow new Error('startingRedirect must be defined');\n\t\t}\n\t\tthis.c = new URL(startingRedirect);\n\t\tlet deferred: { resolve: (result: IOAuthResult) => void; reject: (reason: any) => void };\n\t\tthis.b = new Promise<IOAuthResult>((resolve, reject) => deferred = { resolve, reject });\n\n\t\tthis.a = http.createServer((req, res) => {\n\t\t\tconst reqUrl = new URL(req.url!, `http://${req.headers.host}`);\n\t\t\tswitch (reqUrl.pathname) {\n\t\t\t\tcase '/signin': {\n\t\t\t\t\tconst receivedNonce = (reqUrl.searchParams.get('nonce') ?? '').replace(/ /g, '+');\n\t\t\t\t\tif (receivedNonce !== this.nonce) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('Nonce does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t}\n\t\t\t\t\tres.writeHead(302, { location: this.c.toString() });\n\t\t\t\t\tres.end();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase '/callback': {\n\t\t\t\t\tconst code = reqUrl.searchParams.get('code') ?? undefined;\n\t\t\t\t\tconst state = reqUrl.searchParams.get('state') ?? undefined;\n\t\t\t\t\tconst nonce = (reqUrl.searchParams.get('nonce') ?? '').replace(/ /g, '+');\n\t\t\t\t\tif (!code || !state || !nonce) {\n\t\t\t\t\t\tres.writeHead(400);\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.state !== state) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('State does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\tthrow new Error('State does not match.');\n\t\t\t\t\t}\n\t\t\t\t\tif (this.nonce !== nonce) {\n\t\t\t\t\t\tres.writeHead(302, { location: `/?error=${encodeURIComponent('Nonce does not match.')}` });\n\t\t\t\t\t\tres.end();\n\t\t\t\t\t\tthrow new Error('Nonce does not match.');\n\t\t\t\t\t}\n\t\t\t\t\tdeferred.resolve({ code, state });\n\t\t\t\t\tres.writeHead(302, { location: '/' });\n\t\t\t\t\tres.end();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Serve the static files\n\t\t\t\tcase '/':\n\t\t\t\t\tsendFile(res, path.join(serveRoot, 'index.html'));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// substring to get rid of leading '/'\n\t\t\t\t\tsendFile(res, path.join(serveRoot, reqUrl.pathname.substring(1)));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic start(): Promise<number> {\n\t\treturn new Promise<number>((resolve, reject) => {\n\t\t\tif (this.a.listening) {\n\t\t\t\tthrow new Error('Server is already started');\n\t\t\t}\n\t\t\tconst portTimeout = setTimeout(() => {\n\t\t\t\treject(new Error('Timeout waiting for port'));\n\t\t\t}, 5000);\n\t\t\tthis.a.on('listening', () => {\n\t\t\t\tconst address = this.a.address();\n\t\t\t\tif (typeof address === 'string') {\n\t\t\t\t\tthis.port = parseInt(address);\n\t\t\t\t} else if (address instanceof Object) {\n\t\t\t\t\tthis.port = address.port;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unable to determine port');\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(portTimeout);\n\n\t\t\t\t// set state which will be used to redirect back to vscode\n\t\t\t\tthis.state = `http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`;\n\n\t\t\t\tresolve(this.port);\n\t\t\t});\n\t\t\tthis.a.on('error', err => {\n\t\t\t\treject(new Error(`Error listening to server: ${err}`));\n\t\t\t});\n\t\t\tthis.a.on('close', () => {\n\t\t\t\treject(new Error('Closed'));\n\t\t\t});\n\t\t\tthis.a.listen(0, '127.0.0.1');\n\t\t});\n\t}\n\n\tpublic stop(): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tif (!this.a.listening) {\n\t\t\t\tthrow new Error('Server is not started');\n\t\t\t}\n\t\t\tthis.a.close((err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic waitForOAuthResponse(): Promise<IOAuthResult> {\n\t\treturn this.b;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function base64Encode(text: string): string {\n\treturn Buffer.from(text, 'binary').toString('base64');\n}\n\nexport function base64Decode(text: string): string {\n\treturn Buffer.from(text, 'base64').toString('utf8');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nodeCrypto from 'crypto';\n\nexport const crypto: Crypto = nodeCrypto.webcrypto as any;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport fetch from 'node-fetch';\n\nexport const fetching = fetch;\n","module.exports = require(\"@azure/opentelemetry-instrumentation-azure-sdk\");","module.exports = require(\"@opentelemetry/instrumentation\");","module.exports = require(\"applicationinsights-native-metrics\");","module.exports = require(\"azure/functions-core\");","module.exports = require(\"vscode\");","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"child_process\");","module.exports = require(\"console\");","module.exports = require(\"constants\");","module.exports = require(\"crypto\");","module.exports = require(\"dns\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"module\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"punycode\");","module.exports = require(\"stream\");","module.exports = require(\"timers\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Environment, EnvironmentParameters } from '@azure/ms-rest-azure-env';\nimport { AzureActiveDirectoryService, IStoredSession } from './AADHelper';\nimport { BetterTokenStorage } from './betterSecretStorage';\nimport { UriEventHandler } from './UriEventHandler';\nimport TelemetryReporter from '@vscode/extension-telemetry';\n\nasync function initMicrosoftSovereignCloudAuthProvider(context: vscode.ExtensionContext, telemetryReporter: TelemetryReporter, uriHandler: UriEventHandler, tokenStorage: BetterTokenStorage<IStoredSession>): Promise<vscode.Disposable | undefined> {\n\tconst environment = vscode.workspace.getConfiguration('microsoft-sovereign-cloud').get<string | undefined>('environment');\n\tlet authProviderName: string | undefined;\n\tif (!environment) {\n\t\treturn undefined;\n\t}\n\n\tif (environment === 'custom') {\n\t\tconst customEnv = vscode.workspace.getConfiguration('microsoft-sovereign-cloud').get<EnvironmentParameters>('customEnvironment');\n\t\tif (!customEnv) {\n\t\t\tconst res = await vscode.window.showErrorMessage(vscode.l10n.t('You must also specify a custom environment in order to use the custom environment auth provider.'), vscode.l10n.t('Open settings'));\n\t\t\tif (res) {\n\t\t\t\tawait vscode.commands.executeCommand('workbench.action.openSettingsJson', 'microsoft-sovereign-cloud.customEnvironment');\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tEnvironment.add(customEnv);\n\t\t} catch (e) {\n\t\t\tconst res = await vscode.window.showErrorMessage(vscode.l10n.t('Error validating custom environment setting: {0}', e.message), vscode.l10n.t('Open settings'));\n\t\t\tif (res) {\n\t\t\t\tawait vscode.commands.executeCommand('workbench.action.openSettings', 'microsoft-sovereign-cloud.customEnvironment');\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\tauthProviderName = customEnv.name;\n\t} else {\n\t\tauthProviderName = environment;\n\t}\n\n\tconst env = Environment.get(authProviderName);\n\tif (!env) {\n\t\tconst res = await vscode.window.showErrorMessage(vscode.l10n.t('The environment `{0}` is not a valid environment.', authProviderName), vscode.l10n.t('Open settings'));\n\t\treturn undefined;\n\t}\n\n\tconst aadService = new AzureActiveDirectoryService(\n\t\tvscode.window.createOutputChannel(vscode.l10n.t('Microsoft Sovereign Cloud Authentication'), { log: true }),\n\t\tcontext,\n\t\turiHandler,\n\t\ttokenStorage,\n\t\ttelemetryReporter,\n\t\tenv);\n\tawait aadService.initialize();\n\n\tconst disposable = vscode.authentication.registerAuthenticationProvider('microsoft-sovereign-cloud', authProviderName, {\n\t\tonDidChangeSessions: aadService.onDidChangeSessions,\n\t\tgetSessions: (scopes: string[]) => aadService.getSessions(scopes),\n\t\tcreateSession: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"login\" : {\n\t\t\t\t\t\t\"owner\": \"TylerLeonhardt\",\n\t\t\t\t\t\t\"comment\": \"Used to determine the usage of the Microsoft Sovereign Cloud Auth Provider.\",\n\t\t\t\t\t\t\"scopes\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Used to determine what scope combinations are being requested.\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginMicrosoftSovereignCloud', {\n\t\t\t\t\t// Get rid of guids from telemetry.\n\t\t\t\t\tscopes: JSON.stringify(scopes.map(s => s.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i, '{guid}'))),\n\t\t\t\t});\n\n\t\t\t\treturn await aadService.createSession(scopes);\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"loginFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users run into issues with the login flow.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginMicrosoftSovereignCloudFailed');\n\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tremoveSession: async (id: string) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logout\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutMicrosoftSovereignCloud');\n\n\t\t\t\tawait aadService.removeSessionById(id);\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logoutFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often fail to log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutMicrosoftSovereignCloudFailed');\n\t\t\t}\n\t\t}\n\t}, { supportsMultipleAccounts: true });\n\n\tcontext.subscriptions.push(disposable);\n\treturn disposable;\n}\n\nexport async function activate(context: vscode.ExtensionContext) {\n\tconst aiKey: string = context.extension.packageJSON.aiKey;\n\tconst telemetryReporter = new TelemetryReporter(aiKey);\n\n\tconst uriHandler = new UriEventHandler();\n\tcontext.subscriptions.push(uriHandler);\n\tcontext.subscriptions.push(vscode.window.registerUriHandler(uriHandler));\n\tconst betterSecretStorage = new BetterTokenStorage<IStoredSession>('microsoft.login.keylist', context);\n\n\tconst loginService = new AzureActiveDirectoryService(\n\t\tvscode.window.createOutputChannel(vscode.l10n.t('Microsoft Authentication'), { log: true }),\n\t\tcontext,\n\t\turiHandler,\n\t\tbetterSecretStorage,\n\t\ttelemetryReporter,\n\t\tEnvironment.AzureCloud);\n\tawait loginService.initialize();\n\n\tcontext.subscriptions.push(vscode.authentication.registerAuthenticationProvider('microsoft', 'Microsoft', {\n\t\tonDidChangeSessions: loginService.onDidChangeSessions,\n\t\tgetSessions: (scopes: string[]) => loginService.getSessions(scopes),\n\t\tcreateSession: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"login\" : {\n\t\t\t\t\t\t\"owner\": \"TylerLeonhardt\",\n\t\t\t\t\t\t\"comment\": \"Used to determine the usage of the Microsoft Auth Provider.\",\n\t\t\t\t\t\t\"scopes\": { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\", \"comment\": \"Used to determine what scope combinations are being requested.\" }\n\t\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('login', {\n\t\t\t\t\t// Get rid of guids from telemetry.\n\t\t\t\t\tscopes: JSON.stringify(scopes.map(s => s.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i, '{guid}'))),\n\t\t\t\t});\n\n\t\t\t\treturn await loginService.createSession(scopes);\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"loginFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users run into issues with the login flow.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginFailed');\n\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tremoveSession: async (id: string) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logout\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often users log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logout');\n\n\t\t\t\tawait loginService.removeSessionById(id);\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logoutFailed\" : { \"owner\": \"TylerLeonhardt\", \"comment\": \"Used to determine how often fail to log out.\" }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutFailed');\n\t\t\t}\n\t\t}\n\t}, { supportsMultipleAccounts: true }));\n\n\tlet microsoftSovereignCloudAuthProviderDisposable = await initMicrosoftSovereignCloudAuthProvider(context, telemetryReporter, uriHandler, betterSecretStorage);\n\n\tcontext.subscriptions.push(vscode.workspace.onDidChangeConfiguration(async e => {\n\t\tif (e.affectsConfiguration('microsoft-sovereign-cloud')) {\n\t\t\tmicrosoftSovereignCloudAuthProviderDisposable?.dispose();\n\t\t\tmicrosoftSovereignCloudAuthProviderDisposable = await initMicrosoftSovereignCloudAuthProvider(context, telemetryReporter, uriHandler, betterSecretStorage);\n\t\t}\n\t}));\n\n\treturn;\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() { }\n"],"names":["ValidPhaseNames","Set","HttpPipeline","constructor","policies","_a","this","_policies","slice","_orderedPolicies","undefined","addPolicy","policy","options","phase","afterPhase","Error","has","push","removePolicy","removedPolicies","filter","policyDescriptor","name","sendRequest","httpClient","request","getOrderedPolicies","reduceRight","next","req","pipeline","orderPolicies","clone","result","policyMap","Map","createPhase","hasRun","hasAfterPolicies","serializePhase","noPhase","deserializePhase","retryPhase","signPhase","orderedPhases","getPhase","descriptor","policyName","node","dependsOn","dependants","set","add","get","afterPolicies","afterPolicyName","afterNode","beforePolicies","beforePolicyName","beforeNode","walkPhase","size","dependant","delete","walkPhases","iteration","initialResultLength","length","createEmptyPipeline","create","debugEnvVariable","process","env","DEBUG","enabledString","enabledNamespaces","skippedNamespaces","debuggers","enable","debugObj","Object","assign","namespace","createDebugger","enabled","disable","log","message","args","stderr","write","EOL","namespaces","wildcard","namespaceList","split","map","ns","trim","replace","startsWith","RegExp","substr","instance","endsWith","skipped","test","enabledNamespace","newDebugger","destroy","extend","index","indexOf","splice","registeredLoggers","logLevelFromEnv","AZURE_LOG_LEVEL","azureLogLevel","AzureLogger","debug","AZURE_LOG_LEVELS","isAzureLogLevel","level","join","logger","shouldEnable","setLogLevel","console","error","levelMap","verbose","info","warning","createClientLogger","clientRootLogger","patchLogMethod","createLogger","parent","child","logLevel","includes","isObject","input","Array","isArray","Date","RedactedString","defaultAllowedHeaderNames","defaultAllowedQueryParameters","Sanitizer","additionalAllowedHeaderNames","allowedHeaderNames","additionalAllowedQueryParameters","allowedQueryParameters","concat","n","toLowerCase","p","sanitize","obj","seen","JSON","stringify","key","value","sanitizeHeaders","sanitizeUrl","sanitizeQuery","sanitized","keys","k","url","URL","search","searchParams","toString","logPolicyName","logPolicy","sanitizer","response","status","headers","redirectPolicyName","allowedRedirect","redirectPolicy","maxRetries","handleRedirect","async","currentRetries","locationHeader","method","body","res","SDK_VERSION","getUserAgentValue","prefix","runtimeInfo","version","defaultAgent","telemetryInfo","parts","token","getUserAgentString","UserAgentHeaderName","userAgentPolicyName","userAgentPolicy","userAgentValue","userAgentPrefix","decompressResponsePolicyName","decompressResponsePolicy","listenersMap","WeakMap","abortedMap","AbortSignal","onabort","TypeError","addEventListener","_type","listener","removeEventListener","listeners","dispatchEvent","_event","abortSignal","signal","aborted","call","forEach","type","AbortError","super","AbortController","parentSignals","_signal","arguments","parentSignal","abort","ms","timer","setTimeout","unref","delay","delayInMs","Promise","resolve","reject","onAborted","rejectOnAbort","abortErrorMsg","removeListeners","clearTimeout","parseHeaderValueAsNumber","headerName","valueAsNum","Number","isNaN","RetryAfterHeader","AllRetryAfterHeaders","getRetryAfterInMs","header","retryAfterValue","retryAfterHeader","diff","parse","now","isFinite","Math","max","e","throttlingRetryStrategy","retry","retryAfterInMs","skipStrategy","exponentialRetryStrategy","_b","retryInterval","retryDelayInMs","maxRetryInterval","maxRetryDelayInMs","retryCount","responseError","matchedSystemError","err","code","ignoreSystemErrors","isExponential","Boolean","isExponentialRetryResponse","ignoreExponentialResponse","ignoreHttpStatusCodes","isThrottlingRetryResponse","errorToThrow","exponentialDelay","pow","clampedExponentialDelay","min","ceil","floor","random","retryPolicyLogger","retryPolicy","strategies","retryRequest","requestId","strategiesLoop","strategy","strategyLogger","modifiers","redirectTo","defaultRetryPolicy","formDataPolicyName","formDataPolicy","formData","contentType","urlSearchParams","URLSearchParams","entries","subValue","append","wwwFormUrlEncode","requestForm","formKey","formValue","getBoundary","contentLength","getLength","prepareFormData","isNode","versions","proxyPolicyName","globalNoProxyList","noProxyListLoaded","globalBypassedMap","getEnvironmentValue","getDefaultProxySettings","proxyUrl","httpsProxy","allProxy","httpProxy","loadEnvironmentProxyValue","parsedUrl","host","protocol","hostname","port","parseInt","username","password","getProxyAgentOptions","proxySettings","tlsSettings","parsedProxyUrl","_error","proxyAgentOptions","toJSON","auth","proxyPolicy","noProxy","item","loadNoProxy","cachedAgents","uri","noProxyList","bypassedMap","isBypassedFlag","pattern","isBypassed","customNoProxyList","agent","isInsecure","httpProxyAgent","HttpProxyAgent","httpsProxyAgent","HttpsProxyAgent","setProxyAgentOnRequest","setClientRequestIdPolicyName","setClientRequestIdPolicy","requestIdHeaderName","tlsPolicyName","tlsPolicy","knownContextKeys","span","Symbol","for","createTracingContext","context","TracingContextImpl","parentContext","setValue","initialContext","_contextMap","newContext","getValue","deleteValue","instrumenterImplementation","getInstrumenter","createRequestHeaders","parseTraceparentHeader","startSpan","_name","spanOptions","end","isRecording","recordException","setAttribute","setStatus","tracingContext","withContext","_context","callback","callbackArgs","isError","hasName","hasMessage","getErrorMessage","stringified","String","custom","inspect","errorSanitizer","RestError","statusCode","setPrototypeOf","prototype","isRestError","REQUEST_SEND_ERROR","PARSE_ERROR","tracingPolicyName","tracingPolicy","userAgent","tracingClient","packageName","packageVersion","operationOptions","startSpanResult","tracingOptions","updatedOptions","withSpan","traceparentHeader","createTracingClient","tryCreateTracingClient","spanKind","spanAttributes","tryCreateSpan","serviceRequestId","tryProcessResponse","tryProcessError","createPipelineFromOptions","tlsOptions","proxyOptions","userAgentOptions","retryOptions","redirectOptions","loggingOptions","normalizeName","HttpHeadersImpl","rawHeaders","_headersMap","preserveCase","entry","values","normalizedName","iterator","headerIterator","createHttpHeaders","DEFAULT_TLS_SETTINGS","isReadableStream","pipe","isStreamComplete","stream","on","isArrayBuffer","byteLength","ReportTransform","Transform","progressCallback","loadedBytes","_transform","chunk","_encoding","NodeHttpClient","cachedHttpsAgents","_c","abortController","abortListener","event","timeout","acceptEncoding","shouldDecompress","responseStream","bodyLength","Buffer","isBuffer","from","getBodyLength","onUploadProgress","uploadReportStream","makeRequest","getResponseHeaders","resume","contentEncoding","unzip","inflate","getDecodedResponseStream","onDownloadProgress","downloadReportStream","streamResponseStatusCodes","POSITIVE_INFINITY","readableStreamBody","bodyAsText","buffer","uploadStreamDone","downloadStreamDone","all","then","catch","allowInsecureConnection","getOrCreateAgent","path","pathname","once","abortError","ArrayBuffer","isView","disableKeepAlive","cachedHttpAgent","keepAlive","createDefaultHttpClient","rnds8Pool","Uint8Array","poolPtr","rng","byteToHex","i","arr","offset","uuid","buf","rnds","PipelineRequestImpl","_d","_e","_f","_g","withCredentials","enableBrowserStreams","createPipelineRequest","exponentialRetryPolicyName","exponentialRetryPolicy","systemErrorRetryPolicyName","systemErrorRetryPolicy","throttlingRetryPolicyName","throttlingRetryPolicy","DEFAULT_CYCLER_OPTIONS","forcedRefreshWindowInMs","retryIntervalInMs","refreshWindowInMs","bearerTokenAuthenticationPolicyName","defaultAuthorizeRequest","scopes","getAccessToken","getTokenOptions","accessToken","bearerTokenAuthenticationPolicy","credential","challengeCallbacks","callbacks","authorizeRequest","authorizeRequestOnChallenge","tokenCyclerOptions","tenantId","refreshWorker","cycler","isRefreshing","expiresOnTimestamp","refresh","refreshTimeout","tryGetAccessToken","finalToken","beginRefresh","getToken","_token","reason","tokenOptions","claims","mustRefresh","shouldRefresh","createTokenCycler","challenge","getChallenge","ndJsonPolicyName","ndJsonPolicy","CombinedStream","util","http","https","parseUrl","fs","Stream","mime","asynckit","populate","FormData","option","_overheadLength","_valueLength","_valuesToMeasure","module","exports","inherits","LINE_BREAK","DEFAULT_CONTENT_TYPE","field","filename","bind","_multiPartHeader","footer","_multiPartFooter","_trackLength","valueLength","knownLength","readable","hasOwnProperty","_lengthRetriever","Infinity","start","stat","fileSize","pause","contentDisposition","_getContentDisposition","_getContentType","contents","prop","filepath","normalize","basename","client","_httpMessage","lookup","_streams","_lastBoundary","getHeaders","userHeaders","formHeaders","setBoundary","boundary","_boundary","_generateBoundary","getBuffer","dataBuffer","alloc","len","substring","getLengthSync","hasKnownLength","cb","parallel","nextTick","submit","params","defaults","setHeader","onResponse","responce","removeListener","emit","dst","src","Environment","parameters","validateAuthority","param","valueOf","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId","activeDirectoryGraphApiVersion","activeDirectoryGraphResourceId","azureDataLakeAnalyticsCatalogAndJobEndpointSuffix","azureDataLakeStoreFileSystemEndpointSuffix","batchResourceId","galleryEndpointUrl","keyVaultDnsSuffix","publishingProfileUrl","sqlManagementEndpointUrl","sqlServerHostnameSuffix","storageEndpointSuffix","envContainer","envObj","AzureCloud","ChinaCloud","USGovernment","GermanCloud","__assignFn","t","s","extendStaticsFn","d","b","__proto__","__extendsFn","__","__spreadArrayFn","to","il","j","LoggingSeverity","CRITICAL","WARNING","_InternalMessageId","ClientPerformanceMathError","ErrorPVCalc","MessageLimitPerPVExceeded","MissingRequiredFieldSpecification","NavigationTimingNotSupported","OnError","SenderNotInitialized","TelemetrySampledAndNotSent","InvalidBackendResponse","InvalidDurationValue","TelemetryEnvelopeInvalid","CreateEnvelopeError","CircularReferenceDetected","IllegalCharsInName","ItemNotInArray","MaxAjaxPerPVExceeded","MessageTruncated","NameTooLong","SampleRateOutOfRange","StringValueTooLong","StartCalledMoreThanOnce","StopCalledWithoutStart","TrackArgumentsNotSpecified","UrlTooLong","IdTooLong","InvalidEvent","SnippetScriptLoadFailure","InvalidContentBlob","ValueKind","NotSet","Pii_DistinguishedName","Pii_GenericData","Pii_IPV4Address","Pii_IPv6Address","Pii_MailSubject","Pii_PhoneNumber","Pii_QueryString","Pii_SipAddress","Pii_SmtpAddress","Pii_Identity","Pii_Uri","Pii_Fqdn","Pii_IPV4AddressLegacy","CustomerContent_GenericContent","EventLatency","Normal","CostDeferred","RealTime","Immediate","EventPropertyType","Unspecified","Int32","UInt32","Int64","UInt64","Double","Bool","Guid","DateTime","EventPersistence","Critical","TraceLevel","NONE","ERROR","INFORMATION","_ExtendedInternalMessageId","AuthHandShakeError","AuthRedirectFail","BrowserCannotReadLocalStorage","BrowserCannotWriteLocalStorage","BrowserDoesNotSupportLocalStorage","CannotParseBiBlobValue","CannotParseDataAttribute","CVPluginNotAvailable","DroppedEvent","ErrorParsingAISessionCookie","ErrorProvidedChannels","FailedToGetCookies","FailedToInitializeCorrelationVector","FailedToInitializeSDK","InvalidCorrelationValue","SessionRenewalDateIsZero","SendPostOnCompleteFailure","PostResponseHandler","SDKNotInitialized","UNDEFINED","Prototype","strFunction","DynClassName","UnknownValue","Obj","_objGetPrototypeOf","_objGetOwnProps","_gbl","globalThis","self","window","global","_gblInst","o","_hasOwnProperty","_isObjectOrArrayPrototype","target","_isObjectArrayOrFunctionPrototype","Function","_getObjProto","newProto","curProto","_forEachProp","func","props","name_1","lp","_isDynamicCandidate","funcName","skipOwn","_throwTypeError","_hasVisited","_getInstFunc","proto","currentDynProtoProxy","instFunc","instFuncTable","canAddInst","objProto","visited","protoFunc","_getProtoFunc","_getObjName","unknownValue","dynamicProto","theClass","delegateFunc","classProto","thisTarget","thisProto","_checkPrototype","className","perfOptions","useBaseInst","instFuncs","_getInstanceFuncs","_instFuncProxy","funcHost","theFunc","apply","baseFuncs","baseProto","_getBaseFuncs","setInstanceFunc","baseInstFuncs","instFuncs_1","dynProtoProxy","_createDynamicPrototype","_populatePrototype","ChannelControllerPriority","_addChannelQueue","channelQueue","queue","core","sort","a","queueItem","chain","TelemetryInitializerPlugin","_super","_id","_initializers","_this","_initDefaults","identifier","priority","_self","_base","addTelemetryInitializer","telemetryInitializer","theInitializer","id","fn","remove","initializer","idx","itemCtx","doNotSendItem","telemetryInitializersCount","exception","__ieDyn","BaseTelemetryPlugin","strValidationError","strSdkUnloadingError","defaultInitConfig","loggingLevelConsole","_createPerfManager","notificationMgr","PerfManager","_isPluginPresent","thePlugin","plugins","exists","plugin","BaseCore","_config","_isInitialized","_eventQueue","_notificationManager","_perfManager","_cfgPerfManager","_cookieManager","_pluginChain","_configExtensions","_coreExtensions","_channelControl","_channelConfig","_channelQueue","_isUnloading","_telemetryInitializerPlugin","_internalLogsEventName","_evtNamespace","_unloadHandlers","_debugListener","_traceCtx","_internalLogPoller","_forceStopInternalLogPoller","_startInternalLogTimer","alwaysStart","interval","diagnosticLogInterval","setInterval","clearInterval","_flushInternalLogs","DiagnosticLogger","_createTelCtx","theCtx","_getPluginChain","_initPluginChain","updateState","theExtensions","channelPriority","allExtensions","coreExtensions","extPriorities","ext","extPriority","_validateExtensions","channels","extensions","extensionQueue_1","createChannelQueues","_setQueue","_getTelCtx","_processChannelQueue","theChannels","processFn","onComplete","waiting","_runChainOnComplete","channelChain","chainCtx","isInitialized","initialize","config","pluginChain","processTelemetry","update","updateCtx","theUpdateState","iterate","teardown","unloadCtx","unloadState","theUnloadState","isAsync","getChannel","pluginIdentifier","flush","callBack","sendReason","cbTimeout","doneIterating","cbTimer","doCallback","handled_1","createChannelControllerPlugin","initCtx","_updateHook","_doUpdate","_getPlugin","theExt","isEnabled","pluginState","removeCb","pluginsToRemove","_removePlugins","removed","thePlugins","removeComplete","unloadChain","newConfigExtensions","newChannelConfig","newQueue","channel","logMessage","iKey","time","baseType","baseData","track","_flushChannels","_logOrThrowError","notificationManager","enablePerfMgr","disableDbgExt","NotificationManager","cfgExtensions","releaseQueue","getTransmissionControls","controls","telemetryItem","ver","events","_createDummyNotificationManager","getCookieMgr","setCookieMgr","cookieMgr","createPerfMgr","setPerfMgr","perfMgr","eventCnt","eventQueue","pollInternalLogs","eventName","unload","unloadComplete","flushComplete","processUnloadCtx","_doUnload","run","addPlugin","replaceExisting","addCb","existingPlugin","_addPlugin","added","removedPlugins_1","evtNamespace","getTraceCtx","createNew","setTraceCtx","traceCtx","_runListeners","perfEvtsSendAll","perfEvent","AppInsightsCore","_notifyInvalidEvent","manager","_validateTelemetryItem","pluginVersionStringArr","_pluginVersionStringArr","endpointUrl","propertyStorageOverride","getProperty","setProperty","getWParam","document","enableWParam","pluginVersionString","logger_1","timings","trackStart","latency","itemExt","sdk","itemProperties","_isFunction","_createPromiseAllOnResolvedFunction","resolvedCallback","ESPromise","resolverFunc","_state","_settledValue","_queue","_processQueue","pending_1","_resolve","_reject","onResolved","onRejected","_enqueue","iterable","values_1","pending_2","race","_loop_1","_schedulerId","_running","_waiting","_timedOut","_getTime","getTime","ESPromiseScheduler","diagLog","_promiseId","_scheduledName","_debugLog","_warnLog","_lastEvent","_eventCount","_removeQueuedEvent","eventId","scheduleEvent","startEventAction","uniqueId","uniqueEventId","eventDetails","waitForEvent","waitEvent","newScheduledEvent","evt","tm","isRunning","isAborted","waitResolve","waitReject","runTime","prevId","_startWaitingEvent","_schId","_abortAndRemoveOldEvents","expired","_cleanup","completed","toQueue","_removeScheduledEvent","_waitForFinalResult","startResult","schEventResolve","schEventReject","_createScheduledEvent","startEvent","wTm","theResult","incomplete","waitingToStart","ValueSanitizer","fieldSanitizerProvider","_sanitizerMap","_sanitizers","_fieldSanitizers","_getFieldSanitizer","fieldLookup","handleField","canHandle","fieldHandler","handler","_handleProperty","mapValue","fieldType","property","stringifyObjects","kind","_callFieldSanitizer","_convertToProperty","fieldProvider","theType","getSanitizer","propertyType","newValue_1","propValue","propKey","theValue","newPath","newProp","details","addSanitizer","newSanitizer","addFieldSanitizer","fieldSanitizer","subType","getFieldType","MinChannelPriorty","STR_EMPTY","STR_DEFAULT_ENDPOINT_URL","STR_VERSION","STR_PROPERTIES","Version","FullVersionString","strWithCredentials","_fieldTypeEventPropMap","uInt8ArraySupported","isDocumentObjectAvailable","isWindowObjectAvailable","isValueAssigned","getTenantId","apiKey","indexTenantId","isUint8ArrayAvailable","nav","ua","isSafariOrFirefox","isLatency","sanitizeProperty","propType","isArrayValid","isValueKind","getCommonSchemaMetaData","encodedTypeValue","isDataType","getFieldValueType","disableCookies","setEnabled","setCookie","days","deleteCookie","del","getCookie","getCookieValue","decode","cookieValue","decodeURIComponent","createGuid","style","theGuid","obj2","obj3","obj4","obj5","extended","deep","theArgs","arrayValue","arrayIndex","setProcessTelemetryTimings","processTelemetryStart","objType","Utils","strUndefined","strObject","Undefined","arrForEach","arrIndexOf","arrMap","arrReduce","objKeys","toISOString","isReactNative","isString","isNumber","isBoolean","isFunction","strTrim","isBeaconsSupported","getISOString","useXDomainRequest","cookieAvailable","disallowsSameSiteNone","objDefineAccessors","addPageUnloadEventListener","addEventHandler","strEndsWith","objForEachKey","CoreUtils","_canUseCookies","isTypeof","isUndefined","isNullOrUndefined","isDate","objCreate","dateNow","isIE","newGuid","perfNow","newId","randomValue","random32","mwcRandomSeed","mwcRandom32","generateW3CId","isChromium","openXhr","urlString","disabled","isSync","_wrapSetXhrProp","xhr","XMLHttpRequest","open","createEnumStyle","enumClass","EventsDiscardedReason","Unknown","NonRetryableStatus","SizeLimitExceeded","KillSwitch","QueueFull","_isinitialized","_rootCtx","_nextPlugin","_unloadHandlerContainer","_hooks","currentCtx","rootCtx","_setDefaults","nextPlugin","unloadDone","theUnloadCtx","_unloadCallback","oldHooks","rm","updateDone","theUpdateCtx","_updateCallback","getCfg","_addHook","hooks","setInitialized","strToGMTString","strToUTCString","_supportsCookies","_allowUaSameSite","_parsedCookieValue","_doc","_cookieCache","_globalCookieConfig","_gblCookieMgr","inst","createCookieMgr","_isMgrEnabled","_isIgnoredCookie","cookieMgrCfg","ignoreCookies","safeGetCookieMgr","cookieCfg","rootConfig","cookieMgrConfig","cookieDomain","cookiePath","cookieEnabled","_createCookieMgrConfig","_path","_domain","domain","_enabled","areCookiesSupported","gblManager","maxAgeSec","blockedCookies","_isBlockedCookie","_extractParts","_isIE","expireMs","expiry","setTime","_formatDate","location_1","uaDisallowsSameSiteNone","_setCookieValue","_formatCookieValue","_getCookieValue","purge","delCookie","thePart","theDate","theCookie","_cookieMgrs","perf","tmp","hexValues","oct","clockSequenceHi","legacyCanUseCookies","mgr","EventHelper","Attach","AttachEvent","Detach","DetachEvent","_objDefineProperty","instanceName","_dataUid","_canAcceptData","createUniqueNamespace","includeVersion","createElmNodeData","data","accept","defValue","addDefault","theCache","enumerable","configurable","_createAccessor","_getCache","kill","listenerFuncs","_aiNamespace","_listenerProxyFunc","dbgExt","getDebugExt","getDebugListener","_sanitizeDiagnosticText","text","_logToConsole","theConsole","logFunc","_InternalLogMessage","msgId","msg","isUserAct","properties","strProps","diagnosticText","dataType","safeGetLogger","_loggingLevelConsole","_loggingLevelTelemetry","_maxInternalMessageLimit","_enableDebug","_messageCount","_messageLogged","_logInternalMessage","severity","messageKey","_debugExtMsg","throttleLimitMessage","throttleMessage","loggingLevelTelemetry","maxMessageLimit","enableDebug","_setDefaultsFromConfig","consoleLoggingLevel","telemetryLoggingLevel","maxInternalMessageLimit","throwInternal","resetInternalMessageCount","_getLogger","_throwInternal","_warnToConsole","strWindow","strJSON","strMsie","strTrident","strXMLHttpRequest","_isTrident","_navUserAgentCheck","_enableMocks","_useXDomainRequest","_beaconsSupported","_hasProperty","supported","setEnableEnvMocks","getGlobalInst","gbl","hasWindow","getWindow","hasDocument","getDocument","hasNavigator","navigator","getNavigator","hasHistory","history","getHistory","getLocation","checkForMock","mockLocation","location","getConsole","getPerformance","hasJSON","getJSON","getCrypto","getMsCrypto","product","getIEVersion","userAgentStr","navigator_1","doc","tridentVer","dumpObj","object","objectTypeDump","propertyValueDump","stack","sendBeacon","isFetchSupported","withKeepAlive","isSupported","XDomainRequest","isXhrSupported","_getNamedValue","findMetaTag","querySelectorAll","content","findNamedServerTiming","navPerf","getEntriesByType","serverTiming","description","strEvents","strVisibilityChangeEvt","strPageHide","strPageShow","strUnload","strBeforeUnload","strPageHideNamespace","strPageShowNamespace","rRemoveEmptyNs","rRemoveTrailingEmptyNs","_guid","elmNodeData","eventNamespace","_normalizeNamespace","_getEvtNamespace","theNamespace_1","parsedEvent","exec","__getRegisteredEvents","theEvents","eventCache","evtName","evtType","registeredEvents","_getRegisteredEvents","aiEvts","_doDetach","handlerRef","useCapture","_doUnregister","unRegFn","theEvent","capture","mergeEvtNamespace","theNamespace","eventOn","_doAttach","registeredEvent","guid","eventOff","evtName_1","found_1","_unregisterEvents","regEvent","attachEvent","eventNameWithoutOn","detachEvent","w","removeEventHandler","_addEventListeners","excludeEvents","addEventListeners","removeEventListeners","removePageUnloadEventListener","addPageHideEventListener","newNamespaces","pageUnloadAdded","visibilityState","removePageHideEventListener","addPageShowEventListener","pageShowAdded","removePageShowEventListener","_objFreeze","_objSeal","_objKeys","StringProto","_strTrim","_strEndsWith","_strStartsWith","_dataToISOString","_isArray","_objToString","_fnToString","_objFunctionString","rCamelCase","rNormalizeInvalid","rLeadingNumeric","isNotNullOrUndefined","normalizeJsName","_all","letter","toUpperCase","match","callbackfn","searchLen","valLen","pos","_strEndsWithPoly","strStartsWith","checkValue","chkLen","_strStartsWithPoly","strContains","isPlainObject","date","getUTCFullYear","pad","num","r","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","toFixed","_toISOStringPoly","thisArg","searchElement","fromIndex","abs","results","initialValue","str","_objKeysHasDontEnumBug","propertyIsEnumerable","_objKeysDontEnums","dontEnumsLength","getProp","setProp","_doNothing","deepFreeze","objFreeze","objSeal","dt","getExceptionName","valChk","srcChk","getSetValue","getCfgValue","defaultValue","isNotTruthy","isTruthy","throwError","_createProxyFunction","source","srcFunc","originalArguments","proxyAssign","chkSet","proxyFunctionAs","overwriteTarget","proxyFunctions","functionsToProxy","theFuncName","optimizeObject","theObject","objExtend","obj1","obj6","argLen","arg","isArgArray","isArgObj","propOk","newValue","isNewArray","STR_CHANNELS","STR_CORE","STR_CREATE_PERF_MGR","STR_DISABLED","STR_EXTENSION_CONFIG","STR_EXTENSIONS","STR_PROCESS_TELEMETRY","STR_PRIORITY","STR_EVENTS_SENT","STR_EVENTS_DISCARDED","STR_EVENTS_SEND_REQUEST","STR_PERF_EVENT","STR_ERROR_TO_CONSOLE","STR_WARN_TO_CONSOLE","STR_GET_PERF_MGR","PerfEvent","payloadDetails","theDetails_1","accessorDefined","childTime","childEvts","childEvt","exTime","payload","ParentContextKey","ChildrenContextKey","ctx","fire","doPerfActiveKey","doPerf","mgrSource","getSource","perfEvt","currentActive","children","ex","getGblPerfMgr","_chainId","_createInternalContext","telemetryChain","startAt","_nextProxy","_onComplete","proxy","createTelemetryProxyChain","_getNextProxyStart","_next","nextProxy","completeDetails","getExtCfg","_getExtCfg","getConfig","extConfig","hasNext","getNext","setNext","that","_i","mergeDefault","theConfig","newConfig_1","cfgValue","createProcessTelemetryContext","internalContext","createProcessTelemetryUnloadContext","createProcessTelemetryUpdateContext","firstProxy","lastProxy_1","newProxy","chainId","hasProcessTelemetry","hasSetNext","proxyChain","getPlugin","_processChain","pluginCore","_setNext","processPluginFn","hasRunContext","nextId","hasNextRun","createTelemetryPluginProxy","ProcessTelemetryContext","UInt32Mask","MaxUInt32","_mwcSeeded","_mwcW","_mwcZ","_mwcSeed","seedValue","_autoSeedMwc","maxValue","signed","c","getRandomValues","Uint32Array","maxLength","number","chars","charAt","pluginStateData","_getPluginState","initializePlugins","processContext","initPlugins","lastPlugin","sortPlugins","extA","extB","bHasProcess","createDistributedTraceContext","parentCtx","trace","getName","setName","getTraceId","setTraceId","getSpanId","setSpanId","getTraceFlags","setTraceFlags","newTraceFlags","createUnloadHandlerContainer","handlers","TRACE_PARENT_REGEX","DEFAULT_VERSION","INVALID_VERSION","INVALID_TRACE_ID","INVALID_SPAN_ID","_isValid","invalidValue","_formatValue","_formatFlags","createTraceParent","traceId","spanId","flags","isValidTraceId","isValidSpanId","traceFlags","parseTraceParent","isValidTraceParent","isSampledFlag","formatTraceParent","findW3cTraceParent","traceParent","_DYN_INITIALIZE","_DYN_NAME","_DYN_GET_NOTIFY_MGR","_DYN_IDENTIFIER","_DYN_PUSH","_DYN_IS_INITIALIZED","_DYN_CONFIG","_DYN_INSTRUMENTATION_KEY","_DYN_LOGGER","_DYN_LENGTH","_DYN_TIME","_DYN_PROCESS_NEXT","_DYN_GET_PROCESS_TEL_CONT0","_DYN_ADD_NOTIFICATION_LIS1","_DYN_REMOVE_NOTIFICATION_2","_DYN_STOP_POLLING_INTERNA3","_DYN_ON_COMPLETE","_DYN_GET_PLUGIN","_DYN_FLUSH","_DYN__EXTENSIONS","_DYN_SPLICE","_DYN_TEARDOWN","_DYN_MESSAGE_ID","_DYN_MESSAGE","_DYN_IS_ASYNC","_DYN__DO_TEARDOWN","_DYN_UPDATE","_DYN_GET_NEXT","_DYN_DIAG_LOG","_DYN_SET_NEXT_PLUGIN","_DYN_CREATE_NEW","_DYN_COOKIE_CFG","_DYN_INDEX_OF","_DYN_SUBSTRING","_DYN_USER_AGENT","_DYN_SPLIT","_DYN_SET_ENABLED","_DYN_SUBSTR","_DYN_NODE_TYPE","_DYN_APPLY","_DYN_REPLACE","_DYN_ENABLE_DEBUG_EXCEPTI4","_DYN_LOG_INTERNAL_MESSAGE","_DYN_TO_LOWER_CASE","_DYN_CALL","_DYN_TYPE","_DYN_HANDLER","_DYN_LISTENERS","_DYN_IS_CHILD_EVT","_DYN_GET_CTX","_DYN_SET_CTX","_DYN_COMPLETE","_DYN_TRACE_ID","_DYN_SPAN_ID","_DYN_TRACE_FLAGS","_DYN_VERSION","strShimFunction","strShimObject","strShimUndefined","strShimPrototype","strShimHasOwnProperty","ObjClass","ObjProto","ObjAssign","ObjCreate","ObjDefineProperty","ObjHasOwnProperty","_cachedGlobal","getGlobal","useCached","throwTypeError","objCreateFn","tmpFunc","RT_PROFILE","NRT_PROFILE","BE_PROFILE","STR_POST_METHOD","STR_DROPPED","STR_REQUEUE","STR_CONTENT_TYPE_HEADER","STR_CLIENT_VERSION","STR_CLIENT_ID","STR_TIME_DELTA_TO_APPLY","STR_UPLOAD_TIME","STR_API_KEY","STR_MSA_DEVICE_TICKET","STR_AUTH_XTOKEN","_getEventMsfpc","intWeb","_getMsfpc","msfpc","EventBatch","addEvents","_msfpc","Msfpc","count","addEvent","fromEvent","numEvents","cnt","ClockSkewManager","_allowRequestSending","_shouldAddClockSkewHeaders","_isFirstRequest","_clockSkewHeaderValue","_clockSkewSet","allowRequestSending","firstRequestSent","shouldAddClockSkewHeaders","getClockSkewHeaderValue","setClockSkew","timeDeltaInMillis","_killedTokenDictionary","setKillSwitchTenants","killTokens","killDuration","killedTokens","_normalizeTenants","durationMs","isTenantKilled","tenantToken","killDictionary","retryPolicyGetMillisToBackoffForRetry","retriesSoFar","waitDuration","randomBackoff","BaseBackoff","MaxRecordSize","MaxBeaconRecordSize","rCheckDot","Serializer","perfManager","valueSanitizer","enableCompoundKey","strBaseData","_checkForCompoundkey","_theSanitizer","_isReservedCache","_processPathKeys","srcObj","thePath","checkReserved","metadataPathKeys","metadataCallback","processSubKeys","srcValue","theMetaPathKeys","destObj","subKeys","keyLen","subKey","_isReservedField","createPayload","retryCnt","isTeardown","isReducedPayload","sendType","apiKeys","payloadBlob","overflow","sizeExceed","failedEvts","batches","isBeacon","appendPayload","theBatch","maxEventsPerBatch","canAddEvents","payloadEvents","eventsAdded","sizeExceeded","isBeaconPayload","requestMaxSize","recordMaxSize","joinCount","eventBlob","getEventBlob","blobLength","evts","eventData","serializedEvent","serializedExt","eventExt","serializedData","serializedBaseData","pathKeys","_addJSONPropertyMetaData","json","propKeys","propertyValue","metaData","f","metaTarget","newTarget","_noResponseQs","_eventActionMap","_collectorQsHeaders","_collectorHeaderToQs","_addCollectorHeaderQsMapping","qsName","allowQs","_getResponseText","responseText","_hasHeader","hasHeader","lowerHeader","_addRequestDetails","useHeaders","hdrs","useHdrs","_prependTransports","theTransports","newTransports","HttpManager","maxConnections","maxRequestRetriesBeforeBackoff","actions","timeoutOverride","_responseHandlers","_postManager","_logger","_sendInterfaces","_core","_cookieMgr","_xhrTimeout","_disableXhrSync","_disableFetchKeepAlive","_canHaveReducedPayload","_addNoResponse","_urlString","_killSwitch","_paused","_clockSkewManager","_useBeacons","_outstandingRequests","_customHttpInterface","_queryStringParameters","_headers","_batchQueue","_serializer","_enableEventTimings","_useHeaders","_sendCredentials","_getSenderInterface","transports","syncSupport","transportType","sendPostFunc","_xdrSendPost","_xhrSendPost","_fetchSendPost","_beaconSendPost","_transport","_isSync","sendPOST","oncomplete","sync","xdr","onload","_doOnComplete","_handleCollectorResponse","onerror","ontimeout","onprogress","send","theUrl","ignoreResponse","responseHandled","requestInit","keepalive","_sendReason","credentials","fetch","headerMap","_appendHeader","theHeaders","getResponseHeader","xhrComplete","responseTxt","getAllResponseHeaders","headersString","headersArray","headerEntry","_convertAllHeadersToMap","_getAllResponseHeaders","disableXhrSync","xhrRequest","setRequestHeader","thePayload","_thePayload","nav_1","droppedBatches_1","_sendBatchesNotification","_isBeaconPayload","_adjustSendType","_hasIdleConnection","_clearQueue","theQueue","_canSendPayload","theBatches","_createDebugBatches","_sendBatches","orgBatches_1","isSynchronous_1","droppedBatches","serializationStart","sendInterface","sendTransport","shift","_doPayloadSend","isSynchronous","useSendBeacon","_setTimingValue","serializationCompleted","useSendHook_1","sendHook","sendInterface_1","useHeaders_1","requestDetails_1","requestDetails","apiQsKeys","encodeURIComponent","wParam","_buildRequestDetails","sendEventStart_1","batchLp","evtLp","orgPayloadData","disableFetchKeepAlive","STR_CACHE_CONTROL","sender","httpStatusCode","isRetrying","backOffTrans","shouldRetry","STR_TIME_DELTA_HEADER","STR_KILL_DURATION_HEADER","STR_KILL_TOKENS_HEADER","killToken","removedEvents","retryCount_1","_doAction","batchReason","_backOffTransmission","_clearBackOff","sendEventCompleted_1","sendEventCompleted","_addEventCompletedTimings","_addCompleteTimings","sendQueuedRequests","_handleRequestFinished","_retryRequestIfNeeded","sendListener","hookData_1","senderCalled_1","responseHandlers","webResult","sendSync","theAction_1","action","isSyncRequest_1","postChannel","httpInterface","channelConfig","avoidOptions","disableEventTimings","xhrTimeout","addNoResponse","syncHttpInterface","beaconHttpInterface","alwaysUseXhrOverride","fetchSyncHttpInterface","beaconUnloadTransports","unloadTransports","addQueryStringParameter","addHeader","canSendRequest","isCompletelyIdle","setUnloading","addBatch","sendSynchronousBatch","batch","defaultSetTimeout","defaultClearTimeout","timeoutId","createTimeoutWrapper","argSetTimeout","argClearTimeout","clear","strEventsDiscarded","PostChannel","_xhrOverride","_httpManager","_autoFlushEventsLimit","_autoFlushBatchLimit","_delayedBatchReason","_timeoutWrapper","_isTeardownCalled","_flushCallbackQueue","_flushCallbackTimerId","_immediateQueueSize","_immediateQueueSizeLimit","_queueSize","_queueSizeLimit","_profiles","_currentProfile","_scheduledTimerId","_immediateTimerId","_currentBackoffCount","_timerCount","_batchQueues","_delayedBatchSendLatency","_optimizeObject","_isPageUnloadTriggered","_maxEventSendAttempts","_maxUnloadEventSendAttempts","_handleUnloadEvents","_releaseAllQueues","_handleShowEvents","_addEventToQueues","sendAttempt","evtLatency","queueSize","queueLimit","eventDropped","_addEventToProperQueue","dropLatency","dropNumber","currentLatency","eventBatch","_getEventBatch","droppedEvents","droppedCount","_notifyBatchEvents","_resetQueueCounts","_dropEventWithLatencyOrLess","_notifyEvents","_sendEventsForLatencyAndAbove","queued","_queueBatches","_hasEvents","_scheduleTimer","immediateTimeOut","_createTimer","timeOut","requeue","_requeueEvents","_sendingEvent","sent","_eventsSentEvent","drop","_eventsDropped","rspFail","_eventsResponseFail","oth","_otherEvent","_initializeProfiles","iKeyMap","_setAutoLimits","theTimerFunc","timerMultiplier","_clearScheduledTimer","batchQueue","_performAutoFlush","doFlush","immediateQueue","normalQueue","eventsQueued","latencyToProcess","_flushImpl","_waitForIdleManager","maxSendAttempts","_callNotification","notifyFunc","extraArgs","isSyncRequest","disableAutoBatchFlushLimit","MaxNumberEventPerBatch","coreConfig","extendedCore","extensionConfig","setTimeoutOverride","clearTimeoutOverride","disableOptimizeObj","existingGetWParamMethod","wparam","ignoreMc1Ms0CookieProcessing","_hookWParam","eventsLimitInMem","immediateEventLimit","autoFlushEventsLimit","httpXHROverride","anonCookieName","payloadPreprocessor","payloadListener","overrideEndpointUrl","getNotifyMgr","excludePageUnloadEvents","disablePageUnloadEvents","disablePageShowEvents","ev","disableTelemetry","processNext","_doTeardown","setEventQueueLimits","eventLimit","autoFlushLimit","addResponseHandler","responseHandler","_loadTransmitProfiles","profiles","profileName","profileValue","profLen","directValue","cleared","setMsaAuthTicket","ticket","hasEvents","_setTransmitProfile","webSnippet","__read","m","ar","done","__spreadArray","pack","l","NoopContextManager","active","with","API_NAME","NOOP_CONTEXT_MANAGER","ContextAPI","getInstance","_instance","setGlobalContextManager","contextManager","_getContextManager","DiagComponentLogger","_namespace","logProxy","warn","unshift","DiagAPI","_logProxy","setLogger","optionsOrLogLevel","oldLogger","newLogger","maxLevel","_filterFunc","theLevel","createLogLevelDiagLogger","suppressOverrideMessage","createComponentLogger","__values","BaggageImpl","_entries","getEntry","getAllEntries","setEntry","newBaggage","removeEntry","removeEntries","e_1","keys_1","keys_1_1","e_1_1","return","baggageEntryMetadataSymbol","createBaggage","baggageEntryMetadataFromString","__TYPE__","createContextKey","ROOT_CONTEXT","BaseContext","_currentContext","diag","DiagLogLevel","extendStatics","ValueType","consoleMap","DiagConsoleLogger","_consoleFunc","__extends","NoopMeter","createHistogram","_options","NOOP_HISTOGRAM_METRIC","createCounter","NOOP_COUNTER_METRIC","createUpDownCounter","NOOP_UP_DOWN_COUNTER_METRIC","createObservableGauge","NOOP_OBSERVABLE_GAUGE_METRIC","createObservableCounter","NOOP_OBSERVABLE_COUNTER_METRIC","createObservableUpDownCounter","NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC","addBatchObservableCallback","_callback","_observables","removeBatchObservableCallback","NoopMetric","NoopCounterMetric","_value","_attributes","NoopUpDownCounterMetric","NoopHistogramMetric","record","NoopObservableMetric","addCallback","removeCallback","NoopObservableCounterMetric","NoopObservableGaugeMetric","NoopObservableUpDownCounterMetric","NOOP_METER","createNoopMeter","VALID_KEY_REGEX","VALID_VALUE_BASE_REGEX","INVALID_VALUE_COMMA_EQUAL_REGEX","TraceStateImpl","rawTraceState","_internalState","_parse","traceState","_clone","unset","serialize","_keys","reduce","agg","reverse","part","listMember","validateKey","validateValue","createTraceState","NOOP_METER_PROVIDER","NoopMeterProvider","getMeter","_version","metrics","MetricsAPI","setGlobalMeterProvider","provider","getMeterProvider","propagation","_globalThis","VERSION","re","isCompatible","ownVersion","acceptedVersions","rejectedVersions","myVersionMatch","ownVersionParsed","globalVersion","v","_accept","globalVersionMatch","globalVersionParsed","_makeCompatibilityCheck","major","GLOBAL_OPENTELEMETRY_API_KEY","_global","registerGlobal","allowOverride","api","unregisterGlobal","NoopTextMapPropagator","inject","_carrier","extract","fields","BAGGAGE_KEY","getBaggage","getActiveBaggage","setBaggage","baggage","deleteBaggage","NOOP_TEXT_MAP_PROPAGATOR","PropagationAPI","setGlobalPropagator","propagator","carrier","setter","_getGlobalPropagator","getter","defaultTextMapGetter","defaultTextMapSetter","TraceAPI","_proxyTracerProvider","ProxyTracerProvider","wrapSpanContext","isSpanContextValid","deleteSpan","getSpan","getActiveSpan","getSpanContext","setSpan","setSpanContext","setGlobalTracerProvider","success","setDelegate","getTracerProvider","getTracer","NonRecordingSpan","_spanContext","spanContext","_key","setAttributes","_status","updateName","_endTime","_exception","_time","contextApi","NoopTracer","root","parentFromContext","startActiveSpan","arg2","arg3","arg4","opts","contextWithSpanSet","NOOP_TRACER","ProxyTracer","_provider","_getTracer","_fn","tracer","Reflect","_delegate","getDelegateTracer","NOOP_TRACER_PROVIDER","NoopTracerProvider","getDelegate","delegate","SamplingDecision","SPAN_KEY","INVALID_SPANID","INVALID_TRACEID","INVALID_SPAN_CONTEXT","SpanKind","VALID_TRACEID_REGEX","VALID_SPANID_REGEX","SpanStatusCode","TraceFlags","ExportResultCode","BAGGAGE_KEY_PAIR_SEPARATOR","BAGGAGE_PROPERTIES_SEPARATOR","BAGGAGE_ITEMS_SEPARATOR","BAGGAGE_HEADER","BAGGAGE_MAX_NAME_VALUE_PAIRS","BAGGAGE_MAX_PER_NAME_VALUE_PAIRS","BAGGAGE_MAX_TOTAL_LENGTH","W3CBaggagePropagator","keyPairs","getKeyPairs","pair","headerValue","serializeKeyPairs","baggageString","keyPair","parsePairKeyValue","baggageEntry","metadata","hValue","current","valueProps","keyPairPart","separatorIndex","parseKeyPairsIntoRecord","sanitizeAttributes","attributes","out","val","isAttributeKey","isAttributeValue","e_2","arr_1","arr_1_1","element","isValidPrimitiveAttributeValue","e_2_1","isHomogeneousAttributeValueArray","delegateHandler","setGlobalErrorHandler","globalErrorHandler","loggingErrorHandler","getOwnPropertyNames","propertyName","getPrototypeOf","flattenException","stringifyException","MILLISECONDS_TO_NANOSECONDS","SECOND_TO_NANOSECONDS","millisToHrTime","epochMillis","epochSeconds","trunc","round","getTimeOrigin","timeOrigin","timing","fetchStart","hrTime","performanceNow","addHrTimes","timeInputToHrTime","isTimeInputHrTime","hrTimeDuration","startTime","endTime","seconds","nanos","hrTimeToTimeStamp","repeat","nanoString","hrTimeToNanoseconds","hrTimeToMilliseconds","hrTimeToMicroseconds","isTimeInput","time1","time2","AnchoredClock","systemClock","monotonicClock","_monotonicClock","_epochMillis","_performanceMillis","delta","intValue","charCode","buf8","buf16","hexToBase64","hexStr","hi","charCodeAt","lo","writeUInt8","RandomIdGenerator","generateTraceId","getIdGenerator","generateSpanId","SHARED_BUFFER","allocUnsafe","bytes","writeUInt32BE","RPCType","RPC_METADATA_KEY","setRPCMetadata","meta","deleteRPCMetadata","getRPCMetadata","AlwaysOffSampler","shouldSample","decision","AlwaysOnSampler","ParentBasedSampler","_root","_remoteParentSampled","remoteParentSampled","_remoteParentNotSampled","remoteParentNotSampled","_localParentSampled","localParentSampled","_localParentNotSampled","localParentNotSampled","spanName","links","isRemote","TraceIdRatioBasedSampler","_ratio","_normalize","_upperBound","_accumulate","ratio","accumulation","TimeoutError","callWithTimeout","promise","timeoutHandle","timeoutPromise","urlMatches","urlToMatch","isUrlIgnored","ignoredUrls","ignoredUrls_1","ignoredUrls_1_1","isWrapped","__original","__unwrap","__wrapped","internal","_export","exporter","export","getEnv","processEnv","HOSTNAME","otperformance","require","performance","SDK_INFO","Te","unrefTimer","CompositePropagator","_propagators","propagators","_fields","x","y","TraceState","TRACE_PARENT_HEADER","TRACE_STATE_HEADER","W3CTraceContextPropagator","traceParentHeader","traceStateHeader","state","SUPPRESS_TRACING_KEY","suppressTracing","unsuppressTracing","isTracingSuppressed","Deferred","_promise","defineProperty","BindOnceFuture","_that","_isCalled","_deferred","ENVIRONMENT_BOOLEAN_KEYS","isEnvVarABoolean","ENVIRONMENT_NUMBERS_KEYS","isEnvVarANumber","ENVIRONMENT_LISTS_KEYS","isEnvVarAList","DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT","DEFAULT_ATTRIBUTE_COUNT_LIMIT","DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","DEFAULT_ENVIRONMENT","OTEL_SDK_DISABLED","CONTAINER_NAME","ECS_CONTAINER_METADATA_URI_V4","ECS_CONTAINER_METADATA_URI","KUBERNETES_SERVICE_HOST","NAMESPACE","OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_EXPORTER_JAEGER_AGENT_HOST","OTEL_EXPORTER_JAEGER_AGENT_PORT","OTEL_EXPORTER_JAEGER_ENDPOINT","OTEL_EXPORTER_JAEGER_PASSWORD","OTEL_EXPORTER_JAEGER_USER","OTEL_EXPORTER_OTLP_ENDPOINT","OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","OTEL_EXPORTER_OTLP_METRICS_ENDPOINT","OTEL_EXPORTER_OTLP_LOGS_ENDPOINT","OTEL_EXPORTER_OTLP_HEADERS","OTEL_EXPORTER_OTLP_TRACES_HEADERS","OTEL_EXPORTER_OTLP_METRICS_HEADERS","OTEL_EXPORTER_OTLP_LOGS_HEADERS","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_ZIPKIN_ENDPOINT","OTEL_LOG_LEVEL","OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_RESOURCE_ATTRIBUTES","OTEL_SERVICE_NAME","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_TRACES_EXPORTER","OTEL_TRACES_SAMPLER","OTEL_TRACES_SAMPLER_ARG","OTEL_LOGS_EXPORTER","OTEL_EXPORTER_OTLP_INSECURE","OTEL_EXPORTER_OTLP_TRACES_INSECURE","OTEL_EXPORTER_OTLP_METRICS_INSECURE","OTEL_EXPORTER_OTLP_LOGS_INSECURE","OTEL_EXPORTER_OTLP_CERTIFICATE","OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE","OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE","OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE","OTEL_EXPORTER_OTLP_COMPRESSION","OTEL_EXPORTER_OTLP_TRACES_COMPRESSION","OTEL_EXPORTER_OTLP_METRICS_COMPRESSION","OTEL_EXPORTER_OTLP_LOGS_COMPRESSION","OTEL_EXPORTER_OTLP_CLIENT_KEY","OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY","OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY","OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY","OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE","OTEL_EXPORTER_OTLP_PROTOCOL","OTEL_EXPORTER_OTLP_TRACES_PROTOCOL","OTEL_EXPORTER_OTLP_METRICS_PROTOCOL","OTEL_EXPORTER_OTLP_LOGS_PROTOCOL","OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE","parseBoolean","environment","parseNumber","parseStringList","output","separator","givenValue","logLevelMap","ALL","VERBOSE","INFO","WARN","setLogLevelFromEnv","parseEnvironment","getEnvWithoutDefaults","transform","funcToString","objectCtorString","getPrototype","objectProto","symToStringTag","toStringTag","nativeObjectToString","isObjectLike","isOwn","tag","unmasked","getRawTag","objectToString","baseGetTag","Ctor","merge","objects","mergeTwoObjects","takeValue","one","two","isPrimitive","shouldMerge","twoValue","wasObjectReferenced","arr1","arr2","TracesSamplerValues","Span","parentTracer","parentSpanId","_deprecatedClock","_droppedAttributesCount","_droppedEventsCount","_droppedLinksCount","_ended","_duration","_performanceStartTime","_performanceOffset","_startTimeProvided","resource","instrumentationLibrary","_spanLimits","getSpanLimits","_spanProcessor","getActiveSpanProcessor","onStart","_attributeValueLengthLimit","attributeValueLengthLimit","_isSpanEnded","attributeCountLimit","_truncateToSize","attributesOrStartTime","timeStamp","eventCountLimit","droppedAttributesCount","onEnd","inp","msDuration","SemanticAttributes","_truncateToLimitUtil","limit","NOT_RECORD","RECORD_AND_SAMPLED","FALLBACK_OTEL_TRACES_SAMPLER","loadDefaultConfig","sampler","buildSamplerFromEnv","forceFlushTimeoutMillis","generalLimits","spanLimits","linkCountLimit","attributePerEventCountLimit","attributePerLinkCountLimit","getSamplerProbabilityFromEnv","probability","ForceFlushState","Tracer","_tracerProvider","userConfig","perInstanceDefaults","DEFAULT_CONFIG","localConfig","_sampler","_generalLimits","_idGenerator","idGenerator","parentSpan","parentSpanContext","link","samplingResult","initAttributes","getGeneralLimits","__assign","Resource","asyncAttributesPromise","asyncAttributesPending","_syncAttributes","_asyncAttributesPromise","asyncAttributes","empty","EMPTY","default","SemanticResourceAttributes","argv0","waitForAsyncAttributes","_arguments","generator","g","_","label","trys","ops","verb","op","pop","step","__generator","P","fulfilled","rejected","other","mergedSyncAttributes","thisAsyncAttributes","otherAsyncAttributes","MultiSpanProcessor","_spanProcessors","forceFlush","promises","spanProcessor","e_3","e_3_1","shutdown","e_4","e_4_1","NoopSpanProcessor","_span","BatchSpanProcessorBase","_exporter","_finishedSpans","_droppedSpansCount","_maxExportBatchSize","maxExportBatchSize","_maxQueueSize","maxQueueSize","_scheduledDelayMillis","scheduledDelayMillis","_exportTimeoutMillis","exportTimeoutMillis","_shutdownOnce","_shutdown","isCalled","_flushAll","_parentContext","_addToBuffer","onShutdown","_maybeStartTimer","_flushOneBatch","_clearTimer","spans","doExport","ExportResult","pendingResources","_timer","BatchSpanProcessor","BasicTracerProvider","_registeredSpanProcessors","_tracers","mergedConfig","_h","_j","_k","_l","_m","parsedEnvConfig","reconfigureLimits","defaultExporter","_buildExporterFromEnv","batchProcessor","activeSpanProcessor","schemaUrl","addSpanProcessor","register","_buildPropagatorFromEnv","timeoutInterval","resolved","errors","_getPropagator","_registeredPropagators","_getSpanExporter","_registeredExporters","uniquePropagatorNames","validPropagators","list","exporterName","ConsoleSpanExporter","resultCallback","_sendSpans","_exportInfo","parentId","timestamp","duration","spans_1","spans_1_1","dir","depth","InMemorySpanExporter","_stopped","reset","getFinishedSpans","SimpleSpanProcessor","_unresolvedExports","exportPromise_1","CLOUD_PROVIDER","CLOUD_ACCOUNT_ID","CLOUD_REGION","CLOUD_AVAILABILITY_ZONE","CLOUD_PLATFORM","AWS_ECS_CONTAINER_ARN","AWS_ECS_CLUSTER_ARN","AWS_ECS_LAUNCHTYPE","AWS_ECS_TASK_ARN","AWS_ECS_TASK_FAMILY","AWS_ECS_TASK_REVISION","AWS_EKS_CLUSTER_ARN","AWS_LOG_GROUP_NAMES","AWS_LOG_GROUP_ARNS","AWS_LOG_STREAM_NAMES","AWS_LOG_STREAM_ARNS","CONTAINER_ID","CONTAINER_RUNTIME","CONTAINER_IMAGE_NAME","CONTAINER_IMAGE_TAG","DEPLOYMENT_ENVIRONMENT","DEVICE_ID","DEVICE_MODEL_IDENTIFIER","DEVICE_MODEL_NAME","FAAS_NAME","FAAS_ID","FAAS_VERSION","FAAS_INSTANCE","FAAS_MAX_MEMORY","HOST_ID","HOST_NAME","HOST_TYPE","HOST_ARCH","HOST_IMAGE_NAME","HOST_IMAGE_ID","HOST_IMAGE_VERSION","K8S_CLUSTER_NAME","K8S_NODE_NAME","K8S_NODE_UID","K8S_NAMESPACE_NAME","K8S_POD_UID","K8S_POD_NAME","K8S_CONTAINER_NAME","K8S_REPLICASET_UID","K8S_REPLICASET_NAME","K8S_DEPLOYMENT_UID","K8S_DEPLOYMENT_NAME","K8S_STATEFULSET_UID","K8S_STATEFULSET_NAME","K8S_DAEMONSET_UID","K8S_DAEMONSET_NAME","K8S_JOB_UID","K8S_JOB_NAME","K8S_CRONJOB_UID","K8S_CRONJOB_NAME","OS_TYPE","OS_DESCRIPTION","OS_NAME","OS_VERSION","PROCESS_PID","PROCESS_EXECUTABLE_NAME","PROCESS_EXECUTABLE_PATH","PROCESS_COMMAND","PROCESS_COMMAND_LINE","PROCESS_COMMAND_ARGS","PROCESS_OWNER","PROCESS_RUNTIME_NAME","PROCESS_RUNTIME_VERSION","PROCESS_RUNTIME_DESCRIPTION","SERVICE_NAME","SERVICE_NAMESPACE","SERVICE_INSTANCE_ID","SERVICE_VERSION","TELEMETRY_SDK_NAME","TELEMETRY_SDK_LANGUAGE","TELEMETRY_SDK_VERSION","TELEMETRY_AUTO_VERSION","WEBENGINE_NAME","WEBENGINE_VERSION","WEBENGINE_DESCRIPTION","CloudProviderValues","ALIBABA_CLOUD","AWS","AZURE","GCP","CloudPlatformValues","ALIBABA_CLOUD_ECS","ALIBABA_CLOUD_FC","AWS_EC2","AWS_ECS","AWS_EKS","AWS_LAMBDA","AWS_ELASTIC_BEANSTALK","AZURE_VM","AZURE_CONTAINER_INSTANCES","AZURE_AKS","AZURE_FUNCTIONS","AZURE_APP_SERVICE","GCP_COMPUTE_ENGINE","GCP_CLOUD_RUN","GCP_KUBERNETES_ENGINE","GCP_CLOUD_FUNCTIONS","GCP_APP_ENGINE","AwsEcsLaunchtypeValues","EC2","FARGATE","HostArchValues","AMD64","ARM32","ARM64","IA64","PPC32","PPC64","X86","OsTypeValues","WINDOWS","LINUX","DARWIN","FREEBSD","NETBSD","OPENBSD","DRAGONFLYBSD","HPUX","AIX","SOLARIS","Z_OS","TelemetrySdkLanguageValues","CPP","DOTNET","ERLANG","GO","JAVA","NODEJS","PHP","PYTHON","RUBY","WEBJS","AWS_LAMBDA_INVOKED_ARN","DB_SYSTEM","DB_CONNECTION_STRING","DB_USER","DB_JDBC_DRIVER_CLASSNAME","DB_NAME","DB_STATEMENT","DB_OPERATION","DB_MSSQL_INSTANCE_NAME","DB_CASSANDRA_KEYSPACE","DB_CASSANDRA_PAGE_SIZE","DB_CASSANDRA_CONSISTENCY_LEVEL","DB_CASSANDRA_TABLE","DB_CASSANDRA_IDEMPOTENCE","DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT","DB_CASSANDRA_COORDINATOR_ID","DB_CASSANDRA_COORDINATOR_DC","DB_HBASE_NAMESPACE","DB_REDIS_DATABASE_INDEX","DB_MONGODB_COLLECTION","DB_SQL_TABLE","EXCEPTION_TYPE","EXCEPTION_MESSAGE","EXCEPTION_STACKTRACE","EXCEPTION_ESCAPED","FAAS_TRIGGER","FAAS_EXECUTION","FAAS_DOCUMENT_COLLECTION","FAAS_DOCUMENT_OPERATION","FAAS_DOCUMENT_TIME","FAAS_DOCUMENT_NAME","FAAS_TIME","FAAS_CRON","FAAS_COLDSTART","FAAS_INVOKED_NAME","FAAS_INVOKED_PROVIDER","FAAS_INVOKED_REGION","NET_TRANSPORT","NET_PEER_IP","NET_PEER_PORT","NET_PEER_NAME","NET_HOST_IP","NET_HOST_PORT","NET_HOST_NAME","NET_HOST_CONNECTION_TYPE","NET_HOST_CONNECTION_SUBTYPE","NET_HOST_CARRIER_NAME","NET_HOST_CARRIER_MCC","NET_HOST_CARRIER_MNC","NET_HOST_CARRIER_ICC","PEER_SERVICE","ENDUSER_ID","ENDUSER_ROLE","ENDUSER_SCOPE","THREAD_ID","THREAD_NAME","CODE_FUNCTION","CODE_NAMESPACE","CODE_FILEPATH","CODE_LINENO","HTTP_METHOD","HTTP_URL","HTTP_TARGET","HTTP_HOST","HTTP_SCHEME","HTTP_STATUS_CODE","HTTP_FLAVOR","HTTP_USER_AGENT","HTTP_REQUEST_CONTENT_LENGTH","HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED","HTTP_RESPONSE_CONTENT_LENGTH","HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED","HTTP_SERVER_NAME","HTTP_ROUTE","HTTP_CLIENT_IP","AWS_DYNAMODB_TABLE_NAMES","AWS_DYNAMODB_CONSUMED_CAPACITY","AWS_DYNAMODB_ITEM_COLLECTION_METRICS","AWS_DYNAMODB_PROVISIONED_READ_CAPACITY","AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY","AWS_DYNAMODB_CONSISTENT_READ","AWS_DYNAMODB_PROJECTION","AWS_DYNAMODB_LIMIT","AWS_DYNAMODB_ATTRIBUTES_TO_GET","AWS_DYNAMODB_INDEX_NAME","AWS_DYNAMODB_SELECT","AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES","AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES","AWS_DYNAMODB_EXCLUSIVE_START_TABLE","AWS_DYNAMODB_TABLE_COUNT","AWS_DYNAMODB_SCAN_FORWARD","AWS_DYNAMODB_SEGMENT","AWS_DYNAMODB_TOTAL_SEGMENTS","AWS_DYNAMODB_COUNT","AWS_DYNAMODB_SCANNED_COUNT","AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS","AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES","MESSAGING_SYSTEM","MESSAGING_DESTINATION","MESSAGING_DESTINATION_KIND","MESSAGING_TEMP_DESTINATION","MESSAGING_PROTOCOL","MESSAGING_PROTOCOL_VERSION","MESSAGING_URL","MESSAGING_MESSAGE_ID","MESSAGING_CONVERSATION_ID","MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES","MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES","MESSAGING_OPERATION","MESSAGING_CONSUMER_ID","MESSAGING_RABBITMQ_ROUTING_KEY","MESSAGING_KAFKA_MESSAGE_KEY","MESSAGING_KAFKA_CONSUMER_GROUP","MESSAGING_KAFKA_CLIENT_ID","MESSAGING_KAFKA_PARTITION","MESSAGING_KAFKA_TOMBSTONE","RPC_SYSTEM","RPC_SERVICE","RPC_METHOD","RPC_GRPC_STATUS_CODE","RPC_JSONRPC_VERSION","RPC_JSONRPC_REQUEST_ID","RPC_JSONRPC_ERROR_CODE","RPC_JSONRPC_ERROR_MESSAGE","MESSAGE_TYPE","MESSAGE_ID","MESSAGE_COMPRESSED_SIZE","MESSAGE_UNCOMPRESSED_SIZE","DbSystemValues","OTHER_SQL","MSSQL","MYSQL","ORACLE","DB2","POSTGRESQL","REDSHIFT","HIVE","CLOUDSCAPE","HSQLDB","PROGRESS","MAXDB","HANADB","INGRES","FIRSTSQL","EDB","CACHE","ADABAS","FIREBIRD","DERBY","FILEMAKER","INFORMIX","INSTANTDB","INTERBASE","MARIADB","NETEZZA","PERVASIVE","POINTBASE","SQLITE","SYBASE","TERADATA","VERTICA","H2","COLDFUSION","CASSANDRA","HBASE","MONGODB","REDIS","COUCHBASE","COUCHDB","COSMOSDB","DYNAMODB","NEO4J","GEODE","ELASTICSEARCH","MEMCACHED","COCKROACHDB","DbCassandraConsistencyLevelValues","EACH_QUORUM","QUORUM","LOCAL_QUORUM","ONE","TWO","THREE","LOCAL_ONE","ANY","SERIAL","LOCAL_SERIAL","FaasTriggerValues","DATASOURCE","HTTP","PUBSUB","TIMER","OTHER","FaasDocumentOperationValues","INSERT","EDIT","DELETE","FaasInvokedProviderValues","NetTransportValues","IP_TCP","IP_UDP","IP","UNIX","PIPE","INPROC","NetHostConnectionTypeValues","WIFI","WIRED","CELL","UNAVAILABLE","UNKNOWN","NetHostConnectionSubtypeValues","GPRS","EDGE","UMTS","CDMA","EVDO_0","EVDO_A","CDMA2000_1XRTT","HSDPA","HSUPA","HSPA","IDEN","EVDO_B","LTE","EHRPD","HSPAP","GSM","TD_SCDMA","IWLAN","NR","NRNSA","LTE_CA","HttpFlavorValues","HTTP_1_0","HTTP_1_1","HTTP_2_0","SPDY","QUIC","MessagingDestinationKindValues","QUEUE","TOPIC","MessagingOperationValues","RECEIVE","PROCESS","RpcGrpcStatusCodeValues","OK","CANCELLED","INVALID_ARGUMENT","DEADLINE_EXCEEDED","NOT_FOUND","ALREADY_EXISTS","PERMISSION_DENIED","RESOURCE_EXHAUSTED","FAILED_PRECONDITION","ABORTED","OUT_OF_RANGE","UNIMPLEMENTED","INTERNAL","DATA_LOSS","UNAUTHENTICATED","MessageTypeValues","SENT","RECEIVED","emitter","cleanup","onEvent","onError","__createBinding","k2","desc","getOwnPropertyDescriptor","__esModule","writable","__setModuleDefault","__importStar","mod","oneDataSystemClientFactory","vscodeAPI","xhrOverride","appInsightsCore","oneDs","postPlugin","collectorChannelPlugin","instrumentationKey","disableCookiesUsage","disableInstrumentationKeyValidation","internalTesting","workspace","getConfiguration","envelope","getAICore","flushOneDS","completedFlush","logEvent","measurements","dispose","BaseTelemetryReporter","telemetrySender","initializationOptions","userOptIn","errorOptIn","disposables","_onDidChangeTelemetryLevel","EventEmitter","onDidChangeTelemetryLevel","telemetryLogger","createTelemetryLogger","updateUserOptIn","onDidChangeEnableStates","isErrorsEnabled","isUsageEnabled","instantiateSender","telemetryLevel","internalSendTelemetryEvent","dangerous","sendEventData","logUsage","sendTelemetryEvent","sendRawTelemetryEvent","modifiedProperties","propertyKey","TelemetryTrustedValue","sendDangerousTelemetryEvent","internalSendTelemetryErrorEvent","logError","sendTelemetryErrorEvent","sendDangerousTelemetryErrorEvent","InstantiationStatus","BaseTelemetrySender","clientFactory","_instantiationStatus","NOT_INSTANTIATED","_exceptionQueue","_clientFactory","_telemetryClient","INSTANTIATED","sendErrorData","errorData","_flushQueues","INSTANTIATING","TelemetryUtil","replacementOptions","replacementString","osShim","platform","architecture","release","os","vscode","baseTelemetryReporter_1","baseTelemetrySender_1","util_1","_1dsClientFactory_1","TelemetryReporter","appInsightsClient","appInsights","defaultClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","setAutoCollectHeartbeat","setAutoCollectIncomingRequestAzureFunctions","tags","userId","machineId","sessionId","cloudRole","appName","cloudRoleInstance","addTelemetryProcessor","applyReplacements","addReplacementOptions","trackEvent","appInsightsClientFactory","shouldUseOneDataSystemSDK","responseData","arch","additionalCommonProperties","getAdditionalCommonProperties","__importDefault","events_1","debug_1","promisify_1","isSecureEndpoint","some","createAgent","Agent","_opts","maxFreeSockets","maxSockets","maxTotalSockets","sockets","freeSockets","requests","explicitDefaultPort","explicitProtocol","addRequest","secureEndpoint","_defaultAgent","defaultPort","createConnection","_last","shouldKeepAlive","timedOut","timeoutMs","_hadError","callbackError","onsocket","socket","freeSocket","onSocket","promisifiedCallback","rtn","AsyncScopeManager","OpenTelemetryScopeManagerWrapper","CorrelationContextManager_1","CorrelationContextManager","getCurrentContext","_activeSymbol","correlationContext","_spanToContext","runWithContext","wrapCallback","wrapEmitter","aiContext","operation","spanToContextObject","__awaiter","AzureFunctionsHook","Logging","_client","_autoGenerateIncomingRequests","_functionsCoreModule","funcProgModel","getProgrammingModel","_addPreInvocationHook","_addPostInvocationHook","_removeInvocationHooks","_preInvocationHook","registerHook","preInvocationContext","extractedContext","invocationContext","startOperation","customProperties","invocationId","traceContext","functionCallback","_isHttpTrigger","hookData","appInsightsExtractedContext","appInsightsStartTime","_postInvocationHook","postInvocationContext","request_1","startTime_1","response_1","extractedContext_1","inputs","_getAzureFunctionResponse","_createIncomingRequestTelemetry","isInteger","parsedVal","trackRequest","resultCode","httpOutputBinding","bindingDefinitions","find","direction","bindings","DiagChannel","AutoCollectConsole","INSTANCE","collectConsoleLog","IsInitialized","_methodNames","Traceparent","Tracestate","HttpRequestParser","Util","session","CONTEXT_NAME","generateContextObject","operationId","operationName","correlationContextHeader","traceparent","tracestate","CustomPropertiesImpl","traceFlag","formatOpenTelemetryTraceFlags","DEFAULT_TRACE_FLAG","bindEmitter","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","azureFnRequest","parser","getCorrelationContextHeader","getOperationName","nodeVer","canUseClsHooked","greater800","less820","greater470","addHeaderData","keyvals","keyval","serializeToHeader","bannedCharacters","AutoCollectExceptions","_canUseUncaughtExceptionMonitor","_exceptionListenerHandle","handle","reThrow","_FALLBACK_ERROR_MESSAGE","exceptionTelemetry","contextObjects","trackException","isAppCrashing","exit","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","_RETHROW_EXIT_MESSAGE","crypto","Constants","Context","HeartBeat","_collectionInterval","_isEnabled","_handle","trackHeartBeat","sdkVersion","_uniqueProcessId","randomBytes","WEBSITE_SITE_NAME","WEBSITE_HOME_STAMPNAME","WEBSITE_HOSTNAME","WEBSITE_OWNER_NAME","WEBSITE_RESOURCE_GROUP","WEBSITE_SLOT_NAME","trackMetric","HeartBeatMetricName","__spreadArrays","jl","RequestResponseHeaders","HttpDependencyParser","CorrelationIdManager","AutoCollectHttpDependencies","_initialize","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","userAgentHeader","w3cEnabled","generateRequestId","getRootId","requestArgs","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","updateSpanId","getBackCompatRequestId","requestNumber","canIncludeCorrelationHeader","getUrl","getHeader","correlationId","correlationHeader","requestContextHeader","safeIncludeCorrelationHeader","requestIdHeader","ignoreLegacyHeaders","parentIdHeader","rootIdHeader","isProcessed","dependencyTelemetry","getDependencyTelemetry","trackDependency","Contracts","RequestParser","requestOptions","_getUrlFromRequestOptions","_setStatus","getCorrelationContextTarget","requestContextTargetKey","baseTelemetry","dependencyId","dependencyName","remoteDependencyType","RemoteDependencyDataConstants","TYPE_HTTP","remoteDependencyTarget","urlObject","hash","TYPE_AI","correlationIdPrefix","_isSuccess","dependencyTypeName","parsed","format","originalOptions_1","parsedQuery","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","ellapsedMilliseconds","getRequestTelemetry","requestTelemetry","sourceCorrelationId","getRequestTags","newTags","locationIp","_getIp","_getId","userAuthUserId","operationParentId","getOperationParentId","getOperationId","pathName","getRequestId","getTraceparent","getTracestate","getLegacyRootId","legacyRootId","encrypted","baseUrl","requestUrl","ipMatch","check","ip","cookie","parseId","setBackCompatFromThisTraceContext","requestContextSourceKey","tracestateHeader","legacy_parentId","legacy_rootId","cookieParts","ContextTagKeys","AutoCollectPerformance","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","_registerRequest","onRequest","HANDLER_READY","wrapOnRequestHandler","wrapServerEventHandler","server","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","param1","param2","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","headersSent","tagOverrides","AutoCollectNativePerformance","_disabledMetrics","disabledMetrics","collectionInterval","_metricsAvailable","NativeMetricsEmitters","_emitter","_trackNativeMetrics","parseEnabled","collectExtendedMetrics","customConfig","disableAll","disableAllExtendedMetrics","individualOptOuts","extendedMetricDisablers","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","stdDev","sqrt","sumSquares","total","internalSdkVersion","loop","getLoopData","loopUsage","heap","memoryUsage","heapUsed","heapTotal","rss","NetworkStatsbeat","endpoint","totalRequestCount","totalSuccesfulRequestCount","totalFailedRequestCount","exceptionCount","throttleCount","intervalRequestExecutionTime","lastIntervalRequestExecutionTime","lastTime","lastRequestCount","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_lastRequests","_lastDependencies","totalDependencyCount","totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_enableLiveMetricsCounters","_lastCpus","cpus","_totalRequestCount","_totalFailedRequestCount","_totalDependencyCount","_totalFailedDependencyCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","trackPerformance","countRequest","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","PerformanceCounter","PROCESSOR_TIME","PROCESS_TIME","freeMem","freemem","usedMem","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","QuickPulseCounter","COMMITTED_BYTES","lastRequests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","REQUEST_RATE","REQUEST_DURATION","REQUEST_FAILURE_RATE","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","EXCEPTION_RATE","AggregatedMetricCounters_1","AggregatedMetricDimensions_1","AutoCollectPreAggregatedMetrics","_dependencyCountersCollection","_requestCountersCollection","_exceptionCountersCollection","_traceCountersCollection","trackPreAggregatedMetrics","dimensions","_getAggregatedCounter","totalCount","countTrace","counter","intervalExecutionTime","_trackRequestMetrics","_trackDependencyMetrics","_trackExceptionMetrics","_trackTraceMetrics","counterCollection","notMatch","dim","newCounter","AggregatedMetricCounter","currentCounter","lastTotalCount","lastIntervalExecutionTime","_trackPreAggregatedMetric","aggregationInterval","metricType","MetricId","REQUESTS_DURATION","DEPENDENCIES_DURATION","EXCEPTIONS_COUNT","intervalTraces","TRACES_COUNT","metric","metricProperties","PreaggregatedMetricPropertyNames","EnvelopeFactory","Sender","Vm","Config","Network","Statsbeat","_attach","StatsbeatAttach","_feature","StatsbeatFeature","_instrumentation","StatsbeatInstrumentation","_statbeatMetrics","_networkStatsbeatCollection","statsbeatConnectionString","_getConnectionString","_statsbeatConfig","samplingPercentage","_sender","_shutdownStatsbeat","_getCustomProperties","trackShortIntervalStatsbeats","STATS_COLLECTION_SHORT_INTERVAL","_longHandle","trackLongIntervalStatsbeats","STATS_COLLECTION_LONG_INTERVAL","setCodelessAttach","codeless","addFeature","feature","removeFeature","addInstrumentation","instrumentation","removeInstrumentation","_getNetworkStatsbeatCounter","currentStatusCounter","statusCounter","exceptionType","currentErrorCounter","exceptionCounter","countThrottle","countRetry","networkProperties","error_1","_getResourceProvider","_os","_resourceProvider","_cikey","_runtimeVersion","_language","_sdkVersion","_trackRequestDuration","_trackRequestsCount","_sendStatsbeats","TAG","commonProperties","attachProperties","instrumentationProperties","featureProperties","error_2","_resourceIdentifier","StatsbeatCounter","ATTACH","StatsbeatFeatureType","Instrumentation","FEATURE","Feature","shortHost","_getShortHost","totalRequestExecutionTime","originalHost","this_1","REQUEST_SUCCESS","REQUEST_FAILURE","RETRY_COUNT","THROTTLE_COUNT","EXCEPTION_COUNT","envelopes","statsbeat","createEnvelope","TelemetryType","Metric","StatsbeatTelemetryName","StatsbeatResourceProvider","unknown","appsvc","FUNCTIONS_WORKER_RUNTIME","functions","_isVM","AzureVirtualMachine","getAzureComputeMetadata","vmInfo","isVM","vm","subscriptionId","osType","currentEndpoint","euEndpoints","EU_CONNECTION_STRING","NON_EU_CONNECTION_STRING","zlib","snippetInjectionHelper","prefixHelper","ConnectionStringParser","applicationinsights_web_snippet_1","WebSnippet","_isIkeyValid","_aiUrl","WEB_INSTRUMENTATION_DEFAULT_SOURCE","_aiDeprecatedUrl","WEB_INSTRUMENTATION_DEPRECATED_SOURCE","clientWebIkey","_getWebSnippetIkey","webInstrumentationConnectionString","_webInstrumentationIkey","_clientWebInstrumentationConfig","webInstrumentationConfig","_clientWebInstrumentationSrc","webInstrumentationSrc","_statsbeat","getStatsbeat","_snippet","_getWebInstrumentationReplacedStr","WEB_SNIPPET","connectionString","iKeyCode","instrumentationkey","isIkeyValid","configStr","_getClientWebInstrumentationConfigStr","osStr","getOsPrefix","rpStr","getResourceProvider","snippetReplacedStr","replacedSnippet","requestListener","originalRequestListener","originalResponseWrite","isGetRequest","getContentEncodingFromHeaders","writeBufferType","ValidateInjection","InjectWebSnippet","encodeType","originalResponseEnd","endBufferType","httpsRequestListener","originalHttpsRequestListener","isGetHttpsRequest","originalHttpsResponseWrite","originalHttpsResponseEnd","isContentTypeHeaderHtml","inputStr","bufferEncodeType","removeHeader","_getInjectedCompressBuffer","html","newHtml","insertSnippetByIndex","bufferType","isBufferType","encodedString","contentEncodingMethod","GZIP","gunzipBuffer","gunzipSync","injectedGunzipBuffer","gzipSync","DEFLATE","inflateBuffer","inflateSync","injectedInflateBuffer","deflateSync","BR","BrotliDecompressSync","getBrotliDecompressSync","BrotliCompressSync","getBrotliCompressSync","decompressBuffer","parseEventHubSpan","api_1","core_1","semantic_conventions_1","Constants_1","AzNamespace","peerAddress","messageBusDestination","MessageBusDestination","CLIENT","PRODUCER","DependencyTypeName","QueueMessage","CONSUMER","TIME_SINCE_ENQUEUED","countEnqueueDiffs","sumEnqueueDiffs","startTimeMs","enqueuedTime","ENQUEUED_TIME","parseFloat","getTimeSinceEnqueued","spanToTelemetryContract","url_1","EventHub_1","httpUrl","httpScheme","httpTarget","httpHost","netPeerPort","netPeerName","netPeerIp","getDependencyTarget","peerService","remoteDependency","InProc","httpMethod","dbSystem","rpcSystem","Http","isSqlDB","dbStatement","dbOperation","dbName","Grpc","grpcStatusCode","createDependencyData","SERVER","requestData","httpRoute","createRequestData","operation_Id","createPropertiesFromSpan","MicrosoftEventHub","diagnostic_channel_1","SpanParser","AsyncHooksScopeManager_1","clients","span_1","telemetry_1","subscribe","trueFilter","AZURE_CORE_TRACING","unsubscribe","Contracts_1","bunyanToAILevelMap","SeverityLevel","Verbose","Information","Warning","subscriber","AIlevel","bunyanError","enableLoggerErrorToTrace","trackTrace","BUNYAN","lastIndexOf","CONSOLE","JsonConfig_1","JsonConfig","noDiagnosticChannel","publishers","unpatchedModules","noPatchModules","modules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","azuresdk","addContextPreservation","commandName","startedData","databaseName","succeeded","queryObj","query","sqlString","sql","connectionConfig","_connection","socketPath","q","preparable","plan","conn","database","POSTGRES","commandObj","command","address","winstonToAILevelMap","syslog","og","emerg","alert","crit","notice","npm","silly","levelKind","WINSTON","StatsbeatNetworkCategory","TelemetryTypeStringToQuickPulseDocumentType","TelemetryTypeStringToQuickPulseType","QuickPulseType","QuickPulseDocumentType","PerformanceToQuickPulseCounter","DEFAULT_LIVEMETRICS_HOST","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_BREEZE_ENDPOINT","APPLICATION_INSIGHTS_SDK_VERSION","Event","Exception","Trace","Request","Dependency","Availability","PageView","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","PageViewData","Sql","domainSupportsProperties","Generated_1","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","internalAgentVersion","internalNodeName","Data","DataPointType","Measurement","sampleRate","hasFullStack","parsedStack","Base","DataPoint","Domain","Envelope","ExceptionDetails","StackFrame","__exportStar","TelemetryTypeString","baseTypeToTelemetryType","telemetryTypeToBaseType","cloudRoleName","operationSynthetic","requestSuccess","requestResultCode","dependencyType","dependencyTarget","dependencySuccess","dependencyResultCode","traceSeverityLevel","azureCore","emptySendRequest","_request","AuthorizationHandler","_azureTokenPolicy","addAuthorizationHeader","authHeaderName","webResource","AIMS_URI","virtualMachineData_1","_requestTimedOut","HTTP_TIMEOUT","Channel","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","resendInterval","maxBytesOnDisk","setDiskRetryMode","triggerSend","_timeoutHandle","isNodeCrashing","bufferIsEmpty","isNodeExit","saveOnCrash","setupString","_endpointBase","_mergeConfig","connectionStringEnv","_connectionString","csCode","csEnv","instrumentationKeyEnv","_instrumentationKey","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","correlationIdRetryIntervalMs","enableWebInstrumentation","enableAutoWebSnippetInjection","correlationHeaderExcludedDomains","profileQueryEndpoint","ENV_profileQueryEndpoint","quickPulseHost","liveendpoint","ENV_quickPulseHost","_webInstrumentationConnectionString","webSnippetConnectionString","_profileQueryEndpoint","_validateInstrumentationKey","jsonConfig","disableStatsbeat","distributedTracingMode","enableAutoCollectConsole","enableAutoCollectDependencies","enableAutoCollectIncomingRequestAzureFunctions","enableAutoCollectExceptions","enableAutoCollectExtendedMetrics","enableAutoCollectExternalLoggers","enableAutoCollectHeartbeat","enableAutoCollectPerformance","enableAutoCollectPreAggregatedMetrics","enableAutoCollectRequests","enableAutoDependencyCorrelation","enableInternalDebugLogging","enableInternalWarningLogging","enableResendInterval","enableMaxBytesOnDisk","enableSendLiveMetrics","enableUseAsyncHooks","enableUseDiskRetryCaching","proxyHttpUrl","proxyHttpsUrl","ENV_azurePrefix","ENV_iKey","legacy_ENV_iKey","_FIELDS_SEPARATOR","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","endpointsuffix","locationPrefix","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","__dirname","appVersion","packageJson","readFileSync","DefaultRoleName","WEBSITE_INSTANCE_ID","queryCorrelationId","cancelCorrelationIdQuery","suffix","currentRootId","appendSuffix","generateRootId","endIndex","startIndex","w3cTraceId","delimiter","requestIdMaxLength","trimPosition","randomu32","telemetryType","createTraceData","createEventData","createExceptionData","createMetricData","createAvailabilityData","createPageViewData","addAzureFunctionsCorrelationProperties","validateStringMap","getTags","truncateProperties","propertiesKeys","propertiesValues","severityLevel","msToTimeSpan","exceptionDetails","typeName","parseStack","responseCode","Aggregation","availabilityData","runLocation","pageViewData","frames","totalSizeInBytes","frame","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","assembly","matches","fileName","line","baseSize","FileAccessControl","child_process","checkFileProtection","OS_PROVIDES_FILE_PROTECTION","OS_FILE_PROTECTION_CHECKED","USE_ICACLS","existsSync","ICACLS_PATH","applyACLRules","directory","identity","ex_1","ACLED_DIRECTORIES","_getACLIdentity","_runICACLS","_getACLArguments","applyACLRulesSync","_runICACLSSync","_getACLIdentitySync","aclProc","spawn","windowsHide","spawnSync","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","systemdrive","getShallowFileSize","getShallowDirectorySizeSync","getShallowDirectorySize","confirmDirExists","unlinkAsync","readdirAsync","readFileAsync","writeFileAsync","appendFileAsync","accessAsync","mkdirAsync","lstatAsync","statAsync","promisify","lstat","mkdir","access","appendFile","writeFile","readFile","readdir","unlink","err_1","mkdirErr_1","isDirectory","files","totalSize","files_1","file","fileStats","isFile","readdirSync","statSync","filePath","FileSystemHelper","InternalAzureLogger","_cleanupTimeOut","_tempDir","_logFileName","_fileFullPath","_backUpNameFormat","_logToFile","logDestination","APPLICATIONINSIGHTS_LOG_DESTINATION","maxSizeBytes","maxHistory","logFilePath","APPLICATIONINSIGHTS_LOGDIR","isAbsolute","cwd","tmpdir","_fileCleanupTimer","_fileCleanupTask","optionalParams","_storeToDisk","appendError_1","err_3","constants","F_OK","_createBackupFile","backupPath","err_4","totalFiles","pathToDelete","err_5","aCreationDate","bCreationDate","ENV_instrumentationKey","noHttpAgentKeepAlive","_loadJsonFile","jsonString","contentJsonConfig","rootPath","tempDir","configFile","disableWarnings","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","isFunctionApp","isWebApp","isLinux","isWindows","StreamId","QuickPulseEnvelopeFactory","createQuickPulseEnvelope","documents","machineName","roleName","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","MachineName","Instance","RoleName","createQuickPulseMetric","Name","Value","Weight","telemetryEnvelopeToQuickPulseDocument","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","createQuickPulseDocument","Message","exceptionMessage","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","OperationName","Target","ResultCode","CommandName","OperationId","documentType","__type","DocumentType","Properties","aggregateProperties","meas","QuickPulseUtil","QuickPulseConfig","QuickPulseSender","getAuthorizationHandler","_consecutiveErrors","_getAuthorizationHandler","ping","redirectedHostEndpoint","pingHeaders","_submitData","post","postOrPing","additionalHeaders","authHandler","authError_1","getTransmissionTime","httpsAgent","tlsRestrictedAgent","shouldPOSTData","redirectHeader","_onError","pollingIntervalHint","statusMessage","MAX_QPS_FAILURES_BEFORE_WARN","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","_redirectedHost","_pollingIntervalHint","addCollector","collector","_addMetric","addDocument","document_1","_goQuickPulse","enableCollectors","_resetQuickPulseBuffer","pingInterval","currentTimeout","_post","_ping","PING_INTERVAL","POST_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","_quickPulseDone","shouldPOST","redirectedHost","FileAccessControl_1","RESPONSE_CODES_INDICATING_REACHED_BREEZE","onSuccess","isStatsbeatSender","shutdownStatsbeat","_onSuccess","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","_numConsecutiveRedirects","_resendTimer","TEMPDIR_PREFIX","_isStatsbeatSender","_failedToIngestCounter","_statsbeatHasReachedIngestionAtLeastOnce","_logWarn","DISK_RETRY","CLEANUP_TIMEOUT","endpointHost","errorMsg","batch_1","payload_1","AAD_HANDLING","gzip","dataToSend","_logInfo","setEncoding","responseString","_statsbeatFailedToIngest","Breeze","_sendFirstFileOnDisk","_isRetriable","breezeResponse","filteredEnvelopes_1","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","_storeToDiskSync","ex_2","ex_3","fileFullPath","ex_4","mode","mkdirSync","dirSize","writeFileSync","firstFile","fileCreationDate","err_2","FILE_RETEMPTION_PERIOD","isSupportedContentEncoding","findBufferEncodingType","getBrotliDecompressAsync","getBrotliCompressAsync","inflateAsync","deflateAsync","gunzipAsync","gzipAsync","isBrotliSupperted","bufferEncodingTypes","majVer","gunzip","deflate","zlibObject","brotliCompress","brotliCompressSync","brotliDecompress","brotliDecompressSync","encodingType","isEncoding","encodingMethod","contentEncodingHeaders","supportedContentEncoding","snippet","isHtml","TelemetryProcessors","_telemetryProcessors","authorizationHandler","trackAvailability","trackPageView","accepted","runTelemetryProcessors","samplingTelemetryProcessor","preAggregatedMetricsTelemetryProcessor","performanceMetricsTelemetryProcessor","quickPulseClient","setAutoPopulateAzureProperties","aadTokenCredential","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","traceparentArr","formattedFlags","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","vendorValid","keydeduper","parts_1","strict","_addCloseHandler","cookieName","cookies","int32ArrayToBase64","array","toChar","fromCharCode","w3cSpanId","isValidW3CId","totalms","sec","hour","extractError","looseError","extractObject","origProperty","stringTarget","MAX_PROPERTY_LENGTH","excludedDomains","contextHeaders","keyValues","keyValue","requestCallback","useProxy","useAgent","requestUrlParsed","proxyUrlParsed","Host","isHttps","httpAgent","_useKeepAlive","keepAliveAgent","addCorrelationIdHeaderFromString","components","_listenerAttached","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","azureRoleEnvironmentTelemetryProcessor","remoteDependencyData","AutoCollecPreAggregatedMetrics","exceptionData","exceptionDimensions","traceData","traceDimensions","requestDimensions","dependencyDimensions","getSamplingHashCode","csharpMax","Configuration","wrapWithCorrelationContext","getCorrelationContext","liveMetricsClient","DistributedTracingModes","QuickPulseClient","NativePerformance_1","AzureFunctionsHook_1","azureFunctionsTypes","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_preAggregatedMetrics","_heartbeat","_webSnippet","_nativePerformance","_serverRequests","_clientRequests","_azureFunctions","_performanceLiveMetrics","defaultConfig","_isConsole","_isConsoleLog","_isLoggerErrorToTrace","_isExceptions","_isPerformance","_isPreAggregatedMetrics","_isHeartBeat","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_isSnippetInjection","_isAzureFunctions","_diskRetryInterval","_diskRetryMaxBytes","_webSnippetConnectionString","_isStarted","extendedMetricsConfig","_initializeConfig","setDistributedTracingMode","AI_AND_W3C","setAutoCollectPreAggregatedMetrics","WebSnippetConnectionString","useAsyncHooks","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","asyncWrap","binding","TIMERWRAP","Providers","patchs","ignoreUIDs","State","Hooks","initFns","preFns","postFns","destroyFns","init","uid","parentUid","parentHandle","hook","pre","didThrow","removeElement","AsyncHook","providers","setupHooks","addHooks","removeHooks","_asyncHook","attach","callSite","getFileName","NextTickWrap","oldNextTick","listenerCount","PromiseWrap","oldThen","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","setImmediate","clearImmediate","ensureAslWrapper","executor","asyncCatcher","wrap","inAsyncTick","listenerStack","union","dest","destLength","addedLength","returned","missing","_fatalException","errorValues","inErrorTick","er","handled","original","before","after","errorThrew","threw","_originalNextTick","AsyncListener","createAsyncListener","addAsyncListener","registered","removeAsyncListener","simpleWrap","shimmer","semver","massWrap","v6plus","gte","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","onread","onconnection","patchOnRead","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Server","Socket","getOwnPropertySymbols","childProcess","wrapChildProcess","activatorFirst","onexit","ChildProcess","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","lchown","lchmod","ftruncate","Deflate","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","overwrite","__asl_wrapper","propagateAslWrapper","nextResult","returnVal","errorVal","wrapThen","last","wrapPromise","serial","serialOrdered","clean","jobs","defer","runJob","sortMethod","isNamedList","initState","keyedList","terminator","ascending","iteratorHandler","descending","assert","asyncHook","ERROR_SYMBOL","invertedProviders","DEBUG_CLS_HOOKED","currentUid","Namespace","_set","_contexts","getNamespace","destroyNamespace","ok","debug2","_rawDebug","getFunctionName","enter","createContext","_ns_name","runAndReturn","runPromise","thisSymbol","CONTEXTS_SYMBOL","unwrapped","wrapped","unwrappedContexts","thunk","fromException","stackChain","modifier","_modifiers","deattach","async_hooks","_indent","createHook","asyncId","triggerId","executionAsyncId","showHidden","colors","triggerAsyncId","triggerIdContext","asyncHooksCurrentId","indentStr","currentId","DelayedStream","dataSize","maxDataSize","pauseStreams","_released","_currentStream","_insideLoop","_pendingNext","combinedStream","isStreamLike","newStream","pauseStream","_checkDataSize","_handleErrors","_getNext","_realGetNext","_pipeNext","_emitError","_reset","_updateDataSize","contexts","storage","formatArgs","useColors","humanize","color","lastC","save","setItem","removeItem","load","getItem","__nwjs","documentElement","WebkitAppearance","firebug","table","$1","localStorage","localstorage","warned","formatters","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","curr","prev","coerce","formatter","selectColor","newDebug","toNamespace","regexp","names","skips","browser","tty","inspectOpts","colorCode","hideDate","isatty","fd","deprecate","supportsColor","O","_maxDataSizeExceeded","_bufferedEvents","delayedStream","realEmit","_handleEmit","_checkIfMaxDataSizeExceeded","azureCoreTracing","AzureMonitorSymbol","publisherName","isPatched","versionSpecifier","patch","coreTracing","tracing","defaultProvider","defaultTracer","setTracer","setTracerOriginal_1","startSpanOriginal","originalEnd","publish","setGlobalTracerProviderOriginal_1","tracerProvider","getTracerOriginal","tracerName","startSpanOriginal_1","openTelemetryInstr","azureSdkInstr","registerInstrumentations","instrumentations","createAzureSdkInstrumentation","registerMonkeyPatch","originalBunyan","originalEmit","_emit","rec","noemit","ret","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","aiLoggingConsole","Console","originalMethod","consoleMethods_1","tedious","consolePub","mongoCore","originalMongoCore","originalConnect","connect","originalWrite","pool","cbidx","bindToContext","originalLogout","logout","mongo330","mongo3","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","contextMap","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","dirname","hrDuration","poolClass","postgresPool1","originalPgPool","postgres","postgres6","originalPg","originalPgPath","originalClientQuery","Client","diagnosticOriginalFunc","queryResult","connectionParameters","patchCallback","trackingCallback","rowCount","callbackProvided","cursor","_Promise","originalRedis","originalSend","RedisClient","internal_send_command","cb_1","pubsubBound","address_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","parametersByName","statement","__rest","winston2","winston3","originalWinston","AppInsightsTransport","splat","levels","mapLevelToKind","Transport","patchedConfigure","lastLevel","origCreate","origConfigure","configure","origRootConfigure","curLevels","originalLog","Logger","loggingFilter","filters","webpackEmptyContext","ContextPreservingEventEmitter","makePatchingRequire","patchRequire_1","patchRequire_2","publishing","subscribers","contextPreservationFunction","knownPatches","modulesPatched","currentlyPublishing","shouldPublish","standardEvent_1","patched","checkIfModuleIsAlreadyPatched","preserver","previousPreservationStack","patcher","getPatchesObject","addPatchedModule","module_2","diagnosticsSource","channel_1","moduleModule","nativeModules","originalRequire","patchedModules","moduleId","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","Comparator","comp","parseOptions","loose","operator","COMPARATORLOOSE","COMPARATOR","SemVer","cmp","intersects","Range","includePrerelease","safeRe","range","raw","parseRange","first","isNullSet","isAny","comps","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","M","pr","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tp","tpr","tb","prerelease","allowed","minor","MAX_LENGTH","MAX_SAFE_INTEGER","compareIdentifiers","LOOSE","FULL","build","compare","compareMain","comparePre","compareBuild","inc","identifierBase","base","eq","neq","gt","lt","lte","rtl","COERCERTL","lastIndex","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","throwErrors","internalRe","identifiers","valid","rcompare","compareLoose","rsort","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","NODE_DEBUG","numeric","anum","bnum","looseOption","freeze","emptyOpts","R","safeRegexReplacements","createToken","isGlobal","safe","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","LONETILDE","LONECARET","r1","r2","maxSV","rangeObj","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","high","low","ranges","simplified","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","unwrap","SYMBOL","_listeners","_events","_wrap","visit","onAddListener","onEmit","adding","existing","unprocessed","_process","_findAndProcess","remover","net_1","tls_1","once_1","agent_base_1","secureProxy","_header","endOfHeaders","_implicitHeader","outputData","agent_1","createHttpProxyAgent","assert_1","parse_proxy_response_1","ALPNProtocols","secure","isDefaultPort","proxyResponsePromise","buffered","servername","omit","fakeSocket","createHttpsProxyAgent","buffersLength","buffers","read","firstLine","ondata","onclose","onend","Yallist","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","UPDATE_AGE_ON_GET","naiveLength","doUse","hit","isStale","unshiftNode","maxAge","walker","tail","removeNode","Entry","forEachStep","thisp","lc","stale","noDisposeOnSet","updateAgeOnGet","mL","allowStale","mA","lC","rforEach","head","toArray","dump","h","dumpLru","peek","expiresAt","prune","types","preference","db","extname","EXTRACT_TYPE_REGEXP","TEXT_TYPE_REGEXP","charset","charsets","extension","exts","plural","msAbs","isPlural","long","fmtShort","makeSafeRe","LETTERDASHNUMBER","defaultResult","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","compRe","funktion","nodule","wrapper","nodules","massUnwrap","lines","ee","FormatErrorString","_stackChain","defaultFormater","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","captureStackTrace","callSites","_modify","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","mutated","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","findStatus","mid","regexAstralSymbols","countSymbols","string","combiningMarksRegex","validateLabel","processing_option","toUnicode","codePointAt","processing","domain_name","useSTD3","hasError","processed","codePoint","fromCodePoint","mapChars","labels","validation","toASCII","verifyDnsLength","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","clamp","evenRound","treatNullAsEmptyString","S","U","usm","implementation","constructorArgs","parsedBase","basicURLParse","parsedURL","baseURL","_url","serializeURL","serializeURLOrigin","scheme","stateOverride","cannotHaveAUsernamePasswordPort","setTheUsername","setThePassword","serializeHost","serializeInteger","cannotBeABaseURL","fragment","href","utils","Impl","impl","implSymbol","is","origin","privateData","wrapperSymbol","interface","expose","Window","Worker","tr46","specialSchemes","ftp","gopher","ws","wss","failure","ucs2","at","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","hex","isC0ControlPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","parseHost","isSpecialArg","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","swaps","temp","parseIPv6","decoded","parseOpaqueHost","utf8PercentDecode","asciiDomain","ipv4Host","numbers","ipv4","parseIPv4","serializeIPv4","maxIdx","maxLen","currStart","currLen","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","isASCIIAlphanumeric","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","excludeFragment","parseURL","tuple","serializeOrigin","integer","mixin","wrapperForImpl","implForWrapper","insert","inserted","Node","pushNode","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArrayReverse","sliceReverse","deleteCount","nodes","flag","argv","position","terminatorPosition","hasFlag","forceColor","translateLevel","hasBasic","has256","has16m","haveStream","streamIsTTY","TERM","osRelease","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","isTTY","redirectUrl","defaultActiveDirectoryEndpointUrl","DEFAULT_CLIENT_ID","REFRESH_NETWORK_FAILURE","AzureActiveDirectoryService","SequencerByKey","subscriptions","onDidChangeInOtherWindow","N","onDidChangeWindowState","focused","IntervalTimer","cancelAndSet","sessions","getAll","refreshes","scope","scopeData","scopeStr","scopesToSend","clientId","E","F","C","refreshToken","account","showErrorMessage","l10n","allSettled","clearSessions","accountType","getSessions","A","modifiedScopes","modifiedScopesStr","originalScopes","matchingTokens","itoken","D","changed","B","createSession","runsRemote","remoteName","runsServerless","uiKind","UIKind","Web","u","codeVerifier","generateCodeVerifier","codeChallenge","generateCodeChallenge","qs","response_type","response_mode","client_id","redirect_uri","prompt","code_challenge_method","code_challenge","loginUrl","LoopbackAuthServer","codeToExchange","openExternal","Uri","nonce","waitForOAuthResponse","stop","I","callbackUri","asExternalUri","uriScheme","callbackQuery","signInUrl","inputBox","wait","existingNonces","existingPromise","isSupportedEnvironment","G","createInputBox","H","finally","writeToDisk","tokenIndex","findIndex","deleteAll","refreshedToken","removeSessionById","existingId","id_token","base64Decode","access_token","tid","oid","altsecid","ipd","randomUUID","expiresIn","expires_in","idToken","refresh_token","email","preferred_username","unique_name","postData","grant_type","J","K","uriEventListener","acceptedStates","verifier","ignoreFocusOut","title","placeholder","show","onDidAccept","onDidHide","code_verifier","commands","executeCommand","microsoft","attempts","errorMessage","fetching","existingTokenIndex","L","store","updated","UriEventHandler","handleUri","secrets","onDidChange","keyListStr","rej","secret","predicate","isAddition","valueStr","keyList","storageSecretStr","storageSecret","cachedSecret","promiseTask","newPromise","Disposable","cancel","runner","LOCALHOST_ADDRESSES","Desktop","authority","isLocalhost","dec2hex","dec","base64Encode","base64urlencode","plain","TextEncoder","encode","subtle","digest","sha256","createOutputChannel","sendFile","writeHead","serveRoot","startingRedirect","deferred","reqUrl","listening","portTimeout","listen","close","nodeCrypto","webcrypto","Readable","BUFFER","TYPE","Blob","blobParts","byteOffset","arrayBuffer","ab","_read","relativeStart","relativeEnd","slicedBuffer","blob","FetchError","systemError","errno","convert","defineProperties","INTERNALS","PassThrough","Body","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","disturbed","consumeBody","_this4","accum","accumBytes","resTimeout","p1","p2","bodyUsed","extractContentType","getTotalBytes","_lengthRetrievers","ct","_this2","textConverted","_this3","convertBody","mixIn","invalidTokenRegex","invalidHeaderCharRegex","validateName","MAP","Headers","headerNames","pairs","_pairs$i","createHeadersIterator","HeadersIteratorPrototype","_INTERNAL","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","statusText","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","inputBody","isAbortSignal","redirect","follow","URL$1","PassThrough$1","contentLengthValue","totalBytes","getNodeRequestOptions","abortAndFinalize","finalize","reqTimeout","createHeadersLenient","isRedirect","locationURL","requestOpts","destination","orig","isDomainOrSubdomain","response_options","codings","zlibOptions","finishFlush","writeToStream","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","definition","initMicrosoftSovereignCloudAuthProvider","telemetryReporter","uriHandler","tokenStorage","authProviderName","customEnv","aadService","disposable","authentication","registerAuthenticationProvider","onDidChangeSessions","removeSession","supportsMultipleAccounts","aiKey","packageJSON","registerUriHandler","betterSecretStorage","BetterTokenStorage","loginService","microsoftSovereignCloudAuthProviderDisposable","onDidChangeConfiguration","affectsConfiguration"],"sourceRoot":""}